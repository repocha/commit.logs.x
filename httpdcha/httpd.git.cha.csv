----------------------------
Merge r1652929, r1652931 from trunk: Fix --enable-v4-mapped configuration on *BSD. PR 53824. Submitted by: olli hauer <ohauer gmx.de> Committed by: ylavic Submitted by: ylavic Reviewed/backported by: jim 	r1653962
----------------------------
sslprotocol fix 	r1653917
----------------------------
too much DirectoryMatch matching and is not critical to have in. Discussion on dev@ on trunk rev commit msg for r1635428 Also, I don't think the addition in the middle of the core_dir_config given that the core_dir_config is exposed to modules as kind of a special case. 	revert
----------------------------
Merge r1648394 from trunk: Configuration files with long lines and continuation characters are not read properly. PR 55910. Submitted By: Manuel Mausz <manuel-as mausz.at> Committed By: covener 	r1651653
----------------------------
Insert htaccess/RewriteRule examples, illustrating how RewriteRule syntax is weird in .htaccess files. 	r1651482
----------------------------
Merge r1648433 from trunk: PR 56603:  Inappropiate ProxyPassReverse match when interpolated URL is empty string Submitted By: <ajprout hotmail.com> Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1651094
----------------------------
Merge r1626978 from trunk: mod_cgi: log cgi script stderr to ScriptLog, use APLOGNO for log_scripterror errors. Submitted by: jkaluza Reviewed/backported by: jim 	r1651086
----------------------------
Merge r1626978 from trunk: mod_cgi: log cgi script stderr to ScriptLog, use APLOGNO for log_scripterror errors. Submitted by: jkaluza Reviewed/backported by: jim 	r1651085
----------------------------
Merge r1601184, r1601274, r1601185 from trunk: mod_ssl: Ensure that the SSL close notify alert is flushed to the client. Submitted By: Tim Kosse <tim.kosse filezilla-project.org>, ylavic Committed By: ylavic mod_ssl: SSL_smart_shutdown(): follow up to r1601184. Use SSL_get_wbio() to comply with OPENSSL_NO_SSL_INTERN. Stop SSL shutdown loop when flush fails. mpm_event[opt]: Send the SSL close notify alert when the KeepAliveTimeout Submitted by: ylavic Reviewed/backported by: jim 	r1651077
----------------------------
propose proxypassreverse fix 	r1648434
----------------------------
Merge r1647229 from trunk: some tweaks for no ServerName from PR57384 	r1647230
----------------------------
Propose ap_errorlog_provider and mod_journald. 	r1646425
----------------------------
Propose r1644031, comment on ScriptLog patch (r1626978). 	r1645877
----------------------------
Merge r1641414 from trunk: steal the sethandler example from mod_proxy.html and mention worker issue 	r1641416
----------------------------
Merge r1635762 from trunk: Support custom ErrorDocuments for HTTP 501 and 414 status codes. PR 57167 [Edward Lu <Chaosed0 gmail.com>] Submitted By: Edward Lu <Chaosed0 gmail.com> Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1638071
----------------------------
Merge r1637768 from trunk: fix copy/paste error for CacheSocacheMinTime, rest of content is correct. http://httpd.apache.org/docs/trunk/mod/mod_cache_socache.html#comment_3247 	r1637769
----------------------------
Merge r1634425 from trunk: When using EBCDIC encoding, HTTPS through ProxyPass and ProxyRemote doesn't work correctly. PR 57092 Submitted By: Edward Lu Reviewed By: covener, jim, ylavic 	r1636002
----------------------------
Merge r1631983 from trunk: mod_substitute: no real functional change, but: - define default for maximum line length - Clarify line length check with a comment - add supported 'b' suffix to directive Submitted by: rjung Reviewed by: jim, ylavic 	r1634948
----------------------------
Merge r1634736 from trunk: Remove commented-out SSLStaplingForceURL at global scope. Global or not, its use is specialized and those that need it won't need a sample, and others may be confused. 	r1634737
----------------------------
Merge r1628924 from trunk: mod_substitute: Restrict configuration in .htaccess to FileInfo as documented. Submitted by: rjung Reviewed/backported by: jim 	r1634524
----------------------------
Merge r1628919, r1628950 from trunk: mod_substitute: Make maximum line length configurable. Add docs for new directive SubstituteMaxLineLength in mod_substitute. Submitted by: rjung Reviewed/backported by: jim 	r1634523
----------------------------
"Merge r1628104, r1628918 from trunk: mod_substitute: Fix memory limitation in case of The maxlen argument of ap_varbuf_regsub() is unsigned. Passing in ""AP_SUBST_MAX_LINE_LENGTH - vb.strlen"" in case vb.strlen got to big didn't result in the expected error but instead was handled as a very big maxlen. Add CHANGES for r1628104. (mod_substitue: Fix memory limitation in case of Submitted by: rjung Reviewed/backported by: jim "	regexp
----------------------------
Merge r1633730 from trunk: add OCSP Stapling configuration, disabled by default Submitted by: trawick Reviewed/backported by: jim 	r1634521
----------------------------
Merge r1621367, r1621372, r1625952 from trunk: PR53218 Allow for longer worker names and make truncation a non-fatal error... Correct loglevel. oops... prepend 0 Reviewed/backported by: jim 	r1634520
----------------------------
Propose trivial mod_substitute changes due to review of backport proposal by Christophe. 	r1631985
----------------------------
Merge r1631516 from trunk: the hard-coded limit on LimitRequestLine has been gone since 2.1.x, see r819480 and r102840. PR57009 Submitted By: Ed Lu 	r1631517
----------------------------
Merge r1613682 from trunk: In 2.4.10, AuthLDAPBindDN might not be used for some LDAP searches, causing LDAP authz failures if AuthLDAPBindDN was able to search through more of LDAP than web users. 	r1631119
----------------------------
mod_substitute proposals. 	r1628951
----------------------------
Merge r1618851 from trunk: mod_authz_core: Allow <AuthzProviderAlias>'es to be seen from auth stanzas under virtual hosts. PR 56870. Submitted by: covener Reviewed/backported by: jkaluza 	r1626207
----------------------------
Merge r1618851 from trunk: mod_authz_core: Allow <AuthzProviderAlias>'es to be seen from auth stanzas under virtual hosts. PR 56870. [Eric Covener] 	r1626203
----------------------------
Merge r1618541 from trunk: Avoid useless warning message when parsing a section guarded by <IfDefine foo> if $(foo) is used within the section. PR 56503 Submitted by: jailletc36 Reviewed/backported by: jim 	r1621603
----------------------------
"Merge r1615289, r1620324 from trunk: PR53420: Proxy responses with error status and ""ProxyErrorOverride On"" hang until proxy timeout. Regression from 2.2. It was introduced by r912063 in order to fix PR41646. Switch preference for headers, Transfer-Encoding first, Content-Length second. Addition to r1615289. Submitted by: rjung Reviewed/backported by: jim "	r1621601
----------------------------
mention weird looking ^xx formats in mod_log_config backported as part of the trailers fix 	r1621552
----------------------------
Merge r1613318 from trunk: two commenters were confused authnprovideralias providing special config to authz providers 	r1613319
----------------------------
Merge r1610652 from trunk: SECURITY (CVE-2014-3523): Fix a memory consumption denial of service in the WinNT MPM used in all Windows installations. Workaround: AcceptFilter <protocol> {none|connect} Submitted by: trawick Reviewed by: jorton, covener, jim 	r1610653
----------------------------
clarify new use of Timeout for scripts 	r1610641
----------------------------
"""CGIDScriptTimeout"", not ""CGIDRequestTimeout"" "	r1610517
----------------------------
add CGIDRequestTimeout to CHANGES 	r1610514
----------------------------
Merge 1610311 from trunk: Extend the scope of SSLSessionCacheTimeout to sessions Submitted by: rjung Reviewed by: rjung, ylavic, jorton 	resumed
----------------------------
"Merge r1452551, r1607960 from trunk: PR54587: LDAP connections used for authn were not respecting LDAPConnectionPoolTimeout due to confusion over what ""bound"" means. Added some LDAP trace at TRACE5 to track how LDAP connections are make LDAPConnectionPoolTTL more conservative, use r->request_time rather than end-of-request time, and only update it after a round-trip with the LDAP server rather than every time we check back into the pool. Submitted by: covener Reviewed/backported by: jim "	reused
----------------------------
Merge r1609936 from trunk: mod_ssl: Set an error note for requests rejected due to SSLStrictSNIVHostCheck Submitted by: trawick Reviewed by: minfrin, rjung 	r1610327
----------------------------
Merge r1588519 from trunk: mod_proxy: When ping/pong is configured for a worker, don't send or forward Submitted by: ylavic Reviewed/backported by: jim 	r1608762
----------------------------
"Merge r1537535 from trunk: For better compatibility with mod_nss: * modules/ssl/ssl_engine_config.c (ssl_config_server_new): Default sc->enabled to UNSET. * modules/ssl/ssl_engine_init.c (ssl_init_Module): Only override sc->enabled based on the protocol iff sc->enabled is UNSET; allows ""SSLEngine off"" to override the Listen-based default. Submitted by: jorton Reviewed/backported by: jim "	r1608759
----------------------------
propose a pair of fixes to make LDAPConnectionPoolTTL more conservative. 	r1607962
----------------------------
mod_lua backport: Make httpd find lua 5.2 headers/lib during configure if present on the system (mod_lua is fully compatible with 5.2). 	r1605276
----------------------------
mod_lua: Backport disabling of early/late in LuaHookCheckUserID 	r1604340
----------------------------
Example of loading an MPM with LoadModule, and what error you get when you do it wrong. 	r1602766
----------------------------
merge r1591508 from trunk: mod_proxy_fcgi: Support iobuffersize parameter. Submitted by: trawick Reviewed by: jim, ylavic 	r1601749
----------------------------
"Merge r1546730, r1583008, r1571369, r1552130, r1578760, r1592615, r1592632, r1595321, r1550302, r1550307, r1585435 from trunk: fix whitespace in a debug message s/comment/self-documenting/ normalize an ugly construct which somehow manages to return the correct value This is annoying to see in a casual ""LogLevel debug foo:traceX ..."" Use 'apr_table_setn' instead of 'apr_table_set' when possible in order to save memory. Follow-up to r1592529: Define default port for ""scgi"" schemes (as chosen by mod_proxy_scgi) in a common location. Suggested by: jailletc36 fix Doxygen markup error Submitted by: jailletc36 Tweak a AP_DEBUG_ASSERT condition. Valid index to use 'req_header_var_names' are 0...6 mod_auth_form: Add a debug message when the fields on a form are not mod_auth_form: Make the trace logging consistent through the notes, session and form authentication steps. mod_auth_form: update empty log tags. Submitted by: trawick, covener, jailletc36, trawick, trawick, jailletc36, minfrin, minfrin, ylavic Reviewed/backported by: jim "	recognised.
----------------------------
AcceptFilter has two parameters + syntax highlight See r1397602 on trunk 	r1599011
----------------------------
"Merge r1591328, r1594643, r1594648 from trunk: mod_cache: Preserve non-cacheable headers forwarded from an origin 304 When mod_cache asks for a revalidation of a stale entry and the origin responds with a 304 (not that stale), the module strips the non-cacheable headers from the origin response and merges the stale headers to update the cache. The problem is that mod_cache won't forward the non-cacheable headers to the client, for example if the 304 response contains both Set-Cookie and 'Cache-Control: no-cache=""Set-Cookie""' headers, or CacheIgnoreHeaders is used. mod_cache: follow up to r1591328. Define the cache_merge_headers_out() function to merge r->err_headers_out into Use it in ap_cache_cacheable_headers_out() where the same is done and in cache_save_filter() where this has to be done before updating the entry. mod_cache: follow up to r1594643. Avoid table lookup if not necessary (fast path first). Submitted by: ylavic Reviewed/backported by: jim "	r->headers_out
----------------------------
Merge r1560683 and r1581011 from trunk: (mod/mod_proxy_express.xml) It does more than just a ProxyPass, but also looks at the HOST header, so this gives somewhat deeper insight into what the end result looks like. (mod/mod_proxy_connect.xml) a comma leaked onto the page 	r1598284
----------------------------
comment #2562 -- copy/paste error in CacheSocache.  Already correct on trunk. 	r1598123
----------------------------
iobuffersize for mod_proxy_fcgi? 	r1595471
----------------------------
Merge r1583175 and r1593745 from trunk: mod_alias: Stop setting CONTEXT_PREFIX and CONTEXT_DOCUMENT environment variables as a result of AliasMatch. Submitted by: covener Reviewed by: jim, ylavic 	r1594539
----------------------------
Based on report from Ken Zalewski, on online doc. Add missing Server-Variables useable in RewriteCond directive. Introduced in r1132494 Introduced in r737973 Missing for ages! I have added where I found it logical, feel free to adjust. I have also reordered this table to ease reading. Finally, I have beautified some tables at the end. 	r1594088
----------------------------
propose aliasmatch removal 	r1593746
----------------------------
- Add missing links - Fix extra ] spotted in online doc by emigas. - Remove another ] introduced in Hearder syntax in r1588244 - s/variable/varname/ to match the text below it. - Turn the syntax of both Header and RequestHeader to be: in order to match the code. This removes the ambiguity of expr=<something> which can now be used in 2 different places in the syntax. - Also remove the space in 'expr= value' in compatibility note, to help distinguish between the two 	r1593664
----------------------------
Merge r1588704 from trunk: Fix errors with CacheLock on Windows: cache_util.c(757): (OS 80)The file exists.  : [client 127.0.0.1:63889] AH00784: Attempt to obtain a cache lock for stale cached URL failed, Submitted by: covener Reviewed/backported by: jim 	revalidating
----------------------------
Vote for SSLPassPhraseDialog proposal 	r1592680
----------------------------
2.4-only: remove 2.3.9/2.3.10 trivia Merge r1588747 from trunk: expr=value updates: update RequestHeader syntax, add compat to Header and RequestHeader 	r1588748
----------------------------
propose CacheLock APR_EEXIST/APR_STATUS_IS_EEXIST() bug 	r1588705
----------------------------
Merge r1587036, r1587040, r1587053, r1587654 from trunk: *) mod_proxy_wstunnel: Don't pool backend websockets connections, actually remove mod_reqtimeout, since the util_filter functions involved only manipulate c->input_filters no matter what we pass. We need to make copies of c->input_filters after, not before, it skips over reqtimeout. Note: reqtimeout doesn't really interfere today with normal operation, but this is misleading/confusing when dealing with other wstunnel issues. cleanup wstunnel error handling Submitted By: covener, ylavic, Edward Lu Commited By: covener followup to r1587036. if backend->close is set too early, proxy_util.c will close it right away and then blow away the field. Submitted by: covener Reviewed/backported by: jim 	r1588495
----------------------------
Merge r1514255, r1514267 from trunk: follow-up to r813376: finish reverting r808965 (ServerTokens set foo) tweak syntax strings for ServerTokens Submitted by: trawick Reviewed/backported by: jim 	r1588492
----------------------------
propose mod_ssl SSLCertificateFile workaround for OpenSSL < 0.9.8h 	r1588430
----------------------------
Merge r1531672 from trunk: mod_auth_form: Make sure the optional functions are loaded even when the AuthFormProvider isn't specified. Submitted by: minfrin Reviewed/backported by: jim 	r1588247
----------------------------
Merge r1585919 from trunk: Reverse the order when merging global and vhost-level config arrays. Putting the vhost-level elements last allows overriding global settings (for the deprecated SSLRequire directive, the order is irrelevant, all of them must be met, cf. ssl_engine_kernel.c:ssl_hook_Access). Submitted by: kbrand Reviewed/backported by: jim 	r1588245
----------------------------
merge r1588213 from trunk: Add hint about RequestHeader 	r1588220
----------------------------
Merge r1580568 from trunk: mod_reqtimeout: Resolve unexpected timeouts on keepalive requests under the Event MPM. PR56216. Submitted By: Frank Meier <frank meier ergon ch> Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1587697
----------------------------
Merge r1572630, r1572611, r1572967, r1573229 from trunk: Redo what was reverted in r1572627. Don't reuse a SSL backend connection whose SNI differs. PR 55782. This may happen when ProxyPreserveHost is on and the proxy-worker handles connections to different Hosts. Follows up r1572606. MMN minor bump required by proxy_conn_rec change. mod_proxy: follows up r1572630. Don't reuse a SSL backend connection with no SNI for a request requiring SNI. mod_proxy: Add comment and avoid ternary operator as condition (no functional change). Submitted by: ylavic Reviewed/backported by: jim 	r1587201
----------------------------
Add <compatibility> notes for changes made in version 2.4.4 + fix default value for FallbackResource 	r1586470
----------------------------
"Update SSLPassPhraseDialog directive docs to correctly describe the current behavior for ""exec""-type programs in 2.4.x, at least. The new argument structure is a consequence of r1573360 (backport to 2.4.8 [unreleased]). "	r1585902
----------------------------
Follup to r1584684: AcceptFilter was wrongly turned into a Windows specific feature. 	r1584704
----------------------------
vote for reqtimeout i proposed add a -1 for aliasmatch thing 	r1584415
----------------------------
Merge r1583005 and 1583027 from trunk: Report OpenSSL directories in configuration summary Describe issue with multiple OpenSSL installs 	r1583028
----------------------------
propose reqtimeout patch from PR56216 	r1580571
----------------------------
mod_lua: Add a fixups hook that checks if the original request is intended for LuaMapHandler. This fixes a bug where FallbackResource invalidates the LuaMapHandler directive in certain cases by changing the URI before the map handler code executes [Daniel Gruno]. 	r1577145
----------------------------
copy/paste errors in new directive DirectoryCheckHandler 	r1575774
----------------------------
Promote DirectoryCheckHandler. 	r1573575
----------------------------
Vote for DirectoryCheckHandler. 	r1573574
----------------------------
"Merge r1546804, r1553824, r1554192, r1555463, r1555467, r1563417, r1564760, r1565081 from trunk: Throw away the myCtxVar{Set,Get} abomination and introduce a pphrase_cb_arg_t struct instead, for passing stuff between ssl_pphrase_Handle and ssl_pphrase_Handle_CB. Prefer struct members instead of using additional local variables, to make the data flow more transparent. (Doesn't ""vastly simplify"" the code yet, but hopefully we'll get there when further stripping down ssl_pphrase_Handle.) Remove the hardcoded algorithm-type dependency for the SSLCertificateFile and SSLCertificateKeyFile directives, and deprecate SSLCertificateChainFile Splitting the patch into smaller pieces turned out to be infeasible, unfortunately, due to the heavily intertwined code in ssl_engine_config.c, ssl_engine_init.c and ssl_engine_pphrase.c, which all depends on the modssl_pk_server_t data structure. For better comprehensibility, a detailed listing of the changes follows: ssl_private.h - drop the X509 certs and EVP_PKEY keys arrays from modssl_pk_server_t - use apr_array_header_t for cert_files and key_files - drop tPublicCert from SSLModConfigRec - drop the ssl_algo_t struct and the SSL_ALGO_* and SSL_AIDX_* constants ssl_engine_config.c - change to apr_array_header_t for SSLCertificate[Key]File - drop ssl_cmd_check_aidx_max, i.e. allow an arbitrary number of certs and keys (in theory; currently OpenSSL does not support more than one cert/key per algorithm type) - add deprecation warning for SSLCertificateChainFile ssl_engine_init.c - configure server certs/keys in ssl_init_server_certs (no longer via ssl_pphrase_Handle in ssl_init_Module) - in ssl_init_server_certs, read in certificates and keys with standard OpenSSL API functions (SSL_CTX_use_*_file), and only fall back to ssl_load_encrypted_pkey when encountering an encrypted private key - drop ssl_server_import_cert, ssl_server_import_key, ssl_init_server_check, and ssl_init_ctx_cleanup_server - move the ""problematic re-initialization"" check to ssl_init_server_ctx ssl_engine_pphrase.c - use servername:port:index as the key identifier, instead of the previously used servername:port:algorithm - ssl_pphrase_Handle overhaul: remove all cert/public-key handling, make it only load a single (encrypted) private key, and rename to ssl_load_encrypted_pkey - in the passphrase prompt message, show the private key file name instead of the vhost id and the algorithm name - do no longer supply the algorithm name as an argument to ""exec""-type passphrase prompting programs ssl_util.c - drop ssl_util_algotypeof, ssl_util_algotypestr, ssl_asn1_keystr, and ssl_asn1_table_keyfmt ssl_util_ssl.{c,h} - drop SSL_read_X509 - constify the filename arg for SSL_read_PrivateKey CodeWarrior compiler doesnt allow vars as struct inits. Remove per-certificate chain handling code (obsoleted by https://git.openssl.org/gitweb/?p=openssl.git;a=commitdiff;h=b9fa413a08d436d6b522749b5e808fcd931fd943) make the ppcb_arg initialization a bit more uniform and easier to read Followup fix for r1553824: also pass the file name to ssl_load_encrypted_pkey, to make sure that we With OpenSSL 1.0.2 or later, enable OCSP stapling in a loop based on SSL_CTX_set_current_cert(), near the end of ssl_init_server_ctx. update APLOGNO for r1564760 Submitted by: kbrand, fuankg, kbrand, kbrand, kbrand, kbrand, kbrand Reviewed/backported by: jim "	retry
----------------------------
Merge r1570288 from trunk: *) mod_rewrite: Add RewriteOptions InheritDown, InheritDownBefore, Submitted By: Edward Lu Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1570684
----------------------------
Remove configurations referring to browsers from the dim and distant past. 	r1567955
----------------------------
"Drop stalled RFC 5878 backport proposals (reverted in trunk with r1468131), as they have been obsoleted through ""SSLOpenSSLConfCmd ServerInfoFile"" meanwhile (r1555683, and CT is no longer using SSL_CTX_use_authz_file either). "	r1563425
----------------------------
propose SSLCertificate[Key]File/SSLCertificateChainFile overhaul for mod_ssl 	r1562500
----------------------------
propose mod_dir option to step out of the way with another handler is configured 	r1561354
----------------------------
Merge r1559828 from trunk: mod_session: Fix problems interpreting the SessionInclude and SessionExclude configuration. PR: 56038 Submitted by: Erik Pearson <erik adaptations.com> Reviewed by: trawick Submitted by: trawick Reviewed/backported by: jim 	r1560698
----------------------------
Merge r1557641, r1559394, r1559398 from trunk: don't search for directory indexes/directoryslashes if a URL is in the middle of being rewritten [in per-dir context]. PR53929 followups to r1557641 suggested by nd -- add prefix to both the macro and the handler name itself. no make depend in sandbox, fix bld break from r1559394 Submitted by: covener Reviewed/backported by: jim 	r1560697
----------------------------
Merge r1451633, r1451905, r1451921, r1452259, r1453981, r1501913, r1513508, r1531340, r1531370, r1531962, r1533065, r1540052 from trunk: Add in rough uds support (Bugx 54101) from Blaise Tarr <blaise.tarr@gmail.com> Make AF_UNIX aware... fix Windows/Netware?? Follow-up to r1451905 to fix NetWare/Windows compilation. apr trunk-able message tag for dom sock Note about new UDS support UDS subsequent request on a connection fix Reformat the UDS support inline with a new naming structure. Use a flag for speed for testing. syntax sugar... if the worker is associated w/ a UDS, then make sure the log reporting has a visual clue. Ensure that userland format of UDS is the same as how it is configured, no matter how we store and use it internally. Eclipse code analysis warning UDS urls need to be desockified when configuring... Submitted by: jim, fuankg, jim, jim, druggeri, druggeri, jim, jim, jim, jim, jim Reviewed/backported by: jim 	r1560081
----------------------------
Merge r1517406 from trunk: PR55352: mention in the <Proxy> manual that the matching is a prefix only, not the same context-root / segment-aware matching done by <Location>. 	r1559612
----------------------------
propose ssl_die improvement for config (re)init 	r1558461
----------------------------
Merge r1554995 from trunk: Providers defined in <AuthnProviderAlias have not been usable under in virtual hosts since migrating from mod_authn_alias to mod_authn_core. PR 55622. Submitted by: covener Reviewed/backported by: jim 	r1556818
----------------------------
Merge r1524368, r1524388 from trunk: Use apr_socket_timeout_get instead of hard-coded 30 seconds timeout. Use apr_socket_timeout_get instead of hard-coded 30 seconds timeout. Document r1524368 in CHANGES. Submitted by: jkaluza Reviewed/backported by: jim 	r1556815
----------------------------
Backport r1544784 from trunk: Remove SSLPKCS7CertificateFile support: - was never documented, so very unlikely that it was ever used - adds complexity without apparent benefit; PKCS#7 files can be trivially converted to a file for use with SSLCertificateChainFile (concatenated X509 CERTIFICATE chunks, openssl pkcs7 -print_certs...) - only supports PKCS7 files with PEM encoding, i.e. relies on a non-standardized PEM header (cf. RFC 2315 and draft-josefsson-pkix-textual) - issues pointed out in http://mail-archives.apache.org/mod_mbox/httpd-dev/200607.mbox/%3C20060723093125.GA19423@redhat.com%3E were never fully addressed (cf. r424707 and r424735) - has never worked in vhost context due to a cfgMergeString call missing from modssl_ctx_cfg_merge Proposed by: kbrand Reviewed by: covener, druggeri 	r1556290
----------------------------
Merge r1556102 from trunk: add some information about setenvif vs. subrequests for PR55957 	r1556104
----------------------------
merge r1555424 from trunk: document on/off parameter in the usual manner and show defaults for SSLHonorCipherOrder, SSLOCSPEnable, SSLOCSPOverrideResponder, and SSLInsecureRenegotiation 	r1555876
----------------------------
"Merge r1542615 from trunk: Explicitly list in which directories to look for config*.m4 files. If some distributor patches a config*.m4 file with quilt, that will place a copy of the original file in .pc/ . Doing a naive ""find ."" will then cause both the original and the patched m4 file to be included, causing havoc later on. PR: 55787 Submitted by: sf Reviewed by: trawick, covener "	r1555792
----------------------------
update transformations for SSLOpenSSLConfCmd 	r1555688
----------------------------
Backport r1421323, r1534754, r1546693, r1555464 from trunk: Add support for OpenSSL configuration commands by introducing the SSLOpenSSLConfCmd directive. Proposed by: kbrand Reviewed by: drh, trawick 	r1555683
----------------------------
Merge r1552227 from trunk: Remove <Proxy ~ wildcard-url> syntax which: Submitted by: jailletc36 Reviewed/backported by: jim 	r1555552
----------------------------
[2.4][doc] mod_dir.xml r1553503 backport - Document 3xx DirectoryIndexRedirect codes 	r1553505
----------------------------
[2.4][doc] mod_dir.xml r1553502 backport - Document 3xx DirectoryIndexRedirect codes 	r1553503
----------------------------
Merge r1546534 from trunk: compat note for AuthLDAPBindPassword exec: 	r1546535
----------------------------
Merge r1543907 from trunk: doc behavior change in r821333, CacheEnable foo / does not apply to forward proxy. 	r1543909
----------------------------
Potential rejection of valid MaxMemFree and ThreadStackSize directives trunk patch: https://svn.apache.org/r1542338 Submitted by: Mike Rumph <mike.rumph oracle.com> Reviewed by: trawick, covener, sf 	r1542549
----------------------------
Merge r1523281, r1524368, r1525276, r1525280, r1525281 from trunk: Switch from private FastCGI protocol handling to util_fcgi API. Use apr_socket_timeout_get instead of hard-coded 30 seconds timeout. Bring some envvar flexibility from mod_authnz_fcgi to mod_proxy_fcgi: mod_proxy_fcgi: Remove 64K limit on encoded length of all envvars. An individual envvar with an encoded length of more than 16K will be omitted. Borrow a fix from mod_authnz_fcgi: mod_proxy_fcgi: Handle reading protocol data that is split between packets. Use ap_log_rdata() to dump the FastCGI header, axing a bunch of custom data dumping code. Submitted by: trawick, jkaluza, trawick, trawick, trawick Reviewed/backported by: jim 	r1542330
----------------------------
"Merge r1526168, r1527291, r1527294, r1527295, r1527926 from trunk: Streamline ephemeral key handling: - drop support for ephemeral RSA keys (only allowed/needed for export ciphers) - drop pTmpKeys from the per-process SSLModConfigRec, and remove the temp key generation at startup (unnecessary for DHE/ECDHE) - unconditionally disable null and export-grade ciphers by always prepending ""!aNULL:!eNULL:!EXP:"" to any cipher suite string - do not configure per-connection SSL_tmp_*_callbacks, as it is sufficient to set them for the SSL_CTX - set default curve for ECDHE at startup, obviating the need for a per-handshake callback, for the time being (and also configure SSL_OP_SINGLE_ECDH_USE, previously left out) For additional background, see https://mail-archives.apache.org/mod_mbox/httpd-dev/201309.mbox/%3C52358ED1.2070704@velox.ch%3E Follow-up fixes for r1526168: - drop SSL_TMP_KEY_* constants from ssl_private.h, too - make sure we also disable aNULL, eNULL and EXP ciphers for per-directory SSLCipherSuite directives - apply the same treatment to SSLProxyCipherSuite Increase minimum required OpenSSL version to 0.9.8a (in preparation for the next mod_ssl commit, which will rely on the get_rfcX_prime_Y functions added in that release): - remove obsolete #defines / macros - in ssl_private.h, regroup definitions based on whether they depend on TLS extension support or not - for ECC and SRP support, set HAVE_X and change the rather awkward #ifndef OPENSSL_NO_X lines accordingly For the discussion prior to taking this step, see https://mail-archives.apache.org/mod_mbox/httpd-dev/201309.mbox/%3C524275C7.9060408%40velox.ch%3E Improve ephemeral key handling (companion to r1526168): - allow to configure custom DHE or ECDHE parameters via the SSLCertificateFile directive, and adapt its documentation accordingly (addresses PR 49559) - add standardized DH parameters from RFCs 2409 and 3526, use them based on the length of the certificate's RSA/DSA key, and add a FAQ entry for clients which limit DH support to 1024 bits (such as Java 7 and earlier) - move ssl_dh_GetParamFromFile() from ssl_engine_dh.c to ssl_util_ssl.c, and add ssl_ec_GetParamFromFile() - drop ssl_engine_dh.c from mod_ssl For the standardized DH parameters, OpenSSL version 0.9.8a or later is required, which was therefore made a new minimum PR 55616 (add missing APLOGNO), part 2 Submitted by: kbrand Reviewed/backported by: jim "	requirement
----------------------------
Merge r1538490 from trunk: c->sbh can be unexpectedly NULL when the thread that pulls the ready keepalive connection out of the queue laps the thread that put it on the queue. Submitted by: covener Reviewed/backported by: jim 	r1541207
----------------------------
axe the discussion on the possibility of backporting the remaining DefaultRuntimeDir functionality to the 2.4.x branch in a way that doesn't break existing configs; the most recent info is on the dev list anyway 	r1541195
----------------------------
Merge 1536310 from trunk: * docs/manual/upgrading.xml: Note 2.4 backwards-compat break for some piped logging configurations. 	r1536367
----------------------------
Merge r1531679 from trunk: mod_session: After parsing the value of the header specified by the SessionHeader directive, remove the value from the response. PR 55279. Submitted by: minfrin Reviewed/backported by: jim 	r1536320
----------------------------
Merge r1532816 from trunk: Interpolation worked within the scheme portion of URLs for ProxyPass and ProxyPassReverse until a fix to apr_uri_parse() in APR-Util 1.5.2 closed the hole that had previously allowed the necessary {} characters within the scheme. Lack of support for interpolation within the scheme will be a permanent limitation. The mod_proxy documentation is updated to provide an alternate configuration solution. PR: 55315 Submitted by: Mike Rumph <mike.rumph oracle.com> Tweaked by: trawick 	r1532824
----------------------------
Add AuthBasicUseDigestAlgorithm directive to allow migration of passwords from digest to basic authentication. Proposed by: chrisd Reviewed by: jim, rjung Backport of r1514064 from trunk. 	r1528957
----------------------------
Merge r1525931 from trunk: APLOG_STARTUP messages shouldn't have custom ErrorLogFormat applied. Reviewed by: jim, covener 	r1526442
----------------------------
Propose AuthBasicUseDigestAlgorithm directive. 	r1524159
----------------------------
Propose note about BalancerPersist in balancer manager 	r1524104
----------------------------
mod_ldap: retry on an LDAP timeout during authn. trunk patch: http://svn.apache.org/r1510084 Submitted by: covener Reviewed by: jim, humbedooh 	r1523264
----------------------------
"mod_ldap:  ""LDAPReferrals off"" does not disable LDAPReferrals feature. Make ""off"" really ""off"" and add ""unset"" to take SDK defaults trunk patch: http://svn.apache.org/r1517388 Submitted by: covener Reviewed by: jim, humbedooh "	r1523263
----------------------------
Add ProxyExpressEnable directive to example 	r1521336
----------------------------
merge r1514039 from trunk: Mention the DumpIOLogLevel change 	r1514044
----------------------------
Merge r1511093 from trunk: mention the change of default value for AllowOverride 	r1511095
----------------------------
Merge r1510098 from trunk: Fix logging of SSL session cache timeout value (at TRACE2 level). Inadvertent side effect of r907918, where the timeout calculation in ssl_callback_NewSessionCacheEntry was slightly modified. Submitted by: kbrand Reviewed/backported by: jim 	r1510527
----------------------------
vote for timeout logging fix 	r1510465
----------------------------
Merge r1389339, r1498880 from trunk: add pre_htaccess hook; in conjunction with earlier dirwalk_stat and post_perdir_config hooks, this should allow mpm-itk to be used without patches to httpd core Replace pre_htaccess hook with more flexible open_htaccess hook Submitted by: trawick, sf Reviewed/backported by: jim 	r1507680
----------------------------
Merge r1507320 from trunk: 1-arg SetEnv is valid http://httpd.apache.org/docs/2.2/mod/mod_proxy_http.html#comment_1528 	r1507321
----------------------------
compat note for AuthBasicFake 	r1504152
----------------------------
Merge r1406068, r1425777, r1427546, r1462643, r1487530, r1493330 from trunk: Replace duplicate log tags Check that AsyncRequestWorkerFactor is not negative PR :54254 Submitted by: Jackie Zhang <jackie qq zhang gmail com> Name pool + concat string at compile time when possible * modules/filters/mod_ratelimit.c (rate_limit_filter): Log the error code. Correct typo in error message Submitted by: sf, jailletc36, jorton, jailletc36 Reviewed/backported by: jim 	remove
----------------------------
Merge r1457471, r1457504, r1462266, r1468581 from trunk: mod_auth_basic: Add a generic mechanism to fake basic authentication using the ap_expr parser. This allows the administrator to construct their own username and password for basic authentication based on their needs. Alternative fix for PR52616. Remove the Authorization header should either the username or the password * Inherit providers during merging mod_auth_basic: Allow AuthBasicFake to be switched off for an URL space. Submitted by: minfrin, rpluem, minfrin Reviewed/backported by: jim 	resolve
----------------------------
Merge r1500042 from trunk: address comment http://httpd.apache.org/docs/2.4/vhosts/examples.html#comment_1441 by explicitly mentioning that ServerName may be calculated and inherited. 	r1500043
----------------------------
add compatibility info for SSLProxyCheckPeerName 	r1499880
----------------------------
add the directive name to the changes entry for SSLProxyCheckPeerName 	r1499879
----------------------------
Merge r1492663 from trunk: mod_cache_socache: Make sure the CacheSocacheMaxSize directive is merged correctly. Submitted by: minfrin Reviewed/backported by: jim 	r1496144
----------------------------
mention addoutputfilterbytype moving to mod_filter 	r1495845
----------------------------
"Merge r1452911, r1452949, r1452954, r1453022, r1453574, r1453875, r1453876, r1453963, r1454386, r1454414, r1454415, r1458285, r1458447 from trunk: Rough start for simple, tunneling websocket proxy support. Compiles at this stage and that's all I know :) force correct scheme info We need to ensure a conn_rec Work around blocking issues... And now pass the initial request to the backend... I dislike this duplication of code from mod_proxy_http() but maybe it's inevitable. I may create ap_proxy_create_headerb() to create a header brigade that both modules can use. Pull out duplicated code to proxy_util... log nums ""final"" rename :) don't strip these, ensure that they exist. streamline bypass reqtimeout for websockets Keep mod_req clear. Simply scan thru input filters and mod_req untouched (for now ;) ) Reviewed/backported by: jim "	remove
----------------------------
core: Add post_perdir_config hook. trunk patch: http://svn.apache.org/r1368121 Submitted by: minfrin Reviewed by: jim, sf 	r1491472
----------------------------
Merge r1490446 from trunk: PR55069 include line number in 'AH00113: cannot use a full URL in a 401 ErrorDocument' 	r1491315
----------------------------
mod_lua: Sync 2.4 branch with trunk. This includes (but is not limited to) Server pools, new apr functions for the request_rec table, input/output filters, LuaCodeCache, LuaMapHandler and multipart form data handling. This is long overdue, and has become too spaghetti-ish to propose in chunks :| trunk patch: http://svn.apache.org/r1366890 Submitted by: humbedooh Reviewed by: jim, covener, fuankg 	r1490599
----------------------------
"core: make the ""default"" parameter of the ""ErrorDocument"" option case insensitive. PR 54419 trunk patch: http://svn.apache.org/r1465190 Submitted by: Tianyin Xu <tixu cs ucsd edu> Reviewed by: jailletc36, fuankg, minfrin "	r1490594
----------------------------
"mod_proxy_html: make the ""ProxyHTMLFixups"" options case insensitive. PR 54420 trunk patch: http://svn.apache.org/r1464762 Submitted by: Tianyin Xu <tixu cs ucsd edu> Reviewed by: jailletc36, fuankg, minfrin "	r1490589
----------------------------
"mod_cache: Make option ""CacheDisable"" in mod_cache case insensitive PR 54462 trunk patch: http://svn.apache.org/r1464721 Submitted by: Tianyin Xu <tixu cs ucsd edu> Reviewed by: jailletc36, fuankg, minfrin "	r1490581
----------------------------
Rebuild html, metafiles. 	r1490414
----------------------------
Backport r1488022 Add missing LoadModule line for mod_auth_form 	r1488023
----------------------------
mod_cache: Ignore response headers specified by no-cache=header and private=header as specified by RFC2616 14.9.1 What is Cacheable. Ensure that these headers are still processed when multiple Cache-Control headers are present in the response. PR 54706 trunk patch: http://svn.apache.org/r1478382 2.4.x patch: http://people.apache.org/~minfrin/httpd-mod_cache-nocacheheader2.4.patch Submitted by: minfrin Reviewed by: jim, wrowe 	r1487103
----------------------------
mod_dav: Sending a MERGE request against a URI handled by mod_dav_svn with the source href (sent as part of the request body as XML) pointing to a URI that is not configured for DAV will trigger a segfault. trunk patch: http://svn.apache.org/r1485668 Submitted by: Ben Reser <ben reser.org> Reviewed by: minfrin, covener, jorton 	r1486461
----------------------------
mention RewriteLog/RewriteLogLevel going away in 2.4 upgrading doc. Submitted by: Sean Timmins Committed by: covener 	r1485752
----------------------------
"mod_authn_file, mod_authz_groupfile: remove an unused and undocumented ""standard"" optional parameter for 'AuthGroupFile' and 'AuthUserFile' trunk patch: http://svn.apache.org/r1484398 Submitted by: jailletc36 Reviewed by: covener, minfrin "	r1485737
----------------------------
core: speed up (for common cases) and reduce memory usage of ap_escape_logitem This should save 70-100 bytes in the request pool for a default config. trunk patch: http://svn.apache.org/r1485409 Submitted by: jailletc36 Reviewed by: jim, covener 	r1485723
----------------------------
Merge r1425874, r1426850 from trunk: mod_ssl: add support for subjectAltName-based host name checking in proxy mode (PR 54030) factor out code from ssl_engine_init.c:ssl_check_public_cert() to ssl_util_ssl.c:SSL_X509_match_name() introduce new SSLProxyCheckPeerName directive, which should eventually obsolete SSLProxyCheckPeerCN ssl_engine_io.c:ssl_io_filter_handshake(): avoid code duplication when aborting with HTTP_BAD_GATEWAY Fix warning about discarding 'const' qualifier from pointer Submitted by: kbrand, sf Reviewed/backported by: jim 	r1485667
----------------------------
event MPM: Provide error handling for ThreadStackSize. PR 54311 trunk patch: http://svn.apache.org/r1433682 Submitted by: Tianyin Xu <tixu cs.ucsd.edu> Reviewed by: minfrin, jailletc36, sf 	r1481515
----------------------------
core: Improve error message where client's request-line exceeds LimitRequestLine PR 54384 trunk patch: http://svn.apache.org/r1433613 Submitted by: jailletc36 Reviewed by: minfrin, jim 	r1481512
----------------------------
Merge r1476680 from trunk: mod_proxy: Clarify the usage suggestion for BalancerInherit and ProxyPassInherit. Submitted by: minfrin Reviewed/backported by: jim 	r1477650
----------------------------
Merge r1387603, r1388029, r1420124, r1421288, r1421912, r1422943, r1422980, r1430575, r1439404 from trunk: wtf are we doing merging in these from the parent?? These are server specific! OK, enable/allow previous broken, bad behavior iff the user in those cases. inherit inherit Use inherit_set to let the global server set the default for all vhosts. Otherwise inherit would need to be disabled Redfine - we are just worried about balancers and workers, so have the directive clear about that. Naming ProxyPassInherit directive Submitted by: jim, rjung, jim, jim, jim, jim Reviewed/backported by: jim 	restrict
----------------------------
mod_authnz_ldap: Allow using exec: callouts like SSLPassphraseDialog for AuthLDAPBindPassword. trunk patch: http://svn.apache.org/viewvc?view=revision&revision=1433478 2.4.x patch: http://people.apache.org/~druggeri/patches/AuthLDAPBindPasswordExec-2.4.patch Submitted by: druggeri Reviewed by: jim, minfrin 	r1476694
----------------------------
mod_proxy_balancer: Add failontimeout parameter. Timeout will put worker in error state if an IO timeout is detected. trunk patch: http://svn.apache.org/viewvc?view=revision&revision=1465839 2.4.x patch: http://people.apache.org/~druggeri/patches/httpd-2.4.x-failontimeout.patch Submitted by: druggeri Reviewed by: jim, minfrin 	r1476689
----------------------------
mod_ssl: Catch missing, mismatched or encrypted client cert/key pairs with SSLProxyMachineCertificateFile/Path directives. PR 52212, PR 54698. (check at startup, to prevent segfaults at proxy request time) trunk patches: https://svn.apache.org/r1374214 2.4.x patch: https://people.apache.org/~kbrand/PR52212_54698_2.4.x.patch Submitted by: kbrand Reviewed by: jorton, minfrin 	r1476685
----------------------------
Merge r1471449 from trunk: * Fix null pointer dereference in case SetEnvif and SetEnvIfExpr are used together. PR: 54881 Submitted by: rpluem Reviewed by: rpluem, covener, humbedooh 	r1476143
----------------------------
DirectoryIndex and mod_autoindex 	r1476015
----------------------------
Note that ProxyPass[Match] doesn't work within a <Directory> context. 	r1475706
----------------------------
Merge r1467765 from trunk: Fix crash in mod_log_config when logging (LogFormat contains %{end}t). The request_config for mod_log_config might not be initialized. PR 54828. Submitted by: rjung Reviewed/backported by: jim 	request
----------------------------
"LoadModule is no longer a ""new"" directive in 2.4 "	r1463186
----------------------------
Merge r1456061 from trunk: PR54687:  note that REQUEST_FILENAME is influenced by AcceptPathInfo 	r1456062
----------------------------
Merge r1364695 from trunk: mod_lbmethod_heartbeat, mod_heartmonitor: Respect DefaultRuntimeDir/ DEFAULT_REL_RUNTIMEDIR for the heartbeat storage file. Submitted by: trawick Reviewed/backported by: jim 	r1455218
----------------------------
"Merge r1435811 from trunk: Add ""mod_macro"" as a standard module, compiled in with ""most"". This module was created in 1998 and has been distributed independently ever since. It is hereby donated to the Apache Software Foundation. There are quite a few comments in the source code to explain how it works, as well as extensive non regression tests. Some utilities about array processing could be moved to ""core.c"". However, I finally decided against for now so that it stays as an external and independent module, and thus may be backported with minimal impact on the source tree. Details of the addition: * modules/core/mod_macro.c: module source code * modules/core/test: non regression tests modules/core/test/conf/: configuration files modules/core/test/ref/: expected results * docs/manual/mod/mod_macro.xml: English documentation * docs/manual/mod/mod_macro.xml.fr: French documentation Submitted by: fabien Reviewed/backported by: jim "	r1455215
----------------------------
Use define for serverroot with NetWare conf files. (Backport r1451155) 	r1451928
----------------------------
let heartmonitor storage file respect DefaultRuntimeDir? 	r1449960
----------------------------
fix DefaultRuntimeDir revision list (including mod_slotmem_plain that jim asked about) don't forget tweaks to API migration docs, which can be migrated independently 	r1449930
----------------------------
Hard coded ThreadLimit for event is 100,000. 	r1448589
----------------------------
Contributed By: Evgeny Barsukov Reviewed By: covener, humbedooh, rjung Merge r1447426 from trunk: Unbreak default case of RewriteBase not being set after r1410681 Contributed By: Evgeny Barsukov Reviewed By: covener 	r1447448
----------------------------
Merge r1442412 from trunk: Fix  incomplete filename in ErrorLog when trying to access files in non existing directories PR39944 Submitted by: jailletc36 Reviewed/backported by: jim 	r1443076
----------------------------
Merge r1442320 from trunk: Don't keepalive the connection to the client if the backend closes the connection. PR: 54474 Submitted by: Pavel Mateja <pavel netsafe cz> Submitted by: sf Reviewed/backported by: jim 	r1443075
----------------------------
"Merge r1428184, r1429228 from trunk: Improve pkg-config usage for mod_ssl/ab: also use pkg-config for determining the -l flags (and fall back to a hardcoded default of ""-lssl -lcrypto"") add --static to pkg-config invocations, so that libraries for static linking are also taken into account (PR 54252 - note that the additional flags will only appear in modules/ssl/modules.mk and ab_LDFLAGS, so potential side effects are limited) separate --libs-only-L and --libs-only-other into two invocations (can't be used concurrently, only the first takes effect) use --silence-errors where applicable mod_ssl/ab: only use ""--static"" for pkg-config when explicity requested (by adding an ""--enable-ssl-staticlib-deps"" option to configure) Submitted by: kbrand Reviewed/backported by: jim "	r1440507
----------------------------
Backport r1439106: Clarify more clearly in the examples which configurations are limited to CacheQuickHandler off and which support both. 	r1439108
----------------------------
Merge r1438838 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: try to emphasize that ErrorDocument nnn /foo doesn't send a HTTP redirect. 	r1438839
----------------------------
"Merge r1438833 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: http://httpd.apache.org/docs/2.4/platform/windows.html#comment_760 Get rid of ""SystemRoot"" used where ServerRoot was meant, by dropping this whole part of the sentence. (use drive letters, unless they're network drives and you're running as a service ...) "	r1438835
----------------------------
Merge r1392120, r1392122, r1392150 from trunk: Fix shell errors when trying to AC_MSG_RESULT() for --with-module. (The change to IFS hosed any AC_MSG_foo() invocations.) It is easy enough to reorder the reset of IFS and the AC_MSG_RESULT() invocation, but there's a big stretch of shell code where AC_MSG_foo() might be useful someday, so get rid of the commas at the start and leave IFS alone and AC_MSG_foo() at will. fix bug in r1392120: replace ALL commas --with-module: Fix failure to integrate them into some existing module directories. modules/config?.m4 needs to run after the modules/*/config?.m4. Otherwise, modules.mk as created for --with-module gets wiped out first. PR: 40097 Submitted by: trawick Reviewed/backported by: jim 	r1436908
----------------------------
Vote for BalancerInherit 	r1436542
----------------------------
Merge r1433988 from trunk: * A limit of zero means unlimited for LimitRequestBody. PR: 54435 Submitted by: Pavel Mateja <pavel netsafe.cz> Reviewed by: rpluem Submitted by: rpluem Reviewed by: rpluem, jim, jorton 	r1436443
----------------------------
ErrorLogFormat has different defaults on different MPMs 	r1435365
----------------------------
Adds examples to the <!--#config SSI function 	r1433791
----------------------------
Merge r1397687 from trunk: configure: Fix processing of --disable-FEATURE for various features. Submitted by: trawick Reviewed/backported by: jim 	r1430949
----------------------------
Show an example of using a Define'ed variable in a configuration. 	r1430665
----------------------------
BalancerInherit proposal 	r1430590
----------------------------
Merge r1422937 from trunk: ab: add the possibility to define a socket timeout (-s timeout) [Guido Serra <zeph fsfe org>] Also some changes In usage(): - reword -t option to be more clear with the new -s - add missing -q - add the new -s option - reword some options to better match online documentation ab.xml claimed that -s was already there, but nothing in the code looks like that. So, I guess it only landed on the online doc... Submitted by: jailletc36 Reviewed/backported by: jim 	r1430300
----------------------------
Widen strip pattern in config_vars.sh to also match MOD_XML2ENC_LDADD. This was the first module with digits in its name. Submitted by: rjung Backported by: rjung Reviewed by: rjung, covener, fuankg Backport of r1426975 from trunk. 	r1427067
----------------------------
LuaMapHandler isn't in 2.4 yet, so let's not refer to it. 	r1425749
----------------------------
Merge r1425345 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: caution about merging Location settings on top of directory/files authz config 	r1425346
----------------------------
Merge r1406493, r1406495 from trunk: Make <If> sections in virtual host context fill in cmd->path so that other directive notice that they are in a config section. This fixes LogLevel not working in <If> sections that are not in Location/Directory/File sections. Make ap_check_cmd_context() treat <If> sections like <File> sections. This is necessary to properly disallow directives that don't work in <If>. A separate NOT_IN_IF flag may be nicer, but would create much more hassle when being backported to 2.4. Submitted by: sf Reviewed/backported by: jim 	r1422877
----------------------------
Merge r1422375 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: PR54308: aliasmatch ^/foo matches requests for ////foo 	r1422376
----------------------------
- Add missing documentation for ProxyHTMLMeta directive. - Tidy up mod_proxy_html docs PR 54269 - Fix validation error. Backports of r1311468, r1420120 and r1420685 from trunk. 	r1420728
----------------------------
Merge r1407459, r1407460, r1419781, r1418524, r1401448, r1405407, r1405973, r1419726, r1418769, r1417197 from trunk: mod_remoteip.c:404:38: warning: data argument not used by format string [-Wformat-extra-args] It's a hack, but maintain the orig hack ;) Remove warnings mod_speling.c:400:41: warning: data argument not used by format string [-Wformat-extra-args] Use 'apr_is_empty_table()' instead of testing against 'apr_table_elts(...)->nelts' Use ap_rputs instead of ap_rvputs where applicable. No need to apr_pstrdup things here, 'apr_socket_accept_filter' already makes it own copy. Not compiled nor tested as on my system APR_HAS_SO_ACCEPTFILTER is set to 0. of args passed to apr_socket_accept_filter() cppCheck: kill two warnings about incorrect printf parameters. 'worker_thread_count' is unsigned cppCheck: same expression on both side of '|'. Fix it the same way other messages are managed in the function. Fix a few 'too many arguments for format' warnings cppCheck: kill a unread variable warning Submitted by: jim, jailletc36, jailletc36, jailletc36, trawick, jailletc36, jailletc36, sf, jailletc36 Reviewed/backported by: jim 	revert
----------------------------
mod_auth_form: Support the expr parser in the AuthFormLoginRequiredLocation, AuthFormLoginSuccessLocation and AuthFormLogoutLocation directives. mod_auth_form: Make sure 500 Internal Server Error is Submitted by: minfrin Backported by: minfrin Reviewed by: minfrin, sf, rjung Backports of r1388648 and r1418721 from trunk. 	returned
----------------------------
Merge r1415023 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: PR54223: 2.4 generates AH00554 when Include points to a directory with no wildcard. directories, but also changed a path non-fnmatch directories are passed through to call ap_process_resource_config(). 	r931435
----------------------------
Merge r1415008, r1416150 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: PR54222: catch invalid ServerTokens args Submitted by: Jackie Zhang  <jackie.qq.zhang gmail.com> Reviewed/modified by: covener Sort error message for ServerTokens by increasing verbosity. Add missing 'OS' variant. Remove some trailing whitespace. 	r1416746
----------------------------
Merge r1398066 from trunk: FallbackResource : Support for the 'disabled' argument Submitted by: gryzor Reviewed/backported by: jim 	r1416585
----------------------------
"Merge r1337344, r1378178, r1397636, r1398025, r1398040, r1398481, r1407004, r1407006, r1407088, r1407528 from trunk: * support/suexec.c: Add gcc format-string attributes to logging functions. (main): Always print uid/gid as unsigned long, and cast to avoid warnings (which somewhat defeats the point of the format string attrs, but is necessary since the size of gid/uid varies). s/;;/;/ No need to test for NULL before calling apr_pstrdup. No need it apr_pcalloc here, the memory is fully initialized the line just after cppCheck: unreadVariable - 'serviceFlag' is not used in the function, so remove it Remove unused code. ""Next week"" hasn't happened in the last 10 years or so. log client error at level debug, log broken Host header value Submitted by: jorton, pqf, jailletc36, jailletc36, jailletc36, jailletc36, sf, sf, sf, sf Reviewed/backported by: jim "	remove
----------------------------
add rewritebase proposal 	r1410683
----------------------------
update list of DefaultRuntimeDir revisions in trunk that need adjusting for 2.4.x 	r1407463
----------------------------
s/Options/AllowOverride/ in comment describing AllowOverride 	r1406904
----------------------------
Adding .fr translation for rewritemap doc 	r1403422
----------------------------
Merge r1400700 from trunk: Change default for SSLCompression to off, as compression causes security issues in most setups Submitted by: sf Reviewed/backported by: jim 	r1400962
----------------------------
"Merge r1370763 from trunk: mod_slotmem_plain: make the ""filename"" key relative to DefaultRuntimeDir if not absolute mod_slotmem_plain does not externalize or check the full path in any way, so this change is just for consistency with other modules which build paths to run-time artifacts. Submitted by: trawick Reviewed/backported by: jim "	r1400945
----------------------------
Adding documentation patch link for 'FallbackResource disabled' backport 	r1400768
----------------------------
Suggest FallbackResource 'disabled' patch into 2.4 	r1398074
----------------------------
Documenting the new 'disabled' argument accepted by FallbackResource 	r1398065
----------------------------
Adding support for the 'disabled' keyword to FallbackResource 	r1398064
----------------------------
Backport r1394984: Note that AllowOverride changed its default value to None in 2.3.9 As per comment #264 on site. 	r1394988
----------------------------
Merge r1392347 from trunk: core: ErrorDocument now works for requests without a Host header. PR: 48357 Submitted by: trawick Reviewed/backported by: jim 	r1394035
----------------------------
"mod_proxy: Avoid double slash with ""ProxyPassReverse / ..."" cases trunk patch: http://svn.apache.org/viewvc?view=revision&revision=1386576 2.4.x patch: trunk patch works +1: jim, druggeri, minfrin "	r1393199
----------------------------
The LuaCodeCache patch seems stalled to me :) 	r1390523
----------------------------
"backport r1385216, r1387610 from trunk: Spin off module-specific build options into separate build vars. [second try, supersedes r1385214] Add MOD_CFLAGS, MOD_LDFLAGS variables etc. to the build commands, which are available to modules for customization on a per-subdir basis (by adding definitions to modules.mk). Reduces the risk of side-effects when a module needs to add CFLAGS, LDFLAGS etc. and these would be added to the global settings (ALL_CFLAGS etc.). Adapt build settings for mod_ssl, mod_socache_dc, mod_deflate, mod_xml2enc, mod_proxy_html, and mod_lua to use the new MOD_xxx build variables. Change PICFLAGS, SHLTCFLAGS and LTCFLAGS into config vars, instead of AC_SUBSTing them in build/rules.mk.in. For support/ab, introduce ab_CFLAGS and ab_LDFLAGS, and define explicit make targets where they appear at the proper position in the build commands. Consistently use ""--with-xxx=PATH"" in configure help strings which are used to specify a path to the installation directory of an auxiliary package. "	r1390518
----------------------------
Merge r1373898 from trunk: Fix crash in packet dump code of mod_proxy_ajp when logging with LogLevel trace7 or trace8. PR 53730 Submitted by: rjung Reviewed/backported by: jim 	r1390510
----------------------------
"Merge r1386913, r1388825 from trunk: Revert r1371878 --  default configuration changes that drop the DNT header from IE10. See: Message-ID: <CALK=YjMGPNHBqNiad-ghzcEzxDovQgYOpjpSSyXmN=r74v43qg@mail.gmail.com> PR 53845 Keep this in, but commented out: also provide a little more background/rationale. This, hopefully, satisfies both ends of the debate: we don't ""assume"" that everyone who uses this browser didn't make the specific choice, but we allow for admins who care about DNT and want to either 1. Make a statement 2. Force adherence to the standard to easily do so. Submitted by: covener, jim Reviewed/backported by: jim "	r1389261
----------------------------
propose DefaultRuntimeDir for mod_slotmem_plain... the discussion item doesn't apply. 	r1387330
----------------------------
Windows: Fix output of -M, -L, and similar command-line options which display information about the server configuration (backport r1374428). Submitted by: trawick Reviewed/backported by: gsmith, fuankg 	r1386956
----------------------------
backport r1379031: Note that AuthDBDUserRealmQuery is for Digest auth requests, not Basic auth. 	r1379699
----------------------------
backport r1379335: Add Redirect* to the list of directives that are controlled by AllowOverride FileInfo 	r1379696
----------------------------
Comment out LuaMapHandler, as it's not implemented in 2.4.x yet. 	r1375925
----------------------------
Add default value of PrivilegesMode to docs. Backport of r1375011 from trunk. 	r1375044
----------------------------
merge r1374569 from trunk: add links to AcceptFilter and Windows platform documentation add some notes on key configuration issues 	r1374572
----------------------------
Merge r1351020, r1370466 from trunk: Add new directive LuaAuthzProvider to allow implementing an authorization provider in lua There is only one global provider name space, therefore allow LuaAuthzProvider only in global scope. Remove unnecessary server config field. Submitted by: sf Reviewed/backported by: jim 	r1374252
----------------------------
Revert r1373105, the merging of incompatible DefaultRuntimeDir changes. The trunk patches for these all have some configuration breakage as 2.4.x interprets the individual directive or API parameter as 	relative
----------------------------
Merge r1371801 from trunk: Windows: Fix SSL failures on windows with AcceptFilter https none. The now-stray apr_socket_opt_set(APR_SO_NONBLOCK=On) call was originally added with r327872.  The call was harmless on Unix due to APR's use of non-blocking sockets when implementing timeouts on that platform, but harmful on Windows since it collided with APR's different implementation of timeouts on that platform. PR: 52476 Submitted by: trawick Reviewed/backported by: jim 	r1373108
----------------------------
"Merge r1364695, r1369477, r1369808, r1370288, r1370225, r1370763, r1371684 from trunk: mod_lbmethod_heartbeat, mod_heartmonitor: Respect DefaultRuntimeDir/ DEFAULT_REL_RUNTIMEDIR for the heartbeat storage file. core: Respect DefaultRuntimeDir/DEFAULT_REL_RUNTIMEDIR for the scoreboard (ScoreBoardFile). The Pidfile directive and ap_log_pid()/ap_remove_pid()/ap_read_pid() now respect DefaultRuntimeDir Mutex directive: finish support of DefaultRuntimeDir a partial conversion was made in r1299718, but I'm not sure when that change is effective mod_socache_shmcb and mod_socache_dbm: finish support of DefaultRuntimeDir a partial conversion was made in r1299718, affecting cases where no filename was specified mod_slotmem_plain: make the ""filename"" key relative to DefaultRuntimeDir if not absolute mod_slotmem_plain does not externalize or check the full path in any way, so this change is just for consistency with other modules which build paths to run-time artifacts. make LDAPSharedCacheFile relative to DefaultRuntimeDir Submitted by: trawick Reviewed/backported by: jim "	r1373105
----------------------------
Merge r1371387 from trunk: mod_auth_digest now respects DefaultRuntimeDir Submitted by: trawick Reviewed/backported by: jim 	r1373081
----------------------------
Add a round of very easy to review backport proposals. Also add the revision numbers related to DefaultRuntimeDir. 	r1371947
----------------------------
(SSL failures on Windows with AcceptFilter https none)? 	r1371802
----------------------------
Merge r1369995, r1369999, r1370001 from trunk: Use apr_pcalloc for rewritemap_entry struct, to avoid uninitialized entries. PR: 53663 Submitted by: Mikhail T. <mi apache aldan algebra com> Add changes entry for r1369995, r1369999 Submitted by: sf Reviewed/backported by: jim 	remove
----------------------------
clarify that the 2.4 pidfile APIs process paths relative to ServerRoot 	r1369810
----------------------------
merge r1364709 from trunk: doc fixes for r1299718: The value of ScriptSock is relative to DefaultRuntimeDir. 	r1369607
----------------------------
mod_ssl: Add new directive SSLCompression to disable TLS-level compression. PR 53219. Backport of r1345319 and r1348656 from trunk. Submitted by: Bjoern Jacke <bjoern j3e de>, sf Reviewed by: rjung, trawick Backported by: rjung 	r1369585
----------------------------
SSLCompression directive approved 	r1369507
----------------------------
grab r1369435 from trunk: fix documented default value of ScoreBoardFile 	r1369436
----------------------------
Merge r1361766 from trunk: Simplify handling of MaxConnectionsPerChild If we decrement the counter at accept time and not at close time, we only need to access the counter in the listener thread and the code gets much simpler. Submitted by: sf Reviewed/backported by: jim 	r1368452
----------------------------
Add a docs link to a configuration example. Backport of r1368053 from trunk. 	r1368054
----------------------------
Dropping the LuaCodeCache proposal until we get the rest of the backports sorted out (tba). 	r1367977
----------------------------
Remove [max|min max] from the LuaScope syntax, since the 'server' scope is not implemented yet. Add the 'thread' value to the list of possible scopes 	r1367592
----------------------------
LuaQuickHandler had no syntax, which made the reference sheet look wrong. 	r1366863
----------------------------
Comment out LuaCodeCache, which hasn't been implemented yet. 	r1366860
----------------------------
mod_setenvif: Compile the regex used by is_header_regex() only once during startup This should save some memory, especially with .htaccess Backport of r1343099. Submitted by: sf Reviewed by: rjung, jim Backported by: rjung 	r1365774
----------------------------
Fixes for proxyblock patch - thanks to rjung. 	r1365603
----------------------------
Remove reference to the 'server' value in LuaScope, since it doesn't exist. 	r1365289
----------------------------
Nominate ProxyBlock fixes.# 	r1365066
----------------------------
Honor DefaultRuntimeDir for mutexes, socache and CGID socket. Move away from DEFAULT_REL_RUNTIMEDIR and use ap_runtime_dir_relative() API. Backport of r1299718 from trunk. Submitted by: jim Reviwed by: rjung, trawick Backported by: rjung 	r1364709
----------------------------
Merge r1341906, r1341913 from trunk: * acinclude.m4: Use AC_MSG_NOTICE. * configure.in: Use AC_MSG_NOTICE so passing --silent works as advertised. Reviewed by: rjung, humbedooh, jorton 	r1364675
----------------------------
vote/promote support for DefaultRuntimeDir for a handful of modules 	r1364617
----------------------------
Merge r1332378 from trunk: If a filename without slashes is specified for LoadFile or LoadModule and the file cannot be found in the server root directory, try to use the standard dlopen() search path. Submitted by: sf Reviewed/backported by: jim 	r1364603
----------------------------
Merge r1306426, r1306841 from trunk: Update worker mpm defaults to match documentation and built-in defaults. As per https://issues.apache.org/bugzilla/show_bug.cgi?id=52102 Updated event mpm configuration to match the defaults in documentation and header definitions. Updated prefork defaults to better match documentation and header definition. Submitted by: humbedooh Reviewed/backported by: jim 	r1364600
----------------------------
Merge r1306350 from trunk: Adapt Timeout to be the same as DEFAULT_TIMEOUT. After all it's localted in a file called extra/httpd-default.conf Submitted by: igalic Reviewed/backported by: jim 	r1364599
----------------------------
Fix MaxConnectionsPerChild This was broken when the handling of lingering close was moved into the listener thread. - Make the connection counting thread safe. - Do the counting in the connection pool cleanup to ensure that it gets also executed if the listener thread closes the connection. - Add a trace log message when a process is recycled. - Rename requests_this_child to conns_this_child, which is more accurate Backport of r1343085 and r1343087. Submitted by: sf Reviewed by: humbedooh, rjung Backported by: rjung 	r1364268
----------------------------
Always log if LimitRequestFieldSize triggers. Backport of r1352911 from trunk. Submitted by: sf Reviewed by: rjung, trawick Backported by: rjung 	r1364263
----------------------------
2.4.x ab busted on IPv6-enabled Windows, needs existing fix (presumably busted for a lot more configurations) 	r1363766
----------------------------
"Remove .* from the equation in the ""<Directory ~ ..."" example. Submitted by: Daniel (comment #143 on site) "	r1363516
----------------------------
Fixing the links to ProxyPass* into the note added in r1362933 	r1362936
----------------------------
Adding a note about proxy performance being bad when using rewrite's [P]. Advise the use of ProxyPass* instead 	r1362933
----------------------------
Add information about the possible values of ProxyExpressDBMType 	r1361949
----------------------------
"Merge r1359881 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: but inadvertently made ""AllowOverride Options"" behave like ""AllowOverride Options=FollowSymLinks"". PR53444 "	r1052419
----------------------------
Merge r1309602 from trunk: mod_rewrite: Fix RewriteCond integer checks to be parsed correctly. PR: 53023 Submitted by: Axel Reinhold <apache freakout.de> Reviewed/Updated by: nd Submitted by: nd Reviewed/backported by: jim 	r1361281
----------------------------
"propose a simple fix for PR53444 (""AllowOverride Options"" doesn't allow most ""Options Indexes"") "	r1359987
----------------------------
Merge r1311183 from trunk: Fix parsing of Require arguments in <AuthzProviderAlias>. Add some logging and an assert for a case that should not happen. PR: 53048 Submitted by: sf Reviewed/backported by: jim 	r1359691
----------------------------
Merge r1347998 from trunk: * configure.in: Enforce 1.4.0 as minimum APR version requirement. PR: 52748 Submitted by: jorton Reviewed/backported by: jim 	r1359688
----------------------------
Add LuaAuthzProvider as a valid Directive. 	r1355925
----------------------------
Merge r1352084 from trunk: add a warning in the LDAP AuthnProviderAlias and expecting to have a configured LDAP authorization provider. 	r1352088
----------------------------
Backport from trunk: Add a note that VirtualDocumentRoot will override DocumentRoot in the current scope (and thus also in all virtual hosts if defined in the global server scope) 	r1349158
----------------------------
Merge r1344675 from trunk: PR5334, leave a hint about VirtualHost args acting like serveralias for people who don't read details.html 	r1344676
----------------------------
Merge r1343935: be more verbose about what -DDUMP_CONFIG does not 	r1343937
----------------------------
Merge r1309585 from trunk: static scope for rewritemap_mutex_type. Submitted by: nd Reviewed by: sf, jorton, trawick 	r1333493
----------------------------
Merge 1328345, add CHANGES entry: * server/main.c (main): Bail out *before* signalling the server if the config is bad. (as per the claim in the docs!) Submitted by: jorton Reviewed by: jorton, jim, sf 	r1331847
----------------------------
Merge r1311174 from trunk: Fix error handling in ap_scan_script_header_err_brigade() if there is no EOS bucket in the brigade: Also don't loop if there is a timeout when discarding the script output. Thanks to Edgar Frank for the analysis. PR: 48272 (partial fix) Submitted by: sf Reviewed/backported by: jim 	r1331414
----------------------------
Merge r1299783 from trunk: some more trace logging for AddOutputFilterByType Submitted by: sf Reviewed/backported by: jim 	r1331412
----------------------------
Merge r1311086 from trunk: Describe DBDInitSQL 	r1311090
----------------------------
Merge r1309193 from trunk: PR50662: reword the hint about sslrequire expressions being parsed in htaccess so it doesn't apply non-perdir config. 	r1309194
----------------------------
Merge r1298433, r1305166 from trunk: Use new ap_runtime_dir_relative() API Document use of the DefaultRuntimeDir directive. Submitted by: jim, minfrin Reviewed/backported by: jim 	r1308897
----------------------------
Merge r1302444, r1302483: * Correctly save the reverse proxy worker in all virtual host proxy configs. PR: 52935 Obtained from: Petter Berntsen <petterb gmail.com> Committed by: rpluem Reviewed by: covener, minfrin, sf 	r1307825
----------------------------
Correct SSLCipherSuite + documentation (move rather than add) 	r1307699
----------------------------
Backport: mod_sed: Don't define PATH_MAX to a potentially undefined value, causing compile problems on GNU hurd. Submitted by: sf Reviewed by: minfrin, fuankg 	r1305822
----------------------------
Backport: core: Add ap_runtime_dir_relative() and DefaultRuntimeDir. Submitted by: trawick Reviewed by: jim, minfrin 	r1305164
----------------------------
Backport: core: Fix breakage of Listen directives with MPMs that use a per-directory config. PR 52904. Submitted by: sf Reviewed by: covener, minfrin 	r1305145
----------------------------
Backport: core: Disallow directives in AllowOverrideList which are only allowed in VirtualHost or server context. These are usually not prepared to be called in .htaccess files. Submitted by: sf Reviewed by: covener, druggeri 	r1305137
----------------------------
Backport: core: In AllowOverrideList, do not allow 'None' together with other directives. PR 52823. 	r1305132
----------------------------
Submitted by: sf Reviewed by: sf, trawick, covener Merge r1304852 from trunk: Fix merging of AllowOverrideList and ContentDigest. Remove some useless code. Pointed out by covener 	r1305014
----------------------------
Submitted by: covener Reviewed by: covener, igalic, sf Merge r1304641 from trunk: PR52981: mod_request: fix check for bad KeptBodySize argument 	r1305012
----------------------------
Rebuild core (removed reference to DefaultRuntimeDir) 	r1304732
----------------------------
Merge r1301398, r1301399 from trunk: fix a misleading example that implies ServerName has precedence over a ServerAlias. We stop when a vhost matches for any reason (not 2.4 specific).  Mention this explicitly. xforms 	r1301400
----------------------------
"Merge r1297958 from trunk: PR52845: ""DirectoryIndex disabled"" should blow away the DirectoryIndex settings in the current config section, not just override previous config sections. Submitted by: covener Reviewed/backported by: jim "	r1300089
----------------------------
Merge r1299883 from trunk: document LDAPRetries and LDAPRetryDelay knobs 	r1299886
----------------------------
Merge r1299497 from trunk: PR52877, MaxMemFree text no longer matches 2.4.x+ default of 2048. 	r1299498
----------------------------
"propose PR52845 change to ""DirectoryIndex disabled"" to clobber current dirconfig, not just parent. "	r1297969
----------------------------
Merge r1243651 from trunk: Check during config test that directories for access logs exist PR 29941 Submitted by: sf Reviewed/backported by: jim 	r1294600
----------------------------
Merge r1293708: Enable per-module loglevel for mod_xml2enc and mod_proxy_html 	r1294159
----------------------------
Merge r1293405: Fix AddOutputFilterByType brown paper bag crash bug Initialize pointers, fix off-by-one. PR: 52755 	r1294157
----------------------------
Example in configuration comment should use a path consistent with the default configuration. PR 52715. Backport from trunk of r1241069 and 1241071. 	r1293800
----------------------------
Switch documentation links nconfiguration templates from trunk to 2.4. 	r1291307
----------------------------
Merge r1290823, r1290835: Mention AllowOverrideList, Define, EC keys, rotatelogs improvements. Syntax fixes. Reordering: Put related changes next to each other Put modules that only provide services for other modules last Try to put important changes first 	r1290837
----------------------------
Merge r1245717 : Mention mod_heartmonitor/mod_lbmethod_heartbeat, mod_sed, mod_auth_form, mod_session. Remove mod_reqtimeout (already in 2.2), mark mod_lua as experimental. Mention more mod_rewrite improvements. 	r1245721
----------------------------
backport r1243404 missing modules/ folders in lbmethod modules Loadfile section 	r1243405
----------------------------
Add cleanup for SSLProxyMachineCertificateChainFile during init 	r1242097
----------------------------
Backport: Add a configuration layout for the AIX platform. Submitted by: Michael Felt <mamfelt gmail com> 	r1239567
----------------------------
Merge r1239174 from trunk: Document AllowOverride Nonfatal option Submitted by: niq Reviewed/backported by: jim 	r1239274
----------------------------
Improve Lua 5.2.0 compatibility. This is not yet complete. Building should still work with Lua 5.1.4, but needs -DLUA_COMPAT_ALL in CPPFLAGS when compiled against 5.2.0. Automatically handling this in configure is still a TODO. Backport from trunk of the following revisions: MOdified patch submitted by NormW (nornw gknw net). It is gone in Lua 5.2.0 and was replaced by luaL_Reg which already existed in 5.1.4. So use that one. and simplify lua_load compatibility macro. 	r1239030:
----------------------------
Make apachectl -h aware of status, fullstatus, and configtest. 	r1238926
----------------------------
Fix handling of piped, syslog, or inherited ErrorLog entries Backport of r1225223 from trunk. 	r1238833
----------------------------
Merge r1225199: Check during configtest that the directories for error logs exist PR: 29941 	r1238824
----------------------------
Backports from trunk: - r1200955: Patch from Luke Meyer, clarifies usage of ProxyPassReverseCookiePath directive. As per bug #51126 - r1200968: A little clarification about variable interpolation, as requested in bug #51125 - r1202453: Fix xml 	r1238730
----------------------------
Document configure change Backport of r1200496 from trunk. 	r1238719
----------------------------
Merge r1229021 from trunk: Core configuration: add AllowOverride option to treat syntax errors in .htaccess as non-fatal. PR 52439 Submitted by: niq Reviewed/backported by: jim 	r1238698
----------------------------
configure: Move the --with-included-apr check so that srcdir!=builddir builds aren't broken by it. Backport of r1232838 from trunk. 	r1238400
----------------------------
"SECURITY: CVE-2012-0053 (cve.mitre.org) Fix an issue in error responses that could expose ""httpOnly"" cookies when no custom ErrorDocument is specified for status code 400. "	r1234838
----------------------------
Merge r1234643: Fix docs for Include, add docs for IncludeOptional 	r1234646
----------------------------
Merge r1234180, r1234297, r1234565: Make APACHE_MODULE() accept an optional prerequisite module for configure. Introduce the following configure time dependencies: mod_proxy_* (except proxy_html) require mod_proxy mod_dav_* require mod_dav mod_session_* require mod_session mod_cache_disk requires mod_cache mod_heartbeat requires mod_watchdog PR: 52487 	r1234570
----------------------------
Backport: configure: Improve the error message when --with-included-apr is specified but either APR or APR-Util is not included. 	r1232576
----------------------------
add compat info to CacheQuickHandler 	r1230287
----------------------------
connect some the dots to 'CacheQuickHandler' in the CHANGES entry. 	r1230283
----------------------------
Merge r1227637, r1227642 from trunk: The guts of mod_proxy is not really ready for the addr and host on a proxy_conn_rec to change over time and differ from the 1 cached in the worker. * proxy_worker->cp->addr needs to know what host/port it cached * conn->addr and conn->hostname need to be allocated from their own subpool so they can be cleared as they change * ap_proxy_determine_connection needs to be more careful about which addr is the TCP endpoint and what we have in either cache. * may need to avoid updating the proxy_worker addr cache if we know the value is flipping. Update the comment and checks around address/connection reusability in mod_proxy. The checks and comment are a vestige of 2.0.x mod_proxy_http where the backend proxy conn was stored in the frontend r->conn_config, but ap_proxy_determine_connection() doesn't associate the frontend and backend conns like this. 	restore
----------------------------
Merge r1226477 from trunk: add/enhance some hints about configuration section merging (or lack of it in the case of mod_access_compat) PR52406 	r1226481
----------------------------
Merge r1225476: Don't use #ifdef inside macro calls The behavior is undefined according to C99 6.10.3.11 and it breaks with xlc on AIX PR: 52394 	r1225477
----------------------------
Merge r1225197: Adapt loglevel of config errors during second pass Don't use APLOG_STARTUP since at that point, the error log is already available. This gives us timestamps if these errors happen during graceful Use level 'emerg' as these errors are fatal. 	restart.
----------------------------
merge r1222921 from trunk: SSLProtocol: allow explicit control of TLSv1.1 and TLSv1.2 flavors when compiled against OpenSSL 1.0.1 or later. Update documentation. 	r1222922
----------------------------
Backport: mod_mime: Don't arbitrarily bypass AddOutputFilter during a ProxyPass, but then allow AddOutputFilter during a RewriteRule [P]. Make mod_mime behave identically in both cases. PR52342. 	r1222643
----------------------------
Backport: RPM: Remove fiddling with installbuilddir, this is correct by default through the use of config.layout. 	r1220848
----------------------------
"Merge r1210261 from trunk: mod_slotmem_shm: Remove the colon syntax to indicate a relative path, and make the relative path default behaviour. Remove the word ""anonymous"" as a filename for special treatment, what used to be ""anonymous"" is now ""none"". Submitted by: minfrin Reviewed/backported by: jim "	r1213401
----------------------------
backport r1213399 from trunk: logging adjustments: - consistently call ssl_log_ssl_error after ap_log_error etc. - ssl_init_ConfigureServer: add vhost_id to log message 	r1213400
----------------------------
backport r1213380 from trunk: Streamline TLS session ticket key handling (added in r1200040): - drop the SSLTicketKeyDefault directive, and only support a single ticket key per server/vhost - rename the SSLTicketKeyFile directive to SSLSessionTicketKeyFile, remove the keyname parameter - move ticket key parameters from SSLSrvConfigRec to modssl_ctx_t - configure the tlsext_ticket_key_cb only when in server mode - add documentation for SSLSessionTicketKeyFile 	r1213395
----------------------------
backport r1211352 from trunk: Adjust the OpenSSL session id context for SNI configurations, so that sessions are tied to the proper vhost (subset of a patch I originally proposed in November 2009, cf. message with ID <4AF85A18.1000205@velox.ch>). 	r1211353
----------------------------
Merge r1210080: Point to mod_socache_* in the SSLSessionCache error message 	r1210083
----------------------------
Merge r1209741: Fix apr_status_t being passed as loglevel 	r1209742
----------------------------
Backport: mod_session_crypto: Fix a pool lifetime problem when reading from SessionCryptoPassphraseFile. 	r1209466
----------------------------
Merge r1209417 from trunk: * server/listen.c (open_listeners): Fix logic error caught by Coverity; possible NULL pointer deref at startup with a particular (and unlikely) listener/system config. 	r1209439
----------------------------
"Merge r1209432 from trunk: Fix for additional cases of URL rewriting with ProxyPassMatch or RewriteRule, where particular request-URIs could result in undesired backend network exposure in some configurations. (CVE-2011-4317) Thanks to Prutha Parikh from Qualys for reporting this issue. * modules/proxy/mod_proxy.c (proxy_trans): Decline to handle the ""*"" request-URI.  Fail for cases where r->uri does not begin with a ""/"". * modules/mappers/mod_rewrite.c (hook_uri2file): Likewise. "	r1209436
----------------------------
Backport: mod_rewrite: Add the AllowNoSlash RewriteOption, which makes it possible for RewriteRules to be placed in .htaccess files that match the directory with no trailing slash. PR 48304. 	r1209057
----------------------------
Wish came true: CacheEnable works within LocationMatch, giving us mod_cache 	regexes
----------------------------
Backport: mod_session_crypto: Add a SessionCryptoPassphraseFile directive so that the administrator can hide the keys from the configuration. 	r1208518
----------------------------
RPM backport: - Build shared mpms instead of static, reduce the RPM to a simple one pass build of the server into a single binary and modules. - Create a dedicated generic RPM layout, ensuring that all example config files have the correct paths embedded within them. 	r1208124
----------------------------
Merge r1206680, r1206681, r1206682 from trunk: Replace unusable/fringe absolute path example for AddDescription and list some weird AddDescription semantics related to directories. mention IndexIgnore limitation in DirectoryMatch and friends as currently documented only in bugzilla (PR51471) 	r1206683
----------------------------
Merge r1206286 from trunk: Move useful and shared balancer stuff to the shm slot... Provide hooks for post-config/runtime addition of balancers. Reviewed/backported by: jim 	r1206287
----------------------------
Merge r1203634, r1204614, r1205564: Pass ap_errorlog_info to error_log hook 	r1205573
----------------------------
Merge r1205468 from trunk: specify limited context list for ModemStandard 	r1205469
----------------------------
Merge r1204341 from trunk: PR51471: IndexIgnore doesn't work in DirectoryMatch. 	r1204342
----------------------------
Merge r1204317 from trunk: upgrading/compat notes on some unexpected AddDescription behavior also: mention in CHANGES 	r1204319
----------------------------
"Merge r1204307 from trunk: PR39923: Allow AddDescription to work with absolute filesystem paths, by not adding ""*/"" to their prefix (intended for relative paths) "	r1204309
----------------------------
"Backport: mod_include: The SSIAccessEnable directive existed to ensure the addition of the ""-A"" syntax would not break existing configurations in v2.2. Remove the directive for v2.4, defaulting the behaviour to enabled. "	r1204200
----------------------------
"Backport r1203859: great proxy logging cleanup: * remove ""proxy:"", ""FCGI"", etc. prefixes and pid which are now * propagate frontend request's logconfig to backend request * use ap_log_rerror where possible * remove obsolete APLOG_NOERRNO "	r1203861
----------------------------
merge r1203752 from trunk: Change the SSLCipherSuite default to a shorter, whitelist oriented definition, and add an example for a speed-optimized configuration (commented out by default). In the SSL How-To, streamline the SSLCipherSuite examples where applicable (explicitly banning EXP and NULL is not needed when only HIGH is specified). 	r1203753
----------------------------
Added another module load statement to NetWare config. 	r1201995
----------------------------
Added some module load statements to NetWare config. 	r1201990
----------------------------
Merge r1201571 from trunk: PR52175: RewriteBase is what applies to relative substitutions, not the stripping of the per-directory prefix. Reviewed by: covener 	r1201572
----------------------------
Merge r1201443 from trunk: add per-dir config merging to mod_lua so LuaHook* in multiple per-dir sections behaves as expected instead of discarding previous sections. Reviewed by: covener 	r1201445
----------------------------
Folloup on r1201161: New MaxMemFree was meant to be 2048, not 4096. Backport of r1201202 from trunk. 	r1201203
----------------------------
Pre GA removal ob components that will not be included: Part 1: mod_noloris was superseded by mod_reqtimeout. 	r1201164
----------------------------
Merge r1201158 from trunk: Set MaxMemFree 2048 by default 	r1201161
----------------------------
Merge r1201146 from trunk: Fix assertion failure during very high load by preventing race condition between appending to the timeout queues and adding to the pollset. We don't add additional locking calls but only extend the present calls to include the apr_pollset_add. Therefore this hopefully should not cause too much performance Add some comments Replace two AP_DEBUG_ASSERTS with better error handling 	regression.
----------------------------
"Change module sets and default activation status: 1) Promoted from ""most"" to ""yes/few"" - mod_headers 2) Demoted from ""yes/few"" to ""most"" - mod_actions - mod_allowmethods - mod_auth_form - mod_buffer - mod_cgi(d) - mod_include - mod_negotiation - mod_ratelimit - mod_request - mod_userdir Remember: default module set is ""most"", but only the LoadModule lines of all modules except ""yes/few"" are commented out by default. The following modules will now be loaded by default: - mod_access_compat - mod_alias - mod_auth_basic - mod_authn_core - mod_authn_file - mod_authz_core - mod_authz_groupfile - mod_authz_host - mod_authz_user - mod_autoindex - mod_dir - mod_env - mod_filter - mod_headers - mod_log_config - mod_mime - mod_mpm_event - mod_reqtimeout - mod_setenvif - mod_status - mod_unixd - mod_version Backport of r1201111 from trunk. "	r1201118
----------------------------
Merge r1200475, r1200478, r1200482, r1200491, r1200513, r1200550, r1200580, r1200605, r1200612, r1200614, r1200639, r1200646, r1200656, r1200667, r1200679, r1200699, r1200957, r1200961, r1200963 from trunk: fix issue with incorrect munging of the lua package path -- LuaPackagePath directives were not working Default to not allowing htaccess in /, instead of just the documentroot, which gets a nice 10% performance boost by default for me. * modules/ssl/ssl_private.h, modules/ssl/ssl_engine_kernel.c (ssl_callback_tlsext_tickets): Use unsigned char * to fix gcc -Wpointer-sign warnings. Only load the really imporant modules (i.e. those enabled by the 'few' selection) by default. Don't handle modules enabled with --enable-foo specially. This fixes problems with module dependencies until someone implements a mechanism for resolving module dependencies. * modules/proxy/mod_proxy_html.c (comp_urlmap): Fix const-ness warning. * modules/lua/mod_lua.c (ap_lua_ssl_is_https): New function. (lua_post_config): Pick up ssl_is_https optional function. * modules/lua/lua_request.c (req_ssl_is_https_field): New function. (ap_lua_load_request): Map is_https field to above. use a sub-pool for scope_once Fix installation of conf/extra/proxy-html.conf. Otherwise httpd does no longer start, because it is the only extra file required in the main config at the moment. Rebuild xdoc transform Clarify docs for LimitRequestLine, as per bug #51665. Rebuild doc transforms. Submitted by: brianm, pquerna, jorton, sf, brianm, jorton, jorton, sf, pquerna, brianm, brianm, brianm, brianm, brianm, jorton, rjung, rbowen, rbowen, rbowen Reviewed/backported by: jim 	replace
----------------------------
Merge r1200699 from trunk: Fix installation of conf/extra/proxy-html.conf. Otherwise httpd does no longer start, because it is the only extra file required in the main config at the moment. Submitted by: rjung Reviewed/backported by: jim 	r1200973
----------------------------
config generation # (reported by ap_state_query(AP_SQ_CONFIG_GEN): * start at 0 instead of 1 * don't increment until after pconf cleanups run, in case a cleanup needs to check the related config generation 	r1200147
----------------------------
mod_proxy_html: Add ProxyHTMLURLMap conditions to docs. Seems they got lost in the initial docs drop! 	r1200063
----------------------------
Update docs for default TimeOut value for other languages. 	r1199511
----------------------------
Change def timeout from a nasty 5 mins to a more reasonable 1min 	r1199485
----------------------------
"Add ""reallyall"" and --enable-load-all-modules to docs. Clarify LoadModule activation status. "	r1199481
----------------------------
Load all modules in the generated default configuration when using --enable-load-all-modules with configure. 	r1199467
----------------------------
mod_reqtimeout: Change the default to set some reasonable timeout values if loaded 	r1199447
----------------------------
Don't send a 500 if there is a timeout 	r1199444
----------------------------
"Change default FileETag to be ""size mtime"", i.e. remove the inode. Adjust the etag generation in mod_dav_fs to the new default. PR 49623. "	r1199086
----------------------------
By default, only load those modules that are either required or explicitly selected by a configure --enable-foo argument. The LoadModule statements for modules enabled by --enable-mods-shared=most and friends will be commented out. 	r1199027
----------------------------
Remove ProxyHTMLLogVerbose in favor of trace loglevels 	r1198995
----------------------------
Fix integer overflow in ap_pregsub. This can be triggered e.g. with mod_setenvif via a malicious .htaccess CVE-2011-3607 http://www.halfdog.net/Security/2011/ApacheModSetEnvIfIntegerOverflow/ 	r1198940
----------------------------
Unify syntax of config directives taking an expression as optional contition argument 	r1197413
----------------------------
Improve handling of maxlen = APR_SIZE_MAX, noticed by Jim. Use apr_pregsub_ex() and maxlen = 0 for unlimited in mod_substitute. 	r1189985
----------------------------
Adds border, zebra striping, to IndexStyleSheet table. 	r1188475
----------------------------
Mention mod_reqtimeout in the DoS mitigation section 	r1188200
----------------------------
Unbreak AddOutputFilterByType for content types of the form text/html;charset=..., broken by r1171268. Add some trace logging 	r1187992
----------------------------
Clarify how ErrorDocument interprets argument PR: 42430 	r1187986
----------------------------
Fix 3xx responses with local URLs as ErrorDocument 	r1187985
----------------------------
Fix configuration of internal proxies PR: 49272 Submitted by: Jim Riggs <jim riggs me> 	r1185828
----------------------------
There is absolutely no reason to have two 4k-sized constant strmatch patterns in each per-dir config. 	r1183475
----------------------------
Resolve server and remote IP's in the AcceptFilter 'none' path. Lower the volume on a number of debug messages (and omit errno where we have no errno). 	r1181140
----------------------------
Remove OID match which was never in a GA releas and is obsoleted by SetEnvIfExpr with PeerExtList() 	r1180828
----------------------------
mod_mime_magic: Add signatures for PNG and SWF to the example config. PR: 48352 Submitted by: Jeremy Wagner-Kaiser <jwagner-kaiser adknowledge com> 	r1180725
----------------------------
Consistently use base 10 for numbers when parsing config options. It may be confusing to the user if some directives treat a number with leading zero as octal while most don't. 	r1180687
----------------------------
Add -D DUMP_RUN_CFG option to dump some configuration items from the parsed (or default) config. This is useful for init scripts that need to setup temporary directories and permissions, for example if those temporary directories are located on a ram disk. 	r1180681
----------------------------
Consistenly use apr_file_* API instead of libc when dumping config because mixing the two can give strange results due to buffering. 	r1180671
----------------------------
Note that hostname lookups will be performed for 'require from hostname' directives, regardless of the setting of HostnameLookups. refs https://issues.apache.org/bugzilla/show_bug.cgi?id=51967 	r1180502
----------------------------
mod_authn_socache: fix it to enable initialisation to work if configured only in .htaccess context, and provide a toggle for that. PR 51991 	r1180384
----------------------------
Downgrade error log messages which accompany a 404 request status from loglevel error to info. List thread at http://mail-archives.apache.org/mod_mbox/httpd-dev/201110.mbox/%3Calpine.DEB.2.00.1110041948280.664@eru.sfritsch.de%3E PR: 35768 	r1180328
----------------------------
Sort hooks twice, once before pre_config, once after ap_process_config_tree. This fixes a regression with perl modules introduced by r1032002 PR: 45076 Submitted by: Torsten Foertsch <torsten foertsch gmx net> 	r1180325
----------------------------
SECURITY (CVE-2011-3368): Prevent unintended pattern expansion in some * server/protocol.c (read_request_line): Send a 400 response if the request-URI does not match the grammar from RFC 2616.  This ensures the input string for RewriteRule et al really is an absolute path. Reviewed by: rpluem, wrowe, covener, fielding 	reverse
----------------------------
Add SSLCARevocationCheck directive to default mod_ssl config 	r1178695
----------------------------
Enforce LimitRequestFieldSize after multiple headers with the same name have been merged. 	r1178566
----------------------------
TODO note regarding the LimitInternalRecursion error message. 	r1178523
----------------------------
grammar fix point to SSLRequire docs 	r1178088
----------------------------
If MaxMemFree is set, set SSL_MODE_RELEASE_BUFFERS in mod_ssl. Always set SSL_MODE_RELEASE_BUFFERS in ab. PR: 51618 Submitted by: Cristian Rodríguez <crrodriguez opensuse org>, Stefan Fritsch 	r1178079
----------------------------
Clarify configuration comment. 	r1177210
----------------------------
In ssl_check_public_cert(), also take dNSNames in the subjectAltName extension into account when checking the cert against the configured ServerName. PR 32652, PR 47051. Replace SSL_X509_getCN() by SSL_X509_getIDs(), which returns an array of a cert's DNS-IDs and CN-IDs (terms as coined by RFC 6125). 	r1176752
----------------------------
Make mod_substitute more efficient: - Use varbuf resizable buffer instead of constantly allocating pool memory and copying data around. This changes the memory requirement from quadratic in ((number of substitutions in line) * (length of line)) to linear in (length of line). - Instead of copying buckets just to append a \0, use new ap_regexec_len() function PR: 50559 	r1176019
----------------------------
Final update to SSLProxyMachineCertificateChainFile 	r1175946
----------------------------
mod_ssl: - document the SSLStapling* directives (code committed in r829619 for 2.2.3, see PR 43822) - add SSLCARevocationCheck to the list of configuration changes in the 2.4 upgrade notes. 	r1173755
----------------------------
Adds some examples of using the ErrorLogFormat token handlers. Standardizes the spelling of behavio(u)r to be consistent throughout the file. 	r1173086
----------------------------
Give a slightly more direct hint when no global ServerName is set. I still think this buries the lead, but it's hard to rewrite to change the emphasis yet maintain googleability. 	r1172410
----------------------------
Rebuild mod_log_config grammar changes. 	r1172409
----------------------------
Fix cut'n'paste error: ErrorLog -> ErrorLogFormat 	r1172208
----------------------------
Log better information and prevent leak of an X509 structure for SSLProxyMachineCertificateChainFile 	r1172010
----------------------------
* Correctly obey ServerName / ServerAlias if the Host header from the request matches the VirtualHost address. PR: 51709 Submitted by: Micha Lenk <micha lenk.info> Reviewed by: rpluem 	r1172002
----------------------------
Un-deprecate AddOutputFilterByType and update docs. Its limitations have been fixed by the move to mod_filter. 	r1171273
----------------------------
Implement AddOutputFilterByType by doing strcmp()s instead of creating lots of ap_expr's. This is more efficient and fixes string escaping issues in the old code. 	r1171268
----------------------------
Modify SSLProxyMachineCertificateChainFile to use X509 instead of X509_INFO and use openssl to construct the chain 	r1170833
----------------------------
Add in MaxRangeOverlaps and MaxRangeReversals to accomodate more control over acceptable Range headers: 	r1169756
----------------------------
Fixed MaxRanges config block. 	r1169599
----------------------------
The default timeout value of 10s lives in two places, the per-server config and in this initialization. Drop the latter and check to see if a timeout is requested in the per-server config. 	r1166662
----------------------------
"take care of some MaxRanges feedback: * allow ""none"" to be expressed in config * send Accept-Ranges: none with MaxRanges none * stop accepting confusing/ambiguous ""0"", start accepting ""unlimited"". "	r1166282
----------------------------
Added MaxRanges to httpd.conf. 	r1164861
----------------------------
simple doc for MaxRanges. 	r1162587
----------------------------
add MaxRanges directive institute a default limit of 200 (post-merge where applicable) Ranges before returning the complete resource. (minor mmn bump for core_dir_config addition) 	r1162584
----------------------------
Fix the default OCSP responder timeout for client cert validation - 10 µsec is a tad too aggressive. 	r1162552
----------------------------
* Don't SEGFAULT if SSLProxyMachineCertificateChainFile is not set. Just skip the additional lookups in this case. 	r1162103
----------------------------
Add SSLProxyMachineCertificateChainFile directive and documentation for bug 50812 	r1160863
----------------------------
Adds reference to --prefix argument in ServerRoot documentation, possibly addressing some confusion for bug ID 51352 	r1160342
----------------------------
mod_cache: Ensure that CacheDisable can correctly appear within a LocationMatch. 	r1158022
----------------------------
mod_cache: Fix the moving of the CACHE filter, which erroneously stood down if the original filter was not added by configuration. 	r1157976
----------------------------
Add ap_varbuf API for resizable buffers. Increase length limit of lines in the configuration file to 16MB. Increase length limit of lines in the group file to 16MB. PR: 45888, 50824, 43084 Windows and Netware build changes are untested. 	r1157354
----------------------------
Accept LDAP_OPT_CONNECT_TIMEOUT as an alternative to LDAP_OPT_NETWORK_TIMEOUT. An alternative on at least some IBM client libraries: http://publib.boulder.ibm.com/infocenter/tivihelp/v2r1/topic/com.ibm.IBMDS.doc/progref281.htm#opttimeout 	r1157111
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLCryptoDevice): Fix double-free (and segfault) with bad arg to SSLCryptoDevice. 	r1157105
----------------------------
"* modules/proxy/config.m4: Avoid sh syntax error with autoconf 2.63, where an empty ""else"" clause gets generated from the args if present with only whitespace. "	r1157094
----------------------------
mod_ldap: remove hard-coded loops of 10 retries w/o delay with a configurable number of retries (LDAPRetries, default 3) and configurable delay between The LDAP connection is re-initted every other retry, instead of on the fifth retry -- this was a much more recent addition then the basic looping behavior. 	retries
----------------------------
"document implicit limitation in AllowOverride Option=Foo -- this doesn't let you ""lock in"" any value since the non +/- syntax can zap whatever it wants. "	r1154940
----------------------------
Prevent a crash if a non-existent internal RewriteMap is specified in a server context with RewiteEngine off, then later referenced. Submitted By: Ben Noordhuis Reviewed By: covener 	r1154808
----------------------------
Enforce OpenSSL 0.9.7 as a minimum requirement in configure, and 	remove
----------------------------
Drop support for the RSA BSAFE SSL-C toolkit from configure, and remove #ifdef'ed code from mod_ssl and ab where applicable. Consensus for dropping support for SSL/TLS toolkits other than OpenSSL was reached on dev@httpd in June 2010 (message with ID <20100602162310.GA11156@redhat.com> and follow-ups). 	r1154683
----------------------------
TRACEN loglevels are implemented in lua scripts. 	r1154354
----------------------------
change the example to work with just AddHandler/SetHandler, and mention in a comment where the non-default function name can be specified. 	r1154265
----------------------------
Forbid some directives in .htaccess because of AllowOverrideList: core:          AllowOverride, AllowOverrideList mod_authn_dbd: AuthDBDUserPWQuery, AuthDBDUserRealmQuery mod_authz_dbd: AuthzDBDQuery, AuthzDBDRedirectQuery mod_proxy:     BalancerMember, ProxySet Adjust for use in .htaccess: mod_actions:   Script 	r1153687
----------------------------
cleanups related to new AllowOverrideList functionality: - add new NOT_IN_HTACCESS flag for ap_check_cmd_context() - describe the need for this in new_api_2_4.xml - forbid Define and UnDefine in .htaccess 	r1153676
----------------------------
Restore seealso enries for AllowOverride 	r1153500
----------------------------
"mod_proxy: enable absolute URLs to be rewritten with ProxyPassReverse, e.g. to reverse proxy ""Location: https://other-internal-server/login"" with ProxyPassReverse https://public-address/ https://other-internal-server/ "	r1152273
----------------------------
Add AllowOverrideList directive and documentation 	r1151654
----------------------------
document ProxySourceAddress 	r1151484
----------------------------
"Docs for mod_allowmethods: Clarify GET and HEAD are synonymous, switch example to ""Location"". "	r1151151
----------------------------
Clarify docs for mod_allowmethods: you still need to use TraceEnable to forbid TRACE. 	r1151149
----------------------------
"mod_allowmethods: Correct Merging of ""reset"" and do not allow an empty parameter list for the AllowMethods directive. Furthermore switch from AP_MODULE_DECLARE_DATA to AP_DECLARE_MODULE (the module was brought in after the big logging refactoring). "	r1151143
----------------------------
improve (but preserve searchable parts of) the error message when Options -Indexes is about to trigger a 403 in mod_autoindex, with a pointer to mod_dir about how the DirectoryIndex might have been the real culprit. 	r1147339
----------------------------
doc for DirectoryIndexRedirect 	r1147328
----------------------------
Add a mod_dir option to allow the used DirectoryIndex to be externally redirected. 	r1147327
----------------------------
Add some environment variables to the whitelist in suexec PR: 51499 Submitted by: Graham Laverty <graham reg ca>, Stefan Fritsch 	r1146244
----------------------------
Fix regexp RewriteCond with NoCase, 	reported
----------------------------
"Allow to specify module specific custom linker flags via the MOD_XXX_LDADD variables. Use APR_ADDTO instead of APR_SETVAR or direct variable assignment. This is especially useful when building mod_lua or mod_deflate against a lua resp. libz which are installed in non-standard locations. One can add ""-R ..."" to MOD_LUA_LDADD and MOD_DEFLATE_LDADD before configure to fix the RPATH/RUNPATH of those modules. "	r1142938
----------------------------
Move PCRE_LIBS from HTTPD_LDFLAGS to PROGRAM_LDADD. Otherwise -lpcre comes before libmain which leads to undefined recences during linking of httpd. Followup to r1142739. 	r1142893
----------------------------
Tolerate dependency checking failures in configure for modules that have been enabled only implicitely. 	r1142892
----------------------------
1) Add --with-distcache to configure for choosing the distcache installation directory. 2) Use correct build variable MOD_SOCACHE_DC_LDADD instead of MOD_SOCACHE_LDADD in build macro. Also made the macro a bit more consistent with the SSL checking macro. 	r1142648
----------------------------
Support reallyall option to configure also for --enable-mods-static. 	r1142623
----------------------------
Add some docs for AsyncRequestWorkerFactor 	r1142490
----------------------------
make example config match the description; improve wording 	r1142459
----------------------------
Add support to ErrorLogFormat for logging the system unique thread id under Linux 	r1138616
----------------------------
New AsyncRequestWorkerFactor directive to influence how many connections will be accepted per process 	r1137755
----------------------------
Rename MaxClients to MaxRequestWorkers which describes more accurately what it does. 	r1137744
----------------------------
* support/rotatelogs.c (post_rotate): New function. (usage, dumpConfig): Update. (doRotate): Save old filename before rotate; call post_rotate after successful rotation. (main): Add -p argument. * docs/manual/programs/rotatelogs.xml: Document -p. PR: 51285 Submitted by: <sveniu ifi.uio.no>, jorton 	rotation.
----------------------------
Avoid unnecessary renegotiations with SSLVerifyDepth 0. PR: 48215 Submitted by: Kaspar Brand <asfbugz velox ch> 	r1137394
----------------------------
Some improvements for handling of many connections for MPM event: - Process lingering close asynchronously instead of tying up worker threads (based on patch by Jeff Trawick). - If the number of connections of a process is above (WORKER_OVERCOMMIT is fixed at 2, at the moment), or if all workers are busy, don't accept new connections in that process. Such a dynamic connection limit is necessary because we may have both async and non-async (ssl) connections. WORKER_OVERCOMMIT should be a config option. - Don't count idle workers of not-accepting processes against MinSpareThreads, so that the parent will spawn new processes when necessary. - If we receive a keep-alive request while all workers are busy, don't block but close the connection immediately so that the client will re-connect to a different process. Related changes: - Log what is going on at trace loglevels. - Remove the bypass_push poll type flag, this code cannot be hit anymore (if it ever could?). - Add some macro helpers for dealing with timeout queues. 	r1137358
----------------------------
If MaxMemFree is set, limit the number of recycled pools that is kept 	r1137262
----------------------------
Disable AECDH ciphers in example config by using !aNULL (which includes all ciphers without authentication. PR: 51363 Submitted by: Rob Stradling <rob comodo com> 	r1135234
----------------------------
Don't return an undefined value if opening of a read-only database fails. 	r1133152
----------------------------
The example configuration looks good enough to me 	r1132801
----------------------------
Make the MSIE BrowserMatch regexp fit for MSIE 10. Remove useless '.*' 	r1132793
----------------------------
Introduce ap_(get|set)_core_module_config() functions/macros and use them everywhere. We know that the core module has module_index 0. Therefore we can save some pointer operations in ap_get_module_config(cv, &core_module) and ap_set_module_config(cv, &core_module, val). As these are called rather often, this may actually have some (small) measurable effect. 	r1132781
----------------------------
TraceEnable is per-virtualhost, not just per-server. 	r1132676
----------------------------
- Introduce concept of context prefix (which is an URL prefix) and context document root (which is the file system directory that this URL prefix is mapped to). This generalization of the document root makes it easier for scripts to create self-referential URLs and to find their files. - Expose CONTEXT_DOCUMENT_ROOT and CONTEXT_PREFIX as envvars, in mod_rewrite, and in ap_expr. - Make mod_alias and mod_userdir set the context information. - Allow to override the document root on a per-request basis. This allows mass vhosting modules to set DOCUMENT_ROOT correctly. - Make mod_vhost_alias set the per-request document root PR: 26052, 46198, 49705 Remaining tasks: - Use the context document root & prefix in mod_rewrite to make RewriteBase unneccessary in many cases. Do this without breaking compatibility. - Write docs. 	r1132494
----------------------------
- Add <ElseIf> and <Else> to complement <If> sections. These are both easier to use and more efficient than using several <If> sections. - Update <If> documentation a bit. 	r1132469
----------------------------
Reorder members in core_dir_config to be more logical and efficient. MMN bump was already in r1131465 	r1131468
----------------------------
mod_ext_filter: Remove DebugLevel option in favor of per-module loglevel 	r1128732
----------------------------
"Use the new ""ap_expr"" expression parser. The old parser can still be used by setting the new directive SSILegacyExprParser "	r1128614
----------------------------
Fix config setting after r1128430 has changed some elements from int to char 	r1128557
----------------------------
properly merge directory configs in mod_include 	r1128430
----------------------------
Mention that the error log format is now configurable. 	r1127905
----------------------------
mod_charset_lite: Remove DebugLevel option in favour of per-module loglevel 	r1125843
----------------------------
Add in BalancerGrowth and its functionality... this lays the framework for adding additional Balancers: post-config by allowing for shm growth. 	r1125451
----------------------------
Correct Win64 Servername Identification PR: 47418 Submitted by: [Jorge Schrauwen <jorge.schrauwen gmail.com>] 	r1104624
----------------------------
Fix memory leak in mod_deflate.c when SetOutputFilter is enabled and DEFLATE is the first filter in the chain - this is seen with mod_dav + mod_deflate when the client can not do gzip and we constantly do the filter checks. * modules/filters/mod_deflate.c (deflate_ctx): Add a flag as to whether we are successfully initialized. (deflate_out_filter): Always create filter ctx and set filter_init flag only after we are successfully initialized. 	r1103315
----------------------------
Fix a timed out connection going into the keep-alive state after a timeout when discarding a request body. PR: 51103 	r1103213
----------------------------
"Add in new mod_proxy ""extension"" module: mod_proxy_express. This is a module developed by myself to support the RedHat OpenShift Express project, to allow for dynamic and fast reverse-proxy switching. The idea is to easily map Host: header entries to backend servers, with the mapping done in a DBM file (think of mod_vhost_alias, kinda, for mod_proxy). Yeah, mod_rewrite and RewriteMap could kinda do it but (1) that is slow and (2) no support for ProxyPassReverse capability. Donated to the ASF. "	r1102733
----------------------------
"Fix configure error when configuring module set ""reallyall"". "	r1102328
----------------------------
Silence autoconf 2.68 warnings. Add AC_LANG_SOURCE to the two occurences of AC_COMPILE_IFELSE in configure.in. 	r1101216
----------------------------
Follow on to 1057048: In the map of active workers, don't print spaces for scoreboard slots which aren't used due to ThreadsPerChild < ThreadLimit or MaxClients/ThreadsPerChild < ServerLimit; simply omit those slots from the display.  Workers in those slots which are gracefully exiting (from a previous generation with a different MPM config) will be displayed, and the map will shrink as those workers exit. 	r1097070
----------------------------
mod_ldap: Make LDAPSharedCacheSize 0 create a non-shared-memory cache per process as opposed to disabling caching completely. This allows to use the non-shared-memory cache as a workaround for the shared memory cache not being available during graceful restarts PR: 48958 	r1096577
----------------------------
Report filename and line number in config warning 	r1096551
----------------------------
The pre_config hook should return int, not apr_status_t. 	r1095213
----------------------------
Whether it's intentional or not, the hostname/domainname argument to the RewriteRule CO flag is in fact required. Cookies are not set without it. (via Matthew Sporleder) 	r1092797
----------------------------
AP_ENABLE_V4_MAPPED with WinNT MPM mpm_winnt.c: Fail to compile if enabled, and add a hint about the configure.in: Move the --enable-v4-mapped check to below the 	r1091467
----------------------------
core: Support module names with colons in loglevel configuration. Submitted by: Torsten Förtsch <torsten foertsch gmx net> 	r1090369
----------------------------
Remove unnecessary .* from regex, as noted in http://stackoverflow.com/questions/5587148/regex-patterns-in-apache-rewritecond-and-friends-full-or-partial-match 	r1090255
----------------------------
*) mod_proxy_ajp: Add support for 'ProxyErrorOverride on'. PR 50945. 	r1087864
----------------------------
*) mod_proxy_fcgi: Add support for 'ProxyErrorOverride on' PR 50913. 	r1087863
----------------------------
"If we change the LB method, or we take add in a new balancermember (""enable"" her), then we need to have the LBmethod reset its params as required... "	r1087371
----------------------------
Add in a configuration generation... this is independent of MPM gen, just in case we ever switch MPMs at a graceful ;) 	r1087331
----------------------------
Add PR reference and docs for -DDUMP_CONFIG 	r1086771
----------------------------
Change the ap_cfg_getline() and ap_cfg_getc() to return an error code. Also: - Make ap_cfg_getline() return APR_ENOSPC if a config line is too long. - Add ap_pcfg_strerror() function to convert ap_cfg_getline's return value into a nice message. - Adjust definition of ap_configfile_t accordingly. Not bumping MMN because it has already been bumped today. 	r1086756
----------------------------
mod_info: Dump config to stdout during startup if -DDUMP_CONFIG is specified. This functionality should probably be moved into core, but for now it's a lot better than nothing. And it may even help me debug some other config related code. 	r1086441
----------------------------
add event MPM to the module list where necessary (most directives documented here) add mpmt_os2 to the list for ThreadStackSize 	remove
----------------------------
"match docs for case of ""ScoreBoardFile"" "	r1086297
----------------------------
mpm_common.c implements a handful of config directives; the at pre-config time, but that was handled inconsistently by the MPMs, resulting in unexpected behavior when some of the directives were removed across restart move that necessary initialization from the MPMs to common code run from core's pre-config; MPMs that need to override defaults can do so by running after core's pre-config (the NetWare MPM now does that) the DEFAULT_MAX_REQUESTS_PER_CHILD compile setting wasn't useful enough to keep the simple MPM wasn't consistent in which of these directives were respected and which weren't, and that hasn't changed (see procmgr.max_requests_per_child vs. ap_max_requests_per_child) 	related
----------------------------
ap_max_requests_per_child is a global (otherwise, this local one doesn't match the one used by the OS/2 child code or the MaxConnectionsPerChild directive) 	r1086246
----------------------------
consolidate logic to remove the pidfile in a new API, ap_remove_pid(), related to existing ap_log_pid() and ap_read_pid() presumably this is useful to third-party MPMs as well 	r1086224
----------------------------
Added copy rule for creating include/ap_config_layout.h. 	r1086122
----------------------------
enable DEFAULT_REL_RUNTIMEDIR on NetWare and Windows this commit is missing the Windows and NetWare build logic to copy the appropriate file to include/ap_config_layout.h 	r1086073
----------------------------
Add the WebP and webfont media types (that have not been registered by the same WHATWG idiots who regularly complain about servers not being configured correctly for mime types). PR: 50624 	r1085522
----------------------------
Add the WebM media types (that have not been registered by the same WHATWG idiots who regularly complain about servers not being configured correctly for mime types). PR: 50624 	r1085507
----------------------------
"core: AllowEncodedSlashes new option NoDecode to allow encoded slashes in request URL path info but not decode them. Change behavior of option ""On"" to decode the encoded slashes as 2.0 and 2.2 do.  PR 35256, PR 46830. "	r1082196
----------------------------
More professional phrasing of DirectorySlash description. 	r1081659
----------------------------
doc for r1081007, LDAPConnectionPoolTTL 	r1081008
----------------------------
*) mod_ldap: Add LDAPConnectionPoolTTL to give control over lifetime 	r1081007
----------------------------
mod_cache: Make CacheEnable and CacheDisable configurable per directory in addition to per server, making them work from within a LocationMatch. 	r1080834
----------------------------
Moves the DocumentRoot declaration down to immediately above the <Directory $document_root> block, so that they are clearly related to one another, rather than having to have the comment referring back up 20 lines. 	r1080291
----------------------------
igalic reminded me that AllowOverride now defaults to none, and Options now defaults to FollowSymlinks, so simplify this entire section and thus 	reduce
----------------------------
Warn the server admin not to relax the security of <Directory /> 	r1080111
----------------------------
Adds the simplified chinese translation to the default manual configuration file. 	r1080109
----------------------------
worker, event, prefork: Correct several issues when built as DSOs; most notably, the scoreboard was reinitialized during graceful observable. Other noticeable ones: * the generation number did not increment properly * worker's check-config hook didn't detect startup properly, so messages about inconsistent directives could have been sent to the wrong place max_daemons_limit wasn't tracked across restart, but as the scoreboard was always cleared this was a non-issue. Reinitialization of idle_spawn_rate, hold_off_on_exponential_spawning, and maxclients-message-reported may or may not have been features, but the big picture is that the behaviour shouldn't have differed. These changes should have been part of r758185. 	restart,
----------------------------
Actually check for APU_HAVE_CRYPTO at configure time.  This fixes a compile error with apr 2 if crypto is disabled. 	r1072155
----------------------------
Use ap_state_query() to fix many modules that were not correctly initializing if they were not active during server startup but got enabled later during a graceful restart (in which case they need to do all work during a single config run). 	r1070153
----------------------------
Create new ap_state_query() function that allows modules to determine if the current configuration run is the initial one at server startup, and if the server is started for testing/config dumping only. 	r1070151
----------------------------
"Log something nicer than ""Internal error: pcfg_openfile() called with NULL filename"" if no password file is configured "	r1070096
----------------------------
"* modules/ssl/ssl_engine_pphrase.c (ssl_pphrase_Handle): Fix possible startup failure in cases where multiple vhosts share the same ""vhost-id"" and private key file.  The cached-key case would previously cause an abrupt return from the function, which could prevent processing of configured keypairs for other vhosts.  There is no apparent reason to check for a ""cache hit"" against cached keys using *any* algorithm types; instead only check against a key with the matching type. Submitted by: Masahiro Matsuya <matsuya redhat.com>, jorton "	r1069772
----------------------------
Expose this as part of the API. That way, other code/modules which want to overload mod_proxy's trans phase can use it to handle ProxyPass as well, without requiring monkeying with conf->aliases... 	r1068400
----------------------------
Optimize memory access pattern of ap_merge_per_dir_configs() According to Linux perf, this is twice as fast as the old loop. 	r1066869
----------------------------
We can now change lbmethod at runtime. Provide a stub for other balancer-related params to be adjusted as well, like timeout, sticky, etc... 	r1066076
----------------------------
the comparison string has been decoded for rewriterule comparison.  PR50653 	r1063587
----------------------------
Mark some modules/directives non-experimental: - BufferedLogs and mod_substitute have been around a long time - mod_reqtimeout has stabilized as well 	r1062989
----------------------------
* Only unset if we have a table. This can happen if undefine occurs before define. 	r1061669
----------------------------
Add support to set variables with the 'Define' directive. Change ap_resolve_env() to look for variables defined in this way. This allows to use the variables in the config using the ${VAR} syntax known from envvar interpolation 	r1061465
----------------------------
Add a patch from Vincent Deffontaines to make the adding of X-forwarded-* headers configurable: ProxyAddHeaders, defaulting to 'On'. http://www.mail-archive.com/dev@httpd.apache.org/msg49971.html 	r1060795
----------------------------
Initialize the core_dir_config->sec_files and ->sec_if only if needed. This saves some memory and two apr_array_append()s per directory merge. 	r1060283
----------------------------
Check for s->module_config before using it, as the faked server_rec from mod_cgid does not have it. 	r1060245
----------------------------
Fix segfault for loglevel >= trace2 	r1060072
----------------------------
* modules/ssl/ssl_engine_config.c, modules/ssl/ssl_private.h: Add config hooks for OCSP response time skew, maximum age, timeout. * modules/ssl/ssl_engine_ocsp.c (verify_ocsp_status): Respect config settings for above. * docs/: Update accordingly. Submitted by: Kaspar Brand <httpd-dev.2011 velox.ch> 	r1059917
----------------------------
Merge the <If> sections in a separate step ap_if_walk, after ap_location_walk. This makes <If> apply to all requests, not only to file base requests and it allows to use <If> inside <Directory>, <Location>, and <Files> sections. The merging of <If> sections always happens after the merging of <Location> sections, even if the <If> section is embedded inside a <Directory> or <Files> section. 	r1059867
----------------------------
Provide the IndexIgnore example that's in the httpd-autoindex config file in extras. 	r1059562
----------------------------
config: report error and exit cleanly if getaddrinfo fails at startup PR: 50592 	r1059472
----------------------------
Provides an example of using expr in a RewriteCond for a commonly-requested recipe. 	r1059058
----------------------------
Remove NameVirtualHost, as it causes a startup warning. 	r1059054
----------------------------
warn about FAQ of trying to decrease thread stack size with ThreadStackSize on Linux. 	r1057049
----------------------------
Fix ap_mpm_query results: AP_MPMQ_MAX_THREADS: Single threaded means one thread per child, not zero AP_MPMQ_MAX_DAEMONS: Max # daemons by config is determined by MaxClients, not 	r1057045
----------------------------
Don't log AuthMerging XXX as <RequireXXX> 	r1056717
----------------------------
clarify RewriteBase as action for closed PR50546 	r1055710
----------------------------
Add some weasel language, and a warning about Windows + TransmitFile, to the SendBufferSize doc. 	r1055701
----------------------------
PR#44838: be more up front with how the per-dir RewriteRule comparison is the filesystem path minus the Directory the rules were listed in. 	r1055671
----------------------------
"Change AuthnCacheProvider --> AuthnCacheProvideFor to deal with overloading of ""provider"" and likely confusion with AuthnCacheSOCache. "	r1055447
----------------------------
Change the format of the SSL_{CLIENT,SERVER}_{I,S}_DN variables to be RFC 2253 compatible, convert non-ASCII characters to UTF8, and escape other special characters with backslashes. The old format can still be used with the LegacyDNStringFormat argument to SSLOptions. 	r1054323
----------------------------
fix short description for usecanonicalphysicalport directive 	r1054295
----------------------------
Allow to use arbitrary boolean expressions (ap_expr) in RewriteCond. 	r1053750
----------------------------
Doc for r1053230, NameVirtualHost is now unnecessary and other general NVH-vs-VH improvements. 	r1053231
----------------------------
Remove need for NameVirtualHost directive by implicitly configuring any duplicated VH addresses as name-based virtual hosts.  This also combines _default_ and * into a single type of wildcard since these presented a false dichotomy between address specs. These are post-config only changes and do not change the runtime lookups. The biggest loss here is that an unintended duplication of virtual host addresses can no longer be reported as directly in the past, but should still be debuggabl via apachectl -S (unintended NVH).  These problems are a drop in the bucket compared to the difficulty users have with using NameVirtualHost. 	r1053230
----------------------------
provide a mod_substitute example that uses backreferences for matching as well as for substitution. 	r1053212
----------------------------
Remove unnecessary trailing / on <Directory /home> example. tid50421 	r1053149
----------------------------
The alias_set variable is set when a parent location contains a ProxyPass, so this check catches valid ProxyPasses. Remove the check. 	r1051628
----------------------------
add security warning about the new AuthzSendForbiddenOnFailure directive. 	r1050700
----------------------------
Add new AuthzSendForbiddenOnFailure directive to allow sending '403 FORBIDDEN' instead of '401 UNAUTHORIZED' if authorization fails for an authenticated user PR: 40721 	r1050677
----------------------------
"Removes the "":80"" from the sole ServerName example of the documentation, as it is a dumb ""default"". "	r1049240
----------------------------
fix compatibility info for ChrootDir 	r1045321
----------------------------
update metafiles 	r1044537
----------------------------
PR50349: Honor 'AcceptPathInfo OFF' during internal redirects, such as per-directory mod_rewrite substitutions.   This would be left floating around in the request_rec with a pcalloc'ed value, so the core fixup hook thought some module had overridden it. 	r1043023
----------------------------
Use example domains, rather than real ones. Replace use of TransferLog with recommended CustomLog directive. 	r1043011
----------------------------
PR 39313: allow the user to configure which rules come first when RewriteRules are merged with RewriteOptions Inherit. Submitted By: Jérôme Grandjanny <jerome.grandjanny cea.fr> Reviewed By: covener 	r1042255
----------------------------
add compatability to IndexIgnoreReset 	r1042242
----------------------------
PR#24243: allow some control over how IndexIgnore'd files are merged. 	r1042209
----------------------------
simplify ServerName check with apr_fnmatch_test() 	r1042157
----------------------------
core: Fail startup when the argument to ServerName looks like a glob or a regular expression instead of a hostname (*?[]).  PR 39863 Submitted By: Rahul Nair <rahul.g.nair gmail.com> Reviewed By: covener 	r1042098
----------------------------
"PR44076: allow ""userdir disabled"" or ""userdir public_html"" in global scope to be merged with lists of enabled users in virtual host context as one would expect. "	r1042090
----------------------------
mention FallbackResource in URL mapping 	r1041851
----------------------------
PR50375: <Location> has bad example in sections.xml and never actually explains what's matched in core.xml. 	r1040808
----------------------------
Missing directives in various translations of the mod_setenvif documentation. 	r1040498
----------------------------
PR50376 clarify that <Directory> applies to the files under the Directory, not just the directories themselves. 	r1040494
----------------------------
PR50350: When no -k option is provided on the httpd command line, the server was starting without checking for an existing pidfile. 	r1039989
----------------------------
Fix SetEnvIfExpr to work with expressions that do not set the regexp Add some trace logging. 	reference
----------------------------
Add missing directive to Korean translation of mod_log_config documentation. 	r1039612
----------------------------
Adds missing IndexHeadInsert directive to Korean documentation. 	r1039510
----------------------------
Clarifying sub-URI behaviour of FallbackResource 	r1039209
----------------------------
"suExec not allowing scripts to run as root is permanent, removing ""Presently"". Porting this to the .fr doc. "	r1038591
----------------------------
More ap_expr updates: - minor bump for ap_expr_exec_re() introduced in r1037504 - actually commit the changes to allow using backreferences in SetEnvIfExpr - automatically add the correct entries to the Vary-header if the result of an expression evaluation depends on a request header (can be turned off by setting the AP_EXPR_FLAGS_DONT_VARY flag) - set AP_EXPR_FLAGS_DONT_VARY in mod_log_config's conditional logging - fix various off-by-one errors in req_table_func 	r1037540
----------------------------
ap_expr related fixes/enhancements: - implement regex backreferences and make them available for setting envvars in SetEnvIfExpr - implement nested function calls in %-syntax: %{func1:%{func2:arg}} - actually implement evaluation of concatenation operator (oops...) - Fix <If ... > treating an internal error as success 	r1037504
----------------------------
Adding SetEnvIfExpr documentation, and more references to expr.html 	r1037339
----------------------------
Add SetEnvIfExpr directive to set env var depending on expression. 	r1037137
----------------------------
mod_proxy: Fix ProxyPassInterpolateEnv directive. PR: 50292 	r1036602
----------------------------
Add ProxyPassReverse to the examples in the mod_proxy_balancer docs. 	r1033621
----------------------------
When restarting, reset ap_server_config_defines to what was set on the command line. This makes the result more predictable for the user and resolves some string lifetime issues in the implementation of set_define/unset_define. 	r1033619
----------------------------
suEXEC: Add Suexec directive to disable suEXEC without renaming the binary (Suexec Off), or force startup failure if suEXEC is required but not supported (Suexec On).  Change SuexecUserGroup to fail startup instead of just printing a warning if suEXEC is disabled. Additionally, ap_unixd_config.suexec_disabled_reason has a message, suitable for logging/messaging, explaining why the feature isn't available. 	r1033519
----------------------------
* Fix parameter name as new is a reserved word in C++ which makes compiling of http_config.h with C++ impossible. PR: 50243 	r1033427
----------------------------
Remove out-of-date details about which modules are enabled by default from the documentation, in favor of suggesting getting the up-to-date information by running ./configure -h. The special cases previously documented here (such as, this module depends on this other module, or you probably don't want this module unless you're a developer), have had that information added to the output of configure -h in r1029814. 	r1033032
----------------------------
follow up to r1031659: fix a remaining reference to the old non-zero default for MaxConnectionsPerChild for most MPMs 	r1032706
----------------------------
Note that CRL-querying browsers can have problems with low header timeouts. Add another expamle config. 	r1032695
----------------------------
mod_rewrite: Fix the RewriteEngine directive to work within a location. Previously, once RewriteEngine was switched on globally, it was impossible to switch off. 	r1032431
----------------------------
add support for trace loglevels in mod_lua 	r1032084
----------------------------
Fix hook sorting for the pre_config hook. Move modules/http/config2.m4 back to modules/http/config.m4, since this was only done as work-around in r88887 for the broken hook-sorting. 	r1032002
----------------------------
correction to r1031776, retain OR_UNSET with default AllowOverride None 	r1031794
----------------------------
PR49823: Make the hardcoded default for AllowOverride match the default config -- None. 	r1031776
----------------------------
PR47765: leave a hint about ProxyPass and ProxyPassReverse not working in Directory and Files sections. 	r1031762
----------------------------
PR47765: ProxyPass and ProxyPassReverse should not be accepted in Directory or Files sections. 	r1031758
----------------------------
PR#48720: SSLProxyVerify is not per-directory, only per-server. 	r1031742
----------------------------
PR47782: On trunk, the default conf and the hard-coded default are zero for MaxConnectionsPerChild 	r1031659
----------------------------
PR#47782: compiled-in default for MaxConnectionsPerChild is 10,000 vs the Principle of least astonishment says to use a baked-in value of zero until an admin asks for processes to exit this way. 	recommendations
----------------------------
PR#29538: ErrorLog syslog facility can't be changed per-virtualhost. 	r1031579
----------------------------
PR#44758: document LimitRequestBody vs. proxy 	r1031564
----------------------------
"PR#47348: missing ""response"" the ProxyBadHeader description, and drive home with  ...from the origin server. "	r1031428
----------------------------
PR#40831: empty-valued keys behave like missing keys in a RewriteMap lookup. 	r1031338
----------------------------
Add some more cross-references related to the protocol argument for Listen and AcceptFilter, as suggested by Otmar Lendl.  PR45286 	r1031215
----------------------------
"Clarify that the ""www.example.com"" is in the ServerName directive in the first example.  Reported by Charles Merriam.  PR49611 "	r1031197
----------------------------
Explain that Options [+-]?Multiviews doesn't make any sense anywhere outside <Directory> 	r1031111
----------------------------
"PR#50174: don't offer 120ms as a ""typical"" TCP keepalive frequency.  Initial keepalive timers can be as high as 2 hours (windows/linux/solars defaults via google). Drive home the idea that users need to figure out their OS and Firewall timers and make the former smaller than th elatter. "	r1031062
----------------------------
Be more forceful in talking about where SSLEngine On should go. 	r1031061
----------------------------
PR45017: document obscure GprofDir directive 	r1031055
----------------------------
Note that RewriteOptions inherit causes parent rules to be applied AFTER child scope rules. PR46399 	r1031046
----------------------------
PR#47935 some people think s/except/unless makes this somewhat contrived RewriteCond example clearer. 	r1031038
----------------------------
Porting previous commit on 2.2 doc, with a not about why .htaccess is bad when you have access to main server config. 	r1030041
----------------------------
Warning in configure -h that mod_dumpio was only for developers and testing was erroneous. 	r1029931
----------------------------
Add to modules' help text (displayed by ./configure -h) more information that will be useful in deciding whether to enable them or not. 	r1029814
----------------------------
Fix regex in AliasMatch example.  Thanks to Felix Schaefer for report and fix.  PR47722. 	r1029715
----------------------------
LogLevel should specify a global log level as well as the per-module loglevel. 	r1029689
----------------------------
"Clarify - say ""suEXEC wrapper"" instead of ""this program"". Reported by James Tanit.  PR48632. "	r1029136
----------------------------
Add an END flag to RewriteRule that acts like L=LAST but also prevents further rounds of rewrite processing due to per-directory substitutions. 	r1028778
----------------------------
Add link to mod_log_config and BufferedLogs, as per https://issues.apache.org/bugzilla/show_bug.cgi?id=50110 	r1028766
----------------------------
Did the mod_usertrack docs. Would like to do a howto style writeup of the multi-daemon secure mod_dav configuration. 	r1027131
----------------------------
Consistently use loglevel emerg before ssl_die() 	r1026903
----------------------------
mod_disk_cache: Make sure we step down cleanly when we've ben configured to cache but haven't set a CacheRoot. 	r1026612
----------------------------
mod_proxy: Optimise ProxyPass within a Location so that it is stored per-directory, and chosen during the location walk. Make ProxyPass work correctly from within a LocationMatch. 	r1026184
----------------------------
Update a per-dir example that's meant to show looping and the L flag. * add a RewriteBase * REQUEST_URI doesn't have the RewriteBase stripped from it, so fix the test comparison. * rewrite to absolute URI and use PT flag so the rule is somewhat applicable to per-vh context 	r1025748
----------------------------
Be extra careful to only pass the main server config to ap_find_loaded_module_symbol. Fixes a segfault when using per-module LogLevel on virtual host scope. PR: 50117 	r1025702
----------------------------
mod_proxy: Move the ProxyErrorOverride directive to have per directory scope. 	r1025666
----------------------------
Set the LogLevel of a newly initialized virtual hosts to UNSET. Otherwise it will not be correctly merged in ap_fixup_virtual_hosts(). 	r1024427
----------------------------
Add teensy clarification to the introductory paragraph for the ServerName directive. 	r1023846
----------------------------
AllowCONNECT has been moved from mod_proxy to mod_proxy_connect. Remove obsolete and broken link. Directive is already documented on this page. 	r1023789
----------------------------
Optimise the configuration structures for mod_disk_cache. 	r1023528
----------------------------
Optimise the configuration structures for mod_cache. 	r1023526
----------------------------
new features list: - add mod_allowmethods to new features - remove mpm_simple, it won't be ready in time for 2.4 	r1023238
----------------------------
Build mod_allowmethods (windows and netware stuff needs to be tested). Change method bit vector to 64 bits 	r1023232
----------------------------
core: Log a warning if <Limit> or <LimitExcept> are used. They are deprecated and may go away in 2.4. 	r1023227
----------------------------
Rename MaxRequestsPerChild to MaxConnectionsPerChild, which describes more accurately what the directive does. The old name still works but logs a warning. 	r1021924
----------------------------
improve docs for ap_errorlog_handler and ap_errorlog_info 	r1021902
----------------------------
mod_cache: Optionally serve stale data when a revalidation returns a 5xx response, controlled by the CacheStaleOnError directive. 	r1021546
----------------------------
Fix the lookup of the per-directory cache config, we were looking up the per-server config instead. 	r1021543
----------------------------
Caution against using non-regex ProxyPass inside of a <LocationMatch> container. PR#50048 Submitted By: Luke Meyer Reviewed By: Eric Covener 	r1021468
----------------------------
Mention that the required ThreadStackSize depends on the modules loaded. Instead of recommending a value, recommend not to reduce it unless necessary. 	r1005973
----------------------------
Document that a ThreadStackSize of 128K or lower will crash on Linux and 	recommend
----------------------------
add %v and %V to ErrorLogFormat 	r1005208
----------------------------
First undefine before define; Watcom does not redefine. 	r1004518
----------------------------
mod_cache: Allow control over the base URL of reverse proxied requests using the CacheKeyBaseURL directive, so that the cache key can be calculated from the endpoint URL instead of the server URL. 	r1003963
----------------------------
mod_cache: CacheLastModifiedFactor, CacheStoreNoStore, CacheStorePrivate, CacheStoreExpired, CacheIgnoreNoLastMod, CacheDefaultExpire, CacheMinExpire and CacheMaxExpire can be set per directory/location. 	r1003882
----------------------------
mod_disk_cache: CacheMaxFileSize, CacheMinFileSize, CacheReadSize and CacheReadTime can be set per directory/location. 	r1003839
----------------------------
Use ptemp in some places to save some memory when parsing included config files 	r1003809
----------------------------
core: Speed up config parsing if using a very large number of config files PR: 50002 Submitted by: andrew cloudaccess net 	r1003808
----------------------------
Fix CVE-2010-1623 in mod_reqtimeout, too. It includes a non-blocking variant of apr_brigade_split_line(). 	r1003626
----------------------------
Add authz providers for use with mod_authz_core and its RequireAny/RequireAll containers: 'ssl' (equivalent to SSLRequireSSL) 'ssl-verify-client' (for use with 'SSLVerifyClient optional') 'ssl-require' (expressions with same syntax as SSLRequire) We may decide to axe 'ssl-require' again in favor of the generic 'expr' provider, depending on the development of the ap_expr parser. 	r1002837
----------------------------
"Add ""IN"" operator to expression parser, to evaluate membership of a list of tokens.  Couldn't resist after sf's comment on r1002363! This means expressions like <If %{REQUEST_METHOD} IN GET,HEAD,OPTIONS,...> will work as a drop-in substitute for <Limit> Also fix off-by-one bug in variable evaluation "	r1002415
----------------------------
A few minor nitpicks. Removal of a double negative. Alteration of example using AllowOverride All in <Directory /> to use something less awful. 	r1002119
----------------------------
In ErrorLogFormat, make it possible to log an item only if the loglevel of the message is higher than a specified value. This allows to achive the old behaviour for the source file name/line number of being only logged for debug and higher. 	r1001381
----------------------------
Add 'local' authz provider that matches connections originating on the local host.  PR 19938. Also remove some cruft from mod_authz_host (we don't need a per-dir config) 	r1001207
----------------------------
Fix crash accessing pollset on worker thread when child process is exiting. The timeout mutex and pollset were allocated from the listener thread pool.  During child process shutdown, the listener thread exits first while any outstanding requests finish.  These objects need to be allocated from pchild since the lifetime extends until the last worker thread has finished. Switch to pchild, and move init of these objects to the same place as other thread-independent objects. 	r1000814
----------------------------
"- add blocker for GA: review example config - remove old votes: * ""what to do if parent dies"" went nowhere after many years * we now have event MPM as default "	r1000144
----------------------------
Revert breakage in 2.2.4 introduced in r450055, by offering a CacheStoreExpired directive to allow the user to override this questionable change. 	r1000106
----------------------------
Add descriptions of the new RewriteCond test flags, -L, -h, and the new >= and <= syntax, added by wrowe in r997553. 	r999383
----------------------------
* LimitRequestBody does not affect Proxy requests (Should it?). Let it take effect if we decide to store the body in a temporary file on disk. 	r999288
----------------------------
Allow authz providers to check args while reading the config and allow them to cache parsed args. Use this to check that argument to 'all' provider is 'granted' or 'denied'. 	r998706
----------------------------
Explanation on how to prioritize mime-types on the serverside with AddType. 	r998553
----------------------------
Introduce integer comparison support in RewriteCond The operators -gt, -ge, -eq, -le, -lt and -ne follow the bash test' semantics for comparing the integer values of the lhs and rhs expressions, as opposed to the string evaluations performed by > >= = <= and <. Note that -lt and -le overlap the existing -l test, and could be confused in expresions such as -ltestfile - to avoid this conflict use -L or -h in place of the legacy -l file symlink test operator. 	r997878
----------------------------
"mod_cache: Change the signature of the store_body() provider function within the mod_cache provider interface to support an ""in"" brigade and an ""out"" brigade instead of just a single input brigade. This gives a cache provider the option to consume only part of the brigade passed to it, rather than the whole brigade as was required before. This fixes an out of memory and a request timeout condition that would occur when the original document was a large file. Update the mod_disk_cache provider implementation to take into account the new API. Introduce CacheReadSize and CacheReadTime directives to mod_disk_cache to control the amount of data to attempt to cache before sending the data on to the client in the ""out"" brigade. "	r996395
----------------------------
add errorlog formats for request notes and env vars 	r996307
----------------------------
Further clarification of SuppressHTMLPreamble + ReadmeName behavior. 	r995838
----------------------------
- Add another check during ErrorLogFormat parsing - Simplify code (including Ruediger's suggestions) 	r993120
----------------------------
Add ErrorLogFormat directive for configuring the error log format, including additional information that is logged once per connection or request. Add error log IDs for connections and request to allow correlating error log lines and the corresponding access log entry. 	r992806
----------------------------
mod_cache: Use a proper filter context to hold filter data instead of misusing the per-request configuration. Fixes a segfault on trunk when the normal handler is used. 	r992614
----------------------------
mod_cgid: Log a warning if the ScriptSock path is truncated because it is too long. PR 49388 	r992583
----------------------------
Fail startup for vhost configuration problems, rather than 	running
----------------------------
Support large log files in suexec PR: 45856 	r987861
----------------------------
"Change behaviour of worker sharing. A proxy worker is shared, if its URL is a leading substring of the URL of another worker defined later in the configuration. Before this change this - triggered the ""worker ... already used by another worker"" message - resulted in a hard to understand configuration for this worker - Attributes explicitely given in the later worker overwrote - General proxy attributes (e.g. ProxyTimeout ) overwrote New behaviour: - Talk about ""sharing"" of workers and log both worker URLs in the info log message instead of the ""already used"" message - Do not overwrite attributes. If attributes were explicitely given in the later worker, log a warning that those are ignored because of sharing. "	r987854
----------------------------
For NameVirtualHost, specify which vhost is the default if no match is found. For ServerName, copy information about how multiple occurrences are handled from the vhost doc. 	r987251
----------------------------
[PT] is implied in per-dir context. (Also, FallbackResource is backported in 2.2.16) 	r983728
----------------------------
With -S, show ServerAlias values that go with the virtual hosts 	r982629
----------------------------
Add mod_proxy_scgi to default configuration for installation on Windows (comented). 	r981059
----------------------------
"Adding sub second timestamps and request end time to mod_log_config. Add special format tokens to %{...}t. The extended syntax allows the form: ""WHICH:WHAT"". WHICH is either: - ""begin"": use the time when the request started - ""end"": take ""now"" as the time You can omit WHICH, default is ""begin"". If you omit WHICH, the separating column is not allowed. WHAT is either: - ""sec"": timestamp in Unix seconds - ""msec"": timestamp in Unix milliseconds - ""msec_frac"": millisecond fraction of the Unix timestamp, - ""usec"": timestamp in Unix microseconds - ""usec_frac"": microsecond fraction of the Unix timestamp - anything different from those tokens: use strftime() You can omit WHAT, default is the formatted timestamp as used by the Common Log Format. The implementation uses a new request_config for mod_log_config to pass the request end time around between different calls to log formatters, but the end time is only generated if needed. "	r979120
----------------------------
Update documentation for AddOutputFilterByType move 	r966890
----------------------------
Support multiple names in reimplemented AddOutputFilterByType 	r966881
----------------------------
Move AddOutputFilterByType implementation from core to mod_filter. 	r966869
----------------------------
Fixes a non-working example in the int RewriteMap section. 	r966346
----------------------------
Update SSL cipher suite and add example for SSLHonorCipherOrder. 	r966160
----------------------------
Fix up some SSL configuration, per issue #49484. IE6 had a hotfix released for this problem quite a while back (see kb 921090), so restrict the modified behavior to the old/unsupported browsers. * docs/conf/extra/http-ssl.conf.in: (): tighten up the regex to only select old MSIE browsers for the 	r966055
----------------------------
Enable SetEnv to set PATH PR 43906 	r965679
----------------------------
Added http_config.h to make APLOG_USE_MODULE macro visible. 	r965325
----------------------------
authn_socache: if loaded but not configured to do anything, don't go to the trouble of setting up the cache and mutex. 	r959460
----------------------------
OS/2: Add support for ThreadStackSize. 	r956863
----------------------------
- Add reallyall option to configure to build everything that can be built with the available libs. - Remove redundant --with-distcache option. Simply enable distcache if mod_socache_dc is selected. - Enable serf support by default if serf is available in /usr. 	r956221
----------------------------
Add a configuration block for Event MPM. Event is now the default MPM for many platforms, so we should provide an explicit configuration. Discussion for good values to follow. 	r955033
----------------------------
Change log_error_core to prefer s over c->base_server for loglevel configuration. 	r954976
----------------------------
"Update comment about required modules in extra configuration files. Mostly adding the information to the vhost and ssl files, and adding mod_authz_core and mod_authz_host (for ""Require all denied"" and ""Require all granted"") where needed. "	r954816
----------------------------
"Fix IfModule in default configuration according the to new mod_unixd. ""User"" and ""Group"" are no longer implemented in the MPMs. "	r954808
----------------------------
"The directives ""User"", ""Group"" and ""ChrootDir"" have been moved into mod_unixd. The old macro UNIX_DAEMON_COMMANDS is no longer in use. "	r954783
----------------------------
Use the correct loglevel checks in the wrappers for ap_log_cerror/ap_log_rerror. This fixes per-dir loglevel configuration for loglevels > notice. 	r954188
----------------------------
"Run filter ""init"" functions exactly once per request.  No longer run init functions for connection filters (doing an ""init"" once per handler invocation makes no sense for a connection filter).  No longer * include/util_filter.h (ap_filter_rec_t): Clarify use of the init function pointer. * server/config.c (invoke_filter_init): Drop ap_ prefix for private function; take a request_rec pointer and only invoke filters with matching request. (ap_invoke_handler): Adjust accordingly. PR: 49328 Reviewed by: rpluem "	run
----------------------------
Fix ap_log_perror macro in case of C99 compilation with APLOG_MAX_LOGLEVEL defined. 	r953248
----------------------------
It causes build problems on Windows and the ap_log* calls in main.c don't profit from it anyway, because there is no server_rec yet where they could look up core_module's loglevel. 	remove
----------------------------
Replace LogLevelDebugDump with TRACE log levels 	r951904
----------------------------
Replace RewriteLog/RewriteLogLevel with trace log levels 	r951903
----------------------------
Replace DumpIOLogLevel with trace log levels 	r951902
----------------------------
Update LogLevel docs 	r951901
----------------------------
- Add loglevels to request_rec and conn_rec - Introduce per-directory loglevel configuration 	r951897
----------------------------
Use new loglevel accessor macros to simplify code 	r951896
----------------------------
Use the new APLOG_USE_MODULE/AP_DECLARE_MODULE macros everywhere to take advantage of per-module loglevels 	r951895
----------------------------
Fix some modules to make them compile with per-module loglevels. 	r951894
----------------------------
- Introduce log levels trace1/.../trace8 - Add macro wrappers for ap_log_*error. On C99, this will save argument preparation and function call overhead when a message is not logged because of the configured loglevel. - Introduce per-module loglevel configuration. 	r951893
----------------------------
Fix lookup of apu-config for VPATH builds For included APU, apu-config is not in the srcdir but instead in the builddir. That only matters for VPATH builds, ie. when you build outside of the source tree. Similar to r951769 (apr-config). 	r951865
----------------------------
For included APR, apr-config is not in the srcdir but instead in the builddir. That only matters for VPATH builds, ie. when you build outside of the source tree. 	r951769
----------------------------
when we actually get a per-server config in a vhost, the shared memory cache was not in the merged config. 	r951235
----------------------------
Remove loglevel entry in core_dir_config, which has been unused for at least some years. 	r951191
----------------------------
mod_authnz_ldap: Search or Comparison during authorization phase can use the credentials from the authentication phase (AuthLDAPSearchAsUSer,AuthLDAPCompareAsUser). PR 48340 Submitted by: Domenico Rotiroti, Eric Covener Reviewed by: Eric Covener 	r950248
----------------------------
Allow mod_authnz_ldap to set environment variables when it only performs authorization. AuthLDAPAuthorizePrefix can be used to force this to overlap with the prefix used for authentication. PR 45584 	r949336
----------------------------
Completes the rewrite of the RewriteMap documentation. Examples for all the various map types, and an overhaul from a grammar perspective. Still want to do some tweaks on the ref doc side. 	r946438
----------------------------
- amalgamate the sections describing the env vars available - update the docs for PeerExtList - fix the markup of the SSLRequire example 	r946243
----------------------------
* modules/metadata/mod_headers.c: Add a function pointer type for the tag handler callback to regain some type-safety. (register_format_tag_handler, header_pre_config): Adjusted. 	r946173
----------------------------
Minor tweak: Rename links to 'Using RewriteMap' rather than 'RewriteMap'. 	r945974
----------------------------
Better explanation of example for rnd: type RewriteMap 	r945971
----------------------------
Link to the new RewriteMap doc. 	r945967
----------------------------
Adds a useful and complete example for using RewriteMap txt: 	r945966
----------------------------
Rephrasing of RewriteMap intro. 	r945944
----------------------------
Add the rewritemap doc to the seealso navigation. 	r945934
----------------------------
Moves most of the rewritemap stuff out into its own document where we can give it the exhaustive treatment it deserves without making the 	reference
----------------------------
Fix the following: $> grep -e autoindex_ -e cgi_ httpd.conf LoadModule autoindex_module libexec/apache22/mod_autoindex.so LoadModule cgi_module libexec/apache22/mod_cgi.so fire up the following commands $> apxs -e -a -n autoindex mod_autoindex.so [activating module `autoindex' in /usr/local/etc/apache22/httpd.conf] $> apxs -e -a -n cgi mod_cgi.so [activating module `cgi' in /usr/local/etc/apache22/httpd.conf] This will result into the following httpd.conf $> grep -e autoindex_ -e cgi_ httpd.conf LoadModule autoindex_module libexec/apache22/mod_autoindex.so LoadModule cgi_module libexec/apache22/mod_cgi.so LoadModule autoindex_module libexec/apache22/mod_autoindex.so LoadModule cgi_module libexec/apache22/mod_cgi.so As you notice the modules are now loaded twice Now try to deactivate for the loaded ssl module $> grep ssl_ httpd.conf LoadModule ssl_module libexec/apache22/mod_ssl.so $> apxs -e -A -n ssl mod_ssl.so [preparing module `ssl' in /usr/local/etc/apache22/httpd.conf] $> grep ssl_ httpd.conf LoadModule ssl_module libexec/apache22/mod_ssl.so #LoadModule ssl_module libexec/apache22/mod_ssl.so As reported in FreeBSD ports PR: http://www.freebsd.org/cgi/query-pr.cgi?pr=ports/133704 Previously discussed with: wrowe@ This b/c '$lmd' expects the amount of space to be a fixed amount.  Use \s+ to make any valid httpd.conf syntax work (i.e. at least 1 space) 	r942209
----------------------------
ab was sending wrong number of requests when keepalive enabled. Thanks to Bryn Dole for the patch. PR: 48497 	r940526
----------------------------
Add some documentation for the request record, apache2 module, some default configuration values.  Indicate that mod_lua is available in 2.3. 	r940007
----------------------------
Use the more specific 408 (timed out) instead of a generic 400 during a timeout 	reading
----------------------------
PR49167, unexpected 413 and double-errordoc during a timeout reading a chunk-size. 	r937858
----------------------------
Various metafiles rebuilt. 	r937064
----------------------------
Added working config to mod_ratelimit 	r937056
----------------------------
Working example configuration, thanks to Paul. 	r937055
----------------------------
Move back to a post_config hook... 	r936880
----------------------------
Various metafiles that now contain mention of mod_ratelimit. 	r936814
----------------------------
Adds docs for mod_ratelimit. Need more information in usage and configuration. 	r936813
----------------------------
Build all associated metafiles for mod_dialup. 	r936797
----------------------------
Update metafiles for .fr translation. 	r935902
----------------------------
Adding skeleton documentation for mod_lua, and all of the associated metafiles pertaining thereto. While this is better than nothing, it's not *much* better than nothing, and is very probably inaccurate. But it's a starting point. 	r935894
----------------------------
Replace apr_wait_for_io_or_timeout with apr_poll, to (hopefully) allow mod_reqtimeout to work under windows with apr 1.x 	r935339
----------------------------
"Expand the ""NameVirtualHost has no VirtualHosts"" error message, since it seems that we have to explain a dozen times a day what it really means. "	r934984
----------------------------
Example for using mod_substitute a la mod_proxy_html, in proxy context, to fix hard-coded URLs in HTML. 	r933559
----------------------------
Remove usage of the APR private function apr_wait_for_io_or_timeout(), 	replacing
----------------------------
mod_proxy_connect: Support port ranges in AllowConnect PR: 23673 	r932927
----------------------------
Rebuilding various metafiles. 	r932390
----------------------------
Rebuild various metafiles and translations. 	r931525
----------------------------
First order simplification; Add IncludeOptional for introducing wildcard pattern matches or specific includes which may be omitted. Refactors ap_process_resource_config() to deal efficiently with a single file, and renames the new _ex() flavor per list discussion to  ap_process_fnmatch_configs() for wildcard processing. 	r931435
----------------------------
Remove a TODO item: Turns out mod_vhost_alias does not set DocumentRoot per request. Also several of the 'Apache' -> 'Apache HTTP Server' conversions. 	r931133
----------------------------
I'm reluctant to keep telling people about the ServerPath directive, much less encouraging them to use it in a document on name-based vhosts. It causes confusion, and hasn't been necessary for years. 	r930608
----------------------------
Disable body timeout for CONNECT requests 	r928881
----------------------------
Reverts earlier patch. The --enable-MODULE=shared syntax is valid. Need to fix ./configure --help output instead. 	r927377
----------------------------
My mistake. --enaable-rewrite=shared is in fact valid syntax, even though ./configure --help doesn't mention it. 	r927376
----------------------------
Invalid syntax for the configure script. 	r927365
----------------------------
Introduce SSLFIPS directive to support OpenSSL FIPS_mode; permits all builds of mod_ssl to use 'SSLFIPS off' for portability, but the proper build of openssl is required for 'SSLFIPS on'. PR: 46270 Submitted by: Dr Stephen Henson <steve openssl.org>, wrowe 	r925980
----------------------------
Fixing SSLStrictSNIVHostCheck description, which made my head hurt. 	r924843
----------------------------
Update compatibility note for ProxyPreserveHost 	r923952
----------------------------
note that CacheLock is available in 2.2.15 or later 	r923735
----------------------------
get the socket with ap_get_module_config instead of walking the filter chain 	r923429
----------------------------
"core: shorten the wait time in ap_lingering_close() if the ""short-lingering-close"" connection note is set. mod_reqtimeout: Instead of setting c->aborted, use the ""short-lingering-close"" connection note to shut down the connection quickly while still giving the client a chance to receive the error message. "	r923418
----------------------------
Also extend the timeout if have_lf_or_eos() returned APR_SUCCESS. Spotted by Ruediger Pluem 	r922407
----------------------------
- Enforce request timeout even for AP_MODE_GETLINE. - Abort connection when timeout occurs. Otherwise the thread may be blocked another 30s doing a lingering close. The downside is that the client will not receive the error message. 	r921526
----------------------------
add defaults for AuthLDAPGroupAttribute to the synopsis 	r920407
----------------------------
* Only log a 408 if it is no keepalive timeout. PR: 39785 Submitted by: Mark Montague <markmont umich.edu>, rpluem Reviewed by: rpluem 	r919323
----------------------------
Tell them how to increase ThreadLimit 	r918033
----------------------------
Reference Min/MaxSpareServers/Threads when talking about dynamically configuring the side of the server pool. 	r918024
----------------------------
Make sure we request the APR_FINFO_TYPE on the apr_dir_read() for wildcard configuration. 	r917759
----------------------------
Add mod_reqtimeout line to Windows default configuration. Submitted by: Gregg L. Smith <lists glewis com> 	r917151
----------------------------
Create the pidfile world readable by adding APR_FPROT_WREAD. Use non-deprecated versions of the APR constants. 	r917005
----------------------------
build mod_reqtimeout on Windows 	r916866
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLInsecureRenegotiation): Tweak wording as suggested by trawick. 	r916817
----------------------------
mod_ldap: Eliminate a potential crash with multiple LDAPTrustedClientCert when some are not password-protected. 	r915295
----------------------------
Fix startup segfault when the Mutex directive is used but no loaded modules use httpd mutexes. Add an init call from core's pre-config hook to ensure init is performed before the config is parsed. PR: 48787 	r912666
----------------------------
mod_proxy_http: get the headers right in a HEAD request with ProxyErrorOverride.PR 41646 Analysis by Stuart Children; patch by niq 	r912063
----------------------------
Document that ExpiresActive defaults to off. 	r911498
----------------------------
Make sure the pidfile is deleted on close. 	r910756
----------------------------
mod_proxy_http: Make sure that when an ErrorDocument is served from a reverse proxied URL, that the subrequest respects the status of the original request. This brings the behaviour of proxy_handler in line with default_handler. PR 47106. 	r909899
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLInsecureRenegotiation): Tweak error wording for when the directive is not supported. 	r908015
----------------------------
distcache already demonstrates sub-second resolutions, but much more importantly, let us not introduce more Y2k38 bugs? Changes the ->store method to take expiry as an apr_time_t, and introduce a placeholder to implement provider-specific iterators of the current elements of an socache store. Cleans up confusion where expiry might be confused with a timeout-period. Finally clean up some hUngarian noteAtion.  Someones' hands need to be slapped. 	r907917
----------------------------
Be specific about which environment variables can be used in expansions in the server configuration file. 	r906779
----------------------------
worker: don't report server has reached MaxClients until it does. Add warning when within MinSpareThreads. PR: 46996 	r906535
----------------------------
* docs/manual/mod/mod_ssl.xml: Warn more clearly about the security impact of SSLInsecureRenegotiation. 	r906454
----------------------------
* mod_ssl.xml: Document the SSL_SECURE_RENEG envvar, and SSLInsecureRenegotiation. 	r906067
----------------------------
"New releases of OpenSSL will only allow secure renegotiation by default.  Add an ""SSLInsecureRenegotiation"" directive to enable * modules/ssl/ssl_private.h (struct SSLSrvConfigRec): Add insecure_reneg field. * modules/ssl/ssl_engine_config.c (ssl_config_server_new, ssl_config_server_merge): Handle the insecure_reneg flag. (ssl_cmd_SSLInsecureRenegotiation): New function. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_protocol): Set the SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION option if insecure_reneg is enabled. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Log level of support for secure reneg. * modules/ssl/mod_ssl.c: Add the directive definition. "	renegotiation
----------------------------
* Use loglevel value for parsing 	r905546
----------------------------
mod_log_config: Add the R option to log the handler used within the Submitted by: Christian Folini <christian.folini netnea com> 	request.
----------------------------
Replace the Define !FOO syntax by a new UnDefine directive. 	r904853
----------------------------
Allow the Define directive to undefine a variable by prefixing the argument with a '!'. PR: 35350 	r904768
----------------------------
Make ap_pregsub(), used by AliasMatch and friends, use the same syntax for regex backreferences as mod_rewrite and mod_include: Remove the use of '&' as an alias for '$0' and allow to escape any character with a backslash. Document the use of $0. PR: 48351 	r904765
----------------------------
* We need to return an int as result of the pre_config hook. 	r903607
----------------------------
Adds documentation for the new AddAltClass IndexOption, and for the new CSS classes provided by IndexStyleSheet 	r903055
----------------------------
Refactor mod_status out of the ExtendedStatus toggle picture, as other modules can and should be able to use this scoreboard information. Rename suggestions for such a directive are welcomed. Note that mod_status toggles the default, to present the ExtendedStatus for server operators, whenever it is loaded.  Docs changes to follow. 	r903020
----------------------------
mod_authnz_ldap: If AuthLDAPCharsetConfig is set, also convert the password to UTF-8. PR: 45318 Adapted patch from Johannes Müller 	r902654
----------------------------
Note that a firewall silently dropping packets is a mis-configuration. 	r902605
----------------------------
Move the ldap_simple_bind() + ldap_result() code implementing a timeout into a utility function and use it to replace the other occurence of ldap_simple_bind_s(). 	r902604
----------------------------
fix LDAPConnectionTimeout, take a stab at newly added LDAPTimeout 	r902445
----------------------------
Rename RequestTimeout into RequestReadTimeout and change the configuration syntax again. Hopefully this makes it easier to understand. 	r902434
----------------------------
Introduce new config option LDAPTimeout to set the timeout for operations like bind and search. For operations other than search, the support of the timeout depends on the LDAP SDK supporting LDAP_OPT_TIMEOUT (e.g. OpenLDAP >= 2.4.4). An exception is the ldap_simple_bind() in uldap_connection_open(): Here we put some extra effort into detecting a timeout in a portable way, to catch an idle connection having been dropped by a firewall. 	r898102
----------------------------
Allow several of the configured session identifiers to be found and removed in a single request. 	r897705
----------------------------
clarify LDAPConnectionTimeout behavior/availability which is really just passed along to the SDK when applicable. 	r896897
----------------------------
clarify that FileETag is for static files only, and explicitly mention that ETags aren't generated for files parsed by mod_include. 	r896299
----------------------------
Similar to r893874, fix the ProxyPass example accoding to the trailing slash rule. PR: 48459 	r896073
----------------------------
Rewriterule syntax with new phrasing. 	r895077
----------------------------
Replace rewriterule/rewritecond flow diagram with a easier-to-read version donated by Joseph Pecoraro. 	r895068
----------------------------
Removes duplication of the RewriteRule flags documentation. The module doc contains a table of definitions. The rewrite flag doc contains detailed explanations and examples. 	r895060
----------------------------
Makes each flag a top-level section in this doc, thereby giving it a navigation link in the right navigation box. I think that makes this page much more useful, particularly when it becomes the primary resource for rewriterule flags and their use. Also adds some detail on several of the flags. 	r894539
----------------------------
Move ProxyFtpDirCharset from mod_proxy to mod_proxy_ftp. 	r894526
----------------------------
Move AllowCONNECT from mod_proxy to mod_proxy_connect. 	r894425
----------------------------
Adds a [QSD] flag to RewriteRule to discard unwanted query strings without the old kludge of sticking a ? on the end of the target URI. 	r894383
----------------------------
Adds a clarification to the AddDescription docs, to address the confusion indicated in https://issues.apache.org/bugzilla/show_bug.cgi?id=17210 The problem described there is fixed by a reordering of the AddDescription directives. 	r894306
----------------------------
The ReadmeName directive was putting its value in the wrong place, and overwriting the HeaderName value. 	r894113
----------------------------
mod_filter: enable filters to be configured on non-200 responses PR 48377 	r894041
----------------------------
Fix the ProxyPass example accoding to the trailing slash rule. Submitted by: inoue <inoue ariel-networks.com> PR: 48444 	r893874
----------------------------
Proxy: fix ProxyPassReverse with relative URL PR 38864 	r893871
----------------------------
mod_autoindex: support XHTML as equivalent to HTML in IndexOptions, ScanHTMLTitles, ReadmeName, HeaderName PR 48416 [Dmitry Bakshaev <dab18 izhnet.ru>, Nick Kew] 	r893035
----------------------------
(re)-introduce -T commandline option to suppress documentroot check at startup PR 41887 Patch by Jan van den Berg 	r893027
----------------------------
* Do an exact match of the keys defined by CacheIgnoreURLSessionIdentifiers against the querystring instead of a partial match. PR: 48401 Submitted by: Dodou Wang <wangdong.08 gmail.com> Reviewed by: rpluem 	r892289
----------------------------
Document the ability to use shell environment variables in the configuration file. PR: 46333 Patch submitted by: Nathan Stratton Treadway 	r892280
----------------------------
apache_probes.h is generated by configure 	r892250
----------------------------
Further mitigation for the TLS renegotation attack, CVE-2009-3555: * modules/ssl/ssl_engine_kernel.c (has_buffered_data): New function. (ssl_hook_Access): Forcibly disable keepalive for the connection if there is any buffered data readable from the input filter stack. * modules/ssl/ssl_engine_io.c (ssl_io_filter_input): Ensure that the BIO uses blocking operations when invoked outside direct control of the httpd filter stack. Thanks to Hartmut Keil <Hartmut.Keil adnovum.ch> for proposing this technique. 	r891282
----------------------------
Patch from Mark Watts. Mention ProxyErrorOverride. 	r890378
----------------------------
Don't keepalive when we send a non-100 response while Client is expecting 100 and may be feeding us continuation data. PR 47087 	r888310
----------------------------
Rpm package: pass the HTTPD_LANG variable to the httpd process in line with Fedora. Remove the use of the apachectl script, as a script calling another script makes no sense. Test for the pidfile specifically, so that Redhat's scripts don't fall back to using pidof and returning the status of other httpd processes running on the same box. 	r885606
----------------------------
Updates for french translations and small typos for manual/mod/mod_reqtimeout.xml. 	r885121
----------------------------
Replaces the two-step process with a single rule using the RewriteCond backreference. This technique is far simpler, and far easier to explain to beginners than the unnecessarily complicated technique used. 	r884943
----------------------------
update the session cache description to indicate that the ssl cache mutex is used to serialize access, and that the mutex can be configured using the Mutex directive 	remove
----------------------------
move a couple of special warnings for SysV sems and Posix sems out of the performance tuning guide and into the common Mutex documentation; remove the other (duplicate) information from that guide and instead point to the Mutex directive mpm_common: axe docs for old accept mutex directives worker and prefork: axe links to old accept mutex directives, mention the use of the accept mutex and how it can be configured event: axe links to old mutex directives where were already N/A mod_rewrite: axe old RewriteLock directive, mention use of the rewrite map mutex for RewriteMap programs and how it can be configured fix other miscellaneous LockFile or AcceptMutex references 	r883878
----------------------------
"fix Win32 compile failure in r883540, reported by Gregg Smith DEFAULT_REL_RUNTIMEDIR defined only in mpm_default.h for NetWare and dsp-based Win32 builds mpm_default.h not in normal include path on Unix thus, hardcode ""logs"" directory when DEFAULT_REL_RUNTIMEDIR isn't defined (file-based mutexes aren't configurable for those platforms anyway) "	r883828
----------------------------
Replace AcceptMutex, LockFile, RewriteLock, SSLMutex, SSLStaplingMutex, and WatchdogMutexPath with a single Mutex directive.  Add APIs to simplify setup and user customization of APR proc and global mutexes. (See util_mutex.h.)  Build-time setting DEFAULT_LOCKFILE is no longer Some existing modules, such as mod_ldap and mod_auth_digest gain configurability for their mutexes. 	respected;
----------------------------
KeepAlive no longer accepts other than On|Off. 	r883082
----------------------------
continue clarification of RewriteBase, lots of users who install little PHP apps with an Alias a) leave off RewriteBase then b) add the filesystem path instead of the URL-path then c) spend hours trying to debug the RewriteRules themselves. 	r883030
----------------------------
fix config context tokens 	r882997
----------------------------
fix typo in AcceptFilter-related comment 	r882944
----------------------------
doc for AuthLDAPBindAuthoritative 	r881812
----------------------------
Add AuthLDAPBindAuthoritative to allow other authentication providers a chance to run when mod_authnz_ldap finds a user but can't verify their password. Submitted By: Justin Erenkrantz, Joe Schaefer, Tony Stevenson 	r881808
----------------------------
"Improve hack to ""determine"" if APR supports thread-safe pollsets by hiding the presence of kqueue() on Leopard, matching APR's configuration. Event and Simple no longer report that they are supported on Leopard, resolving a broken default config file with --enable-mpms-shared=all on that platform. (Event was loaded by default in httpd.conf, and it failed at startup when it failed to obtain a thread-safe pollset.) "	r836165
----------------------------
Removes another bogus example. Use <Proxy> blocks instead, and standard access control methods. Also, the note about loading mod_rewrite before mod_proxy isn't actually relevant any more. 	r835827
----------------------------
Removes an inscrutable recipe - I don't know what problem it's trying to solve, and the solution appears to be a completely useless use of RewriteMap to solve a trivial problem that could be better done with Alias. Am I missing something? 	r835824
----------------------------
Removes a lengthy and unnecessary discussion of the various methods of load balancing. Removes a RewriteMap prg load balancing script, and admonition to use mod_proxy_balancer instead. 	replaces
----------------------------
Fix broken config check for *max timeouts Fix floating point exception for *minrate == 0 	r834499
----------------------------
mod_log_config: Make ${cookie}C correctly match whole cookie names instead of substrings. PR: 28037 Submitted by: Dan Franklin <dan dan-franklin.com>, Stefan Fritsch 	r833738
----------------------------
SECURITY: Partial fix for CVE-2009-3555: Reject client-initiated renegotiations; this is sufficient to prevent the attack for any configuration which does not require renegotiation due to per-directory/per-location access control configuration. Configuration with per-directory/per-location access control to CVE-2009-3555 with this patch applied (if using OpenSSL <= 0.9.8k). * modules/ssl/ssl_private.h (SSLConnRec): Add reneg_state field. (ssl_callback_Info): Renamed from ssl_callback_LogTracingState. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_callbacks): Install the (renamed) info callback unconditionally. * modules/ssl/ssl_engine_io.c (ssl_filter_ctx_t): Add config pointer to SSLConnRec. (bio_filter_out_write, bio_filter_in_read): Fail with APR_ECONNABORTED if the reneg state is set to RENEG_ABORT. * modules/ssl/ssl_engine_kernel.c (log_tracing_state): Factored out of ssl_callback_LogTracingState. (ssl_callback_Info): New function. 	requirements
----------------------------
Removing a ruleset that not only doesn't have a description, but also can't possibly work, since it contains a fully-qualified URL in the RewriteRule. Feel free to revert iff you can provide a description and a functional rule. 	r832976
----------------------------
add an early note about the Pattern in a rewriterule behaving counterintuitively in per-directory context. (lots of mysterious no-op Tweak QSA text. 	rulesets
----------------------------
tweak MPM configure to avoid having to grep for MPM names in lists of MPMs of some type (threaded or share-able or enabled), as suggested by jorton 	rename
----------------------------
Add a LoadModule directive for the default MPM to the conf file when building MPMs as shared modules. 	r832778
----------------------------
ServerAlias and Listen accumulate, not supercede.  The latter of course is n/a to vhosts! Additional rewording of vhost details. PR48125 	r832759
----------------------------
Split RewriteCond into two sections, brought TestString section up to date. 	r832627
----------------------------
added back HAVE_OCSP define hack for non-configure platforms, but only use if HAVE_OCSP is not yet defined as suggested by rpluem. 	r832572
----------------------------
We now check for OCSP support in configure, so we can lose an OpenSSL version number check.  Use a type safe STACK. 	r832496
----------------------------
Change the configure-based MPM build mechanism to support building an MPM as a shared shared or dynamic module, primarily using the APACHE_MPM_MODULE() function. --enable-mpms-shared now builds/installs the MPMs as dynamic modules. (But no LoadModule directives are added.) 	r832434
----------------------------
"more configure-time support for dynamically loadable MPMs: . axe --with-mpm=""shared"" hack, replace with --enable-mpms-shared={all|list} . replace singular MPM_NAME with access to the list of enabled MPMs . replace singular MPM_SUBDIR with list MPM_SUBDIRS . enable OS/2 MPM in same manner as others with configure support instead of hard-coding in configure.in Current state: MPMs are built as static archives (but not linked to httpd) with --enable-mpms-shared, so they still have to be built with apxs to load dynamically. "	r832228
----------------------------
address FAQ of SetEnv environment variables not being available to early directives such as RewriteRule. 	r831695
----------------------------
add LDAPLibraryDebug directive to mod_ldap to turn on tracing in underlying LDAP SDK, where all the interesting tidbits about all kinds of LDAP errors are hidden. Unfortunately windows doesn't implement this LDAP_OPT. 	r831183
----------------------------
define HAVE_OCSP dependent on OpenSSL version to make things easier for non-configure platforms (NetWare, Win32). 	r830765
----------------------------
Document that there's a limit on the length of lines in the configuration file. PR: 45888 	r830237
----------------------------
CharsetOptions NoImplicitAdd wasn't referenced during insert_filter callback. Doc: Correct defaults, charset_lite inserts itself by as soon as you tell it about input and output character sets. 	r829664
----------------------------
"CharsetOptions NoImplicitAdd makes us fall through to the ""unknown option"" clause due to breaking ""else if"", making NoImplicitAdd unconfigurable. "	r829657
----------------------------
"Add support for OCSP ""stapling"": * modules/ssl/ssl_util_stapling.c: New file. * modules/ssl/config.m4, modules/ssl/mod_ssl.dsp: Build it. * modules/ssl/ssl_toolkit_compat.h: Define HAVE_OCSP_STAPLING if OpenSSL is of suitable version (>= 0.9.8g) and capability (TLS extension support enabled). * modules/ssl/mod_ssl.c: Add config directives. * modules/ssl/ssl_private.h: Add prototypes for new functions. (SSLModConfigRec): Add fields for stapling socache instance and associated mutex. (modssl_ctx_t): Add config fields for stapling. * modules/ssl/ssl_engine_init.c (ssl_init_Module, ssl_init_Child): Call the stapling initialization functions. * modules/ssl/ssl_engine_config.c: Add config hooks. * modules/ssl/ssl_scache.c: Create, initialize and destroy the socache instance for OCSP responses. Submitted by: Dr Stephen Henson <shenson oss-institute.org> "	r829619
----------------------------
Only parse cache size in parens at the end of the string. Fixes SSLSessionCache directive mis-parsing parens in pathname. PR: 47945 	r829185
----------------------------
Rename ReqTimeout into RequestTimeout, to be more in line with other directives. 	r825177
----------------------------
* With SSLProxyCheckPeerCN and SSLProxyCheckPeerExpire available and turned on by default this warning is no longer true. 	r824830
----------------------------
Allow ProxyPreserveHost to work in <Proxy> sections PR: 34901 	r824072
----------------------------
configure: Fix THREADED_MPMS so that mod_cgid is enabled again for worker MPM. 	r823794
----------------------------
Add some docs for mod_reqtimeout. 	r822509
----------------------------
Work around broken cache management in mod_ldap: If LDAPSharedCacheSize is too small, try to free some memory by purging the cache and log a warning. Also increase the default LDAPSharedCacheSize to 500000. This is a more LdapOpCacheEntries. PR: 46749 	realistic
----------------------------
mod_cache: Teach CacheEnable and CacheDisable to work from within a Location section, in line with how ProxyPass works. 	r821993
----------------------------
No need to constantly compute these; do so once at config time and use as needed :) 	r821990
----------------------------
Refactor mod_reqtimeout a bit to use just 1 directives with multiple params... 	r821792
----------------------------
added mod_reqtimeout to NetWare build; fixed some NWGNU* properties. 	r821595
----------------------------
Add mod_reqtimeout: New module to set timeouts and minimum data rates for 	receiving
----------------------------
mod_cache: Fix uri_meets_conditions() so that CacheEnable will match by scheme, or by a wildcarded hostname. PR: 40169 Submitted by: Peter Grandi <pg_asf asf.for.sabi.co.uk> Reviewed by: Graham Leggett 	r821333
----------------------------
suexec: Allow to log an error if exec fails by setting FD_CLOEXEC on the log file instead of closing it. PR: 10744 Submitted by: Nicolas Rachinsky Reviewed by: Stefan Fritsch 	r821321
----------------------------
Make RemoveType override the info from TypesConfig 	r821298
----------------------------
core: Treat timeout reading request as 408 error, not 400. Log 408 errors in access log as was done in Apache 1.3.x. PR: 39785 Submitted by: Nobutaka Mantani, Stefan Fritsch Reviewed and added to by: Dan Poirier 	r820760
----------------------------
* include/httpd.h: Fix comment implying that LimitRequestLine and LimitRequestFieldsize cannot raise limits -- no longer the case. 	r819480
----------------------------
Just a little additional verbiage for the FallbackResource directive. 	r815782
----------------------------
* modules/ssl/ssl_util_ocsp.c, modules/ssl/ssl_engine_ocsp.c: Move comment on I/O timeout to appropriate place, thanks to Steve Henson. 	r815741
----------------------------
* modules/ssl/ssl_util_ocsp.c (send_request, modssl_dispatch_ocsp_request): Take timeout as argument, as pass through. * modules/ssl/ssl_engine_ocsp.c (verify_ocsp_status): Pass server timeout to modssl_dispatch_ocsp_request. Submitted by: Dr Stephen Henson <shenson oss-institute.org> 	r815719
----------------------------
Change Fallback to FallbackResource after extensive discussion with wrowe and DrBacchus. 	r815502
----------------------------
mod_mime: detect invalid use of MultiviewsMatch inside Location and LocationMatch sections.  Document that such usage is not valid. PR47754. 	r814728
----------------------------
Bring the LDAPCacheEntries and LDAPOpCacheEntries usage() in synch with the manual and the implementation (0 and -1 both disable the cache). PR 40948 	r814441
----------------------------
mod_request: Make sure the KeptBodySize directive rejects values that aren't valid numbers. 	r814337
----------------------------
mod_session.c: Prevent a segfault when session is added but not configured. 	r814327
----------------------------
Add an RPM init.d script to start the htcacheclean daemon, controlled by the optional /etc/sysconfig/htcacheclean configuration. 	r814079
----------------------------
Fail server startup when mod_auth_digest is unable to provide the security checks configured. 	r813396
----------------------------
mod_ssl: The error message when SSLCertificateFile is missing should at least give the name or position of the problematic virtual host definition. [Stefan Fritsch sf sfritsch.de] 	r813105
----------------------------
Fix up doc note on ProxyPassMatch quirks - this wording seems to have got accepted in 2.2.x. 	r809241
----------------------------
"Document ServerTokens Set ""One Big Happy Family Server"" "	r808966
----------------------------
And additional ServerTokens improvement... 	r808965
----------------------------
OK, might as well finish this... Allow ServerTokens Off 	r808895
----------------------------
Document limitation to ProxyPassMatch directive. This is a valid bug report PR 46665, which I'm marking as WONTFIX but which needs documenting for what it is. 	r808321
----------------------------
added vars for Metrowerks directories to make it easier configureable. 	r795433
----------------------------
Add use slotmem. Directive HeartbeatMaxServers > 10 to activate the logic. Otherwise it uses the file logic to store the heartbeats. 	r791617
----------------------------
"Fix incorrect ""Userdir enabled"" usage cases in the docs. The actual documentation of the directive is accurate, but the examples were incorrect, as noted in PR 42910. "	r791344
----------------------------
Correctly set suexec_enabled when httpd is run by non-root PR 42175 	r791337
----------------------------
Complete previous commit, by marking the second invalid configuration example as such. 	r788933
----------------------------
"The first configuration example in the file is misconfiguration. Mark it so ""quick"" reader won't copy/paste it to their config. "	r788932
----------------------------
"ErrorDocument may be used in .htaccess if AllowOverride is set ""to Fileinfo"" "	rather
----------------------------
Fix hung SSL handshake if a particularly long CA list is configured: * modules/ssl/ssl_engine_io.c (bio_filter_in_read): Flush pending output unconditionally since OpenSSL is known to not flush correctly at all times, and it should be cheap even in cases where it is unnecessary. PR: 46952 	r788715
----------------------------
Fix bug in r785425 (dereference null pointer when not configured) and add a couple of comments. 	r785457
----------------------------
no-cache envvar: copy the compatability note from 2.2.x for env.xml, add compat note inline for refereneces in CacheEnable/CacheDisable. 	r782860
----------------------------
* Correctly detect if CacheIgnoreURLSessionIdentifiers is set. 	r778439
----------------------------
* Improve documentation for CacheIgnoreURLSessionIdentifiers Submitted by: Dan Poirier <poirier pobox.com> 	r777091
----------------------------
* Add CacheIgnoreURLSessionIdentifiers directive to ignore defined session identifiers encoded in the URL when caching. 	r777042
----------------------------
"Fix the error string returned by RewriteRule. RewriteRule returned ""RewriteCond: bad flag delimiters"" when the 3rd argument of RewriteRule was not started with ""["" or not ended with ""]"". PR: 45082 Submitted by: Vitaly Polonetsky <m_vitaly topixoft.com> "	r776325
----------------------------
"Revert the default resource abuse introduced in r104019, which can mask child logger process failures, by migrating back to 2.0.49 and prior when Provides two new piped syntaxes for ErrorLog; ""||program"" or ""|$shellcmd"", where the existing 2.2 behavior may be preserved or the new 2.4 behavior explicitly elected.  The default should discourage users from ""|$"" syntax except as required, in the future. "	rotated
----------------------------
Allow relative pathnames for piped loggers in ErrorLog. 	r774755
----------------------------
Address Win32 AcceptFilter documentation replacing DisableWin32AcceptEx 	r773774
----------------------------
* server/core.c (merge_core_dir_configs): Tweak logic and comment wording in the special-case for Includes merging such that the code and comment read the same.  No functional change (intended!). 	r773342
----------------------------
* Fix for the following configuration where the exec command was disabled in /subdir. All CVE-2009-1195 tests still pass with this patch. # only two containers in the config <Directory /> Options Includes AllowOverride None </Directory> <Directory /subdir> # with this container, mod_cgi/mod_cgid complains about exec being off # without it, exec cmd= works as expected SetEnv foo bar </Directory> 	r773322
----------------------------
Security fix for CVE-2009-1195: fix Options handling such that 'AllowOverride Options=IncludesNoExec' does not permit Includes with exec= enabled to be configured in an .htaccess file: * include/http_core.h: Change semantics of Includes/IncludeNoExec options bits to be additive; OPT_INCLUDES now means SSI is enabled without exec=.  OPT_INCLUDES|OPT_INC_WITH_EXEC means SSI is enabled with exec=. * server/core.c (create_core_dir_config): Remove defunct OPT_INCNOEXEC from default override_opts; no functional change. (merge_core_dir_configs): Update logic to ensure that exec= is disabled in a context where IncludesNoexec is configured, even if Includes-with-exec is permitted in the inherited options set. (set_allow_opts, set_options): Update to reflect new semantics of OPT_INCLUDES, OPT_INC_WITH_EXEC. * server/config.c: Update to remove OPT_INCNOEXEC from default override_opts; no functional change. * modules/filters/mod_include.c (includes_filter): Update to reflect new options semantics - disable exec= support if the OPT_INC_WITH_EXEC bit is not set. Submitted by: Jonathan Peatfield <j.s.peatfield damtp.cam.ac.uk>, Thanks to: Vincent Danon <vdanon redhat.com> 	r772997
----------------------------
Add . 'default' test first before searching paths, to determine if the lua.h, liblua5.1, liblua-5.1 or liblua can be resolved.  This avoids adding strange paths on fedora/redhat, and choosing the wrong /lib[64] flavor. Also ensure -lm is always added to the actual linked libraries, avoiding a LoadModule failure on fedora/redhat.  Still should first try to search for pkg-config lua settings, but note this would break fedora until that build hackery is corrected, c.f. the bug https://bugzilla.redhat.com/show_bug.cgi?id=499238 	r772864
----------------------------
"Fix usage message on the Windows platform. - do not include graceful commands and duplicate start|restart|stop - add ServerRoot to the parameters encapsulated by ""-n"" "	r772356
----------------------------
Reorder so and watchdog to configure before cluster modules 	r771998
----------------------------
Ensure all mpm's configure at config3 	r771997
----------------------------
As mentioned inline in comments, correctly handle more sophisticated transformations which currently fail for balancer://foo targets, but work just fine with other ProxyReverse targets. The balancer comparison is a bit trickier.  Given the context translate url http://example.com/foo/bar/that to /bash/that E.g. there may be several different url-suffixes (1st order) of any particular BalancerMember set e.g. /app1, /app1 and /appbeta while there may be additional suffixes associated with the actual ProxyPassReverse directive.  Neither were properly reversed, now both should be properly handled. One *critical* assumption; should be documented as a meaningless construct, since one cannot have two members, balancer://alias/foo and balancer://alias/bar, and the balancer member structures discard this path. Note one more existing error case as an XXX comment due to invalid uri comparisons. 	r771587
----------------------------
MPM's are now dynamically loadable; so must mod_watchdog be. The only module with an excuse now is mod_so which implements LoadModule itself. 	r771579
----------------------------
mod_privileges: introduce PrivilegesMode: fast mode as before vs secure mode to fork an unprivileged child per-request in the manner of MPM-ITK anwhere there's a risk of running malicious code. Documentation to follow. 	r771144
----------------------------
* As proposed by wrowe on list always define SSLStrictSNIVHostCheck, but error out if we are not compiled against an SNI capable OpenSSL. 	r770907
----------------------------
Adds clarifying comment to example configuration. (Redirect) 	r770506
----------------------------
Arrange BalancerMember explainations. 	r770328
----------------------------
* Set SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN to on by default. 	r769815
----------------------------
* Improve and simplify the implementation of SSLProxyCheckPeerExpire by directly using X509_get_notBefore(), X509_get_notAfter() and X509_cmp_current_time(). Thanks to jorton for the pointer. 	r769809
----------------------------
* Add SSLStrictSNIVHostCheck to allow / disallow non SNI clients to connect to name based virtual hosts. 	r768596
----------------------------
* r->connection->aborted signals that the client aborted the connection, but in this case *we* decide to close the connection so use r->connection->keepalive = AP_CONN_CLOSE 	r768500
----------------------------
less confusing and match the conventional wisdom of the various support fora. Provide a longer example that demonstrates the 1:n nature, Avoid phrasing that makes NVH look like Listen. Remove the over-complicated hints about NVH impact on _default_ and base server configs, which boils down to the basic ip-based vhost mapping algorithm. 	relation
----------------------------
mod_dbd: add DBDInitSQL command.  PR 46827 Patch by Marko Kevac. 	r766938
----------------------------
More unregistered media types in common use on the Internet. *sigh* http://msdn.microsoft.com/en-us/library/aa338205.aspx http://technet.microsoft.com/ja-jp/library/cc179224.aspx http://www.adobe.com/support/config.html http://www.adobe.com/go/tn_16509http://www.adobe.com/support/documentation/en/air/1_5_1/releasenotes_developers.html#tips http://livedocs.adobe.com/coldfusion/8/htmldocs/vspider_17.html http://help.adobe.com/en_US/AdobeMediaPlayer/1.5/CDK/WSb04c7610c343283941c82cdf11cc3cc68f8-8000.html http://www.idpf.org/specs.htm http://rivviepop.wordpress.com/2006/01/27/configuring-apache-for-mobile-browsing/ 	r766211
----------------------------
Move logic to decide if an MPM is supported, and whether the MPM is threaded, down to the MPM itself. (server/mpm/FOO/config.m4, which runs before the actual MPM selection) server/mpm/config.m4 makes some general platform checks that can be used for MPM decisions, and contains some functions related to MPMs. XXX The check here for whether APR_POLLSET_THREADSAFE is available Replace the limited per-platform hard-coded MPM selection and the current defaulting to event (whether or not it works) with a selection based on which MPMs work on the platform, as reported by the MPMs themselves. (config2.m4, which runs after the MPMs record whether they are supported) Order of preference: WinNT (mingw32 only) 	r766082
----------------------------
mod_cgid: Improve handling of long AF_UNIX socket names (ScriptSock). Dynamically allocate the AF_UNIX sockaddr based on the required filename size. For some platforms (e.g., Solaris, OS X, FreeBSD), this allows longer socket filenames to be used. When the name is too long, the failure reporting is more consistent and a socket with truncated pathname is not left stranded.  The user still needs to use ScriptSock to specify a shorter name. An extra unlink() failure message may be generated when attempting to clean up the socket after a daemon initialization error; the message is surpressed for ENOTENT, but not for ENAMETOOLONG. PR: 47037 	r765725
----------------------------
* Fix comment and optimize retrieval of loglevel. 	r761181
----------------------------
* Add SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN directives to enable stricter checking of remote server certificates. (docs/manual/mod/mod_ssl.xml) (modules/proxy/mod_proxy_http.c) (modules/ssl/ssl_private.h) (modules/ssl/ssl_engine_config.c) (modules/ssl/ssl_engine_io.c) (modules/ssl/mod_ssl.c) 	r760866
----------------------------
stop exporting APACHE_MPM_DIR to modules -- unclear why this was ever necessary, and it makes no sense with loadable MPMs axe the unnecessary MPM_DIR build variable move the stray APACHE_SUBST(MPM_LIB) from configure.in to server/mpm/config.m4, where the other MPM_foos are handled 	r760403
----------------------------
Clarify when CoreDumpDirectory can be moot based on OS configuration, and mention SIGQUIT/3 not being processed by the signal handler. SIGQUIT may unfortunately be a go-to signal for java users. 	r759957
----------------------------
* Make LDAP working with APR 2.0 again by using apr-config instead of apu-config which is gone in APR 2.0. 	r759594
----------------------------
Add static cluster backend, for very simple configurations. 	r759476
----------------------------
Work in Progress. Add Clustered proxying support to mod_serf, by using the heartbeats system. No preconfiguration of cluster members is needed. Just a config like this: The location of all possible destination servers is provided by a new providers interface, that includes configuration checking of the arguments to the SerfCluster command, solving one of the worst problems with the mod_proxy load balancer subsystem. 	r759386
----------------------------
Add mod_proxy_ftp directives ProxyFtpListOnWildcard and ProxyFtpEscapeWildcards to allow filenames with globbing characters to be retrieved instead of presented in a directory listing. Submitted by: Dan Poirier <poirier pobox.com> Reviewed by: covener 	r758626
----------------------------
prefork, worker, and event MPMs: use retained-data API to maintain information across reconfigs, to allow these MPMs to work as DSOs 	r758185
----------------------------
* configure.in: Allow configure to be built without find_apu.m4, at least temporarily to allow buildconf against apr trunk. 	r758177
----------------------------
Allow building httpd without a built-in MPM by specifying --with-mpm=shared on configure.  When built thusly, an MPM should be loaded via LoadModule. (Currently you need to build the MPM with apxs.) 	r757999
----------------------------
* build/config_vars.sh.in: Fix error if APU_CONFIG is not defined. 	r757819
----------------------------
* configure.in: If APR version is 2, APR-util does not exist. 	r757817
----------------------------
* Store the correct server_rec in the connection record configuration and adjust the remaining part of mod_ssl to use this server_rec instead of c->base_server. modules/ssl/ssl_private.h: - server_rec member to SSLConnRec struct - Add macros to extract data from connection_rec modules/ssl/ssl_engine_io.c modules/ssl/ssl_util_ocsp.c modules/ssl/ssl_engine_kernel.c modules/ssl/mod_ssl.c modules/ssl/ssl_engine_log.c - Use the new macros to extract data fron connection_rec 	r757463
----------------------------
Remove code to support per-dir-CA configuration which relies on a function which was never included in OpenSSL: * acinclude.m4: Remove test for fictional function. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Remove code. * modules/ssl/ssl_engine_config.c (MODSSL_SET_CA): Remove unused macro.  (ssl_cmd_SSLCACertificatePath, ssl_cmd_SSLCACertificateFile): Fail if per-dir-CA is configured. 	r757380
----------------------------
"It's a pet peeve of mine when docs do something, and then say ""don't do that."" Remove the hostname from the <VirtualHost> line, and use an IP address instead. "	r752951
----------------------------
Add an example of using a wildcard with ServerAlias Change <VirtualHost *> to <VirtualHost *:80> 	r752894
----------------------------
Until APR is actually fixed between apr_os_sock_make and the logic within apr_socket_timeout_set, let's presume that vendor differences of socket stack drivers can vary this behavior, and the assumptions were unsafe for both accept() and AcceptEx(). 	r750569
----------------------------
Use a single event for the lifetime of the 'AcceptFilter none' variety sockets; it appears that resetting the accept event while another was waiting would break the pending connection, causing host socket resets. 	r750567
----------------------------
Accelerate mod_dumpio processing; * drop a frequent query for the mod configuration (pass as f->ctx) * drop one copy, at least for ASCII and ensure larger buffers are logged in their entirety.  Some clarity in output can be added by designating continuations vs first lines. 	r750126
----------------------------
fix mod_disk_cache to support EnableSendfile. 	r746541
----------------------------
Document the disabling of DefaultType and update terminology 	regarding
----------------------------
Remove DefaultType config.  I could have sworn I did this four years ago, but apparently that was just AddDefaultCharset. PR: 13986 	r740144
----------------------------
Correct logic with non-seq lbsets config'ed 	r739854
----------------------------
Correct logic with non-seq lbsets config'ed 	r739853
----------------------------
Correct logic with non-seq lbsets config'ed 	r739852
----------------------------
Disabled DefaultType directive and removed ap_default_type() from core.  We now exclude Content-Type from responses for which a media type has not been configured via mime.types, AddType, ForceType, or some other mechanism.  MMN major bump to NZ time. PR: 13986 	r739382
----------------------------
Introduce Win32 AcceptFilter handling. Divided into 3 classes, this implements the first two; * AcceptFilter 'data' - much as on Unix, accept will not complete * AcceptFilter 'connect' - just as in Apache 2.2, accept will not * AcceptFilter 'none' [not yet implemented] - will be the traditional 	r735093
----------------------------
tweak verbage describing new KeepAliveTimeout feature 	r733709
----------------------------
* docs/manual/mod/mod_ssl.xml: Flesh out SSLRenegBufferSize docs a little - thanks rpluem! 	r733695
----------------------------
Enhance KeepAliveTimeout to support a value in milliseconds. PR: 46275 	r733557
----------------------------
"Allow to trigger rotatelogs log file rotation from using HUP and INT signals to the rotatelogs process. This is helpful, when log activity is low, but you want SIGHUP triggers checking the rules given during startup, SIGINT forces rotate independently form those rules. When the signal triggers a rotation, the open file is closed immediately. The new file is opened when new log data arrives, or in case ""-f"" was given it is opened immediately. Based on my patch in BZ 44427. Note on Windows: The new functionality is undefined when SIGHUP or SIGINT are not available. Does the use case make sense on Windows? If so, which signals should we use? "	rotatelogs
----------------------------
Refactor rotatelogs to allow easier implementation of signal triggered log rotation. - move code into new functions checkRotate() and doRotate() - bundle config data and runtime data in two structs to allow easier passing to functions - Simplify bypass_io logic as a first use case for doRotate and rename flag to force_open to reflect the new logic 	r733476
----------------------------
* Add a stub documentation for SSLRenegBufferSize. 	r733467
----------------------------
* Correctly merge SSLRenegBufferSize directive. PR: 46508 Submitted by: <tlhackque yahoo.com> Reviewed by: rpluem 	r733465
----------------------------
prefork: Fix child process hang during graceful restart/stop in configurations with multiple listening sockets. PR: 42829 Submitted by: Joe Orton, with some tweaking and testing from me 	r732451
----------------------------
mod_session_crypto: Ensure that SessionCryptoDriver can only be set in the global scope. 	r731377
----------------------------
Fix mod_ext_filter to detect failure to start the external program, and add configuration option to abort or continue. PR 41120 	r731358
----------------------------
Silence compiler warning about unused variable cfg. dtrace_enabled is static, so no need for using the configuration at the moment. 	r731251
----------------------------
pcre-config --cflags actually emits include paths not cflags, so add it to correct variable.  Also, reuse APR_INCLUDES/APU_INCLUDES variables so as to save an extra invocation of config files. * configure.in: Add PCRE_CONFIG --cflags to INCLUDES; reuse AP{RU}_INCLUDES variables. 	r731058
----------------------------
* modules/proxy/config.m4: Remove spurious notices from configure. 	r730928
----------------------------
Make OpenSSL pkg-config usage consistent so that we don't run the early configure checks against a /usr installed OpenSSL and then link against a different pkg-config installed OpenSSL. (Hint: Try with Mac OS X with MacPorts's OpenSSL or FreeBSD w/OpenSSL ports.) * acinclude.m4 (APACHE_CHECK_SSL_TOOLKIT): Load in pkg-config variables first before doing any OpenSSL checks so that we don't clobber things later. 	r730926
----------------------------
Fix up SSL autoconf-fu so as not to emit bogus lines. * acinclude.m4 (APACHE_CHECK_SSL_TOOLKIT): Move CHECKING line to match; convert a warning to AC_MSG_WARN; remove a spurious SSL-C checking; redirect stderr from the pkgconfig so as not to spew on errors. 	r730914
----------------------------
Silence ulimit warnings on platforms/configs that don't support setting the soft limit to the hard limit (aka default Mac OS X). * support/config.m4: Redirect output to /dev/null. 	r730911
----------------------------
Remove LockFile in default config for all MPMs that do not support it (AP_MPM_WANT_SET_LOCKFILE undefined). 	r730875
----------------------------
"Clean up thread and process number defaults for simple mpm. - Before, simple wouldn't start without explicit config, because default numbers were 0 - log messages ""more"" and ""less"" were misleading "	r730873
----------------------------
Clean up fugly initialization of AcceptFilter mappings 	r730835
----------------------------
"Add a declaration check for CMSG_DATA to mod_proxy_fdpass. Also move '#error' after the includes, because it seems CMSG_DATA is commonly defined in sys/socket.h. The check also overwrites _apmod_error_fatal in case CMSG_DATA is not defined to allow building when configure was called with ""--enable-proxy"". Otherwise one would need to explicitly disable mod_proxy_fdpass. We might want to remove the #error completely, because the new feature test prevents the building of the module when the symbol is not defined. "	r730803
----------------------------
Use APACHE_HELP_STRING() for --enable-luajit in configure to allow automatic indentation in configure help output. 	r730686
----------------------------
CGI: return 504 (Gateway timeout) rather than 500 when a script times out before returning status line/headers. PR 42190 	r729586
----------------------------
"Make ""HeaderName"" and ""ReadmeName"" be stored in simple entries ""header"" and ""readme"" respectively. Side effect: In the case that multiple ""HeaderName""s or multiple ""ReadmeName""s exist in one directory section. Before this change, the first directive is effective. After this change, the last directive is effective. "	r729314
----------------------------
Change apl_get_lua_state to take a apl_vm_spec instead of a filename, and to load the bytecode if it is present, rather than the file, as this gets the inline config file blocks hooks working again. 	r728531
----------------------------
Fixup lua_config.c with prefix rename, and make mod_lua.c so it compiles again. 	r728509
----------------------------
Rename all files in mod_lua to have a lua_ prefix, as things like 'config.h' are way to generic and will often conflict with other include files. 	r728508
----------------------------
mod_ssl: Make the size of the per-dir-reneg request-body buffer configurable, by popular demand: * modules/ssl/ssl_private.h: Define DEFAULT_RENEG_BUFFER_SIZE. (SSLDirConfigRec): Add nRenegBufferSize field. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLRenegBufferSize): New function. (ssl_config_perdir_create, ssl_config_perdir_merge): Handle nRenegBufferSize. * modules/ssl/ssl_engine_io.c (ssl_io_buffer_fill): Take max buffer size as an argument rather than compile-time constant. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Pass nRenegBufferSize to ssl_io_buffer_fill. * modules/ssl/mod_ssl.c (ssl_config_cmds): Add SSLRenegBufferSize. PR: 39243 	r726109
----------------------------
Per suggestions by Roy T. Fielding: - remove Match directive, allow Require to be negated - rename <Match*> directives to <Require*> - rename <RequireNotAny> to <RequireNone> - disable <RequireNotAll> - rename MergeAuthz to AuthMerging and change its arguments to Off|And|Or Also convert text formatting macros into functions, and revise authz_core_check_section() so that check for non-negative directives follows De Morgan optimization. 	r726082
----------------------------
"* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Allow using socache provider config defaults by omitting the arguments, so e.g.  ""SSLSessionCache shmcb"" or even ""SSLSessionCache default"" should now DTRT. "	r726034
----------------------------
Add configuration of the Flush provider for mod_proxy_fdpass. 	r725946
----------------------------
* modules/ssl/ssl_private.h: Add a big fat warning about the SSLModConfigRec lifetime. 	r724802
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Don't fix the socache instance for the lifetime of the process since it is allocated out of pconf. 	r724789
----------------------------
* include/ap_socache.h: Define AP_SOCACHE_DEFAULT_PROVIDER as a default provider name, to allow consumers to use a default provider if not configured otherwise. * modules/cache/mod_socache_shmcb.c (register_hooks): Register shmcb as the default provider. 	r724723
----------------------------
Reduce config overhead for use of socache interface by allowing default paths to be used if none are configured: * include/ap_socache.h (ap_socache_provider_t::create): Allow arg to be NULL to force use of defaults. (ap_socache_provider_t::init): Rename 'namespace' parameter to 'cname' and restrict to allow use in filesystem paths. * modules/cache/mod_socache_dbm.c (socache_dbm_create, socache_dbm_init), modules/cache/mod_socache_shmcb.c (socache_shmcb_create, socache_shmcb_init): Default to use of runtimedir-relative paths if no explicit path is configured. 	r724682
----------------------------
OK, instead of an igly hack, just use the normal build system impl to force balancer's config to happen post proxy 	r724367
----------------------------
Use cmd->temp_pool for temp allocations during configuration. Suggested by: Takashi Sato <takashi lans-tv.com> 	r724092
----------------------------
Also init mutex_path in hm_create_config. Suggested by: Ruediger Pluem 	r723679
----------------------------
Put the arguments to Header, RequestHeader, in alphabetic order. 	r723560
----------------------------
unixd_config/ap_unixd_config rename for mod_privileges 	r723078
----------------------------
unixd_config->ap_unixd_config renames for mod_suexec Submitted By: Dan Poirier Reviewed By: covener 	r722958
----------------------------
Don't do anything by defautl if we haven't been configured. 	r722398
----------------------------
When not configured, don't do anything by default. 	r722397
----------------------------
* Enable the use of autoconf >= 2.62 without causing APR / APR-UTIL options passed to the configure script issue warnings about unknown options. 	r721796
----------------------------
correct syntax of DirectoryIndex feature, CHANGES only 	r721678
----------------------------
* buildconf, configure.in: Don't attempt to configure the no-longer-bundled pcre. 	r721533
----------------------------
So close ;-)  Nicely done Jim Add the sed sources to mod_sed, no different than the sed_obj list from config.m4 (.h files just for easy reference). Apache.dsw is simply sorted entries, and picking to drop a new module under BuildBin (common) or BuildAll (test and nonstandard extensions).  Give us mod_sed :) Makefile.win is simply the invocation of the .mak file that gets exported, and the copy of that module (pdb debugging) binary. Can't update BaseAddr.ref except from windows, however, we have to build once and determine how many 64k pages this object is going to eat.  Turns out, it's only one. 	r720062
----------------------------
"change short-lived behavior of ""DirectoryIndex None"" based on feedback from wrowe: Doesn't search for anything: DirectoryIndex disabled Does search for literal ""disabled"": DirectoryIndex disabled foo. DirectoryIndex foo disabled DirectoryIndex disabled disabled Does search: DirectoryIndex disabled.html "	r713462
----------------------------
Add Simple MPM to example mpm config. Submited by: Ryan Phillips <ryan trolocsis.com> 	r712611
----------------------------
* Correctly set SSL_LIBS during openssl detection if pkgconfig is not available. PR: 46018 	r711993
----------------------------
Further unixd hacks to remove duplication between old-unixd and mod_unixd, and get it working with old MPMS[1] + mod_unixd.  It's still an uneasy split, as some modules (mod_cgid, suexec)[2] also use unixd. More thinking+hacking due. [1] Should be prefork/worker/event, but only worker is tested. [2] cgid is OK, suexec is untested. 	r711146
----------------------------
Move security check to post_config, ćos pre-config hooks don´t 	run
----------------------------
Fix handling of authz configurations, make default authz logic replicate 2.2.x authz logic and support existing configurations (including .htaccess files), and replace <Satisfy*>, Reject, and AuthzMergeRules directives with Match, <Match*>, and AuthzMerge directives. 	r709838
----------------------------
Add AuthType of None to support disabling authentication. Prevent crash when provider alias created to provider which is not yet registered. Migrate remaining functionality of mod_authn_default to mod_authn_core. 	r709553
----------------------------
Allow <Limit> and <LimitExcept> directives to nest, and constrain their use to conform with that of other access control and authorization directives. 	r709551
----------------------------
Remove SimpleUser configuration command, this will all be handled inside mod_unixd. 	r709060
----------------------------
* include/http_core.h (core_dir_config): Fix warning: overflow in implicit constant conversion, 	r708828
----------------------------
* server/mpm/simple/simple_io.c: s/simple_io_timeut_cb/simple_io_timeout_cb/g Noticed by: Ruediger Pluem 	r708707
----------------------------
Adding .fr translations for suexec logs server-wide sections new_features_2_4 urlmapping dso upgrading glossary 	r708014
----------------------------
Fix the io buffersize code. Have the docs match the code and allow more flexibility in settings. Also, document the ProxyPass/worker options of io and rec buffersize. 	r707357
----------------------------
leave a hint about some non-intuitive startup behavior for RewriteMap programs 	r707041
----------------------------
* Move ap_timeout_parameter_parse from mod_proxy.c to server/util.c and thus make it part of the public API. 	r707022
----------------------------
"*) mod_dir: Support ""DirectoryIndex None"" "	r706001
----------------------------
"Prior to authn/z refactoring in r368027, if authorization Require directives had no matching AuthType and associated authentication directives, requests would generally fall through in the check_user_id hook to mod_authn_default.c's authentication_no_user() handler, which returned DECLINED if ap_auth_type() was not set. The ap_process_request_internal() function in request.c would handle this case by logging an ""AuthType not set!"" error and returning HTTP_INTERNAL_SERVER_ERROR. The refactoring removes this error handling in request.c, so individual modules will need to test for a lack of authentication, as necessary.  Since some modules such as mod_authz_host.c support Require directives that do not need any authentication, the mod_authn_default.c handler no longer returns DECLINED if ap_auth_type() is not set.  (Also, mod_authn_default can be compiled out with --disable-authn-default, so it can't be relied upon to exist.) Since r->user may now be NULL, individual handlers must test for that case when necessary.  Otherwise, most Require directives in the absence of AuthType directives cause handlers to crash while performing strcmp() and friends on a NULL r->user value. NOTE: I can't test mod_authnz_ldap.c myself, so I'm not sure if it needs similar fixes.  On the one hand, a NULL r->user in the authz handlers always generates a log message.  However, it appears that authn_ldap_build_filter() will sometimes then be called, perform no action, which may result in a possibly uninitialized filtbuf buffer being passed to util_ldap_cache_getuserdn().  I don't know if that could cause problems in the LDAP cache code.  If someone familiar with LDAP authz could take a look, that would be much appreciated. "	r705361
----------------------------
Add example and comments when using ScriptAlias with a file. 	r705117
----------------------------
* Add the possibility to set the worker parameters connectiontimeout and ping in milliseconds and the parameter acquire in seconds. Add the new currently static function ap_timeout_parameter_parse that should become a general utility function once its API is hammered out. 	r705005
----------------------------
* Revert r703998. The call to apr_socket_timeout_set before apr_socket_connect already sets the socket to non-blocking mode because the timeout of the socket is -1 after creation. A further call to apr_socket_timeout_set (after the connect call does not do this, because the old and the new timeout are >=0). The further code expects the socket to be in non-blocking mode, otherwise we have regressions with ssl. This can be notified by running t/ssl/proxy on 2.2.x which runs much much slower with the patch applied. This does not happen on trunk because the socket is set back to non blocking by the core output filter (async write completion). 	r704753
----------------------------
* Make the connection timeout to backends work by temporarily setting the socket to non blocking mode. Submitted by: Matt Stevenson <mavricknzwork yahoo.com> Reviewed by: rpluem 	r703998
----------------------------
Reimplement ThreadStackSize to behave as on unix for any Windows 2003/2008 (XP/Vista) servers.  Virtual allocations will only consume pages once referenced, while the page alignment will vary by ThreadStackSize setting so that the maximum number of threads and minimum stack VM profile will be wasted. 	r699481
----------------------------
For timeouts, behave as before and not drop. From Adam Woodworth <mirkperl gmail.com> 	r697362
----------------------------
"Introduce Suspendable Requests to the Event MPM. Using this basic framework, you can return SUSPENDED from an HTTP Handler, and then register a callback that is invoked by the MPM at a later time. This initial version only supports _timers_ as callbacks, but in the future I would like to add things like wait for socket activity, on a socket specified by the handler. Once in a callback, It is then the responsibility of the callback fucntion to finish the HTTP Request handling, but this alows you to do cool things like a fully async proxy, COMET support, or even rate limiting. To prove I'm not insane, I've inlcuded an example module, mod_dialup. You can configure it like this: <Location ""/docs""> ModemStandard ""V.32"" </Location> And for static files inside that path, you will be rate limited to V.32 speeds, aka 9.6 kilobits/second. Does anyone besides RÃ¼diger read commit emails :-) ? I know there are likely huge problems with this, but I would like to see how far we can push the Event MPM, figure out what to do better, if there is anything, and then really dive into the 3.0 development before ApacheCon. * server/mpm/experimental/event/fdqueue.h: * server/mpm/experimental/event/fdqueue.c * server/mpm/experimental/event/event.c * server/config.c * modules/http/http_core.c * modules/http/http_request.c * include/ap_mmn.h: Bump MMN. * include/ap_mpm.h * include/httpd.h: * include/http_request.h * modules/test/config.m4: Add mod_dialup to build. * modules/test/mod_dialup.c: New rate limiting module, requires the Event MPM "	r697357
----------------------------
* Allow empty substitute patterns (to remove data from the stream), but disallow empty search patterns. 	r693727
----------------------------
Add in useful feature. %k which logs the keepalives value. PR: 45762 	r693120
----------------------------
Permit --with-apr=/path/to/apr alone, where the default path will be handled by replacing all /apr path segments with /apr-util (or /aprutil) to handle nearly any developer's path scheme.  One where both /aprutil and /apr-util path segments exist. So for example --with-apr=../apr-1.3 would find either ../apr-util-1.3 or ../aprutil-1.3 before looking for srclib/apr-util or ../apr-util. These refer to source trees.  httpd ./configure deserves a similar feature to use --with-apr= for an installed apr-util lib tree. 	rare
----------------------------
Allow determination of whether to use ';' as a sticky session path delim/sep (ala mod_jk) to be runtime (and balancer-wise) configurable. 	r687754
----------------------------
* Allow directive elements in default elements as default values can be the settings of other directives (e.g ProxyTimeout and Timeout). 	r686853
----------------------------
* Fix error in default setting for ProxyTimeout 	r686547
----------------------------
The error logging core only logs at very high level if it has no server_rec from which to read the appropriate LogLevel.  Ensure that everything gets logged when -DDEBUG is passed to the compiler. This makes the server very verbose, on the command line before stderr is debugging, but not under normal circumstances. 	redirected
----------------------------
I've long hated this technique, in which the hostname is prepended to the REQUEST_URI, and then munged on a second pass through. It's confusing, hard to explain to beginners, and completely unnecessary. Use RewriteCond backreferences instead. 	r685415
----------------------------
"This adds a more generic ""add www. to all hostnames"" ruleset. It also makes the existing rulesets in this section work both in the main configuration file and in .htaccess files, by making the leading slash optional - ie ^/? "	r685411
----------------------------
"* Introduce environment variable proxy-initial-not-pooled to avoid reusing pooled connections if the client connection is an initial connection. This avoids the ""proxy: error reading status line from remote server"" error caused by the race condition that the backend server closed the connection after the connection check on our side and before our data reached the backend. Yes, this downgrades performance, especially with HTTP/1.0 clients. Hence it is configurable and off by default. PR: 37770 "	r684351
----------------------------
* Add the possibility to set a separate connection timeout for backend workers. PR: 45445 Submitted by: rahul <rahul sun.com> Reviewed by: rpluem 	r684341
----------------------------
* Improve timeout documentation even more 	r684338
----------------------------
* Fix bogus explanation of timeout parameter 	r684337
----------------------------
"Admonish people not to put ""AllowOverride All"" in <Directory /> and expect it to do anything useful. "	r684326
----------------------------
Adds LogFormat example to the split-logfiles documentation to clarify what is meant about using %v 	r684308
----------------------------
* Include http_config.h to ensure that cmd_parms is defined, otherwise e.g. the perl test framework breaks. 	r673999
----------------------------
mod_auth_digest: Detect during startup when AuthDigestProvider is configured to use an incompatible provider via AuthnProviderAlias. PR 45196 	r672639
----------------------------
This macro for SSL detection was altogether wrong.  Refactoring to restore the ability to build and link against a specified --with-ssl[c]=path, including use of pkg-config variables which were ignored during the autoconf test phase. 	r669924
----------------------------
* add <compatibility> to DefaultType * minor fixes 	r669847
----------------------------
Add a example of  SeeRequestTail 	r668628
----------------------------
* clean the compatibility note of SeeRequestTail * use <code> 	r668620
----------------------------
core: Fix address-in-use startup failure on some platforms caused by attempting to set up an IPv4 listener which overlaps with an existing IPv6 listener. The failure occurred on the second pass of the open-logs hook in a configuration such as the following: Listen 8080 Listen 0.0.0.0:8081 Listen [::]:8081 During the first pass, the two port 8081 listen recs were adjacent and existing logic prevented binding to 0.0.0.0:8081. On the second pass, they were not adjacent and we then tried to bind to 0.0.0.0:8081, leading to failure on some platforms (seen on SLES 9 and Ubuntu 7.10, not seen on many other Unix-ish platforms). Leave a note about other unhandled configurations. 	r664535
----------------------------
apachectl configtest or httpd -t doesn't show a list of config files 	r661942
----------------------------
Prevent CSRF attacks against the balancer-manager (CVE-2007-6420) * modules/proxy/mod_proxy_balancer.c (balancer_init): New function. (balancer_handler): Place a nonce in the form output, and check that the submitted form data includes that nonce. (ap_proxy_balancer_register_hook): Register the new post_config hook. 	r661666
----------------------------
Determine registered authn/z providers directly in ap_setup_auth_internal(), which allows optional functions that just wrapped ap_list_provider_names() to be removed from authn/z modules. This change requires modules/aaa/mod_auth.h to be included into server/request.c, which necessitates a minor change to configure.in for Unix platforms. I'm unable to tell whether a similar change is necessary for Windows and NetWare builds or not.  Could developers with access to those platforms please test and make any needed configuration or build alterations?  Thanks! 	r659160
----------------------------
Add default value for DBDExpire, DBDKeep, DBDMin and DBDMax. Pointed out by: Andrew Ford <A.Ford ford-mason.co uk> 	r657498
----------------------------
* Include <limits.h> earlier if available since INT_MAX is defined there on Windows and we need INT_MAX already for the definition of MAX_REQUESTS. PR: 45024 	r657433
----------------------------
configure: Don't reject libtool 2.x PR 44817 	r657354
----------------------------
* Don't track 1.3 compatibility * SeeRequestTail was backported to 2.2 in r602508 	r655888
----------------------------
note that KeepAliveTimeout of the first defined virtual host in the set of NameVirtualHost will be used improve r653856 PR: 36770 	r655438
----------------------------
"When testing for slash-terminated configuration paths in ap_location_walk(), don't look past the start of an empty string such as that created by a <Location """"> directive. "	r654998
----------------------------
mention the default for ProtocolEcho. Pointed out by: Andrew Ford <A.Ford ford-mason.co.uk> 	r654507
----------------------------
*) mod_cgid: Explicitly set permissions of the socket (ScriptSock) shared by 	r654332
----------------------------
* modules/ssl/mod_ssl.c (ssl_cleanup_pre_config): Remove the call to CRYPTO_cleanup_all_ex_data here, fixing a per-connection memory leak which occurs if the client indicates support for a compression algorithm in the initial handshake, and mod_ssl is linked against OpenSSL >= 0.9.8f. Thanks to Amund Elstad and Dr Stephen Henson for analysis of this issue. 	r654119
----------------------------
mention that KeepAliveTimeout will be ignored in a name-based virtual host context. PR: 36770 	r653856
----------------------------
* modules/session/config.m4: Have --disable-session disable mod_session_* also. 	r649054
----------------------------
Move the KeptBodySize directive, kept_body filters and the ap_parse_request_body function out of the http module and into a new module called mod_request, reducing the size of the core. 	r647263
----------------------------
Move the initialization of rebind to the post_config handler so that it is done during the actual module load stage rather than the preload stage.  If done during the preload stage, the pool passed into the initialization function will be cleared and all allocations will be freed. 	r646582
----------------------------
Handle integer configuration directive parameters with a dedicated function, akin to dbd_param_flag().  Only needed when APR_HAS_THREADS. 	r646453
----------------------------
Adjust socache init interface to take sizing hints, and namespace tag for memcache: * modules/cache/ap_socache.h (struct ap_socache_hints): New structure. Change init callback to take namespace string and hints structure pointer. * modules/cache/mod_socache_dc.c (socache_dc_init): Adjust accordingly. * modules/cache/mod_socache_dbm.c (struct ap_socache_instance_t): Rename timeout field to expiry_interval. (socache_dbm_init, socache_dbm_create): Take expiry interval from hints rather than hard-code to 30. (socache_dbm_expire): Update for timeout field rename. * modules/cache/mod_socache_shmcb.c (socache_shmcb_init): Adjust for hints and namespace; adjust subcache index sizing heuristics to use passed-in hints. * modules/cache/mod_socache_memcache.c (struct ap_socache_instance_t): Add tag, taglen fields. (socache_mc_init): Store the passed-in namespace in instance structure. (mc_session_id2sz): Adjust to not take context, use configured tag as string prefix, and not use a return value. (socache_mc_store, socache_mc_retrieve, socache_mc_remove): Adjust for mc_session_id2sz interface changes. * modules/ssl/ssl_scache.c (ssl_scache_init): Pass namespace and hints to socache provider init function. 	r645978
----------------------------
* modules/ssl/ssl_engine_config.c: Remove unused macro. 	r645941
----------------------------
Session cache interface redesign, Part 9: Switch mod_ssl to use the ap_socache interface. * modules/ssl/ssl_scache_shmcb.c, modules/ssl/ssl_scache_memcache.c, modules/ssl/ssl_scache_dc.c, modules/ssl/ssl_scache_dbm.c: Remove files. * modules/ssl/mod_ssl.c (modssl_register_scache): Remove function. * modules/ssl/ssl_private.h: Remove modssl_sesscache_provider etc. (SSLModConfigRec): Switch to using socache types. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Switch to use socache provider. * modules/ssl/ssl_engine_mutex.c, modules/ssl/ssl_scache.c: Switch to using socache constants. * modules/ssl/config.m4: Drop distache/memcache configuration, remove old objects. 	r645940
----------------------------
Session cache interface redesign, Part 8: Abstract out the mod_ssl session caching interface into a separate set of modules, mod_socache_*. * modules/cache/ap_socache.h: New file. * modules/cache/config.m4: Copy CHECK_DISTCACHE from ../ssl/config.m4; add new socache modules. * modules/cache/mod_socache_dbm.c: Copied from ../ssl/ssl_scache_dbm.c. s/ssl_scache_/socache_/; add module structure and register_hooks. * modules/cache/mod_socache_shmcb.c: Copied from ../ssl/ssl_scache_shmcb.c. s/ssl_scache_/socache_/; add module structure and register_hooks. Add SHMCB_MAX_SIZE definition, replacing APR_SHM_MAXSIZE. * modules/cache/mod_socache_memcache.c: Copied from ../ssl/ssl_scache_memcache.c. s/ssl_scache_/socache_/; add module structure and register_hooks. Enable for APR-Util 1.3.x at compile-time, omitting configure-time checks. * modules/cache/mod_socache_dc.c: Copied from ../ssl/ssl_scache_dc.c. s/ssl_scache_/socache_/; add module structure and register_hooks. 	r645844
----------------------------
* In the case that we fail to read the response line from the backend and if we are a reverse proxy request shutdown the connection WITHOUT ANY response to trigger a retry by the client if allowed (as for idempotent requests). BUT currently we should not do this if the request is the first request on a keepalive connection as browsers like seamonkey only display an empty page in this case and do not do a retry. Related to PR 37770 	r645813
----------------------------
Include http_config.h from http_core, since now without CORE_PRIVATE, you need the definition for the module type. 	r645432
----------------------------
mod_session_crypto: Initialise SSL in the post config hook. 	r645244
----------------------------
Fix the defaults, which currently override the config instead of default the config. [Ruediger Pluem] 	r645243
----------------------------
If you study all of the directive implementations, you'll note that we get less than 20% of the NOT_IN_LIMIT rules correct. <Limit > works in about 4 directive contexts and yet, we ignore this fact for 100's of directives.  Simply eliminate this nonsense in anticipation of a 100% solution. 	r645190
----------------------------
If you study all of the directive implementations, you'll note that we get less than 20% of the NOT_IN_LIMIT rules correct. <Limit > works in about 4 directive contexts and yet, we ignore this fact for 100's of directives.  Simply eliminate this nonsense in anticipation of a 100% solution. 	r645189
----------------------------
Remove an unnecessary config structure lookup during encrypt and decrypt. [Ruediger Pluem] 	r645187
----------------------------
Clarify the operation of the SessionCryptoPassphrase directive as raised by rpluem. When SessionCryptoCertificateFile is set, asymmetrical encryption will be used, and SessionCryptoPassphrase will be interpreted as the passphrase protecting the private key. When SessionCryptoCertificateFile is not set, symmetrical encryption is used, and SessionCryptoPassphrase will contain the key to use. Make sure that the engine parameter is properly passed into the crypto functions, and fix a missing cleanup on an error case. 	r645186
----------------------------
In hopes of replacing <Limit > with <Method > - choose another example to point to for documenting these functions. 	r645165
----------------------------
Make sure we protect ourselves against the session being NULL, which it will be if no session is configured. 	r645112
----------------------------
Add condition for <If> sections to core config merge (a fix to r644253) 	r644730
----------------------------
Avoid calling access control hooks for internal requests with configurations which match those of the initial request.  Revert to the original behaviour (call access control hooks for internal requests with URIs different from the initial request) if any access control hooks or providers are not registered as permitting this optimization. Introduce wrappers for access control hook and provider registration which can accept additional mode and flag data. The configuration walk optimizations were originally proposed a while ago (see http://marc.info/?l=apache-httpd-dev&m=116536713506234&w=2); they have been used since then in production systems and appear to be stable and effective.  They permit certain combinations of modules and clients to function efficiently, especially when a deeply recursive series of internal requests, such as those generated by certain WebDAV directives. The major change from the original proposal is a cleaner mechanism for detecting modules which may expect the old behaviour.  This has been tested successfully with Subversion's mod_authz_svn, which specifically against its own private access control configuration files. 	requires
----------------------------
HTTPD Core: Implement <If> sections for conditional (runtime) configuration. N.B. This is a first pass, and has a way to go! 	r644253
----------------------------
Update mod_filter to use ap_expr Advantage: supports more complex expressions while simplifying mod_filter (c.f. PR 43956 - this means chaining is no longer necessary) NOTE: this changes FilterProvider syntax, so can't be backported to 2.2. 	r642983
----------------------------
Update Timeout section, the semantics changed completely since 1.3 and the caveats on signals not being reset thankfully no longer apply either. 	r641855
----------------------------
Add a caveat about SetEnv running late 	r641391
----------------------------
Add AuthzMergeRules to example configuration, and avoid use of ISO SQL:1999 Booleans in example SQL.  Revise some introductory text. 	r640951
----------------------------
Document new ChrootDir directive (r611483) 	r639005
----------------------------
Make the RewriteRule docs shorter (!) by referencing the regex docs in the 	rewrite
----------------------------
PR 43562. fix regression in mod_speling behavior from 1.3/2.0 and, basically, incorrect behavior from what is expected as well as dependency on AcceptPathInfo. 	r635953
----------------------------
Fix quoting for AuthLDAPUrl examples. Submitted by: Per Lundberg (Per.Lundberg bredband.com) 	r634155
----------------------------
When sending a proxy request of the form GET http://[3ffe:1:1001:3000:230:5ff:fe05:3c3c]/server-status HTTP/1.0 through the httpd-2.x mod_proxy.c code, while a directive ProxyDomain .my.dom.ain is in effect, the request is redirected to Location: http://[3ffe:1:1001:3000:230:5ff:fe05:3c3c.my.dom.ain]/server-status The patch fixes this bug, by testing whether the hostname part of the unparsed_uri contains colon characters (which is the case only for IPv6 literals). This patch is also a candidate for httpd-2.0 and httpd-2.2 	r632304
----------------------------
* Do not segfault when either no mutex is needed either because no session cache is configured or the session is thread safe. 	r631693
----------------------------
Session cache interface redesign, Part 6: Move mutex handling up out of the session cache providers: * modules/ssl/ssl_private.h (modssl_sesscache_provider): Add name and flags fields.  Define MODSSL_SESSCACHE_FLAG_NOTMPSAFE constant. * modules/ssl/ssl_scache.c (ssl_scache_store, ssl_scache_retrieve, ssl_scache_remove, ssl_ext_status_hook): Lock and release the mutex around provider calls, if necessary. * modules/ssl/ssl_engine_mutex.c (ssl_mutex_init): Do nothing if no session cache is configured, or the session cache does not require a mutex.  Otherwise, fail if no mutex is configured and the session cache *does* require a mutex. (ssl_mutex_on, ssl_mutex_off): Remove checks for mutex mode; functions now invoked only if necessary. * modules/ssl/ssl_scache_dc.c, modules/ssl/ssl_scache_memcache: Set name and flags fields in provider structures. * modules/ssl/ssl_scache_shmcb.c, modules/ssl_scache_dbm.c: Remove mutex handling through; set name and flags fields in provider structures; mark both as unsafe for concurrent access in flags. 	r631297
----------------------------
* modules/ssl/ssl_scache.c (ssl_ext_status_hook): Do nothing if no provider is configured. Submitted by: rpluem 	r631119
----------------------------
Session cache interface redesign, Part 5: Use the ap_provider interface for session cache storage providers. * modules/ssl/mod_ssl.c (modssl_register_scache): New function. (ssl_register_hooks): Call it. * modules/ssl/ssl_private.h: Define MODSSL_SESSCACHE_PROVIDER_GROUP and MODSSL_SESSCACHE_PROVIDER_VERSION constants. Remove ssl_scmode_t type.  Change nSessionCacheMode in SSLModConfigRec into a long sesscache_mode, storing the OpenSSL SSL_SESS_CACHE_* flags directly. * modules/ssl/ssl_engine_config.c (ssl_config_global_create): Set sesscache_mode to SSL_SESS_CACHE_OFF by default. (ssl_cmd_SSLSessionCache): Remove ifdef spaghetti; fetch configured session cache by provider name.  Set mc->sesscache_mode for configured providers. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_session_cache): Use the configured mode flags directly from mc->sesscache_mode. 	r631000
----------------------------
Session cache interface redesign, Part 4: Move provider-specific configuration handling down into the provider code.  Eliminate all use of SSLModConfigRec within provider code. * modules/ssl/ssl_private.h (modssl_sesscache_provider): Add 'create' function which creates and configures the cache provider, before initialisation.  Change 'init' function to take the context pointer as an input parameter, and reorder to be first. * modules/ssl/ssl_scache.c (ssl_scache_init): Adjust accordingly. * modules/ssl/ssl_scache_memcache.c (struct context): Add servers field. (ssl_scache_mc_create): New function. (ssl_scache_mc_init): Use servers from context not SSLModConfigRec. * modules/ssl/ssl_scache_dbm.c (struct context): Define. (ssl_scache_dbm_create): New function. (ssl_scache_dbm_init, ssl_scache_dbm_kill): Adjust to use filename and pool from context. (ssl_scache_dbm_store, ssl_scache_dbm_retrieve, ssl_scache_dbm_status): Use filename from context.  Use context pool for temp storage of the DBM object, and clear before use. (ssl_scache_dbm_expire): Remove static tLast; use last_expiry from context.  Use context pool for temp storage and clear before use. * modules/ssl/ssl_scache_dc.c (struct context): Add target field. (ssl_scache_dc_init, ssl_scache_dc_status): Use target from context. * modules/ssl/ssl_scache_shmcb.c (struct context): Add data_file, shm_size fields. (ssl_scache_shmcb_create): New function; moved argument parsing logic from ssl_cmd_SSLSessionCache (ssl_scache_shmcb_init, ssl_scache_shmcb_status): Use config from context. * modules/ssl/ssl_engine_config.c (ssl_config_global_create): Remove handling of old provider-specific fields. (ssl_cmd_SSLSessionCache): Call provider ->create function to parse the argument and create provider-specific context structure. 	r630974
----------------------------
Session cache interface redesign, Part 3: Move provider-private context out of SSLModConfigRec and into an opaque context pointer.  Use real error propagation in the ->init functions rather than ssl_die(). * modules/ssl/ssl_private.h (modssl_sesscache_provider): Take a context out-parameter from ->init, and return an apr_status_t. Add context pointer as first arg for the other function types. (SSLModConfigRec): Remove tSessionCacheData* fields; add sesscache_context field. * modules/ssl/ssl_scache.c (ssl_scache_init): Move once-per-process invocation check back into here. (ssl_scache_*): Adjust to use context pointer. * modules/ssl/ssl_scache_shmcb.c, modules/ssl/ssl_scache_dc.c, modules/ssl/ssl_scache_dbm.c: Adjust all implementations to use opaque context pointer. * modules/ssl/ssl_scache_memcache.c: Move memcache context into the context structure rather than using global state. * modules/ssl/ssl_engine_config.c: Remove handling of pSessionCacheData* fields in SSLModConfigRec. 	r630323
----------------------------
Re-implement the SSL session cache abstraction using a vtable; first step towards use of the ap_provider interface: * modules/ssl/ssl_private.h (modssl_sesscache_provider): Add new vtable type. (SSLModConfigRec): Reference the vtable here. Replace all the ssl_scache_* prototypes with provider vtable objects. * modules/ssl/ssl_scache.c (ssl_scache_init, ssl_scache_kill, ssl_scache_retrieve, ssl_scache_store, ssl_scache_remove, ssl_ext_status_hook): Use callbacks from vtable rather than ifdef spaghetti. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_session_cache): Only install the OpenSSL callbacks if a vtable is configured. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Set up vtable pointer. * modules/ssl/ssl_scache_dc.c, modules/ssl_scache_mc.c: Adjust to make implementations static, and add vtable definition. * modules/ssl_scache_shmcb.c: Likewise; also move the init one-per-process requirement down here. * modules/ssl_scache_dbm.c: Likewise; also (temporarily) use a local subpool in the store callback. 	r630163
----------------------------
Change default of mod_substitute to flattening... Via current discussion on dev@httpd 	r627764
----------------------------
Kasper Brand came across a flaw in the current implementation when CRL information - i.e.  SSLCARevocationFile/SSLCARevocationPath - is set on a per-vhost basis (don't know how much sense it makes to have non-global CRLs, but anyway...). The attached patch (47B2B1A7.1060009@velox.ch on httpd-dev) addresses this issue, and it also improves the logging behavior for an SNI enabled configuration (previously some of the messages would always go to the first vhost, or wouldn't appear at all, depending on the LogLevel of the first vhost). 	reviewed:
----------------------------
The ordering of arguments in the directive desctiptions of LDAPTrustedGlobalCert and LDAPTrustedClientCert were backwards. 	r627637
----------------------------
"Fix reference to RewriteCond - there's no class=""module"" in our XML. "	r627428
----------------------------
Addition of a test script which creates a Sample/test configuration for installations that wants to support SNI. Primarily done as a lot of web developers find the creation of certificates hard - and do not want to go to the expense of sourcing a handful from a well-known CA just for testing and experimenting. Also update the CHANGES log with the word 'SNI' as to make googling it easier. 	r620630
----------------------------
As per PR 44135 Feeling brave mucking with the rewrite docs =) setenvif -> added link to rewrite.html#rewritecond 	rewrite
----------------------------
Added notice that support forums will likely ask for an errorlog entry. 	r619699
----------------------------
* Fix a typo (timout -> timeout) PR: 44360 Submitted by: Rainer Jung <rainer.jung kippdata.de> Reviewed by: rpluem 	r619125
----------------------------
Update transformation. Note that commit r618551 also addresses PR44356 (missing slash on ProxyPass) 	r618552
----------------------------
Resolve console-mode stdout file descriptor issues for mod_perl by replacing it in lockstep with unix stdout replacement (in pre_config).  Only an undetached server (console mode single process/debug) will retain the original stdout, just as on unix.  Inspired by research of Tom and myself (CHANGES to credit both). PR: 43534 	r609354
----------------------------
Introduce the ProxyFtpDirCharset directive, allowing the administrator to identify a default, or specific servers or paths which list their contents in other-than ISO-8859-1 charset (e.g. utf-8). Submitted by: Ruediger Pluem 	r607638
----------------------------
* Change loglevel from ERROR to WARNING if the renaming of the vary, headers or data file fails. 	r607440
----------------------------
* Adjust etag generation to produce identical results on 32-bit and 64-bit platforms and avoid a regression with conditional PUT's on lock and etag. Add a warning to the documentation of FileETAG that changes of the ETAG format can cause conditionals to fail on mod_dav_fs provided backends. PR: 44152 Submitted by: Michael Clark <michael metaparadigm.com> Reviewed by: rpluem 	r607437
----------------------------
* Make loglevel consistent for similar situations. As this really should not happen set it to error. 	r607245
----------------------------
Enable to configure the https port - missing pieces. 	r606806
----------------------------
Enabled to configure the https port as we do with http port too. 	r606316
----------------------------
Plug in build/installwinconf.awk, unplug httpd-win.conf and follow the same general configuration as all platforms. 	r606158
----------------------------
"Start preparing to use the general-case httpd.conf.in, on Win32. Note the quoted log *filenames*, which lets us figure out the difference between fixing ""access_log"" to be a windows friendly ""access.log"", and leaving the custom log format name pretty_log alone. Also, prefer the user specified port for example ServerName. "	r606135
----------------------------
* Use a separate subpool to manage the data for the socket and the connection member of the proxy_conn_rec struct as we destroy this data more frequently than other data in the proxy_conn_rec struct like hostname and addr (at least in the case where we have keepalive connections that timed out and were closed by the backend). This fixes a memory leak with short lived and broken connections. PR: 44026 	r603237
----------------------------
Document the usage of ProxyIOBufferSize to extend the default AJP message length. 	r602806
----------------------------
* mod_substitute is no longer experimental. 	r602736
----------------------------
* Optimize memory behaviour of mod_substitute by * Precreate all needed brigades, save them in the filter context and reuse * Use a temporary pool for all the needed copy stuff and clean it up every * Use transient instead of pool buckets. * There are cases that lead to the exceptional situation of a very large 	r602469
----------------------------
Briefly mention UserDir's url redirection abilities 	r599655
----------------------------
UserDir accepts multiple file paths. Submitted by: Vincent Jong <megaspaz tron.megaspaz.net> 	r599646
----------------------------
Repeated 'RewriteRule' 	r599603
----------------------------
mod_ssl: Add support for OCSP validation of client certificates: * modules/ssl/ssl_engine_config.c (modssl_ctx_init, modssl_ctx_cfg_merge): Initialize and merge OCSP config options. (ssl_cmd_SSLOCSPOverrideResponder, ssl_cmd_SSLOCSPDefaultResponder, ssl_cmd_SSLOCSPEnable): Add functions. * modules/ssl/mod_ssl.c (ssl_config_cmds): Add config options. * modules/ssl/ssl_private.h: Add prototypes, config options to modssl_ctx_t. * modules/ssl/ssl_util_ocsp.c: New file, utility interface for dispatching OCSP requests. * modules/ssl/ssl_engine_ocsp.c: New file, interface for performing OCSP validation. * modules/ssl/ssl_engine_kernel.c (ssl_callback_SSLVerify): Perform OCSP validation if configured, and the cert is so-far verified to be trusted.  Fail if OCSP validation is configured an the optional-no-ca check tripped. * modules/ssl/config.m4: Check for OCSP support, build new files. * modules/ssl/mod_ssl.dsp: Build new files. * modules/ssl/ssl_toolkit_compat.h: Include headers for OCSP interfaces. PR: 41123 Submitted by: Marc Stern <marc.stern approach.be>, Joe Orton Reviewed by: Steve Henson <steve openssl.org> 	r599385
----------------------------
* mod_substitute is now below filters and no longer in experimental. 	r598669
----------------------------
move mod_substitute from exp to filters 	r598651
----------------------------
mod_filter: don't segfault on (unsupported) chained FilterProviders. PR 43956 	r598299
----------------------------
no content changes move the xml doc for KeptBodySize to its rightful, alphabetical location (the transformed version was already alphabetized) 	r594855
----------------------------
Add mod_serf, a reverse proxy module, which uses serf[1] as its http client library. To enable, pass something like this to configure: To try it out, put something like this in your httpd.conf: <Location /> </Location> LocationMatch and all related directives can also be used, magical eh? [1] - http://code.google.com/p/serf/ 	r594425
----------------------------
fix to http://svn.apache.org/viewvc?rev=591499&view=rev to properly copy into char ***retvals when AuthLDAPUrl has extra attributes specified 	r593919
----------------------------
Add in SeeRequestTail directive, to handle the shortcoming of only storing 63 bytes of the request, when the requests are longer than that and only vary towards the end; eg: 	r590641
----------------------------
"Update the patch for environment variable interpolation in ProxyPass/Reverse/etc directives: r421686, r422178, r421686, r421725 That patch stalled on wrowe's veto.  This update introduces a new ""interpolate"" keyword to all directives affected, so should meet his concerns by adding explicit per-directive control (disabled by default). "	r589371
----------------------------
Fix possible crash at startup in case of nonexistent DocumentRoot. PR#39722 	r589177
----------------------------
"mod_proxy: add ""nocanon"" keyword to ProxyPass, to suppress URI-canonicalisation in a reverse proxy. PR 41798 "	r588791
----------------------------
Unless I've misread this, POD is write-blocking, read nonblocking timeout 0. 	r587673
----------------------------
We now have an API to describe pipe creation timeout states, so use it to ensure no platform has quirks with their particular default. 	r587670
----------------------------
mod_substitute module docs, first bash. 	r587150
----------------------------
"Improve documentation of ""DefaultType None"" "	r584842
----------------------------
Document ProxyMaxForwards change in r581117 	r581253
----------------------------
Default to NOT setting Max-Forwards in violation of RFC2616 Leave old behaviour as a configuration option (ProxyMaxForwards) PR 16137 	r581117
----------------------------
"Document ""DefaultType None"" option (PR 13986) "	r580502
----------------------------
Fix keepalive to proxy backend PR 43472 	r580466
----------------------------
Share a single write-pipe handle for piped stderr logging, this prevents an extra logging process from hanging around after the initial config-phase. Reviewed by: rpluem, wrowe 	r580437
----------------------------
With the exception of exclusively test/stress modules, add all of the modules we are compiling (in any shape). drop mod_imagemap, mod_userdir from the default-loaded modules add mod_authn_core/mod_authz_core to the default-loaded modules Several other modules should be considered for default-loaded or default-not loaded changees. 	r580249
----------------------------
"Add ""DefaultType None"" option PR 13986 and PR 16139 "	r579991
----------------------------
mod_log_config: Add format options for %p so that the actual local or remote port can be logged. PR:  43415 Submitted by: Adam Hasselbalch Hansen <ahh@one.com> Extensively commented on and/or modified by Ruediger Pluem and Jeff Trawick 	r579425
----------------------------
Clarify what happens if you don't have a ServerName in your <VirtualHost>, since people sometimes assume that this implies the host has no name, resulting in confusion. Suggested by: Michael Rasmussen <mikeraz patch.com> 	r578949
----------------------------
document the mod_userdir-like tilde expansion sometimes performed by mod_rewrite A tilde can sneak into a rule via a backreference and cause some surprising behavior 	r577254
----------------------------
* Add the novary flag to RewriteCond in order to prevent the appending of HTTP headers used in a rewrite condition to the Vary header of the response. 	r574684
----------------------------
Don't call into get_worker while holding the timeout_list mutex. PR: 42031 	r574462
----------------------------
Propagate Proxy-Authorization header correctly PR 25947 RFC2616 tells us: (1) If we haven't authenticated, we must pass the header on. (2) If we have authenticated, we MAY pass it on. I've made the latter case configurable by ENV(Proxy-Chain-Auth). Also, Proxy-Authenticate is a response header, and doesn't belong in a check of request headers. 	r574021
----------------------------
Check all IP addresses listed in ProxyBlock PR 36987 	r573911
----------------------------
Add option to escape backreferences in RewriteRule. PR 34602  and  PR 39746 Patch by Guenther Gsenger 	r573831
----------------------------
Refactor releasing the child processes by eliminating the time lookup, eliminating the bogus/misimplemented function, and introducing fairness to release any dead threads before getting hung up on releasing longer lived threads. Also pick up the time-to-wait from the server global timeout. 	r573103
----------------------------
Add support for proxy-nokeepalive (for testings). 	r572919
----------------------------
* Improve ProxySet documentation by pointing out one pitfall and one interesting use case. 	r571836
----------------------------
mod_proxy: Add Proxypass status option to ignore errors PR 43167.  Patch by Francisco Gimeno 	r571338
----------------------------
Document new IndexOptions options 	r570535
----------------------------
IndexOptions ContentType=text/html Charset=UTF-8 magic. 	r570532
----------------------------
Fix FilterTrace directive's description 	r570444
----------------------------
We are Substitute now :) 	r569659
----------------------------
mod_expires - don't segfault on bad configuration. PR 43213: Julien Perez 	r569622
----------------------------
Bless the module mod_substitute, with the Substitute directive and SUBSTITUTE filter name. 	r569533
----------------------------
note odd DBDPersist format in 2.2.0 and 2.2.1 	r569105
----------------------------
DBDPersist takes On or Off 	reported
----------------------------
Rework locking on timeout_mutex.  We now drop (and reaquire) the lock inside the while loops.  This is the least line of code changes to stop a dead lock between the queue in push2worker (a blocking function) and the timeout_mutex.  These two timeout list iterations should be rewritten with better locking rules, but for now this should fix the bug, without rewriting the entire function. PR: 41712 	r567852
----------------------------
Document ProxyStatus 	r563990
----------------------------
Minimal ProxySet directive documentation :) 	r563480
----------------------------
* Avoid that relative changes to Options change the settings for FileETag. This does NOT address the remaining issues with relative settings and FileETag mentioned in PR 42027, but at least it isolates the problem to them. Currently these issues can be worked around with absolute settings. PR: 42027 Submitted by: Rici Lake <rici ricilake.net> Reviewed by: rpluem 	r562860
----------------------------
Some updates to the RewriteRule docs, mostly focusing on clearly describing what can be in the substitution string. Included is a description of how mod_rewrite decides whether to treat the substitution as a file-system or URL-path. PR: 22529 	r561840
----------------------------
Fix rewriterule directive, as per comment #9 in http://issues.apache.org/bugzilla/show_bug.cgi?id=40004 	r559494
----------------------------
Address PR42898 by qualifying the value of Pattern for RewriteRule, and later explaining how to snarf the rest of the request url. (and the usual build detritus). 	r558837
----------------------------
Demote use of AddType for cgi and remove redundant paragraph regarding DOCUMENT_ROOT 	r558718
----------------------------
Undocument 1.3 quoting behaviour for ErrorDocument. 	r558686
----------------------------
"Reword description of matching NVH with VH, per docs@, subject ""NameVirtualHost and <VirtualHost>"" June 12, 2006. "	r558629
----------------------------
with LimitRequestBody xxx and the deflate output filter configured, mod_deflate eats the 413 error bucket, a 500 error is logged, and a blank screen appears at the browser. 	r554011
----------------------------
Add alternative fixes for CVE-2007-3304: * configure.in: Check for getpgid. * include/mpm_common.h (ap_mpm_safe_kill): New prototype. * server/mpm_common.c (reclaim_one_pid): Ensure pid validity before calling apr_proc_wait(). (ap_mpm_safe_kill): New function. * server/mpm/prefork/prefork.c, server/mpm/worker/worker.c, server/mpm/experimental/event/event.c: Use ap_mpm_safe_kill() on pids from the scoreboard, throughout. * include/ap_mmn.h: Minor bump. 	r551843
----------------------------
* server/mpm/prefork/prefork.c (reap_children), * server/mpm_common.c (ap_wait_or_timeout): Remove dead code; NEED_WAITPID has never been defined by the 2.x build system. 	r551823
----------------------------
Fix the timeout logic. The order is now: 1 - worker->timeout 2 - proxy_conf->timeout 3 - server->timeout. ap_get_module_config() is not perfect by that is easy to port back to 2.2.x. 	r550514
----------------------------
Make default values for memcache config defines, rather than inline constants. 	r546707
----------------------------
Arrange the proxy timeout behaviour. 	r546128
----------------------------
For the DBM SSL Session Cache, propogate down pools to use for allocations.  In most cases, we can use the conn_rec::pool, but for ssl_callback_DelSessionCacheEntry, we still use the long lived configuration pool, but this change at least makes it easier to fix in the future. 	r545610
----------------------------
Use the absolute timeout, as provided by mod_ssl, rather than trying to calculate a relative timeout. (which did it wrong anyways). 	r545385
----------------------------
* Preset the form fields for route and redirect with the values of the active configuration in the scoreboard and not with the ones loaded from the configuration files. 	r544930
----------------------------
PR#39710 - badly broken errordocuments for CGI We've just had another duplicate report of this on bugzilla. We've got a simple patch, and people asking WTF is going on with inaction.  Noone seems clear on why the patch shouldn't be applied (http://marc.info/?l=apache-httpd-dev&m=117760311129386&w=2). 	r541926
----------------------------
"Fold in ProxyPassMatch directive with docs. Support full regex substitution but also allow for ""simple"" cases (ala JkMount) to work as well. "	r537599
----------------------------
Add regex pattern matching to ProxyPass, allowing, for example: 	r537429
----------------------------
HTTP proxy ProxyErrorOverride: Leave 1xx and 3xx responses alone.  Only processing of error responses (4xx, 5xx) will be altered. PR: 39245 This is based on a patch submitted by Bart van der Schans <schans hippo.nl> and tweaked slightly by me based on discussions on dev@ since April 2006. I think rpleum was the first to mention the 1xx issue. 	r527969
----------------------------
Encourage people to look at ./configure --help Several people this week have seemed to think that this document should list all the options. Perhaps that's not entirely unreasonable, but it isn't going to happen any time soon. 	r527129
----------------------------
"Too many users are baffled by this message.  Some days even the devs are ;-) Votes to backport to 2.2 and 2.0? New resulting message is bin/httpd -f /dev/null -C ""LoadModule ftp_module ../apache22/modules/mod_ftp.so"" Syntax error in -C/-c directive: API module structure 'ftp_module' in file /usr/local/apache22/modules/mod_ftp.so is garbled - expected signature 41503230 but saw 41503232 - perhaps this is not an Apache module DSO, or was compiled for a different Apache version? "	r520733
----------------------------
HTML files changed by adding docs for BalancerMember directive 	r515256
----------------------------
Documenting the sooper-sekrit BalancerMember directive 	r515251
----------------------------
Return METHOD_NOT_ALLOWED, not FORBIDDEN, to a TRACE request when TraceEnable is Off.  This agrees with our documentation, and with our Allow: header in response to OPTIONS. 	r507526
----------------------------
* Save the key we generate during our first run of cache_generate_key_default on each request in the request_config. During consecutive runs of cache_generate_key_default during processing the request we restore it from there as we might not be able to generate the same key again as the ingredients used to compose the key might have changed and we constantly must use a key that could be generated during the quick handler phase. PR: 41475 	r506621
----------------------------
* Add CacheIgnoreQueryString directive to cache requests with a query string even if no expiration time is specified. Futhermore the query string will not be used for key generation such that requests to the same URI path, but with different query strings are mapped to the same cache entity. Turning this setting to ON violates RFC 2616/13.9 and thus it is turned off by default. PR: 41484 Submitted by: Fredrik Widlund <fredrik.widlund qbrick.com> Reviewed by: rpluem 	r504183
----------------------------
Introduce configuration groups to allow inheritance by virtual hosts of database configurations from the main server.  The post_config hook function determines the minimal set of distinct configurations necessary so that database connection pools are shared between virtual hosts whenever possible. The SQL statements which should be prepared for each database connection are now stored in a hash for each virtual host during the configuration phase, and these hashes are merged in the normal manner using apr_hash_overlay() with that of the main server.  This allows for statements to be de-registered by DBDPrepareSQL, if desired.  The post_config hook function then compares the statements registered for each virtual host when determining if a separate configuration group is required.  The changes in r424798, r432560, r432562, and r466641, which still have problems with configuration inheritance, are therefore no longer necessary. 	r503931
----------------------------
Unix MPMs: Catch SIGFPE so that exception hooks and CoreDumpDirectory can work after that terminating signal. Submitted by: Eric Covener <covener gmail.com> Reviewed by:  trawick 	r500881
----------------------------
* configure.in: Substitute MOD_SO_ENABLED variable. * support/apxs.in: Use it to eliminate run-time check for whether httpd has mod_so built-in. Submitted by: David M. Lee <dmlee crossroads.com> PR: 40653 	r494781
----------------------------
* configure.in: Bump autoconf version requirement (matching APR). 	r492510
----------------------------
Destroy pmain pool when exiting ap_mpm_run() so that cleanups mod_log_config and mod_dbd). 	registered
----------------------------
Handle error conditions in dbd_construct() properly.  Simplify ap_dbd_open() and use correct arguments to apr_dbd_error() when non-threaded.  Register correct cleanup data in non-threaded ap_dbd_acquire() and ap_dbd_cacquire().  Clean up configuration data and merge function.  Use ap_log_error() wherever possible. 	r491884
----------------------------
Stop mod_dbd emitting bogus error messages when it's loaded but not configured. 	r485311
----------------------------
Stash DBD connections in request_config of initial request only, or else sub-requests and internal redirections may cause entire DBD pool to be stashed in a single HTTP request. 	r481509
----------------------------
ifdef out suexec for the platforms that don't support it 	r479799
----------------------------
* Start re-organizing the function declarations to put related items together * Fix http_scheme and default_port implementations to return proper equivalents of DECLINED, so they can exist without breaking stuff * Explain why some of the config access utility routines are ifdeffed out 	r479025
----------------------------
TimeOut can be set in a vhost context Submitted by: Eric Covener Reviewed by:  Jeff Trawick 	r475698
----------------------------
Restore the pdconf configuration structure in the SENDFILE case. 	r468409
----------------------------
Fix address-in-use startup failure caused by corruption of the list of listen sockets in some configurations with multiple generic Listen directives. The logic in error is that which prunes out generic IPv4 listening sockets when we already have a v4-mapped generic IPv6 listening socket for the same port. 	r467034
----------------------------
At support for ProxyIOBufferSize in AJP. 	r467014
----------------------------
add example test_config routine 	re-order
----------------------------
mod_authnz_ldap: Add an AuthLDAPRemoteUserAttribute directive. If set, REMOTE_USER will be set to this attribute, rather than the username supplied by the user. Useful for example when you want users to log in using an email address, but need to supply a userid instead to the backend. 	r463427
----------------------------
So I'm sitting in Rich's talk and think to myself, it's kind of stupid that DumpIO always logs at Debug, esp when you consider that it's likely you'll be doing so in conjunction with SSL... One Big Log is understating it! :) Add DumpIOLogLevel to allow one to change the level... 	r463291
----------------------------
describe new check_config hook 	r462915
----------------------------
added pre_config, check_config, and test_config hooks moved open_logs hook 	r462914
----------------------------
Fix rewritemap/dbd bug pointed out by Davi Arnaut, and improve error reporting. 	r454732
----------------------------
Fix bugs pointed out by rpluem in rewritemap/dbd 	r454723
----------------------------
Add SQL Query capability to RewriteMap 	r454683
----------------------------
Seems like a good idea to close the <Directory> tag in the example. 	r453083
----------------------------
Make sure that original socket timeout gets restored even if the cping/cpong fails. 	r452549
----------------------------
Add force recovery for balancer. In case all balancer members were in error state 503 was returned until the recovery timeout expired. The patch forces recovery in case all balancer members are in error state regardless of recovery timeout directive. This fixes the time gap when 503 was returned and backend was already up and running. 	r451572
----------------------------
* server/mpm/prefork/prefork.c (prefork_check_config): Remove unused variable. 	r451297
----------------------------
* Notice a timeout as an error message. This might be valuable for detecting clients with broken network connections or possible DoS attacks. 	r451287
----------------------------
* Notice that reading of the request entity body failed due to a timeout 	r451006
----------------------------
mod_disk_cache: Make sure that only positive integers are accepted for the CacheMaxFileSize and CacheMinFileSize parameters in the config file. PR39380 [Niklas Edmundsson <nikke acc.umu.se>] 	r450042
----------------------------
Generic fix for PR#31759 If a handler returns a value that is neither reserved nor a valid HTTP response code, log an error and substitute HTTP_INTERNAL_SERVER_ERROR. Allow a handler to override this explicitly by setting a note. 	r448711
----------------------------
* Print the correct error message for erroneous configured ProxyPass directives. PR: 40439 Submitted by: serai lans-tv.com Reviewed by: rpluem 	r441947
----------------------------
Replace ap_get_server_version with ap_get_server_banner() and ap_get_server_description(). High-level summary: The full server version information is now included in the error log at startup as well as server status reports, irrespective of the setting of the ServerTokens directive. Third-party modules must now use ap_get_server_banner() or ap_get_server_description() in place of ap_get_server_version(). 	r440337
----------------------------
Allow the typical non-DAV methods to be unrestricted in our DAV examples (in particular, POST).  Also change <Location> to <Directory> in the docs.  This particular example was not a security problem because <Location> was being used to *extend* access, rather than to *restrict* access, but it is better to encourage people to use <Directory> by default. PR: 40030 	r433694
----------------------------
My last effort was a little too succinct and not quite precise enough.  Try being more explicit. This does leave the danger that people will clip the <Location> example as the proper way to do things, when they should be is only correct when used in conjunction with Alias. 	reading
----------------------------
Make it clear that url-path is always case-sensitive. Provide an example of using a regex to make it case-insensitive. Make it clear that ScriptAlias is only used when you want BOTH mapping and script-designation. Partially in response to the disputed vulnerability: http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-4110 	r432997
----------------------------
Don't use NULL s->server_hostname as hash lookup key. Reported by paritosh (at limewire.co.in) on dev@httpd (thread Re: apache 2.2 crashes at the start time in mod_dbd.c then preparing AuthDBDUserPWQuery) Fixed by paritosh and Yours Truly. 	r432560
----------------------------
"Introduce a check_config phase between pre_config and open_logs, to allow modules to review interdependent configuration directive values and adjust them while messages can still be logged to the console. The open_logs phase is already used somewhat for this purpose by certain MPMs (winnt, prefork, worker, and event) but only by forcing their functions ahead of the core ap_open_logs() function, and since this phase runs after the ap_signal_server function during startup, it can not be used to generate messages on the console when restarting. Add the check_config phase to mod_info and mod_example. Handle relevant MPM directives during this phase and format messages for both the console and the error log, as appropriate.  Bounds and sanity checks on the values of the MPM directives are handled in sequence in this phase instead of in the various directive handling functions, since those functions (e.g., set_max_clients()) may not be called at all if their directives do not appear in the configuration files, and even if they are called, there is no guarantee that this will occur in any particular order. Remove from the worker and event MPMs the code in the pre_config phase that alters the configuration node tree by re-ordering ThreadsPerChild ahead of MaxClients.  This code is effective but insufficient; for example, if ServerLimit follows MaxClients, the test against server_limit in set_max_clients() is invalid.  (In practice, this only results in incorrect or absent warnings on the console, because server_limit is set to its configured value when the main loop re-runs the configuration process.) Prevent ap_threads_per_child from exceeding thread_limit in the winnt, worker, and event MPMs.  This situation could occur if ThreadsPerChild was not specified in the configuration files and ThreadLimit was set to a value smaller than DEFAULT_THREADS_PER_CHILD, because set_threads_per_child() would never be called and therefore its bounds check against thread_limit would not be performed. Remove from the winnt, prefork, worker, and event MPMs the changed_limit_at_restart flag.  Set the first_server_limit and first_thread_limit values during the first execution of the check_config function, and use them to detect changes to ServerLimit and ThreadLimit across restarts and issue appropriately formatted warnings.  Remove the comments about the error log being a ""bit bucket""; this was true when the code was originally committed in r92530 but that was due to a bug fixed in r92769. Be consistent about setting all MPM configuration directive values in the pre_config phase. Rephrase and reformat the console and log file messages relating to MPM configuration directives to be consistent across all MPMs.  Use briefer messages when logging to the error log than to the console. Update miscellaneous stale comments and messages (e.g., reference to daemons_min_free in worker and event MPMs, ""prefork open_logs"" in winnt MPM, and StartServers in netware MPM). The winnt, netware, beos, and mpmt_os2 MPMs should be tested by developers with access to those platforms, especially the winnt MPM, which has unique logic with respect to distinguishing between parent and child processes during the configuration phases. Update the English documentation for the worker MPM's ThreadsPerChild directive, which no longer needs to precede other MPM directives in the configuration files if it has a non-default value.  The German (.de) and Japanese (.ja) translations should be updated by developers fluent in those languages. "	r431460
----------------------------
* Followup patch on r427959: Also substitute close_on_recycle with close in mod_proxy_fcgi. This makes mod_proxy_fcgi compile again. 	r428152
----------------------------
Fix return values from wait_for_many_objects. The return value is index to the signaled thread in the creted_threads array. We can not use WAIT_TIMEOUT as return value because its value is defined as 258, thus limiting the MaxThreads to that value that leads to the assertion errors. 	r428029
----------------------------
"Fix the assertion if the WaitForMutipleObjects WAIT_OBJECT_NN. This will correctly close the thread handle without using invalid thread handle array index. Spotted when large balancer timeout was set and all the threads were busy waiting for the connection: [Wed Aug 02 14:29:58 2006] [crit] [Wed Aug 02 14:29:58 2006] file \\build-2.2.2\\server\\mpm\\winnt\\child.c, line 1120, assertion ""(rv >= 0) && (rv < threads_created)"" failed "	returns
----------------------------
Allow optional name=value options within <Proxy section line. Additional arguments are allowed only for 'standard' url's, meaning that the wildchar urls will return error like before. This allow to specify the worker/balancer parameters on the definition line, without the need for extra ProxySet options. 	r427928
----------------------------
Enable ProxySet inside <Proxy> section to create balancer or worker if they were not already created. This allows to have ProxySet directive before BalancerMember directives inside Proxy section. 	r427920
----------------------------
SECURITY: CVE-2006-3747 (cve.mitre.org) mod_rewrite: Fix an off-by-one security problem in the ldap scheme handling.  For some RewriteRules this could lead to a pointer being written out of bounds.  Reported by Mark Dowd of McAfee. Ack: trawick, lars, jorton, wrowe, benl 	r426138
----------------------------
ScriptSock has been global-only for a couple of years now; fix the docs 	r425124
----------------------------
Backout r410758 because DavLockDB needs to point to an httpd-writable directory and @exp_runtimedir@ doesn't qualify.  Also document a missing module requirement. 	r424817
----------------------------
Remove dependence on server config from ap_dbd_prepare, as that may be called in per-directory config functions where there is no server context causing segfault. Discussion at http://mail-archives.apache.org/mod_mbox/httpd-dev/200607.mbox/<831327593.20060720023332%40engec.ru> and subsequent thread. 	r424798
----------------------------
Revert r422298, because it introduces GNU Make specific extensions to the Makefile, and should be replaced by doing the work inside configure, instead of the Makefile.in. 	r422925
----------------------------
include/ap_config.h: Include the autoconf generated header that defines what is available. configure.in: The times function is not really available on mingw32. Disable em. 	r422197
----------------------------
Bring in basic support for building the winnt MPM under mingw32, using the autoconf build system.  Currently this will get you to the point of linking errors on gen_test_char. configure.in: Default to winnt MPM on mingw32 hosts. configure.in: Add AP_DECLARE_EXPORT for mingw32 hsots. os/config.m4: Use win32 dir under mingw32. os/win32/Makefile.in: Add in a new makefile to generate libos on win32. server/mpm/config.m4: Add winnt MPM to the help string. server/mpm/config.m4: winnt MPM is a threaded MPM. server/mpm/winnt/child.c: SO_UPDATE_ACCEPT_CONTEXT is defined under a different header in mingw32. server/mpm/winnt/{Makefile.in,config.m4}: Base build for winnt MPM. os/win32,server/mpm/winnt: Update svn:ignore for .deps/.libs 	r422182
----------------------------
Support environment variable interpolation in reverse proxy configuration 	r421686
----------------------------
* Add the filename of the configuration file to the warning message about the useless use of AllowOverride. PR: 39992 Submitted by: Darryl Miles <darryl darrylmiles.org> Reviewed by: rpluem 	r420307
----------------------------
"- clean up SSLProtocol description; ""flavo[u]r"" is meaningless in this context, use ""version"" instead "	r419861
----------------------------
Make it clear what is meant by per-directory rewrites and specify the rewrites in <Location> is unsupported. (The same is probably true for <Files>, but I'd have to think about that a little more.) PR: 39843 	r418360
----------------------------
New SSLLogLevelDebugDump [ None (default) | IO (not bytes) | Bytes ] configures the I/O Dump of SSL traffic, when LogLevel is set to Debug. The default is none as this is far greater debugging resolution than the typical administrator is prepared to untangle. 	r416265
----------------------------
Add CheckCaseOnly doc. Submitted by: olivier Thereaux <ot@w3.org> 	r415460
----------------------------
A keepalive response need not neccessarily have included any content-length header, handle this case properly for 304 responses. PR39789 	r413861
----------------------------
A little bit more detail, and an example, for how DocumentRoot is handled. Examples good. 	r413683
----------------------------
For quite some time now, 'graceful' and 'restart' have done a config file syntax check prior to actually attempting to restart. These notes are no longer true. 	r413222
----------------------------
* Show how to pass additional arguments to config.nice * Note that su is required for `make install` * Minor gramatical nitpicking. 	r413203
----------------------------
PR#39761 Make the error message more meaningful when DBD is configured without a driver. 	r413015
----------------------------
* If possible, check if the size of an object to cache is within the configured boundaries before actually saving data. Submitted by: Niklas Edmundsson <nikke acc.umu.se> Reviewed by: rpluem 	r411469
----------------------------
* configure.in: Use common variables for the required APR/APR-util version. 	r410828
----------------------------
On graceless shutdown or restart, send AP_SIG_GRACEFUL to all worker threads so that any that are polling on Keep-Alive connections will wake up and exit promptly.  Otherwise, on Linux, they wait until poll()'s timeout interval completes, which is often too long for the parent process; the parent issues SIGKILL before the child's main thread manages to re-join all the worker threads.  PR 38737. On Solaris, by contrast, the close_worker_sockets() function successfully alerts all worker threads that they should exit quickly. On Linux, this side-effect of one thread closing another's socket doesn't occur; see: http://bugme.osdl.org/show_bug.cgi?id=546 Also, expand on the placeholder in CHANGES regarding previous cleanups to scoreboard.c and scoreboard.h in r404848 and r404849. 	r409715
----------------------------
* Add a note about trailing slashes for ProxyPass and fix the balancer example accordingly. PR: 39203 	r409455
----------------------------
"* Handle the cases ""no proxy request"" and ""reverse proxy request"" in the same manner, when setting scheme and port_str. This is needed because if a cached entry is looked up by mod_cache's quick handler r->proxyreq is still unset in the reverse proxy case as it only gets set in the translate name hook (either by ProxyPass or mod_rewrite) which is run after the quick handler hook. This is different to the forward proxy case where it gets set before the quick handler is run (in the post_read_request hook). If a cache entry is created by the CACHE_SAVE filter we always have r->proxyreq set correctly. Also set scheme to ap_http_scheme(r) instead of ""http"" to handle SSL correctly. PR: 39593 "	r407357
----------------------------
Document r399947, addition of optional scheme:// to ServerName directive 	r406697
----------------------------
Stop returning DECLINED from the output filter for proxy Filters can't return that type of status. The way to decline filter handling is to pass through the input data unchanged and hopefully remove the output filter permanently. As long as the proxy flag was set in the fixup hook, we didn't fill in our request config and the filter will be a no-op anyway. 	requests.
----------------------------
PR#39386: Fix merge-config to support prepared statements (Brian J. France) 	r396310
----------------------------
Merge the fcgi-proxy-dev branch to trunk, adding a FastCGI back end for mod_proxy.  This log message is just a summary of the changes, for the full original log messages see r357431:393955 in branches/fcgi-proxy-dev. * modules/proxy/mod_proxy_fcgi.c: New file, holds the impementation of our new fcgi backend for mod_proxy. * modules/proxy/fcgi_protocol.h: New file, holds constants and structures for the fcgi protocol. * modules/proxy/mod_proxy_balancer.c (proxy_balancer_canon): Set up r->path_info, so the PATH_INFO env * modules/proxy/config.m4: Build the new mod_proxy_fcgi module. * support: Add fcgistarter to svn:ignore. * support/Makefile.in: Build the new fcgistarter program. * support/fcgistarter.c: New program, a helper for starting fcgi worker processes. 	r396063
----------------------------
* configure.in: Add --with-included-apr flag to force use of the bundled copies of APR and APR-util. 	r395211
----------------------------
PR#39321 - don't segfault if a bad URL is specified in ProxyPass 	r394390
----------------------------
Sync context of LDAPConnectionTimeout and LDAPVerifyServerCert with latest changes to mod_ldap (http://svn.apache.org/viewcvs?rev=387675&view=rev) 	r388301
----------------------------
LDAPConnectionTimeout and LDAPVerifyServerCert can be configured per-vhost 	r386776
----------------------------
Remove the global only flag from the LDAPConnectionTimeout directive and add it to all of the caching directives 	r386751
----------------------------
Drop the LogLevel of the messages for the deprecated access control directives from WARN to INFO. 	r384628
----------------------------
Make AJP flushing admin configurable. 	r384580
----------------------------
APR_FILEPATH_NOTABOVEROOT was undefined with a left-hand NULL or empty path.  The SECUREROOTPATH and NOTABSOLUTE tests were sufficient for this application.  Adjusts for a bug in earlier versions of APR with this undefined value. 	r382147
----------------------------
don't use &nbsp; in configuration code that might be copy and pasted and cannot be interpreted correctly by the httpd 	r378577
----------------------------
* acinclude.m4 (APACHE_CHECK_SSL_TOOLKIT): Add PKG_CONFIG_PATH for specified OpenSSL location to avoid picking up system pkg-config configuration. PR: 38277 	r378473
----------------------------
Add more detail about how to use the new authorization configuration 	r378124
----------------------------
*) mod_proxy: Fix KeepAlives not being allowed and set to Also, document previous patch: *) Correctly initialize mod_proxy workers, which use a 	r378032
----------------------------
Make the worker and event MPMs support GracefulShutdownTimeout just like the prefork MPM does. Submitted by: Chris Darroch <chrisd pearsoncmg.com> Ported to event MPM by: rooneg Issue number: 38621 * server/mpm/worker/worker.c (ap_mpm_run): Make the graceful shutdown log message refer to the right * server/mpm/experimental/event/event.c (ap_mpm_run): Ditto. * CHANGES: Note change. 	r377291
----------------------------
* modules/aaa/config.m4: Place mod_access_compat in the 'yes' list as not handling older auth configs out-of-the-box is badness. 	r375678
----------------------------
* Do not overwrite the status of initialized workers and respect the configured status of uninitilized workers when creating a new child process. 	r374929
----------------------------
Use HTMLTable option in the config example so that directory listings will satisfy people concerned about html spec compliance. 	r371933
----------------------------
Fix the documentation for the LDAPTrustedMode directive. 	r370859
----------------------------
* Add a sentence about DDOS. * Mention problems with low Timeouts and long running CGIs. * Stress out the experimental character of event MPM and that it does not work with ssl currently. 	r369902
----------------------------
* Add some remarks how to mitigate the risk of DoS attacks by setting proper values for the Timeout and Keepalive parameters. 	r369827
----------------------------
* Add CacheMinExpire directive to set the minimum time in seconds to cache a document in the case that no valid expire time was supplied with the document. Submitted by: Brian Akins <brian.akins turner.com> Reviewed by: Ruediger Pluem 	r369811
----------------------------
Determined that yes; apr_general.h may be included in .rc files, so eliminate a substitute declaration. Correct version and copyright generation, this involves 'long line' flavor of the first ASF copyright line;  next step will be no more awk generation of .rc files, so there we will use the new macro AP_SERVER_COPYRIGHT and defined tokens from this file for versions. 	r368395
----------------------------
Authz refactoring Merge from branches/authz-dev Basically here is a list of what has been done: - Convert all of the authz modules from hook based to provider based - Remove the ap_requires field from the core_dir_config structure - Remove the function ap_requires() since its functionality is no longer supported or necessary in the refactoring - Remove the calls to ap_some_auth_required() in the core request handling to allow the  hooks to be called in all cases. - Add the new module mod_authz_core which will act as the authorization provider vector and contain common authz directives such as 'Require', 'Reject' and  '<RequireAlias>' - Add the new module mod_authn_core which will contain common authentication directives such as 'AuthType', 'AuthName' and '<AuthnProviderAlias>' - Move the check for METHOD_MASK out of the authz providers and into the authz_core provider vector - Define the status codes that can be returned by the authz providers as AUTHZ_DENIED,  AUTHZ_GRANTED and AUTHZ_GENERAL_ERROR - Remove the 'Satisfy' directive - Implement the '<RequireAll>', '<RequireOne>' block directives  to handle the 'and' and 'or' logic for authorization. - Remove the 'AuthzXXXAuthoritative' directives from all of the authz providers - Implement the 'Reject' directive that will deny authorization if the argument is true - Fold the 'Reject' directive into the '<RequireAll>', '<RequireOne>' logic - Reimplement the host based authorization functionality provided by 'allow', 'deny' and 'order' as authz providers - Remove the 'allow', 'deny' and 'order' directives - Merge mod_authn_alias into mod_authn_core - Add '<RequireAlias>' functionality which is similar to '<AuthnProviderAlias>' but specific to authorization aliasing - Remove all of the references to the 'authzxxxAuthoritative' directives from the documentation - Remove the 'Satisfy' directive from the documentation - Remove 'Allow', 'Deny', 'Order' directives from the documentation - Document '<RequireAll>', '<RequireOne>', 'Reject' directives - Reimplement the APIs ap_auth_type(), ap_auth_name() as optional functions and move the  actual implementation into mod_authn_core - Reimplement the API ap_some_auth_required() as an optional function and move the  actual implementation into mod_authz_core Major Changes: - Added the directives <RequireAll>, <RequireOne>, <RequireAlias>, Reject - Expanded the functionality of the directive 'Require' to handle all authorization and access control - Added the new authz providers 'env', 'ip', 'host', 'all' to handle host-based access control - Removed the directives 'Allow', 'Deny', 'Order', 'Satisfy', 'AuthzXXXAuthoritative' - Removed the ap_require() API - Moved the directives 'AuthType', 'AuthName' out of mod_core and into mod_authn_core - Moved the directive 'Require' out of mod_core and into mod_authz_core - Merged mod_authn_alias into mod_authn_core - Renamed mod_authz_dbm authz providers from 'group' and 'file-group' to 'dbm-group' and 'dbm-file-group' Benefits: - All authorization and access control is now handle through two directives, 'Require' and 'Reject' - Authorization has been expanded to allow for complex 'AND/OR' control logic through the directives '<RequireAll>' and '<RequireOne>' - Configuration is now much simpler and consistent across the board - Other modules like mod_ssl and mod_proxy should be able to plug into and take advantage of  the same provider based authorization mechanism by implementing their own providers Issues: - Backwards compatibility between 2.2 and 2.3 configurations will be broken in the area  of authorization and access control due to the fact that the directives 'allow', 'deny',  'order' and 'satisfy' have been changed to 'Require all granted', 'Require all denied' or some variation of the authz host-based providers. - Existing third party authorization modules will have to adapt to the new structure. 	removed.
----------------------------
* Fix PR38017 by handling the selection of the hostname in the same way for non proxied and reverse proxied requests. We need to handle both cases in the same manner as for the reverse proxy case we have the following situation: If a cached entry is looked up by mod_cache's quick handler r->proxyreq is still unset in the reverse proxy case as it only gets set in the translate name hook (either by ProxyPass or mod_rewrite) which is run after the quick handler hook. This is different to the forward proxy case where it gets set before the quick handler is run (in the post_read_request hook). If a cache entry is created by the CACHE_SAVE filter we always have r->proxyreq set correctly. So we must ensure that in the reverse proxy case we use the same code path and using the canonical name seems to be the right thing to do in the reverse proxy case. 	r367798
----------------------------
PR#38084 Correct DBDParams string in example INOUE Seiichiro (who reported the bug) suggests referencing the pgsql documentation.  I disagree, but I wonder if PgSQL is really a good choice of example, since it (untypically) parses the params itself rather than have the apr_dbd driver do it. 	r360505
----------------------------
* include/ap_config.h: Fix the macro name. 	r356248
----------------------------
* include/ap_config.h: Define AP_HAVE_DESIGNATED_INITIALIZER for GCC (but not G++) or any compiler which claims C99 support. * configure.in: Don't define AP_HAVE_DESIGNATED_INITIALIZER here. 	r356234
----------------------------
Add required AuthName directive 	r355326
----------------------------
PR 36090 Fix recursive ErrorDocument handling 	r354118
----------------------------
Some config file changes: - Make the <Files> section safer by adding Satisfy all (as is already present in 1.3) - Remove some handler examples that almost nobody will use (the config file is not the documentation) - Remove some win32 specific stuff from the default config, since win32 uses its own config file - Remove the config section for the perchild mpm 	r349747
----------------------------
Fix case where a shared keepalive connection results in different workers from being accessed. Try to be wise and fast about the tests before we do the expensive string comparison. 	r349723
----------------------------
- try to add a note to explain the behaviour of clients use a pipelined connection wrt to MaxRequestsPerChild and KeepAlive. 	r349476
----------------------------
When computing the timeouts for keepalives and write completion, get the current time _after_ processing the event that led to the timeout, rather than before. [forward-port of commit 349189 from the async-read-dev branch] 	r349190
----------------------------
* Deprecate AddOutputFilterByType * Link up Require and AuthType to the relevant aaa modules. 	r345301
----------------------------
Remove on/off arguments from AuthDigestProvider. 	r345064
----------------------------
Remove on/off from the argument list for AuthBasicProvider, attempt to clarify the discussion of AuthBasicAuthoritative, and add some extra clarifications in a few places. 	r345057
----------------------------
Remove support for 'On' and 'Off' for AuthBasicProvider and AuthDigestProvider as it doesn't actually work as advertised. Reviewed by: Joshua Slive (concept) 	r345054
----------------------------
Fix typo in ProxyStatus syntax error message. Submitted by: Christophe Jaillet <christophe.jaillet wanadoo.fr> Reviewed by:  trawick 	r344491
----------------------------
Add in the UseCanonicalPhysicalPort directive, which basically allows Apache to configurably ( :) ) use the physical port when constructing the canonical port. Also add the exact ordering to the docs, so people can easily see how it works. We now have compatibility with both 2.0 and 1.3. 	r344369
----------------------------
drop dependency on apr_wait_for_io_or_timeout() 	r343999
----------------------------
* build/config_vars.sh.in: Check for the *-config scripts both at the DESTDIR-relocated path and at the not-relocated path, to cope with both builds with and without the bundled APR. 	r330257
----------------------------
* build/config_vars.sh.in: Prepend DESTDIR to paths to installed apr/apu-config scripts. Submitted by: Torsten Foertsch <torsten.foertsch gmx.net> 	r330246
----------------------------
Change directives from OR_AUTHCFG to ACCESS_CONF SQL config in .htaccess doesn't make sense and could have security issues. 	r329497
----------------------------
Restore the socket timeout after setting it to zero for nonblocking writes in ap_core_output_filter.  (This fixes the mod_proxy errors that the new core output filter had been causing.) 	r329075
----------------------------
* configure.in: Move apr/apr-util version checks later to fix in-tree apr/apr-util build failures due to $EGREP not getting set early enough. 	r328852
----------------------------
* configure.in: Require apr >= 1.2.0 and apr-util >= 1.2.0. 	r328641
----------------------------
* Fix PR36906 by not lower caseing the whole worker name. Only lower case the schema when storing the worker url. Thus preventing case sensitive URI's in BalancerMembers to get broken. 	r328463
----------------------------
"Talking to end-users has highlighted the new simpler default configuration layout as a major selling point ""feature"" of 2.2. Add it to the list of new features. "	r327998
----------------------------
"These days in most cases, ""all bound IP addresses"" means :: and 0.0.0.0 or even just ::. Rather than confuse users by trying to explain this in the configuration, simply remove the now-erroneous reference to 0.0.0.0. "	r327892
----------------------------
* Fix PR31226 (AddOutputFilterByType deflate not active with mod_proxy), by allowing ap_add_output_filters_by_type to handle proxied requests. Basic tests by jorton and me show that this works, nobody can actually remember why this limitation was introduced at all (r94028) and the mailing list archives also gave no hint. Submitted by: Joe Orton 	r327179
----------------------------
* modules/generators/config5.m4: Improve Solaris 10 check in mod_cgid to know about the now-released patches that fix the AF_UNIX bugs. 	r326018
----------------------------
* Added further directives that are controlled via AllowOverride FileInfo 	r315051
----------------------------
NET_TIME, as a standalone feature, was a horrid idea. The core filter will NOT operate correctly across platforms (even between Linux/Solaris) without setting up the conn->timeout, so always apply the timeout when establishing the core filter. The keep-alive-timeout is entirely an HTTP-ism, and needs to move to the http protocol handler.  Note #1; this isn't triggered in the event mpm, but the event mpm introspects s->keep_alive_timeout directly adding it to the pollset, so this is a non-sequitor. Finally, once the headers are read, the named virtual host may have a different (more/less permissive) timeout for the remainder of the request body.  This http-centric patch picks up that subtle detail and can switch to a named-vhost timeout. 	r306495
----------------------------
"One way or another, whether we leave the casts in or out, right now we are using ""void *"" containers to store long integers; Add a configure-time check to ensure that it is valid to assume that a ""void *"" container is large enough to store a long int. See <200510031150.j93Boh700945@devsys.jaguNET.com> and ensuing discussion on httpd-dev. "	r294809
----------------------------
Fix pool in dbd_construct, and set sensible config defaults (based on feedback from Brian France) 	r292769
----------------------------
Use rsync to install manual and htdocs to speed up installation times. * Makefile.in: Update install-man and install-htdocs to use rsync if available, otherwise fail back to current cp -rp and rm -rf .svn/ strategy. * configure.in: Look for rsync. * acinclude.m4: Include RSYNC in exported config_vars.mk (Incorporates suggestions on rsync flags from colm.) Reviewed by: colm, trawick (concept), niq (concept) 	r292718
----------------------------
Add note about no Directory Indexes to SetHandler docs. 	r292292
----------------------------
* server/request.c (core_opts_merge): When AllowOverride is specified for the directory, ignore the inherited override_opts field. PR: 35330 Submitted by: kabe <kabe sra-tohoku.co.jp> 	r291120
----------------------------
* modules/experimental/config.m4: Don't duplicate the mod_dbd APACHE_MODULE expansion and remove the commented-out stuff. 	r290700
----------------------------
* fix some content errors of the TraceEnable description * add markup 	r290537
----------------------------
At last, TraceEnable docs 	r290495
----------------------------
Backport r239420 and r239421 to the 2.2.x branch; Enhance CacheEnable/CacheDisable to be of use to proxy servers. 	r290133
----------------------------
Backport r265506, r240044 and r240049 to the 2.2.x branch; Appends .PID to the ScriptSock filename. 	r289972
----------------------------
Backport r264759 and r264788 to the 2.2.x branch. Fixes the get_suexec_identity hook for mod_cgid. 	r289965
----------------------------
Document the ReceiveBufferSize change done in r157583 Submitted by: Murray Nesbitt <murray@cpan.org>] 	r280384
----------------------------
Fix config file for mod_dbd Submitted: Brian J. France <list firehawksystems.com> 	r279940
----------------------------
Record the fact that we failed to set the username as requested. This is useful to know as the most likely cause will be a misconfiguration and so should be easily fixed, but to be fixed it's helpful if you're aware it needs fixed! 	r279893
----------------------------
Move the timeout mutex up, to limit the time we are holding it. 	r279794
----------------------------
Introduce SSLProxyVerify better.  Add a warning note on exactly what verification is done by the proxy in the proxy-to-SSL-server case. 	r265741
----------------------------
* modules/ssl/ssl_util_ssl.c (SSL_X509_STORE_create): Catch errors malformed or misconfigured CRLs.  Clear error stack beforehand to ensure reported errors are relevant. PR: 36438 	returned
----------------------------
mod_log_config: %{hextid}P will log the thread id in hex with APR versions 1.2.0 or higher. 	r265033
----------------------------
"Fix CVE CAN-2005-2700: * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Ensure that optional"" to ""SSLVerifyClient require"". The boolean ""verify_old & SSL_VERIFY_PEER_STRICT"" is true if the old context merely has optional verification configured, since the definition of SSL_VERIFY_PEER_STRICT is (SSL_VERIFY_FAIL_IF_NO_PEER_CERT | SSL_VERIFY_PEER). "	renegotiation
----------------------------
Fix PR36410; Change how the get_suexec_identity hook is handled by CGID. Instead of using mod_userdir and mod_suexec specific hacks, we now run the hook on the httpd side of the handler. If this is NULL, we pass on a magic empty_ugid constant, otherwise pass on the On the cgid side of the equation, we add our own hook, with REALLY_FIRST, and then order the hooks. This ensures that cgid's doer runs before any other We use cgid's request config to store the ugid. If ugid == empty_ugid, we DON'T call ap_os_create_privileged_process, because our doer would return the magic empty_ugid constant. Having the doer return NULL is no good, because then userdir and mod_suexec's doers would be called. Instead, we call plain old apr_proc_create(). 	registered
----------------------------
Fix a grammar mistake; note what happens when the timeout is 	reached.
----------------------------
Noticed in the development of fips-enabled mod_ssl, when we are configured to support exactly one protocol, use that explicit server and client mechansim to handshake with the client or proxied machine, rather than the generic SSLv23_[client|server]_method(). 	r264621
----------------------------
"Move the ""GracefulShutdownTimeout"" command definition into mpm_common "	r264103
----------------------------
Remove as many ghastly scoreboard loops from the graceful-shutdown code, and as we lost the timeout inherent in ap_wait_or_timeout(). 1 second seems a sane choice. 	replace
----------------------------
"Move the ""GracefulShutdownTimeout"" directive into mpm_common, for re-use with other MPM's. "	r240296
----------------------------
"Documentation changes relevant to new graceful-stop command line argument for httpd and apachectl, and the the ""GracefulShutdownTimeout"" directive. "	r240271
----------------------------
"Implement a ""graceful-stop"" for the prefork MPM (might aswell do the hard one first). General approach is to send SIGUSR1 to all children (which will de-listen, and exit when finished), and to gather all children as they exit. We don't use a sleep(timeout) for the timeout implementation, because this would lead to a rut of defunct children until the timeout had expired. set_graceful_shutdown stolen from Ken Coar. See <3E84B1EC.3050007@Golux.Com> (28 Mar 2003). "	r240270
----------------------------
Update the documentation for the ScriptSock directive to match the .PID extension. 	r240049
----------------------------
Append the .PID to the ScriptSock filename. This change ensures that multiple Because a different socket will be created for each instance, this change also unlinks the script-socket on exit, to prevent pollution. unlink() happens from within the parent process, since the change in userid's means the cgid process likely won't have the correct permissions. 	running
----------------------------
"nit: Consistently CamelCase ""ScriptSock"". "	r240043
----------------------------
"Implement ""de-listening"" for graceful restarts with the prefork MPM. With this change; 1.) httpd -k graceful sends SIGUSR1 to the parent pid, which in turn 2.) Active children each close their copy of listener fd's. This means that the listening sockets are freed for re-use. In the ordinary case, this makes no difference. However if for example admin changes ""Listen 80"" to ""Listen 81"" in the config, this rev makes port 80 immediately available (no waiting for the graceful children to die). "	r239711
----------------------------
Enhance CacheEnable/CacheDisable to control caching on a per-protocol, per-host and per-path basis. Makes Cache(En|Dis)able useful for forward proxy servers. 	r239421
----------------------------
Arghhh.... missed the version. Sorry for the noise. Revert the hack for setting the lbmethod. The problem is deeper inside caused by the new hook to the balancer module that is never called on WIN32. Although the hack fixed core dump, the proxy is still unusable because the configuration is failing due to the empty lbmethod names array. 	r233516
----------------------------
Revert the hack for setting the lbmethod. The problem is deeper inside caused by the new hook to the balancer module that is never called on WIN32. Although the hack fixed core dump, the proxy is still unusable because the configuration is failing due to the empty lbmethod names array. 	r233514
----------------------------
Do not check the value of r->handler. This allows the use of SetHandler for an entire directory, and since we already check via the stat structure if this is a directory, there is no reason for this extra check, which causes a regression since 1.3. PR: 25435 	r233369
----------------------------
Fix mess left by incompleteness of previous ProxyPassReverse fix 	r232247
----------------------------
Fix ProxyPassReverse & family to work correctly in <Location> 	r231355
----------------------------
* server/vhost.c (get_addresses): Fail with an error message rather than an assert() for errors which plague users on Solaris boxes which don't have a properly configured resolver. PR: 27525 	r230453
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Pass NULL to apr_global_mutex_create if no cache file name is specified, rather than inventing an inappropriate name with tmpnam(). PR: 30385 	r227230
----------------------------
* modules/ldap/util_ldap_cache.c (util_ldap_cache_init): Only remove the shm segment by name if a name is configured. 	r227012
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Fail if util_ldap_cache_init fails; let ap_log_error call strerror. Downgrade informational messages to APLOG_INFO from APLOG_NOTICE. (util_ldap_child_init): Remove some noisy but fairly pointless debugging output. 	r226974
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Don't attempt to * modules/ldap/util_ldap_cache.c (util_ldap_cache_init): Properly any existing shm segment if apr_shm_create() fails. (util_ldap_cache_module_kill): Don't attempt to remove the shm segment here; apr_shm_destroy() does that anyway. 	remove
----------------------------
* modules/ssl/mod_ssl.c (ssl_hook_pre_config): Initialize all algorithms in OpenSSL; enables PKCS#8 keyfile support. PR: 35469 	r226777
----------------------------
Add the path to the mod_ssl include for the setenvif module. 	r225293
----------------------------
* modules/metadata/mod_setenvif.c: Unconditionally include mod_ssl.h. (setenvif_post_config): Fix prototype fubar. 	r224718
----------------------------
add generated convenience rewritemap 	r224539
----------------------------
"Describe the new syntax: SetenvIf OID(""2.16.840.1.113730.1.13"") ""(.*)"" NetscapeComment=$1 Ehhmm.... How do I make html from this again? "	r220310
----------------------------
"Allow extraction of the values of SSL certificate extensions into environment variables, so that their value can be used by any module that is aware of environment variables, as in: SetEnvIf OID(""2.16.840.1.113730.1.13"") ""(.*) Generated (Certificate)"" ca=$1 sets ca=TinyCA if the cert was issued by TinyCA. Similarly, SetenvIf OID(""2.16.840.1.113730.1.13"") ""(.*)"" NetscapeComment=$1 will set $NetscapeComment to the whole string. It is technically allowed to have multiple instances of an extension field, all with the same oid. In this case, the environment variable will be set to the list of all fields, separated by commas. The [PATCH] uses a cross-module call from mod_setenvif to mod_ssl (the latter may also be missing: in this case the variable will never be set). It calls a common function in the ssl module that is also used for the SSLRequire directive's test. "	r220307
----------------------------
Document change to mod_ssl's SSLRequire directive, bump version to 2.3.0 as already done in the ap_release.h header 	r220040
----------------------------
Added TraceEnable, and note Request Splitting/Response Splitting. 	r209903
----------------------------
Add the httxt2dbm utility to create DBM files for RewriteMap.  This replaces the txt2dbm script in the manual, and allows the use of any available DBM format. 	r209539
----------------------------
This test for TraceEnable cases cannot be buried within the max-forwards logic cases. 	r209406
----------------------------
Fixed complaints about unpackaged files within the RPM build after changes to the config files. 	r208967
----------------------------
Initially a no-op.  Add trace_enable configuration.  The http and proxy flavors of interpreting this flag are yet to be committed. 	r208785
----------------------------
Add more detail to the RewriteMap rnd: example, as well as rewriting some of the text that makes this feature seem less useful than it actually is. 	r201923
----------------------------
* Rewritemaps use ${...} * adjust the mime type directory in mod_mime.xml.ja as well (to get it uptodate again) * `build all` 	r193077
----------------------------
Somehow I just committed the wrong file. This patch adds an example for RewriteMap 	r193036
----------------------------
mod_cgid: Fix buffer overflow processing ScriptSock directive. Submitted by:        Steve Kemp <steve steve.org.uk> Reviewed/tweaked by: trawick 	r192995
----------------------------
- Add documentation on the new AcceptFilter directive. - Update Listen with the optional protocol arg. 	r190982
----------------------------
* build/config_vars.sh.in: Expand LTFLAGS here, to fix `apxs -q LIBTOOL` again. PR: 32787 Submitted by: William Barker <william.barker wilshire.com> 	r190893
----------------------------
Merge the listen-protocol sandbox branch to trunk. I will be adding documentation for the new directives hopefully in the next day or so. * server/core.c: Added 'Protocol' to the core module config * server/listen.c: Attempt to inherit protocols from Listener Records to Server configs. * include/{ap_listen.h,http_core.h}: Add Protocol to respective structures. * include/http_core.h: Add the accf_map table to the core_server_config structure * include/ap_mmn.h: Minor MMN Bump for the new interfacces. * modules/ssl/ssl_engine_init.c: Use the new protocol framework to enable mod_ssl for 'https' websites. 	r190563
----------------------------
"* configure.in: Define MKINSTALLDIRS and INSTALL in config_vars.mk. Don't use AC_PROG_INSTALL since any system ""install"" command is never used anyway. * build/rules.mk.in: Remove fixed reference to install.sh and mkdir.sh in abs_srcdir. * build/config_vars.sh: Munge definitions of MKINSTALLDIRS and INSTALL to use installed scripts. "	r190396
----------------------------
Sanitize the installed config_vars.mk to remove references to the build and source directories, and to remove variables which are internal to the httpd build system: * build/config_vars.sh.in: New file. * Makefile.in (build/config_vars.out): New target. (install-build): Install build/config_vars.out as config_vars.mk. * configure.in: Add include path for srclib/pcre to INCLUDES rather than CPPFLAGS, and use a topdir-relative not absolute path name. Generate build/config_vars.sh. Reviewed by: Paul Querna PR: 20874, 28145 	r190392
----------------------------
* Makefile.in (install-build): Make installed config.nice 0755 too. Submitted by: Daniel Rall <dlr apache.org> 	r189963
----------------------------
"* modules/mappers/config9.m4: Substitute INSTALL_DSO as ""yes"" if mod_so is linked in, or ""no"" otherwise. * build/special.mk: Remove hack to guess whether mod_so is linked in based on BUILTIN_LIBS; rely on INSTALL_DSO definition from config_vars.mk. "	r189603
----------------------------
"* modules/generators/mod_cgi.c (cgi_bucket_read): Log a specific error if a timeout occurs from a blocking read; more helpful than a generic ""apr_bucket_read failed"" error from some higher-up filter. "	r189560
----------------------------
* Makefile.in (DISTCLEAN_TARGETS): Clean up more files generated by configure. 	r189557
----------------------------
- Fix style nits in the new hash config code. No Functional changes. 	r179618
----------------------------
- Fix graceful restarts with the new hashed configuration.  The hash now allocates out of the pconf pool, instead of the process pool. 	r179617
----------------------------
Note that SSLUsername is ignored if FakeBasicAuth is used. 	r179371
----------------------------
- Use a hash for the configuration command lookup implementation.  Now modules can properly directives without dependence on the LoadModule order. 	r178990
----------------------------
* Makefile.win Fix config installation. 	r178665
----------------------------
"Clean up the notes to the logformat section of the mod_log config docs. These have been growing using the ""here's something else we should say"" technique, without any serious thought for readability. In particular: - Remove the ""..."" in all the format strings, since almost nobody uses this and it can be confusing.  It is still documented, just not included in the definitions. - Create three sections: modifiers, examples, and a ""notes"" section for stuff that doesn't go any place else. - Remove the discussion of %v being the canonical name.  I think that it is quite clear since the addition of %V what the difference is. "	r178530
----------------------------
We have been installing config.nice in build/ for a while, so we might as well tell people about it. 	r178520
----------------------------
Fix trailing backslashes in configuration directives. PR: 34834 Submitted by: Timo Viipuri <viipuri dlc.fi> Reviewed by: Paul Querna 	r178209
----------------------------
Add the auth provider name as a note in the request so that authn_provider_alias is able to look up the original provider along with the per_dir configuration. 	r178052
----------------------------
authn_provider_alias adds the configuration block tag <AuthnProviderAlias baseProvider Alias> Authentication directives contained within this block can be AuthDigestProvider directives.  These directives will be merged in to the per_dir configuration just before the base provider is called. 	referenced
----------------------------
* support/ab.c: Rewrite SSL support so that it works reliably, and enable it by default when the --enable-ssl is passed to configure. Adds support for -Z and -f arguments to tweak SSL protocol options. Submitted by: Masaoki Kobayashi <masaoki techfirm.co.jp> 	r170612
----------------------------
* configure.in: Disallow use of bundled APR with external APR-util, or bundled APR-util with external APR, another cause of the dreaded PR21718. 	r170029
----------------------------
Make sure that the LDAPVerifyServerCert patch is compatibile with apr-util 1.1.x.  Once apr-util 1.2 is released, the ifdef's need to be removed and apr_ldap_set_option() will handle the SDK differences. 	r169834
----------------------------
Add the LDAPVerifyServerCert directive to the util_ldap doc 	r169711
----------------------------
Add the LDAPVerifyServerCert directive to util_ldap to force verification of a server certificate when establishing an SSL connection to the LDAP server 	r169705
----------------------------
Make sure mod_rewrite always runs before mod_proxy in the translate_name hook.  This makes doing RewriteRules on a Reverse Proxy.. Slightly more predictable than the order of LoadModules. Reported By: David D. Miller <justdave bugzilla.org> 	r169692
----------------------------
Add docs for SSLCADNRequestFile and SSLCADNRequestPath, based on patch by Tim K. Taylor. 	r169311
----------------------------
"Add AP_INIT_TAKE_ARGV. There can be some inconsistent results because of the behavoir of ap_getword_conf. Do not rely upon any last argument that is """".  If the argument is in the middle of the line, it should work correctly. This is updated from the version sent to dev@httpd to fix the behavoir with 0 arguments. * include/http_config.h: minor MMN bump for the new interface. * modules/generators/mod_autoindex.c: Migrate IndexOptions to the new ARGV command type. "	r168202
----------------------------
Missing ErrorDocument line for Not Acceptable. PR: 28581 	r168028
----------------------------
* server/config.c (process_resource_config_nofnmatch): Fail with useful error message if the config file can't be opened. 	r167965
----------------------------
Two clarifications of ErrorDocument: 1. /-rooted paths are relative to DocumentRoot. 2. Bad requests will sometimes ignore ErrorDocument. PR: 27352 	r167959
----------------------------
%t has logged request time for a very long time. From mod_log_config.c: 	r165671
----------------------------
* modules/mappers/mod_userdir.c (get_suexec_id_doer): Fix allocation size. PR: 34588 	r165151
----------------------------
- don't allow PROPFIND in the default config for public_html directories 	r164763
----------------------------
Document that SSLRequire is broken for use in threaded MPMs and .htaccess files. 	r164756
----------------------------
httpd-config would be a great thing to replace apxs with. 	r164755
----------------------------
AllowEncodedSlashes fix was backported in 2.0.52.  Remove this STATUS file entry. 	r164752
----------------------------
* manual/mod/mod_log_config.html.ja.euc-jp manual/mod/mod_log_config.xml.meta manual/mod/directives.html.de manual/mod/directives.html.en manual/mod/directives.html.es manual/mod/quickreference.html.de manual/mod/quickreference.html.en manual/mod/quickreference.html.es manual/mod/mod_log_config.html.en manual/mod/mod_log_config.xml.ja manual/mod/mod_log_config.xml.ko manual/platform/netware.xml.ko manual/platform/netware.html.en Update transformation 	r164425
----------------------------
* docs/manual/mod/mod_log_config.xml Fix XML validation error 	r164424
----------------------------
Document BufferedLogs PR: 32492 	r164258
----------------------------
Ensure that we always return a FQDN... This is not guaranteed by either apr_sockaddr_info_get() or apr_getnameinfo(). Also note that under OS X, apr_getnameinfo() always seems to fail (at least on my machines) so if we don't specific ServerName at the global setting, we get a warning. 	r164092
----------------------------
Fix issue where mod_ssl does not pick up the ssl-unclean-shutdown setting when configured e.g. as a reverse proxy: * modules/ssl/ssl_private.h: Remove ssl_hook_Translate. * modules/ssl/ssl_engine_kernel.c (ssl_hook_ReadReq): Merge in ssl_hook_Translate.  (ssl_hook_Translate): Remove. * modules/ssl/mod_ssl.c (ssl_register_hooks): Ensure that _ReadReq hook runs after mod_setenvif.c; don't register translate_name hook. PR: 34452 	r161958
----------------------------
"* docs/conf/extra/httpd-ssl.conf.in: Don't reference directories which aren't created by ""make install"".  Use BrowserMatch. "	r161883
----------------------------
Make sure we don't overwrite existing config if it has a name other than httpd.conf. Submitted by: Rici Lake 	r161776
----------------------------
got rave reviews from my customer on using buffered i/o for RewriteMap files, so brag about it a little. 	r161509
----------------------------
Add redirect-carefully BrowserMatch for FrontPage. PR: 32842 	r161475
----------------------------
Ignore generated config files. 	r161431
----------------------------
lookup_map_txtfile: used buffered i/o rather than reading RewriteMap txt: files one byte at a time. I was horrified to see a dump of a server with hundreds of worker threads in each thread finds one key, inserts it into the cache, then the rest of the information is discarded.  there are further improvements which could be made but let's try the simplest first. 	read()
----------------------------
As discussed on the list, change the default setting for KeepAliveTimeout from 15 seconds to 5 seconds. 	r161140
----------------------------
Bring the windows config file in line with the simplifications of the main httpd.conf. Make a vain attempt to modify Makefile.win appropriately. 	r160989
----------------------------
Uncomment the secureListen directive when building the httpd-ssl.conf file for NetWare 	r160952
----------------------------
Rethink the built-in vs shared modules for NetWare.  Reposition mod_asis, mod_actions, mod_cgi, mod_imagemap, mod_userdir and mod_autoindex as shared rather than built-in. 	r160625
----------------------------
Don't always enable mod_imap.  I always turn it off in my configs.  Now you must --enable-imap, or --enable-mods-shared=all|most to pick it up. 	r160307
----------------------------
Actually use the compare_cache_size value that is being set by LDAPOpCacheEntries.  The actual cache_size was previously defaulting to the value of search _cache_size set by LDAPCacheEntries. 	r159542
----------------------------
Turn LDAPTrustedClientCert and LDAPTrustedMode into the RSRC_CONF context.  The current code is broken for use as OR_ALL. 	r158678
----------------------------
Add ReceiveBufferSize directive to control the TCP receive buffer. Submitted by: Eric Covener <covener gmail.com> Reviewed by:  Justin Erenkrantz (with minor formatting tweaks) 	r157583
----------------------------
Win32: Move call of mpm_service_install to rewrite_args hook but continue thru post_config to check httpd.conf 	r154319
----------------------------
Fix 'Anonymous *', which denied access * modules/aaa/mod_authn_anon.c (check_anonymous): 	r153815
----------------------------
Support use of an external copy of the PCRE library: * configure.in: Set abs_{builddir,srcdir} higher.  Add --with-pcre flag; build against external PCRE library if used. * Makefile.in (install-include): Don't install pcre headers any more. * srclib/Makefile.in (SUBDIRS): Remove. PR: 27550 (part two) Submitted by: Andres Salomon <dilinger voxel.net>, Joe Orton 	r153400
----------------------------
* include/util_ldap.h (util_ldap_state_t): Fix gcc format string warnings: use a long for connectionTimeout since the code expects a long. * modules/ldap/util_ldap.c (compare_client_certs): Make static to fix gcc missing-prototype warning. 	r153390
----------------------------
Move the POSIX reg* implementations into the ap_* namespace; internalise the ap_reg*<->PCRE wrapper: * configure.in: Add srclib/pcre to the include path. * include/ap_regex.h: Renamed from include/pcreposix.h.  Prefix all constants with AP_; prefix all functions and types with ap_.  Define AP_DECLARE to nothing if necessary.  Remove regcomp error codes. * include/httpd.h: Include ap_regex.h not pcreposix.h. (ap_pregcomp, ap_regexec, ap_regfree): s/regex_t/ap_regex_t/. (ap_regexec, ap_regerror): Prototypes moved to ap_regex.h. * server/util.c (regex_cleanup, ap_pregcomp, ap_pregsub, ap_pregfree): Adjust for ap_ prefixed types.  (ap_regexec, ap_regerror): Removed. * server/Makefile.in: Build util_pcre.c. * server/util_pcre.c: Copied from srclib/pcre/pcreposix.c; remove use of PCRE-internals to do error mapping; rename types to add AP_/ap_ prefixes as above.  Use APR includes.  (ap_regerror): Use apr_snprintf. * srclib/pcre/Makefile.in: Don't build pcreposix.c into libpcre.la. * modules/*: Update to use new type and constant names. PR: 27750 (part one) Submitted by: Andres Salomon <dilinger voxel.net>, Joe Orton 	r153384
----------------------------
"* modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Move the SSLUsername-controlled assignment of r->user above the SSLRequire checks so that the ""username"" gets logged if SSLRequire denies access. "	r153280
----------------------------
Stop exposing source filenames in the configuration files. * docs\conf\httpd-win.conf * docs\conf\httpd-std.conf.in Replace all occurences of *.c with *_module within IfModule clauses, as pointed out by Paul Querna to be possible nowadays. 	r152951
----------------------------
Document the new optional parameter for AuthLDAPUrl 	r151743
----------------------------
Better handle the case where ProxyBadHeader StartBody is in effect and we think we've started reading in the line read is still in buffer (and document that) to allow us to add to the bb. 	response
----------------------------
* modules/proxy/config.m4: Fix mod_proxy build after filename changes. 	r151329
----------------------------
mod_proxy: Fix ProxyRemoteMatch directive. PR: 33170 Submitted by: Rici Lake <rici ricilake.net> Reviewed by:  Justin Erenkrantz 	r151248
----------------------------
Also translate Destination headers when ProxyPassReverse'd * modules\proxy\mod_proxy_http.c (process_proxy_header): reverse map Destination header. NOTE: This is some darn nasty looking code... * modules\proxy\ajp_header.c (ajp_unmarshal_response): reverse map Destination header. 	r151246
----------------------------
Error out on configurations where the cache provider starts with a '/'. Saves certain people a bit of time figuring out why their caching doesn't work... * modules/cache/mod_cache.c (add_cache_enable): Throw an error when a provider starting with 	r151232
----------------------------
Allow AuthLDAPURL to override the default connection type with an option second parameter of NONE, SSL or TLS | STARTTLS 	r151083
----------------------------
Add CacheStorePrivate, CacheStoreNoStore, and clarify CacheIgnoreCacheControl. * docs/manual/mod/mod_cache.xml: Update documentation for CacheIgnoreCacheControl and add documentation for two new directives. * modules/cache/mod_cache.c (cache_url_handler): Honor 'Cache-Control: no-cache' request header. (cache_save_filter): Only honor no-store or private when their respective rest of file: add in standard configuration syntax stuff... * modules/cache/mod_cache.h: Minor formatting tweak and add new fields. Suggested by: Pier Fumagalli 	r149492
----------------------------
Fix #32367 support for ProxyPass /foo ! 	r149420
----------------------------
Set the connection timeout for LDAP SDK's that support the option. For SDK's that don't, log a warning message. 	r149419
----------------------------
Remove upper limit on the LimitRequestFieldSize directive 	r149269
----------------------------
As per bug 33290, we probably don't want a <Limit> here. 	r149092
----------------------------
Added a new LDAPConnectionTimeout directive to util_ldap so that the socket connection timeout value is configurable. 	r126565
----------------------------
* configure.in: Add --enable-pie flag; define PICFLAGS and PILDFLAGS. * build/rules.mk.in: Factor out BASE_CC and BASE_CXX from COMPILE. Substitute PICFLAGS into COMPILE and CXX_COMPILE, but not into {SH,LT}{,_CXX}_COMPILE.  Substitute PILDFLAGS into LINK but not {SH,MOD}_LINK. Reviewed by: jerenkrantz 	r126362
----------------------------
* support/suexec.c (safe_env_lst): Declare array as static const. 	r125784
----------------------------
mod_ldap: Updated to use the new apr-util v1.1 apr_ldap_*_option() API for the setting of server and client SSL certificates. Replaced LDAPTrustedCA directive with LDAPTrustedGlobalCert and LDAPTrustedClientCert directives to correctly support global certs (CA certs / Netware client certs) and per connection client certs as supported by Netware, OpenLDAP and Netscape/Mozilla. 	r125645
----------------------------
German translation of configuring.xml Reviewed by: nd 	r125201
----------------------------
* modules/ssl/mod_ssl.c: Declare new config directives SSLCADNRequestFile and SSLCADNRequestPath. * modules/ssl/ssl_private.h (modssl_pk_server_t): Add ca_name_path, ca_name_file fields. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_verify): If either of SSLCADNRequestFile or SSLCADNRequestPath are configured, load the CA DN list sent in the CertificateRequest from those certificates. * modules/ssl/ssl_engine_config.c (modssl_ctx_init_server): Use pcalloc to zero-initialize the entire modssl_pk_server_t structure. (ssl_config_server_new): Merge the ca_name_* fields. (ssl_cmd_SSLCADNRequestPath, ssl_cmd_SSLCADNRequestFile): New functions. PR: 32848 Submitted by: Tim Taylor <tim.taylor dfas.mil> 	r125165
----------------------------
Fix VPATH errors introduced in r124104. * configure.in: Use correct source path to get-version.sh and include/ dir. 	r125087
----------------------------
Rewrite Cookies and other headers in mod_proxy_ajp as configured with ProxyPassReverse and ProxyPassReverseCookiePath. * modules/proxy/proxy_ajp.c (ap_proxy_ajp_request): Update call to ajp_parse_header(). * modules/proxy/ajp.h (ajp_msg_get_string): constify argument. (ajp_parse_header): Add conf argument. * modules/proxy/proxy_util.c (ap_proxy_location_reverse_map): Promoted from mod_proxy_http. (ap_proxy_cookie_reverse_map): Promoted from mod_proxy_http; * modules/proxy/ajp_msg.c (ajp_msg_get_string): constify argument. * modules/proxy/proxy_http.c (ap_proxy_location_reverse_map, proxy_cookie_reverse_map: Removed. (process_proxy_header): Update header mapping table to reference the now * modules/proxy/ajp_header.c (ajp_unmarshal_response): And conf argument.  Reverse map cookies and (ajp_parse_header): Update call to ajp_unmarshal_response(). * modules/proxy/mod_proxy.h (ap_proxy_location_reverse_map, ap_proxy_cookie_reverse_map): Declare (ap_proxy_header_reverse_map_fn): Typedef for the signature of the above 	r124901
----------------------------
Sync available error languages with used LanguagePriority. 	r124607
----------------------------
Change 'directory' to 'resource': just the word 'directory' led some users to the wrong assumption that Require isn't allowed in <Files> sections. 	r124546
----------------------------
Mention configuration details for AJP and the balancer. 	r124545
----------------------------
update config for pt-br inclusion 	r124362
----------------------------
Deposit mod_bucketeer.so and mod_dumpio.so into the installed apache2 instance.  This does not configure httpd.conf to load them. 	r124276
----------------------------
This has been coming up rather frequently on IRC, and it's a good example. It's alluded to in the SetEnvIf docs, but it's not a complete example there. 	r124246
----------------------------
svn:eol-style = native ... svn config adjusted ;-) 	r124110
----------------------------
As per bug 22061, this paragraph predates RedirectMatch, and is thus soemwhat inaccurate. 	r123579
----------------------------
The current config.guess in APR outputs i386-pc-os2-emx on OS/2 rather than i386-pc-os2_emx (dash instead of underscore), adjust the tests to match. 	r122967
----------------------------
Move the timeout explanation sentence to the proper place in the table. 	r122772
----------------------------
simplify the BalancerMember load factor weighting. Instead of being percentages (and adjusting when the number don't add up), loadfactors/lbfactors are now normalized values, so values like: work as expected (ie: a gets 25%, b gets 25% and c gets 50%). So we could also have the above as: or even 	r122551
----------------------------
* include/http_config.h: Add missing parameter name. 	r111964
----------------------------
FilterDeclare declares. 	r111628
----------------------------
Mention that SSLEngine can be set to 'option' to enable TLS Upgrade. A more detailed section explaining TLS Upgrade would be helpful. 	r111588
----------------------------
Remove AddDefaultCharset from the default configuration because setting a site-wide default does more harm than good. PR: 23421 	r111581
----------------------------
* mod_log_config.c: Revert r109866 which used apr_file_writev instead of an 	r110069
----------------------------
mod_log_config.c: Use iovecs to write the log line to eliminate a memcpy 	r109866
----------------------------
Add generic reverse proxy worker so that module-driven reverse proxying works. It is enabled by default, but IMO it should be configurable like any other worker so we can limit the number of outgoing connections. 	r109316
----------------------------
fix link to LoadModule 	r106807
----------------------------
Initial pass at refactoring some files to eliminate our 150K C source behemoths. * Makefile.in: Change order of dependencies to bring in exports.o first so that we have every symbol 'used' before the linker starts processing. * build/rules.mk.in: Add a 'program-install' target which just copies httpd. * server/Makefile.in, modules/http/config2.m4: Add in new file targets. * NWGNUmakefile, libhttpd.dsp: Blind updates for Netware and Win32.  (I tried.) * server/core.c: Move core_input_filter, net_time_filter, and core_output_filter  and all supporting functions to... * server/core_filters.c (copied): ...here. * modules/http/http_protocol.c: Move functions from here to there...namely: * modules/http/byterange_filter.c (copied): Relocate ap_byterange_filter() and friends. * modules/http/chunk_filter.c (copied): Relocate chunk_filter(). * modules/http/http_etag.c (copied): Relocate ap_set_etag and ap_make_etag(). * modules/http/http_filters.c (copied): Relocate ap_http_filter(), ap_http_header_filter(), ap_discard_request_body(), ap_setup_client_block(), ap_should_client_block(), and ap_get_client_block(). 	r106692
----------------------------
Use ap_log_cerror and loglevel debug in filter_trace 	r106691
----------------------------
ap_process_http_async_connection (used by the Event MPM): fix CLOSE_WAITs/leaked connections.  The logic to deal with ap_read_request failures got lost when merging in the HTTP pipelining fix.  If ap_read_request fails, the connection state should get set to CONN_STATE_LINGER so the MPM will invoke lingering close.  Test case: client sends a Connection: keepalive header then closes the connection before the keepalive timeout pops. Also add a comment to make the pipelining flow more obvious. 	r106662
----------------------------
mod_cgid: Catch configuration problem where two web server instances share same ServerRoot but admin forgot to use ScriptSock. 	reviewed
----------------------------
Slight clarification in the role of ServerRoot 	r106258
----------------------------
The Event MPM. Designed to minimize Apache's KeepAlive overhead. This MPM depends on the current APR-trunk for new features added to the apr_pollset interface. Currently the underlying operating system must support KQueue or EPoll. Status: Should work as a drop in replacement for all non-ssl servers. SSL Requests that use HTTP 1.1 Pipelining do not currently work. Testing: I have tested it with Linux 2.6, FreeBSD 5.2.1, and OS X 10.3. Originally based on the patch by Greg Ames. 	r105919
----------------------------
Preparation step to simplify merging to a newer pcre: * srclib/pcre/ltmain.sh, ltconfig, config.guess, config.sub: Remove files which are unneeded when pcre is built by the httpd build system. * srclib/pcre/RunTest: Remove generated file, a leftover from an older version of pcre. 	r105820
----------------------------
Clarify the sample configuration. 	r105758
----------------------------
Update SSLSessionCache section. 	r105743
----------------------------
"Add -t -DDUMP_CERTS option to mod_ssl which dumps the filenames of all configured SSL certificates to stdout, useful for cron-ing through a ""do I need to renew any of my certificates this week"" tool: * modules/ssl/ssl_engine_config.c (ssl_hook_ConfigTest): New function. * modules/ssl/mod_ssl.c (ssl_register_hooks): ...register it as a test_config hook. "	r105741
----------------------------
* modules/ssl/config.m4: Use libtool's -export-symbols-regex flag to hide all global symbols defined by mod_ssl other than the module structure (where possible). 	r105740
----------------------------
Document SSLPassPhraseDialog's piped input mode. 	r105684
----------------------------
Remove bogus comment: for SSLPassPhraseDialog exec:..., argv is defined and documented and can't be changed. 	r105683
----------------------------
If the entry has a password then don't allow util_ldap_cache_getuserdn() to update the expiration timeout since it has no idea when the password was last validated. Submitted by: Jari Ahonen [jah progress.com] 	r105681
----------------------------
* modules/ssl/ssl_engine_kernel.c (ssl_hook_UserCheck): Fix possible NULL pointer dereference in some configurations. PR: 31848 	r105663
----------------------------
Change FilterDeclare/FilterProvider semantics as discussed in http://marc.theaimsgroup.com/?l=apache-httpd-dev&m=109899588616670&w=2 	r105646
----------------------------
"mod_cache: Add CacheIgnoreHeaders directive. (Justin made some minor tweaks to the patch.) PR: 30399 Submitted by:	R�diger Pl�m <r.pluem@t-online.de> Reviewed by:	Justin Erenkrantz "	r105569
----------------------------
use the correct struct for CacheDisable. (cache_disable instead of cache_enable) PR: 31128 Submitted by: Edward Rudd <eddie omegaware.com> 	r105510
----------------------------
OR_ALL is not a good choice. Use more restrictive permissions for the mod_filter directives. OR_OPTIONS for all but FilterTrace, which isn't allowed in htaccess, because it could DoS the server (see docs). We should consider to introduce an allowoverride filters or so. 	r105477
----------------------------
add mod_filter to the configure parameters 	r105474
----------------------------
* modules/filters/config.m4: Drop check for zutil.h.  Add -lz to MOD_DEFLATE_LDADD to correctly support shared mod_deflate against static zlib (where possible). 	r105445
----------------------------
* modules/ldap/util_ldap.c (util_ldap_child_init): Don't segfault if the cache has been disabled (when _cache_lock == NULL). (util_ldap_post_config): Set mutex permissions if necessary. 	r105412
----------------------------
As the first stage of a simplification of the default config in 2.1 (only!), I'm going to remove all the html files under httpd-2.1/docs/docroot/ and replace them with an index.html file containing only <html><body><h1>It works!</h1></body></html> I'm going to do this because: 1. The old welcome page is a constant source of confusion to random web surfers who stumble on unconfigured apache installs. 2. New users, when finding on a docroot with dozens of files, are often confused about where to put their own content. 3. The international welcome page is a large source of bug reports from people wanting to tweak grammar or provide new translations. 4. This will allow us to simplify the default config by removing the config stuff necessary to handle the typemap. 	r105393
----------------------------
* modules/ssl/ssl_scache_shmcb.c (ssl_scahe_shmcb_init): If anonymous shm is not supported, always remove the named segment first to cope with unclean shutdowns. PR: 21335 (continued) 	r105249
----------------------------
* configure.in: Only export CC and CPP if a cache file is not specified. 	r105230
----------------------------
Merge mod_filter with util_filter structs; add API for protocol stuff. Rename FilterDebug directive to FilterTrace. 	r105226
----------------------------
* server/core.c (merge_core_dir_configs): Fix Satisfy merging since per-method Satisfy feature was added. PR: 31315 Submitted by: Rici Lake <rici ricilake.net> 	r105215
----------------------------
* configure.in: Ensure that $CC and $CPP are correctly passed through to the pcre configure script if config caching is disabled (the autoconf 2.5x default). 	r105210
----------------------------
Make worker retry algorithm much  simpler removing incremental timeout increase. 	r105177
----------------------------
Fix worker retries and limit default retry timeout to 10 minutes. Thanks to Christian von Roques for spotting that. 	r105136
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Fix false positives from gcc -Wformat-security. * modules/ldap/util_ldap_cache.c (util_ldap_url_node_display): Add default to switch to avoid uninitialised variable warnings. * modules/ldap/util_ldap_cache_mgr.c (util_ald_create_caches): Fix to 	return
----------------------------
Add proxy_ajp and proxy_balancer to the LoadModule list. 	r105103
----------------------------
Just like for balancers initialize the workers on post_config instead on first request to skip the race condition. 	r105064
----------------------------
MaxSpareServers cannot be equal to MinSpareServers. 	r105058
----------------------------
Move the shared scoreboard data initization to the balancer module. The initialization is done like for the worker, on first request. This is done because during config phase we don't have a scoreboard to allocate from. Thanks to Chritian von Roques for spotting that. 	r105057
----------------------------
Add 'default' foward proxy worker to the proxy_server_conf. Forward worker is constructed on ProxyRequests directive with sceme and host equals '*', meaning all. 	r105044
----------------------------
Echo a warning from configure if you select an experimental MPM. Reviewed by: Jeff Trawick 	r105003
----------------------------
Rewrote config tree walk using recursion the way God intended. Added ?config option. Added printout of config filename and line numbers. PR: 30919 Submitted by: Rici Lake <rici ricilake.net> 	r104942
----------------------------
handling of encoded non-slashes was borked in the AllowEncodedSlashes path thanks to FirstBill for pointing that out! 	r104937
----------------------------
* configure.in: Only build against APR 1.x. 	r104936
----------------------------
Fix the handling of URIs containing %2F when AllowEncodedSlashes is enabled.  Previously, such urls would still be rejected with 404. 	r104925
----------------------------
#ifndef AP_UNSAFE_ERROR_LOG_UNESCAPED the stderr to errorlog stuff for those who don't want to escape (as in server/log.c) 	r104834
----------------------------
Add dynamic management to load balancer: <Location /manager> SetHandler balancer-manager </Location> It enables changing load factors, session routes, redirection 	routes,
----------------------------
Add pool used for allocating proxy_server_conf to that struct. It will be used for dynamic configuration, to ensure that dynamic params has the same lifetime as the config has. 	r104811
----------------------------
Allow multiple IP addresses to be configured for the same secure port 	r104802
----------------------------
Win32: Fix stranded piped loggers on apache -k start,restart,config,install 	r104799
----------------------------
Added SSL custom indicators. They can be set using SetEnv directive, so we don't need an extra one like the JkEnvVar is in the mod_jk. 	r104796
----------------------------
Added ProxySet directive (can be rename to something else). The purpose is to be able to set the worker/balancer params withouth the need for very long config lines : <Proxy balancer://cluster> ProxySet stickysession=JSESSIONID </Proxy> Or... ProxySet balancer://cluser nofaiover=On timeout=2 	r104794
----------------------------
Implement REQ_ATTRIBUTE using request rec environment table, so we can use standard SetEnv directive for that. The ajp specific attributes has to be prefixed using 'AJP_', and are passed withouth that prefix to the backend. 	r104788
----------------------------
Since OpenLDAP doesn't validate the certificate until it tries to use it, at lease make sure that the file path is good during configuration. 	r104776
----------------------------
Fix configure option for ldap (--enable-authnz-ldap) Submitted by: Joshua Slive 	r104747
----------------------------
Move charset.conv configuration file out of experimental and into docs/conf.  This file holds the character set conversion table used by the authn_ldap provider. See Attic in experimental directory for previous change history. 	r104722
----------------------------
Prevent / beeing accepted wrongly by the proxy when having for example: <Location /examples/> </Location> 	r104714
----------------------------
Both the r->user and r->ap_auth_type were set previously when the username and password were extracted from the request.  Resetting them at the end of the handler will overwrite any changes made by the authn provider.  For example, the ldap authn provider can be configured to change the user name to a full user dn. 	r104712
----------------------------
suexec: Pass the SERVER_SIGNATURE envvar through to CGIs. Submitted by: Zvi Har'El <rl math.technion.ac.il> Reviewed by:  Jeff Trawick 	r104703
----------------------------
* modules/ssl/ssl_engine_vars.c (ssl_var_lookup_ssl_cert_remain): New function.  (ssl_var_lookup_ssl_cert): Support _V_REMAIN suffix for SSL_{SERVER,CLIENT} as number of days until certificate expires. * modules/ssl_engine_kernel.c: Export SSL_CLIENT_V_REMAIN if +StdEnvVars is configured. 	r104700
----------------------------
* modules/mappers/mod_userdir.c (register_hooks): Move suexec_identity hook to APR_HOOK_FIRST to ensure it runs before the mod_suexec hook. PR: 18156 Submitted by: Joshua Slive 	r104699
----------------------------
Implement -t -DDUMP_MODULES using generic test_config hook rather than hooking into mod_so from main.c: * include/http_config.h, server/config.c: Declare test_config hook. * server/main.c: Drop hooks into mod_so; run test_config hooks. * modules/mappers/mod_so.h: Drop ap_dump_loaded_modules optional function. * modules/mappers/mod_so.c (dump_loaded_modules): Renamed from ap_dump_loaded_modules; only run if -DDUMP_MODULES is defined. (register_hooks): Register test_config hook instead of optional function. Reviewed by: Justin Erenkrantz, Paul Querna 	r104685
----------------------------
* configure.in: Ensure that apr and apr-util exported include directories are later than local source directories in INCLUDES. PR: 18959 	r104647
----------------------------
* configure.in: Define AP_HAVE_DESIGNATED_INITIALIZER via ap_config.h so third-party modules don't have to pick up NOTEST_CPPFLAGS to avoid gcc warnings from http_config.h. 	r104642
----------------------------
* configure.in, acinclude.m4: Substitute AP[RU]_CONFIG with location of installed ap[ru]-config scripts so third-party modules can use `apxs -q APR_CONFIG`. * support/apxs.in: Use new AP[RU]_CONFIG variables; use apr-config --apr-libtool. 	r104641
----------------------------
Add route and redirect to worker so they can be set trough configuration. Add worker status flag definitions. Submitted by: mturk 	r104611
----------------------------
Add proxy_balancer to proxy module, including config and capturing -I ../generators for the mod_status.h Submitted by: mturk 	r104608
----------------------------
Remove setting module config. Submitted by: mturk 	r104607
----------------------------
Fix some config checking params. Added route and route redirect to the runtime worker. Submitted by: mturk 	r104606
----------------------------
Bounding to client connection is not needed(?). Since AJP can serve multiple request trough the same backend connection, no need to create separate conn_rec. For now comment out all the set/get module config. Submitted by: mturk 	r104605
----------------------------
Added KeepAlive worker option. The scheme handler will override this setting if required, depending on the protocol itself and keepalive_set flag. Submitted by: mturk 	r104596
----------------------------
Added iobuffersize and receivebuffersize to be worker specific. As for timeout their default value is from proxy_conf. Submitted by: mturk 	r104594
----------------------------
Added timeout_set for worker. Each worker can have a different timeout the ProxyTimout sets. Also changed proxy_conf's timeout_set to int. Use timeout_set for worker inherited from ProxyTimeout but overridable using timout=xxx Submitted by: mturk 	r104592
----------------------------
Added acquire timeout for obtaining resources from reslist. The timeout is in milliseconds to enable quick return in case the Submitted by: mturk 	reslist
----------------------------
Add worker timeout inherited from ProxyTimeout. Submitted by: mturk 	r104588
----------------------------
Use RAW_ARGS instead ITERATE. Add options for connection pool when using ProxyPass Submitted by: mturk 	r104571
----------------------------
Move worker params parsing to a separate function. The same will be used for creating ProxyPass connection pools. Added ttl param to worker for maintaining reslist. Submitted by: mturk 	r104570
----------------------------
Use API instead directly obtaining worker and balancer. Add BalancerStickySession and BalanceMember directives. Add workers and balancers to create and merge config. Submitted by: mturk 	r104567
----------------------------
Introduce proxy_ajp.c : use --enable-proxy-ajp with configuring Apache. To load it: +++ LoadModule proxy_ajp_module modules/mod_proxy_ajp.so +++ And to use it something like: +++ <Location /examples/> ProxyPass ajp://backend.example.net:8009/examples/ </Location> +++ proxy_ajp will not be enabled by default due to ./ajp dependencies Build magic improvements: mturk, wrowe Submitted by:  jfclere 	r104556
----------------------------
Ignore config.* scripts copied from APR. 	r104543
----------------------------
Remove cache hooks and custom vtable format in favor of the ap_provider_* API. Cache-related configuration directives remain the same. 	r104510
----------------------------
mod_disk_cache: Produce slightly more informative log messages and at more appropriate levels.  (LogLevel info will now only inform you when you are storing a cache item.  debug is required to show what is being served from cache.) 	r104497
----------------------------
Remove duplicate AddCharsets (both old and new:-) 	r104445
----------------------------
Teach apxs how to find ap{ru}-$AP{RU}_MAJOR_VERSION-config (httpd-2.1+ will be APR 1.0 or higher which uses this convention.) 	r104443
----------------------------
Workaround RHEL 3 'cuteness' for OpenSSL by calling pkg-config openssl. For more info, see: http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=82369 	r104329
----------------------------
NWSSLUpgradeable directive 	r104308
----------------------------
Added 'AllowOverride Options=Indexes,MultiViews' to give an admin better control over what options can be used in .htaccess files. PR: 29310 Submitted by: Tom Alsberg <alsbergt-apache cs.huji.ac.il> 	r104283
----------------------------
Add the new directive NWSSLUpgradeable to mod_nw_ssl to allow a non-secure connection to be upgraded to secure connections 	r104278
----------------------------
* build/config.guess, build/config.sub: Remove since buildconf copies these files from APR. 	r104269
----------------------------
Add ShowForbidden to IndexOptions to list files that are not shown because the subrequest returned 401 or 403. PR: 10575 	r104212
----------------------------
document the brand new DirectorySlash directive 	r104159
----------------------------
make trailing-slash-behaviour configurable 	r104154
----------------------------
"*** Patch for EBCDIC-host and HTTP/0.9 responses only *** In dealing with a HTTP/0.9 response to a proxy request, we have pre-read data that is not an HTTP header. At this point of processing, we don't know yet whether the data is going to be interpreted an binary or not. (In fact, we may never find out because HTTP/0.9 lacks the Content-Type headers; only by configuring mod_charset_lite can we control the conversion). But mod_charset_lite will get control only later, so it cannot decide on the conversion of the current buffer full of data. => This is an extreme and rare situation normally. So, for catching the most obvious problem (talking not to a HTTP server but to some other protocol), the best guess here is to treat the buffer as ""text/*"" (to make error messages readable). "	r104081
----------------------------
Fix for multiple proxy bugs - review please: #10722  Reverse proxying cookies #15207  Proxy passing canonicalised URIs to backend #16812  Case-insensitivity of proxypassreverse #19317  Canonicalised URI causing infinite loop #20372  AllowEncodedSlashes May also fix 13577 (untested) This is really two fixes: 10722 and 15207; the others are trivial consequences. To make review easier, the simpler fix (#15207) is entirely contained in #ifdef FIX_15207 (new code) and #ifndef FIX_15207 (removed code) 	r104070
----------------------------
"mod_log_config: Fix a bug which prevented request completion time from being logged for I_INSIST_ON_EXTRA_CYCLES_FOR_CLF_COMPLIANCE processing. PR:             29696 Submitted by:   Alois Treindl <alois astro.ch> Reviewed by:	Jeff Trawick "	r103991
----------------------------
<VirtualHost myhost> now applies to all IP addresses for myhost instead of just the first one reported by the resolver.  This corrects a regression since 1.3. 	r103897
----------------------------
Slightly augment the example for SSIStartTag 	r103883
----------------------------
Allow relative paths for LDAPTrustedCA to be resolved against ServerRoot PR#26602 	r103877
----------------------------
Nobody objected: <IfModule> now takes the module identifier in addition to the filename. CAUTION: this commit breaks the build on netware. It still needs to be adjusted. (but I don't have any netware knowledge...) Also, developers need to re-run buildconf on unices. PR: 29003 Submitted by: Edward Rudd <eddie omegaware.com>, Andr� Malo 	r103849
----------------------------
Document SSLCryptoDevice and fix some example titles. 	r103838
----------------------------
Document SSLHonorCipherOrder. 	r103837
----------------------------
Document SSLUserName directive. Submitted by: Martin v. Loewis 	r103835
----------------------------
"Add ""SSLUserName"" directive to set r->user based on a chosen SSL environment variable name. * modules/ssl/ssl_private.h (struct SSLDirConfigRec): Add szUserName field. * modules/ssl/ssl_engine_config.c (ssl_config_perdir_create, ssl_config_perdir_merge): Initialize and merge szUserName field. (ssl_cmd_SSLUserName): New function. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Fixup): Set r->user to the value of the chosen SSL environment variable. * modules/ssl/mod_ssl.c: Add SSLUserName config directive. PR: 20957 Submitted by: Martin v. Loewis <martin v.loewis.de> "	r103834
----------------------------
"Add ""SSLHonorCipherOrder"" directive to enable the OpenSSL 0.9.7 flag which uses the server's cipher preference order rather than the client's. * modules/ssl/ssl_private.h (struct SSLSrvConfigRec): Add cipher_server_pref field. * modules/ssl/ssl_engine_config.c (ssl_config_server_create, ssl_config_server_merge): Initialize and merge cipher_server_pref field. (ssl_cmd_SSLHonorCipherOrder): New function. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_protocol): Set the context option SSL_OP_CIPHER_SERVER_PREFERENCE when required. PR: 28665 Submitted by: Jim Shneider <jschneid netilla.com> "	r103832
----------------------------
"Drop support for the ""CompatEnvVars"" argument to SSLOptions, which was never implemented in 2.0 and never needed to be. * docs/ssl/ssl-std.conf.in: Remove CompatEnvVars examples. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLOptions): Don't allow the CompatEnvVars argument. * modules/ssl/ssl_private.h: Remove SSL_OPT_COMPATENVVARS macro. "	r103829
----------------------------
Enable the option to support anonymous shared memory in mod_ldap. This makes the cache work on Linux again. PR: Obtained from: Submitted by: Reviewed by: 	r103772
----------------------------
allow LimitRequestBody to be reset to unlimited PR: 29106 	r103751
----------------------------
use new apr_strtoff function to parse limitrequestbody 	r103750
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_config_global_create): Fix gcc strict-aliasing warning. 	r103688
----------------------------
* modules/experimental/util_ldap.c (util_ldap_cache_compare): Fix uninitialized variable warning from gcc -Wall. (util_ldap_set_cache_bytes, util_ldap_post_config): Use correct APR printf format string macros. (util_ldap_set_cert_type): Make static to fix gcc warning. (util_ldap_cleanup_module): Fix unused variable warning. * modules/experimental/mod_auth_ldap.c (derive_codepage_from_lang): Remove unused variable. 	r103664
----------------------------
* modules/loggers/mod_log_config.c, server/log.c (open_error_log, ap_replace_stderr_log): Use APR_LARGEFILE when opening log files, to allow log files to exceed the 2Gb limit if necessary. PR: 13511 	r103627
----------------------------
changed the following APIs to return an error instead of hard exiting: ap_add_module, ap_add_loaded_module, ap_setup_prelinked_modules, and ap_process_resource_config 	r103517
----------------------------
note that forbidden directives in htaccess files result in a 500. (PR 28535) Additionally note that AllowOverride doesn't work in regex-<directory> containers. 	r103512
----------------------------
Include directives no longer refuse to process symlinks on directories. Instead there's now a maximum nesting level of included directories (128 as distributed). This is configurable at compile time using the -DAP_MAX_INCLUDE_DIR_DEPTH switch. PR: 28492 	r103472
----------------------------
Recursive Include directives no longer crash. The server stops including configuration files after a certain nesting level (128 as distributed). This is configurable at compile time using the -DAP_MAX_INCLUDE_DEPTH switch. PR: 28370 	r103466
----------------------------
simplifications There's no need for different server and dir configs. 	r103441
----------------------------
"Implement the ""CGI bucket"" in mod_cgi to handle stderr output during script execution, preventing deadlock if stderr output fills the pipe buffer: * modules/generators/mod_cgi.c (log_script_err): Return a read error. (cgi_bucket_create, cgi_bucket_dup, cgi_read_stdout, cgi_bucket_read): New functions. (cgi_handler): Use new CGI bucket rather than a pipe bucket if APR_FILES_AS_SOCKETS; use zero read timeout from stdout/stderr during script execution. PR: 22030 Submitted by: Joe Orton, Jeff Trawick "	r103437
----------------------------
the up-to-date checker currently depends on a properly configured cvs in path that's totally uncool. Let make cvs the work on the fly: - start adding $Revision$ keyword to english files 	r103421
----------------------------
* server/vhost.c (remove_unused_name_vhosts): Remove redundant check; catch all port-based NameVirtualHosts without defined VirtualHosts, preventing segfaults later in some misconfigurations. PR: 27731 	r103400
----------------------------
"add ""ErrorDocument 404 default"" description "	r103363
----------------------------
accept URLs as ServerAdmin contact. If it's not recognized as an URL, assume an email address and prepend it with mailto: in server outputs. PR: 28174 	r103339
----------------------------
"""ErrorDocument default"" changes broke inheritance. consider: <Directory /foo> ErrorDocument 404 blah </Directory> <DIrectory /foo/bar> ErrorDocument 500 boo # 404 is now fallen back to default </Directory> This patch solves the problem. "	r103333
----------------------------
Fix a bunch of cases where the return code of the regex compiler was not checked properly. This affects: mod_setenvif, mod_usertrack, mod_proxy, mod_proxy_ftp and core. PR: 28218 	r103328
----------------------------
Enable special ErrorDocument value 'default' which restores the canned server response for the scope of the directive. 	r103310
----------------------------
Don't allocation large buffers on the stack to avoid over-running a fixed length stack when ap_build_cont_config() is called recursively (ie. nested <IfDefine> blocks). 	r103290
----------------------------
document new RequestHeader behaviour PR: 27951 Submitted by: vincent gryzor.com (Vincent Deffontaines) 	r103270
----------------------------
allow RequestHeader to be conditional PR: 27951 Basically submitted by: vincent gryzor.com (Vincent Deffontaines) 	r103269
----------------------------
mod_cgid: Don't allow Scriptsock to be specified inside VirtualHost; Don't place script socket inside default server root instead of actual server root. The sock name was being stored in the server config, though it was not specific to a server. ap_server_root_relative() was being used prior to config processing, so it was always picking up the default server root. PR:            27886 	r103184
----------------------------
Intergrate Kess' configure docs in the docs tree and, in particular, integrate them into install.xml by removing large chunks of that document and making it a summary with pointers into configure.xml. (I also snuck in the odd fix to both install.xml and configure.xml.  Sorry for the mix.) 	r103154
----------------------------
`build metafiles` 	r103130
----------------------------
Fix memory corruption problem with ap_custom_response() function. The core per-dir config would later point to request pool data that would be reused for different purposes on different requests. This is based on an old 1.3 patch submitted by Will Lowe. It needs a minor tweak before committing to 1.3, but he had it pretty darn close. 	r103120
----------------------------
Reference the config file syntax in the htaccess tutorial. PR: 17236 	r103100
----------------------------
Mention that mod_userdir is required for suexec to work in user directories. PR: 25477 	r103092
----------------------------
Fix description of Indexignore argument. PR: 25870 	r103090
----------------------------
Document the ability to look at original of final subrequest. I'd appreciate a review from someone more familiar with mod_log_config! PR: 27319 	r103086
----------------------------
"Caching content from sources where Content-Length is not specified (these were passed through uncached until now): This needed additional checks for CacheMinFileSize and CacheMaxFileSize after the response has completed. That means that we are checking at two places now: -> when the C-L is known, we check before we cache -> when it is unknown we check ""on-the-way"" for CacheMaxFileSize, and We now compare the actual size of the cached copy against the C-L header, and discard it if the two don't match. "	r103026
----------------------------
Adapt the mpm_netware version of the ThreadStackSize directive to the common version 	r103013
----------------------------
"Change ""new"" WorkerStackSize directive to ThreadStackSize Move existing Netware docs and links on ThreadStackSize to mpm_common "	r102976
----------------------------
use existing directive name ThreadStackSize instead of WorkerStackSize as made obvious by: Brad Nicholes 	r102975
----------------------------
German translation of EnableExceptionHook Reviewed by: Kess 	r102970
----------------------------
clarify the enableexceptionhook description 	r102969
----------------------------
add initial documentation for EnableExceptionHook. Please review. 	r102965
----------------------------
Forward-port from mod_dav 1.0: * server/util_xml.c (ap_xml_parse_input): Give a 413 (Request Entity Too Large) not a 400 if the client exceeds the configured XML request body limit. 	r102959
----------------------------
Satisfy directives now can be influenced by a surrounding <Limit> container. PR: 14726. 	r102954
----------------------------
emit the config filename when warning about overlapping aliases Submitted by: Guenter Knauf <eflash gmx.net> Reviewed by: Dirk-Willem van Gulik 	r102949
----------------------------
"* modules/proxy/proxy_http.c (ap_proxy_http_process_response): Consistently check whether r->status is ""successful"" or not; fix screwy handling of 2xx-but-not-200 responses when ProxyErrorOverride is used. PR: 20183 Submitted by: Marcus Janson <marcus.janson@tre.se>, Joe Orton "	r102935
----------------------------
Win32: Tweak worker thread accounting to fix hang when number of Listen directives is >= ThreadsPerChild 	r102922
----------------------------
"Fix bug in mod_usertrack when no CookieName is set. PR: 24483 Submitted by:	Manni Wood <manniwood planet-save.com> Reviewed by:	Cliff Woolley, Jim Jagielski "	r102890
----------------------------
Fix use of mod_ssl as a DSO linked against static SSL libraries; also stop linking all of support/* against the SSL libraries: * acinclude.m4 (APACHE_MODULE): Define MOD_FOO_LDADD which each module .la library will be linked against. (APACHE_MODPATH_ADD): Link static modules against the provided libraries. (APACHE_CHECK_SSL_TOOLKIT): Put SSL libraries in SSL_LIBS and export that to config_vars.mk. * support/Makefile.in: Link ab against SSL_LIBS. * modules/ssl/config.m4: Add SSL_LIBS and distcache libraries to MOD_SSL_LDADD. PR: 17217 	r102870
----------------------------
Add maxmemfree as a default for the netware mpm 	r102866
----------------------------
Allow the enabled flag to be set to more than just TRUE or FALSE so that the OPTIONAL flag can be correctly merged within the ssl_config_server_merge() function. 	r102860
----------------------------
Allow the enabled flag to be set to more that just TRUE or FALSE so that the OPTIONAL flag is correctly merged within the ssl_config_server_merge() function. 	r102859
----------------------------
Add 's' format tag to mod_headers to allow access to mod_ssl variables without the overhead of SSLOptions +StdEnvVars/+ExportCertData; also ensure that any multi-line envvars are unwrapped onto a single line. * modules/metadata/mod_headers.c (header_request_ssl_var, unwrap_header, header_post_config): New functions. (header_pre_config): Register the 's' tag type. (register_hooks): Add the post_config hook. PR: 23223 	r102809
----------------------------
Move mod_ssl-internal interfaces into ssl_private.h; allow mod_ssl.h to be included even when mod_ssl is not enabled. * Makefile.in (install-include): Only install mod_ssl.h. * modules/ssl/ssl_private.h: New file. * modules/ssl/mod_ssl.h: Move everything apart from than the optional hook definitions into ssl_private.h. * modules/ssl/*.c: Include ssl_private.h not mod_ssl.h * modules/ssl/config.m4: Always add the mod_ssl directory to the include path so other modules can find mod_ssl.h. * modules/proxy/mod_proxy.c: Include mod_ssl.h to pick up the optional hook definitions rather than copy'n'pasting them. 	r102803
----------------------------
"fix an old misfeature: ""BufferedLogs Off"" would sort-of turn buffered logging on as it set the log writer to the buffered log writer, though it would leave the are-logs-buffered flag off this misfeature combined with recent mutex logic for buffered logs led to a segfault with ""BufferedLogs Off"" "	r102783
----------------------------
* modules/ssl/ssl_scache_shmcb.c (ssl_scache_shmcb_init): Use an anonymous shm segment by default or fall back on name-based shm. 	r102746
----------------------------
allow log pipes to be relative to serverroot as well 	r102727
----------------------------
Add a new directive EnableExceptionHook that must be specified for exception hooks to be called (in addition to the build time The 2.1-dev feature is now more aligned with the 1.3.30-dev feature, in that there is a build-time requirement as well as a configuration 	requirement.
----------------------------
Added doc for LDAPSharedCacheFile directive in mod_ldap 	r102639
----------------------------
* configure.in: Remove long since unnecessary endianness checks. 	r102530
----------------------------
* support/Makefile.in (suexec): Don't link against libapr etc; suexec is self-contained. 	r102491
----------------------------
* configure.in: Remove unnecessary $builddir/server/mpm/$mpm and $srcdir from INCLUDES.  Remove unused USE_VPATH variable. 	r102406
----------------------------
EOLs sent by external rewritemaps are now consumed as whole. That way, on systems with more than one EOL character mode. PR: 25635 	rewritemap
----------------------------
Introduce the RewriteCond -x check, which returns true if the pattern is a file with execution permissions. 	r102398
----------------------------
add commented LoadModule directive for mod_deflate 	r102369
----------------------------
mod_log_config: Fix corruption of buffered logs with threaded MPMs. PR:               25520 	r102355
----------------------------
allow proxying of directoryindex'd resources 	r102332
----------------------------
If the proxy was enabled, and UseCanonicalHostname was off, then the Via: header would report not the proxy hosts's ServerName (or any of its configured VHosts's names) as it should, but the *origin hosts*'s name. Now it reports its ServerName. 	r102320
----------------------------
use the UNSAFE designation for unescaped errorlogs Submitted by: Geoffrey Young, Joe Orton 	r102306
----------------------------
allow unescaped errorlogs via compile time switch Submitted by: Geoffrey Young <geoff modperlcookbook.org> 	r102302
----------------------------
update worker doc to mention that . a potentially large number of child processes can be in termination state . ServerLimit/ThreadLimit should be coded before other worker MPM directives which control processes/threads 	r102295
----------------------------
Fix typo and add reference to Anonymous directive. 	r102260
----------------------------
* modules/loggers/config.m4: Fix --enable-mods-shared=all case where $enable_log_forensic gets set to the empty string. 	r102241
----------------------------
mod_proxy hangs when both KeepAlive and ProxyErrorOverride are enabled, and a non-200 response without a body is generated by the backend server. Submitted by: Graham Wiseman, Richard Reiner Reviewed by: Richard Reiner, Bill Stoddard 	r102239
----------------------------
Use -export-dynamic only when linking an httpd which includes mod_so, not when linking modules or support programs. * modules/aaa/config.m4, modules/arch/win32/config.m4, modules/cache/config.m4, modules/echo/config.m4, modules/filters/config.m4, modules/generators/config5.m4, modules/metadata/config.m4: Don't add -export-dynamic to LT_LDFLAGS. * modules/mappers/config9.m4: Add -export-dynamic to HTTPD_LDFLAGS when mod_so is enabled. 	r102235
----------------------------
Add support to mod_ssl for a distributed session cache using distcache. * LAYOUT: Update for removal of scache_shmht and addition of scache_dc. * modules/ssl/config.m4: Check for libdistcache; build ssl_scache_dc.lo. * modules/ssl/mod_ssl.dsp: Build ssl_scache_dc (with luck). * modules/ssl/mod_ssl.h: Add SSL_SCMODE_DC and scache_dc_* prototypes. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Allow use of dc: argument. * modules/ssl/ssl_scache_dc.c: New file. * modules/ssl/ssl_scache.c (ssl_scache_init, ssl_scache_kill, ssl_scache_store, ssl_scache_retrieve, ssl_scache_remove, ssl_ext_status_hook): Hook into scache_dc. Submitted by: Geoff Thorpe <geoff@geoffthorpe.net> 	r102227
----------------------------
Correct SSLProxyMachineCertificatePath and SSLProxyMachineCertificateFile - the previous description looked like it was copied from SSLProxyCA* Also add a warning about not using encrypted keys in those two. 	r102191
----------------------------
Move SSLRandomSeed out of the <IfDefine SSL> container to support starting without SSL on platforms with no /dev/random equivalent but a statically compiled-in mod_ssl. See PR: 25867 Submitted by: Rob Meyer <rob bigdis.com> 	r102179
----------------------------
* modules/filters/config.m4: Fix typo which wiped INCLUDES if zlib detection failed. 	r102176
----------------------------
* modules/loggers/config.m4: Add 'server' directory to include path if mod_log_forensic is enabled. 	r102167
----------------------------
* configure.in: Check for sqrt in libm (needed by ab). 	r102146
----------------------------
prevent module from segfaulting when not configured. 	r102145
----------------------------
"mod_proxy with ProxyErrorOverride On in a reverse-proxy configuration attaches a body to the 302 response and a wrong Content-Length header. PR: 22951 Submitted by:	Ermanno Scaglione <scaglione ..at.. starnetone.de> Reviewed by:	Blaise Tarr <blaise.tarr .. at .. cnet.com> "	r102069
----------------------------
Win32: Tweak MaxMemFree patch. Allocate ptrans specifying pchild as the parent pool as we did prior to the MaxMemFree patch. 	r102025
----------------------------
"Fix <Limit> and <LimitExcept> parsing to require a closing '>' in the initial container. PR:                25414 Submitted by:	   Geoffrey Young <geoff apache.org>] Reviewed by:	   Jeff Trawick "	r102021
----------------------------
"update the misconfigured INCLUDES skipping code to remove itself, so it'd complain only once PR: Obtained from: Submitted by: Reviewed by:	Jeff Trawick, Bill Rowe "	r102005
----------------------------
Regenerate metafiles. 	r101932
----------------------------
Add fatal exception hook for use by debug modules.  The hook is only available if the --enable-exception-hook configure parm is used. Sample users at http://httpd.apache.org/~trawick/exception_hook.html 	r101899
----------------------------
"Extend mod_status output to include SSL session cache status information: * modules/ssl/mod_ssl.c (ssl_hook_pre_config): Call ssl_scache_status_register. * modules/ssl/ssl_scache.c (ssl_scache_status): Removed function. (ssl_ext_status_hook): Renamed from ssl_ext_ms_display: switch to 2.1's mod_status ""status_hook"" API. (ssl_scache_status_register): Register optional hook. * modules/ssl/ssl_scache_dbm.c (ssl_scache_dbm_status): Adjust to use new API. * modules/ssl/ssl_scache_shmcb.c (ssl_scache_shmcb_status): Adjust to use new API. "	r101889
----------------------------
Remove shmht session cache in favour of shmcb; shmht has had data corruption bugs since being apr_rmm'ified. * config.m4, mod_ssl.dsp: Don't build ssl_util_table and ssl_scache_shmht. * ssl_util_table.h, ssl_util_table.c, ssl_scache_shmht.c: Removed files. * mod_ssl.h (SSLModConfigRec): Use a void * pointer for storing the scache-specific data. * ssl_engine_config.c (ssl_cmd_SSLSessionCache): Treat shmht: as shmcb:. * ssl_scache.c: Remove shmht hooks throughout. * ssl_scache_shmcb.c: Remove casts to use the table_t * pointer as a void *. 	r101888
----------------------------
* modules/ssl/ssl_engine_init.c (ssl_init_proxy_certs): Fail early (rather than segfault later) if a client cert is configured which is missing either the certificate or private key. PR: 24030 	r101878
----------------------------
SECURITY [CAN-2003-0020]: escape arbitrary data before writing into the errorlog. Reviewed by: Mark J Cox 	r101873
----------------------------
"A better solution than my previous commit as pointed out by Andre Malo. mod_expires: Initialize ExpiresDefault to NULL instead of """" to avoid reporting an Internal Server error if it is used without having been set in the httpd.conf file. PR: 23748, 24459 Submitted: Andre Malo, Liam Quinn  <liam htmlhelp.com> Reviewed: Andre Malo, Paul J. Reder "	r101846
----------------------------
mod_expires: Don't report an Internal Server error if ExpiresDefault is used and has not been set in the httpd.conf file. PR: 23748, 24459 Submitted: Liam Quinn  <liam htmlhelp.com> Reviewed: Paul J. Reder 	r101839
----------------------------
"Fix a problem with the display of empty variables (""SetEnv foo"") in mod_include.  Now it works like 1.3 (see PR for details).  Setting of envvars for scripts was/is consistent with 1.3 for empty variables. PR:           24734 Submitted by: Markus Julen <mj zermatt.net> Reviewed by:  Jeff Trawick "	r101830
----------------------------
Win32: MaxMemFree works with mpm_winnt 	r101820
----------------------------
Win32: Make Win32 MPM transaction pools honor MaxMemFree PR: Obtained from: Submitted by: Reviewed by: 	r101817
----------------------------
mod_autoindex: new directive IndexStyleSheet PR: Obtained from: Submitted by: Tyler Riddle <triddle_1999 yahoo.com> and Paul Querna <chip force-elite.com> Reviewed by: 	r101809
----------------------------
allow any user id when configured with 'anonymous *' PR: 11428 	r101728
----------------------------
Fix a long delay with CGI requests and keepalive connections on AIX. On AIX, for processes like mod_cgid's script children where SIGCHLD is ignored, kill(pid,0) returns success for up to one second after the script child exits, based on when a daemon runs to clean up unnecessary process table entries. getpgid() can report the proper info (-1/ESRCH) immediately. One user had a page with a lot of embedded images created by CGIs, and the browser fetched them on a keepalive connection, and the cumulative delays were very noticeable by the clients. 	r101716
----------------------------
* modules/loggers/mod_log_config.c (log_request_time): Log the minutes component of the timezone correctly. PR: 23642 Submitted by: Hong-Gunn Chew <hgbug@gunnet.org> 	r101703
----------------------------
- add XHTML doctypes to httpd.h - fix the (x)html output of mod_autoindex to be consistent and make it configurable to emit either HTML or XHTML PR: 23747 	r101683
----------------------------
provide a workaround for buggy mod_setenvif 	r101668
----------------------------
* include/http_config.h (cmd_func): Fix prototype, eliminate warning. 	r101630
----------------------------
Fix missing human-readable error information in SSL log messages: * mod_ssl.c (ssl_cleanup_pre_config): Don't free the error strings, since they can't be loaded again once. 	r101624
----------------------------
When UseCanonicalName is set to OFF, allow ap_get_server_port to check ap_default_port(). 	r->connection->local_addr->port
----------------------------
"fix the config parser to support <Foo>..</Foo> containers (no arguments in the opening tag) supported by httpd 1.3. Without this change mod_perl 2.0's <Perl> sections are broken. PR: Obtained from: Submitted by:	""Philippe M. Chiasson"" <gozer@cpan.org> Reviewed by:	stas "	r101415
----------------------------
Fix mod_info to use the real config file name, not the default config file name. Submitted by:   Aryeh Katz <aryeh@secured-services.com> Reviewed by:    G�nter Knauf, Jeff Trawick 	r101297
----------------------------
Fix a misleading message from the some of the threaded MPMs when MaxClients has to be lowered due to the setting of ServerLimit. 	r101160
----------------------------
"allow the undefined echo string to be configured via <!--#config echomsg=""..."" --> "	r101130
----------------------------
allow SSIUndefinedEcho per directory 	r101129
----------------------------
cleanup regex stuff. regexps are now handled more graceful (give warnings on out of range or undefined captures). 	r101073
----------------------------
don't waste memory, if someone configures another error message or timeformat during runtime. The common case doesn't need max_string_len at all and won't be configured more than one or two times. 	r101071
----------------------------
cleanup handle_config function 	r101055
----------------------------
- clean up configuration routines - give bndm a neater interface - naming style improvements 	r101052
----------------------------
Catch an edge case, where strange subsequent RewriteRules could lead to a 400 (Bad Request) response. Example: <Directory /path> </Directory> 	r101012
----------------------------
Make mod_ssl consistent with itself when you have a halfass install of openssl-engine (ie, you're missing the headers).  ssl_cmd_SSLCryptoDevice() is thrown away by the preprocessor if you're missing the header, so the call to it should have the same condition applied.  otherwise, mod_ssl will fail to link. 	r100970
----------------------------
split ap_process_resource_config into two functions (since we don't wanna change the api). Only the first one (the ap_ entry point) now checks for fnmatch and the second one will be called for every file/directory included. This, however, avoids infinite recursions, if a filename contains wildcard characters. PR: 22194 	r100931
----------------------------
hook mimetype-forcing into fixup/LAST. This leads to consistent behaviour (server context vs. directory context), overrides all statically configured mime types and doesn't clobber multiviews any longer. 	r100913
----------------------------
Although we initialize mc->pid in the child init phase, we haven't initialized it before initially performing our ssl_rand_seed() in the parent/postconfig phase. 	r100912
----------------------------
cleanup RewriteCond evaluation. - avoid unnecessary memory operations - parse non-regex patterns at configuration time, which - gives the ability to throw a useful warning, where [NC] is not supported - and speeds up processing at runtime - allow [NC] for simple comparison pattern (=) - improve readability 	r100862
----------------------------
Rewritemap improvement: - map designations are now case insensitive (txt: rNd: PRG: INt:) - maps may be relative to serverroot, which appears to be _very_ helpful 	r100860
----------------------------
"REALLY discourage people from using <Limit>. (Because people don't necessarily know all the methods that their server deals with, and because crummy cgi scripts may take ""post"" and treat it like ""POST"" or other similar bad behavior.) "	r100839
----------------------------
"I knew I would get in trouble mucking with the build system. Use topbuilddir rather than topsrcdir to find config.nice. Submitted by:	Justin Erenkrantz "	r100835
----------------------------
minor optimizations in lookup_map_program function. - make it compile time configurable, how long a response from a rewrite map prg may be. - avoid unnecessary memory operations 	r100832
----------------------------
Mention the limitations of ProxyPassReverse, and reference Nick Kew's mod_proxy_html. 	r100822
----------------------------
Install config.nice into the build/ directory to make minor version upgrades easier. 	r100819
----------------------------
allow piped rewrite logs to be relative to serverroot 	r100818
----------------------------
Enhance some bits of the suEXEC docco to be a bit more precise in regard to suEXEC's docroot handling and it's preconditions; see PR#21873 and #21874. 	r100787
----------------------------
optimization/cleanup. The generic flagparser (read: lexer) for RewriteRules and RewriteConds does the same except for one function call. Collapse these to functions to one and make the result more 	readable.
----------------------------
don't reverse the filter order in AddOutputFilterByType 	r100760
----------------------------
Refresh parts of the proxy docs, with special attention to clarifying the security issues in forward and reverse proxy situations. - Remove the historical narrative in the top section and simply state the facts. - Remove the table of contents, since we already generate one for the sidebar. - Rewrite the forward vs reverse section to be clear on the purpose of the two types of proxy. - Add some basic examples of each type of proxy to replace the example removed from the default config file. - Add a note to the access control section on forward versus reverse proxys, and also add a reference to mod_access that got removed at some point. - Add a warning to the ProxyPass docs that ProxyRequests should be off. - Shorten some section titles. I did not add the ProxyBlock :25 because I don't have a proxy server to test it on at the moment. 	r100759
----------------------------
- In 2.0 it is possible for LanguagePriority to have an effect, even for a properly configured HTTP/1.1 client. - Reference MultiViewsMatch. PR: 21726, 21830 	r100753
----------------------------
Hit a couple files that hadn't been adapted to account for the move from <Directory proxy:> to <proxy> 	r100748
----------------------------
Add optional hook to extend mod_status output. * configure.in: Add modules/generators to include path. * Makefile.in: Install mod_status.h. * modules/generators/mod_status.h: New file. * modules/generators/mod_status.c: Implement ap_run_status_hook. (status_handler): Run status hooks. 	r100724
----------------------------
cleanup addlanguage/comments and languagepriority PR: 21743 	r100722
----------------------------
Oops. Replace * with *:80 in the <VirtualHost> example also. 	r100657
----------------------------
Replace NameVirtualHost * with NameVirtualHost *:80 in the example config. 	r100654
----------------------------
"Ignore RewriteRules in .htaccess files if the directory containing the .htaccess file is requested without a trailing slash. PR:	20195 "	r100632
----------------------------
"If a directory contains a file listed in the DirectoryIndex directive, the folder icon is no longer replaced by the icon of that file. PR:	9587 Submitted by:	David Shane Holden <dpejesh@yahoo.com> "	r100628
----------------------------
not valid to modify string pointed to by szCryptoDevice...  it points to a static string or something parsed from the config 	r100603
----------------------------
When the top-level directory section for / was added for the sake of performance and to allow automount symlinks to be followed, we mistakenly opened access to the entire directory system by default. I noticed this because all of the /~user directories are available by default without any restrictions, which is a bad idea for anything other than one server within a department of shared users.  However, it also makes it easier to serve files anywhere on disk by mistake, and makes other URI-handling bugs more severe than they would be otherwise.  Therefore, this patch reinstates access control to deny access to all files other than under DocumentRoot, icons, and manual, until additional directory/locations are explicitly allowed by the admin. 	r100593
----------------------------
let mod_speling use the current AcceptPathInfo setting. Default is: reject PR: 21059 	r100566
----------------------------
Use three-argument form of AC_DEFINE everywhere; remove acconfig.h and the warning message from autoconf 2.5x. 	r100540
----------------------------
Try to be clearer in describing the connection between AddType and AddEncoding for defining the meaning of compressed file extensions. 	r100538
----------------------------
do not put active IfModule directives around config lines that are commented out -- that is just a waste of processing. 	r100520
----------------------------
Forward port patch for CAN-2003-0192 from 2.0. SECURITY [CAN-2003-0192]: Fixed a bug whereby certain sequences of per-directory renegotiations and the SSLCipherSuite directive being used to upgrade from a weak ciphersuite to a strong one could result in the weak ciphersuite being used in place of the strong one.  [Ben Laurie] 	r100518
----------------------------
simplify type-map config 	r100456
----------------------------
limitinternalrecursion goes 2.0.47 	r100443
----------------------------
Oops. This feature seems to be rarely used. Fix SSIStartTag-description. 	r100406
----------------------------
ScriptInterpreterSource Registry also uses the ExecCGI subkey 	r100392
----------------------------
ScriptInterpreterSource has been on my mind for a long time but forgotten until Jushua's changes. It's done now. 	r100390
----------------------------
explain ScriptInterpreterSource a little bit more 	r100388
----------------------------
The decision on the FAQ is basically made: we'll slowly build a new one for 2.0. With regard to more colaborative docs, I'm still open to discussion. Also: remind about the crappy ScriptInterpreterSource doc.  As someone who rarely runs apache under windows, I don't know enough about it to fix it myself. 	r100385
----------------------------
- mention that DocumentRoot is interpreted relativ to ServerRoot if it is not absolute - remove description of absolute pathes (beginning with a slash) because this is valid only for some OS 	r100323
----------------------------
DocumentRoot always used to be interpreted relative to ServerRoot. Make it server_root_relative like in Apache-1.3 	r100315
----------------------------
Reaction to Jeff Trawick's observations that we are double-initializing dynalinked OpenSSL Engines and Configs.  Move the library teardown code so that it is torn down in the proper order, corresponding to when the library itself was initialized.  And leave a little reminder that some memory diagnostics would be good if OpenSSL is built for malloc debugging. Suggested by: Geoff Thorpe 	r100288
----------------------------
"core_output_filter: don't split the brigade after a FLUSH bucket if it's the last bucket.  This prevents creating unneccessary empty brigades which may not be destroyed until the end of a keepalive connection. Submitted by:	Juan Rivera <Juan.Rivera@NO_SPAM.citrix.com> "	r100210
----------------------------
adjust config to work with typemaps. argh. Forget to mention all the time (sorry): The typmap stuff was Reviewed by: Erik Abele, Astrid Ke�ler 	r100197
----------------------------
ltconfig gets copied to build/ with old libtool, so tell cvs to ignore it 	r100185
----------------------------
Don't respect the Server header field as set by modules and CGIs. As with 1.3, for proxy requests any such field is from the origin server; otherwise it will have our server info as controlled by the ServerTokens directive. 	r100182
----------------------------
steal some code from APR intended to allow you to properly switch between libtool 1.3 and 1.4+...  newer libtool doesn't have ltconfig, so having a stray ltconfig around will confuse some of our config logic This also fixes cp failure on FreeBSD since ltconfig and ltmain.sh are installed with 0400 perms, and when buildconf is run a second time the cp of those files would fail. 	r100178
----------------------------
Win32: Whack the fully qualified names that appear in the log when loglevel debug is being used. 	r100153
----------------------------
Allow for an unclean shutdown of SSL ports to avoid timeout conditions between the client and the server. 	r100138
----------------------------
The right patch (thanks to Eric for identifying the wrong patch) to move SSL_library_init() into the register hooks phase.  OpenSSL_add_ssl_algorithms devolves to SSL_library_init, which is the same for most toolkits (and would be accomodated in ssl_toolkit_config.h if not.) 	r100136
----------------------------
"""Comment out .gz etc. AddEncoding lines in our default configuration. Current browsers have a tendency to decompress the data when no one really wants it to do that.  If you want the old behavior that leads to transparent decompression by modern browsers, uncomment these lines.  But, this shouldn't be our default."" (see httpd-std.conf.in r1.32, jerenkrantz) Reviewed by: wrowe, slive, nd, erik Also removed the corresponding entry from STATUS. "	r100131
----------------------------
"Allow ExpiresByType to accept and understand minor-type wildcards (e.g., text/*).  They'll be used if an exact type match isn't found; if there's no wildcard match, the expiry falls back to any ExpiresDefault setting as usual. PR:		7991 "	r100126
----------------------------
Provide a far more useful explanation when SSLCryptoDevice fails to find a device.  Still would be nice to implement dynamic:{options} but this gets us to display the usual, builtin devices. We now load builtin engines up front, in the pre_config phase, because this and any other config cmd processor must have an already valid library config.  So loading builtin engines becomes redundant in this cmd handler. 	r100108
----------------------------
Solve a pretty horrific bug in SSLCryptoDevice and other places where the config cmd processors should be examining the SSL context.  We must initialize the SSL library before we can actually obtain any useful information from the SSL library. 	r100107
----------------------------
- add simplified chinese welcome page - add .zh-cn extension for zh-CN language code to default config. Submitted by: kajaa <kajaa@eastday.com> Reviewed by: <yinglichina@sina.com> 	r100075
----------------------------
As Geoff Thorpe <geoff@geoffthorpe.net> points out, we must perform our compilation tests for the SSL_has_foo functions while we have completely populated the config with 'standard' libraries from our apr configuration. This allows us to compile more complex dependencies such as the test for ENGINE_init(), which also requires -lsockets etc on Solaris for any static build of OpenSSL.  If this fails, we will have to research using the pkgconfig/openssl.pc configuration to perform these precompile tests. This restores the various HAVE_SSL_{FOO} macros for SSL-C and introduced the proper test for HAVE_ENGINE_INIT. 	r100038
----------------------------
translate new directive LimitInternalRecursion and update the rest 	r100030
----------------------------
The patch below reverts the prior commit to eliminate SSL_set_state(). Some additional work or research is required in order to pass the perl-framework regressions, but I don't have the cycles and don't care to leave the broken code in cvs HEAD. REVERTING: wrowe 2003/05/19 08:13:19 Modified:    modules/ssl config.m4 ssl_engine_io.c ssl_engine_kernel.c Log: Revision  Changes    Path 1.15      +0 -1      httpd-2.0/modules/ssl/config.m4 1.108     +1 -1      httpd-2.0/modules/ssl/ssl_engine_io.c 1.93      +1 -1      httpd-2.0/modules/ssl/ssl_engine_kernel.c 1.34      +0 -6      httpd-2.0/modules/ssl/ssl_toolkit_compat.h 	r100004
----------------------------
ad-hoc translation of AllowEncodedSlashes to German to get something into the release. (no reference in the german docs otherwise) Further review is desired! 	r99991
----------------------------
no objections so far. add initial documentation of AllowEncodedSlashes, so that it will hopefully go into the next release. 	r99962
----------------------------
Roll away the SSL_EXPERIMENTAL_ENGINE test in favor of testing for the ENGINE_init() function in config.m4, and rely on HAVE_ENGINE_INIT instead. Reviewed by: Ben Laurie (concept) 	r99919
----------------------------
Document the LimitInternalRecursion directive. Reviewed by: Jeff Trawick 	r99913
----------------------------
Prevent the server from crashing when entering infinite loops. The new LimitInternalRecursion directive configures limits of subsequent internal redirects and nested subrequests, after which the request will be aborted. [William Rowe, Jeff Trawick, Andr� Malo] PR: 19753 (and probably others) 	r99911
----------------------------
update metafiles Submitted by: Jeongho Jeon <maczniak@operamail.com> 	r99883
----------------------------
make ExpiresByType work on dynamic documents 	r99850
----------------------------
mod_so can only be built statically. If the user wants modules to be built as DSOs by default (eg. ./configure --enable-mods-shared=most) then we must override the default, otherwise none of the modules will end up being installed (even though they'll get built). 	r99844
----------------------------
if there are any ExpiresByType directives for the current scope, defer the setting of the expiration header fields to an output filter, which can then apply any ExpiresByType or ExpiresDefault settings -- including to dynamic documents. 	r99827
----------------------------
update metafiles Submitted by: Jeongho Jeon <maczniak@operamail.com> 	r99803
----------------------------
update metafiles. 	r99756
----------------------------
general mod_proxy docs cleanup: - add documentation for ProxyIOBufferSize (review desired) - fix context lists of ProxyPass and ProxyPassReverse - add more notes about the accompanying modules (_http, _ftp, _connect) - markup & reformatting (sorry for the big diff) -> update transformation 	r99725
----------------------------
Ensure that ssl-std.conf is generated at configure time, and switch to using the expanded config variables to work the same as httpd-std.conf PR: 19611 	r99719
----------------------------
Throw a warning if AllowOverride is used inside of <Location> or <Files>. Unfortunately there's no clean way to detect <DirectoryMatch>. It would not be sufficient, because <Directory ~> should be checked then, too. Hmm. PR: 19512 	r99695
----------------------------
introduce cross-language links. The links to all available languages of a document will show up on the top and the bottom of a page. Additionally, change the default config to deliver the desired results. 	r99684
----------------------------
add fresh suexec manpage 	r99639
----------------------------
first run of `build modulelists` (automatically called from `build metafiles`) 	r99509
----------------------------
Be a little more consistent with the pathnames, and move some DavLockDB details to its directive docs. 	r99485
----------------------------
"Some serious updates to the top section of the mod_dav docs.  Many of the ideas are stolen from Greg's mod_dav site.  Some specifics: - Change recommendations about where to place the dav lockfile and be specific about required permissions. - Remote the HEAD from the <Limit> block, since it is implied by GET. - Add a security section discussing file permissions, auth issues, denial of service, etc. - Add a ""complex config"" section discussing the dynamic content issue. Review requested.  Unfortunately, I can't check in the html because of transformation problems in my setup. "	r99469
----------------------------
Add note about when to use <location>.  This dupes what is already discussed in sections.html, but it is important enough to repeat. 	r99467
----------------------------
mod_log_config: Add the ability to log the id of the thread processing the request (%I). 	r99439
----------------------------
"Fixed a segfault when multiple ProxyBlock directives were used. PR:		19023 Obtained from: Submitted by:	Sami Tikka <sami.tikka@f-secure.com> Reviewed by: "	r99363
----------------------------
add metafiles. These files contain information that is relevant for one document but all variants of it (i.e. one basename), such as avail. languages, formats etc. (Note, that it's still a noop for the output.) 	r99330
----------------------------
Note that changes in the default httpd.conf do not violate our backward-compatibility policy.  We assume that people preserve their own config files, rather than going back to the default each time. 	r99314
----------------------------
Move the dropped '--enable-layout' subdir logic into APR_SUBDIR_CONFIG macro as a third parameter rather than manually computing it ourselves. Add the ' prefix'd --enable-layout so that this can work with an autoconf-2.54+ generated configure.  (Previously, the option would not be dropped with 2.54 or 2.57 since it unconditionally adds single-quotes which our case statement would not catch.) Try to shorten long invocations of APR_SUBDIR_CONFIG where possible. 	r99257
----------------------------
If an errordocument-cgi responds a location header it should really add a status header. PR: 18332 	r99216
----------------------------
Document the ProxyBadHeader directive. (and update transformation) PR: 18623 Reviewed by: Joshua Slive 	r99214
----------------------------
- openssl won't compile unless perl Configure is called. - update the openssl version number to 0.9.7 	r99105
----------------------------
Fix a serious bug where the 'next' generation of the server would open a brand new mutex.  This patch creates a single mutex in the first config phase that survives for the life of the server (server->process->pool). Now one server generation to the next will respect the same mutex between one another, while the previous generation is still mopping up. 	r99095
----------------------------
Need to report a select() error vs a timeout.  Also avoid hogging the CPU on an error. 	r99065
----------------------------
Fix a couple typos: explicitly, substitute. Grammar: add missing comma, -> a hyperlink. 	r99044
----------------------------
Fix chinese default page. Netware config still needs to be sync'd (whereever it is). - the encoding was wrong (iso-8859-1 instead fo big5, so (re-)added the appropriate extension(s)) - Fixed AddLanguage directives in default configs - Fixed type map file. PR: 18025 	r99040
----------------------------
uh, I forgot to add the transformated mod_nw_ssl.html ;-) additionally RewriteOptions was now introduced in 2.0.45. 	r99023
----------------------------
Added documentation for the directives SecureListen and NWSSLTrustedCerts that are provided through mod_nw_ssl for NetWare 	r99007
----------------------------
Added the optional ssl_enable functions to allow mod_proxy to hook into mod_nw_ssl on NetWare.  This allows a unsecure connection to be upgraded to a secure connection when required by mod_proxy.  Also added the directive NWSSLTrustedCerts to allow an administrator to provide a list of certificates used to upgrade the secure connections. 	r99006
----------------------------
"change directive from compressionlevel to deflatecompressionlevel PR: Obtained from: Submitted by:	Ian Holsman, Andre Malo Reviewed by: "	reflect
----------------------------
Fixed <default> to AuthDigestProvider. 	r98950
----------------------------
* include/http_config.h (ap_get_module_config, ap_set_module_config): Use the macro Noticed by: Jeff Trawick 	r98921
----------------------------
*gna* get/set_module_config are now defined in util_debug.c. We have to link against it. 	r98914
----------------------------
Minor MMN bump: Forward port: Escape special characters (especially control characters) in mod_log_config to make a clear distinction between client-supplied strings (with special characters) and server-side strings. This was already introduced in version 1.3.25. Obtained from: Patch in 1.3.25-dev by Martin 	r98912
----------------------------
* include/http_config.h (ap_get_module_config, ap_set_module_config): Always declare. * include/httpd.h (ap_strchr, ap_strchr_c, ap_strrchr, ap_strrchr_c, ap_strstr, ap_strstr_c): * server/util_debug.c (ap_get_module_config, ap_set_module_config, ap_strchr, ap_strchr_c, 	r98903
----------------------------
add documentation of RewriteOptions MaxRedirects 	r98864
----------------------------
Prevent endless loops of internal redirects in mod_rewrite by aborting after exceeding a limit of internal redirects. The limit defaults to 10 and can be changed using the RewriteOptions directive with the new MaxRedirects=n argument. (The latter required some restructuring of the RewriteOptions evaluation code). (Documentation patch follows asap) PR: 17462 	r98863
----------------------------
Mention that ProxyPassReverse takes the hostname in respect to the UseCanonicalName setting PR: 8625 	r98861
----------------------------
be consistent with 1.3 and use .sv extension for Swedish documents The index file itself didn't change (only renamed) The netware config still needs to be changed. PR: 12877 	r98854
----------------------------
mod_rewrite: Fix some problems reporting errors with mapping programs (RewriteMap prg:/something). the wrong field was specified when trying to log the name of the program that couldn't be started on systems where apr_proc_create() uses fork() 	recent
----------------------------
When using Redirect in directory context, append requested query string if there's no one supplied by configuration. PR: 10961 	r98796
----------------------------
document new features of setenvif and mod_negotiation. 	r98768
----------------------------
insert LoadModule directives only outside of sections. PR: 9012 	r98721
----------------------------
Allow restart of httpd to occur even with syntax errors in the config file.  (Out-of-date DSOs with bad MMNs will still be fatal unfortunately.) Add return parameter to ap_process_config_tree - OK on success, !OK on syntax error.  We will no longer call exit() from ap_process_config_tree. The caller must exit if there is an error (makes sense anyway).  This allows the initial start-up code to delay the exit until trying to let the signal_server optional function execute first. (The chances are that the syntax error isn't in the PidFile directive.  If that happens, we'll try the default one.  Oh, well.) PR: 16813 	r98693
----------------------------
Use APR_LAYOUT instead of APACHE_LAYOUT in configure. (We need a bug fix in this code, so let's merge the macro first.) PR: 15679 	r98685
----------------------------
Use correct quoting mechanism for APR_SUBDIR_CONFIG. 	r98675
----------------------------
"clarify the meaning of ""SetHandler None"" "	r98663
----------------------------
Extend the SetEnvIf directive to capture subexpressions of the matched value. 	r98659
----------------------------
extend the check for Alias overlappings. Now test also previous (Script)AliasMatch commands. 	r98657
----------------------------
Replace the section on IPv6 with new text that accounts for --[enable|disable]-v4-mapped configure option and the varying default for it. PR:            16739 	r98650
----------------------------
mod_log_config optional hook change PR: Obtained from: Submitted by: Reviewed by: 	r98649
----------------------------
drop the guess_domain function. Our docs say about AuthDigestDomain: This directive should always be specified and contain at least the (set of) the Authorization header for every request sent to this server. guessing the parameter is somewhat bogus. guess_domain() also resulted sometimes in relative URIs, non-URI strings or empty strings, which caused a lot of problems. According to the docs, the domain parameter will be omitted now, if not specified. This is exactly, what one would expect. 	root
----------------------------
Fix suexec compile error under SUNOS4, where strerror() doesn't exist. PR: 5913, 9977 Submitted by: Jonathan W Miner <Jonathan.W.Miner@lmco.com> 	r98618
----------------------------
Let suexec send a message to stderr, if it failed or its policy was violated. This message appears in the error log and allows for easier debugging. PR: 10773 Proposed again by: Joshua Slive 	r98603
----------------------------
Fix up load dependancies to avoid LoadModule ordering 	r98585
----------------------------
Fix mod_cern_meta to not create empty metafiles when the metafile searched for does not exist. PR:             12353 Submitted by:   Owen Rees <owen_rees@hp.com> 	r98561
----------------------------
"Introduce ""prefer-language"" environment variable, which allows to influence the negotiation process on request basis to prefer a certain language, e.g.: SetEnvIf Request_URI ^/manual/foo/ prefer-language=foo "	r98512
----------------------------
Fix a problem whereby multiple MMapFile directives would cause a segfault on startup. mod_file_cache keeps a hash table in the cmd->pool and puts an entry in that hash table for each of its files and mmaps, all of which are opened into cmd->pool.  But it registered a cleanup on cmd->pool that would walk the hash table and close each file and delete each mmap, even though by the time that happened those things would have been done already anyway by the files' and mmaps' own cleanups on cmd->pool.  So it was deleting mmaps that were already cleaned up and closing files that were already cleaned up in all cases.  This has never been valid... amazed it ever worked.  But apparently the true bogosity wasn't revealed until the new mmap cleanup code went into APR. PR: 16313 	r98463
----------------------------
Comment out .gz etc. AddEncoding lines in our default configuration. Current browsers have a tendency to decompress the data when no one really wants it to do that.  If you want the old behavior that leads to transparent decompression by modern browsers, uncomment these lines.  But, this shouldn't be our default. 	r98436
----------------------------
The correct syntax is <ProxyMatch> not <Proxy>. 	r98358
----------------------------
- specify some mistakables discussed while reviewing the german translation - set a link from AccessFileName to AllowOverride - <Files> and <Location> sections and .htaccess files may be used for more then access control - state an example more precisely Thanks to Michael Schroepl <Michael.Schroepl@telekurs.de> and nd for their suggestions. 	r98336
----------------------------
"move rfc1413 code to a new module ""metadata:mod_ident"". The rfc1413 code itself is mostly c&p, but can still bear some rework ... This patch removes the global ap_rfc1413 function and the ap_rfc1413_timeout variable. It also introduces a new config directive IdentityCheckTimeout (default 30 sec). Reviewed by: Justin Erenkrantz "	r98320
----------------------------
With the latest patch to config.c wildcards now work. 	r98265
----------------------------
"Once again, allow <Directory ""C:\Users\*\html_files""> or other wildcard patterns in Directory blocks.  Note a similar problem with Includes *.conf "	r98260
----------------------------
Add IndexOptions IgnoreCase description. 	r98184
----------------------------
"Bring forward the IndexOptions IgnoreCase option to mod_autoindex from Apache 1.3 for both 2.0 and 2.1 (since the patch/feature was previously accepted for 1.3, I'm committing without the usual vote specific to 2.0.)  Only small modification of David's patch to avoid future reformatting of the options list and better handle the strnatcmp side effects. PR: 14276 Obtained from: Submitted by:	David Shane Holden <dpejesh@yahoo.com> Reviewed by: "	r98181
----------------------------
well, it's a backstopper. So stop also misconfigured Digest authentication requests. e.g.: AuthType Digest AuthName foo require user nd with no mod_auth_digest present; or consider a TP digest module with Authoritative funcionality etc. It's still a question whether we should throw a 500 instead of 401 in that case... 	r98167
----------------------------
Add a generic locking provider to DAV - mod_dav_lock.  Other DAV providers can use the dav_hooks_locks_generic structure to implement locking in a non-optimal, but compliant fashion.  (Use 'dav-lock', 'generic', '0' to ap_lookup_provider to retrieve it.) Use the DavGenericLockDB directive to configure the location of the lock database (may be server-relative or absolute). This allows all DAV providers to use a baseline locking API rather than roll their own. This code is based mainly off the mod_dav_fs locking code (which uses the on-disk storage for locking), but removing components that aren't needed in a non-file-backed repository (such as recording inodes). 	r98161
----------------------------
document DeflateFilterNote changes 	r98151
----------------------------
"The patch allows the user to log the accurate filter input and output byte count, instead of only the rounded compression ratio. The DeflateFilterNote directive will be extended as follows: DeflateFilterNote [type] name type can be one of ""input"", ""output"" or ""ratio"". ""ratio"" is assumed if the type is omitted (backwards compatible). "	r98149
----------------------------
provide better error messages for the multiviewsmatch directive. 	r98145
----------------------------
"Use saner default config values for suexec. OtherBill and Brad have confirmed that including ap_config_layout.h isn't a problem on non-Unix platforms as they don't use suexec. PR: 15713 Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Justin Erenkrantz "	r98134
----------------------------
allow RewriteEngine Off even if Options -FollowSymlinks is set. PR: 12395 Reviewed by: Justin Erenkrantz 	r98122
----------------------------
- mpm_common: * fixed the <modulelist>s in mpm_common * moved AcceptMutex to mpm_common; * added BS2000Account to mpm_common * fixed several default values * moved MaxThreadsPerChild and NumServers out to perchild * rearranged some stuff and added several comments, that I found useful - mpm_netware: * MaxThreads 2048 (as maximum and default) - perchild: * extended the explanations about using different user ids. Hope, that's * extended and adjusted the directive descriptions - prefork: * moved AcceptMutex to mpm_common (as stated already above) - mpm_winnt: * added reference to ScoreBoardFile - worker: * added reference to AcceptMutex - general: markup & formatting 	r98075
----------------------------
- some markup improvement - normalize notation of directive arguments - document ScriptInterpreterSource registry-strict - some odds and ends 	r98046
----------------------------
- Add MKDEP to config_vars.mk file - Do not print out the commands used when doing 'make depend' 	r98036
----------------------------
Rename CacheMaxStreamingBuffer to MCacheMaxStreamingBuffer. Move implementation of MCacheMaxStreamingBuffer from mod_cache to mod_mem_cache. MCacheMaxStreamingBuffer now defaults to the lesser of 100,000 bytes or MCacheMaxCacheObjectSize. This should eliminate the need for explicitly coding MCacheMaxStreamingBuffer in most configurations. [Bill Stoddard] 	r98007
----------------------------
Document the AuthLDAPCharsetConfig directive 	r98000
----------------------------
- markup, reformatting - remove outdated info, that mod_mime_magic has to be placed before mod_mime in the config - kept the <pre>d examples, but squeezed them to cause less problems - reformatted the copyright notes from <pre> to <note>s 	r97926
----------------------------
After some productive feedback and no negative feedback, introduce SSLEngine upgrade so that we can begin and continue to support these facilities.  This makes it simpler to keep this effort (while we have no known clients that support Connection: upgrade at this time), and begin refactoring more of SSL into smaller and tighter (and then optional) components. 	r97913
----------------------------
After some productive feedback and no negative feedback, introduce SSLEngine upgrade so that we can begin and continue to support these facilities.  This makes it simpler to keep this effort (while we have no known clients that support Connection: upgrade at this time), and begin refactoring more of SSL into smaller and tighter (and then optional) components. Submitted by: Ryan Bloom Reviewed by: William Rowe, Joe Orton 	r97912
----------------------------
Added character set support to mod_auth_LDAP to allow it to convert extended characters used in the user ID to UTF-8 before authenticating against the LDAP directory. The new directive AuthLDAPCharsetConfig is used to specify the config file that contains the character set conversion table. 	r97910
----------------------------
ap_get_mime_headers:  whoops - need to insure that we use a configured field size limit if there is one 	r97875
----------------------------
- some reformatting - markup & <em> -> <var> - modify the argument list of MultiViewsMatch in order to better reflect the possibilities - add several <override>s and some <seealso>s 	r97833
----------------------------
- markup & reformatting - some rearranging of the content - fix conextlists. with the current code it doesn't make sense to put any directive into an virtual host (the config pointer is static...) (blame me, if I'm wrong) 	r97827
----------------------------
core_output_filter: re-instate the deferred_write pool patch so we don't leak fd's until the end of a keepalive connection. Thanks to: Jeff Trawick for the original concept Sander Striker for the mmap ring idea Cliff Woolley for implementing the above change 	r97824
----------------------------
full clean-up of the auth-docs; feel free to shake out any nits, if there are (probably there *are* :) main changes: - introduce docs for mod_authn_default, mod_authz_default and mod_authz_user - fix argument lists of the provider directives - fix the examples (intended to be better :) - introduce the AuthDigestShmemSize directive - remove AuthDigestUser/GroupFile - mention htdigest in AuthUserFile docs - mod_authn_anon is now an authn provider - markup Reviewed by: Astrid Ke�ler <kess@kess-net.de> 	r97823
----------------------------
"If an httpd.conf has commented out AddModule directives, apxs -i -a will add an un-commented AddModule directive for the new module, which breaks the config. PR: 11212 Obtained from: Submitted by:	Joe Orton Reviewed by:	Bill Stoddard, Thom May "	r97820
----------------------------
clarify the no-proxy explanation of Addoutputfilterbytype. Thanks to Rich for pointing out. 	r97816
----------------------------
mod_authn_anon should be a provider This drops the Anonymous_Authoritative directive Submitted by: Andre Malo <nd@perlig.de> 	r97805
----------------------------
"outch. there are some possible NULL pointer references. Have you ever tried AuthDigestProvider dbm? This results in a great kaboom. The patch makes apache throw an error, if someone tries a provider, that doesn't support the particular auth scheme. Submitted by:	Andre Malo <nd@perlig.de> "	r97802
----------------------------
"when asking the providers for authentication, the main loop should not only  break, if access is granted. It should also break, if access was *denied*  by one provider. To be safe, it has to break also, if an error occured. So  the patch turns the condition around and continues only, if the user was  not found. I find it also weird, that if auth was denied (by password usually), the  AuthBasicAuthoritative behaviour can override that by ""passing to lower  modules"". The patch changes that behaviour, too. Justin notes: I'm kind of on the fence about that.  I was originally thinking optimistically, but yeah, it might make sense to do it pessimistically.  If there's any error, bug out. Submitted by:	Andre Malo <nd@perlig.de> "	r97801
----------------------------
Take apr include dir from beginning, not end of list given by apu-config. Submitted by: Brian Havard 	r97793
----------------------------
Listing the URLs which are not cachable is useful for building the CacheDecline URL list for the config file. 	r97772
----------------------------
Add a commented LoadModule entry to the .conf file for mod_ext_filter 	r97742
----------------------------
update to include mod_setenvif fix 	r97706
----------------------------
"Fix for BrowserMatchNoCase, which was incorrectly treating non-regex patterns as case-sensitive Submitted by:	Andr�� Malo Reviewed by:	Brian Pane "	r97705
----------------------------
If apr and apr-util are not in-tree, we need to be able to find the include directory for each in order to generate the server/exports.c and server/export_vars.h files. configure.in: server/Makefile.in: 	r97673
----------------------------
If apr and apr-util are not in-tree, we need to be able to find the include directory for each in order to generate the server/exports.c and server/export_vars.h files. configure.in: - Provide APR_INCLUDEDIR, APU_INCLUDEDIR. server/Makefile.in: - Use $APR_INCLUDEDIR $APU_INCLUDEDIR vars. - Add export_files target to generate a list of headers with symbols to export, use that list to generate exports.c and export_vars.h. 	r97672
----------------------------
Changes to reduce dependency on in-tree apr and apr-util. Change AC_CONFIG_AUX_DIR in configure to build from srclib/apr/build. Have buildconf copy the needed files (config.guess, config.sub, PrintPath) from srclib/apr/build to build. Change binbuild.sh to stop using srclib/apr. This gets to to where ./configure --with-apr --with-apr-util actually works without an in-tree apr and apr-util, though we still need them in-tree to run buildconf. 	r97671
----------------------------
Accept '%%' in CustomLog format strings to produce a literal '%'. Submitted by: Andr� Malo <nd@perlig.de> 	r97644
----------------------------
Add <IfModule> conditionals around non-core directives. Submitted by: Tim Wilde <twilde@dyndns.org> 	r97642
----------------------------
Reorder the definitions for mod_ldap and mod_auth_ldap within config.m4 to make sure the parent mod_ldap is defined first. This ensures that mod_ldap comes before mod_auth_ldap in the httpd.conf file, which is necessary for mod_auth_ldap to load. PR: Obtained from: Submitted by: Reviewed by: 	r97596
----------------------------
"Fix critical bug in new --enable-v4-mapped configure option implementation which broke IPv4 listening sockets on systems with IPV6_V6ONLY socket option. That option should only be done on IPv6 listening sockets. Submitted by:	hiroyuki hanai <hanai@imgsrc.co.jp>] Reviewed by:	Jeff Trawick "	r97595
----------------------------
mod_autoindex: AddDescription directives for directories now work as in Apache 1.3, where no trailing '/' is specified on the directory name.  Previously, the trailing '/' *had* to be specified, which was incompatible with Apache 1.3. PR:       7990 	r97590
----------------------------
"Correct the title of the <note> about the scope of AllowOverride, and also remove the comment about the context being incorrect. The ""help"" link for ""Context"" tells you to consult sections.xml for exceptions, and this is documented there. "	r97582
----------------------------
Opened <Directory> but closed </DirectoryMatch> 	r97576
----------------------------
fix the sample worker configuration...  it didn't make any sense previously, and you'd see something like this when starting Apache with it: WARNING: MaxClients (8) must be at least as large large as ThreadsPerChild (25). Automatically increasing MaxClients to 25. PR:              10430 	r97573
----------------------------
- add <seealso> to mod_log_config - use same log format table style as mod_log_config -> update transformation 	r97561
----------------------------
PR: Debian Bug report #169431 -- Documentation of AllowOverride strongly (and wrongly) implies it is valid within a <Location> directive. This patch corrects that, as you really can't use AllowOverride in Files or Location sections. 	r97551
----------------------------
core_output_filter: back out changes to clean up resources before the end of a keepalive connection until we can figure out how to do it safely for mmap buckets 	r97539
----------------------------
- <em> -> <var> - add markup - fix contextlist of ISAPIReadAheadBuffer -> update transformation 	r97538
----------------------------
"more formal changes: - moved path_info section below the ""enabling"" section - dropped ""Using Server Side Includes for ErrorDocuments"" section and added a simple seealso instead. I don't see, that we need a separate section to set a link. - created an own subsection for every SSI element and put an overview table on top of it, this resolves also the mozilla problem with nested <dl>s, that was still present (sometimes) - fixed some typos - markup. content changes: - added a note about the behaviour of fsize/flastmod virtual - removed apache 1.2 compatibility notes (this is a 2.x documentation) - added a compat note in the module overview table - added description for QUERY_STRING_UNESCAPED - splitted flow control descriptions (=, != vs. <, <=, >, >=; the former allow regexps, the latter don't) - added a sentence and an example about regexp capturing - mentioned the literal comparison (vs. numerical) - includesNOEXEC allows only text/* ressources to be included. mentioned that. "	r97535
----------------------------
"- adding markup - reformatting a bit - <em> -> <var> - add seealso to UseCanonicalName - add explicit XHTML example - "" inside quoted text is not impossible, it can be written as &quot; "	r97520
----------------------------
Add --[enable|disable]-v4-mapped configure option to control whether or not Apache expects to handle IPv4 connections on IPv6 listening sockets.  Either setting will work on systems with the IPV6_V6ONLY socket option.  --enable-v4-mapped must be used on systems that always allow IPv4 connections on IPv6 listening sockets. Note: As the ssl config file is not automatically generated and PR:   PR 14037 (Bugzilla), PR 7492 (Gnats), various dups of these PRs 	r97516
----------------------------
- <em> -> <var> - reformatting + adding markup - add optional env=[!]variable to formal syntax definition - fix processing order (<Location> after <Files>) - turn bogus <ul>s to <dl> - add table border - nothing else ;-) 	r97513
----------------------------
A couple long-overdue changes to configuring: - Remove the over-detailed and out-of-date description of Include directories. - Link Rich's .htaccess tutorial. 	r97504
----------------------------
"core_output_filter: use the current input brigade's pool for the ""more"" brigade when we defer network writes due to small data + keepalives.  This prevents leaking resources in the ""more"" brigade until the end of the connection. "	r97503
----------------------------
add change to mod_setenvif, and update .ja.jis files 	r97495
----------------------------
Tighten up the writing a little and add an even simpler configuration example. 	r97483
----------------------------
A couple core docs fixes: 1. Document the fnmatch wildcards in Include. 2. Add a couple ServerSignature/ServerTokens <directive> markups. 	r97478
----------------------------
Fix a couple problems with the EnableSendFile docs: 1. Add a <compatibility> line. 2. Mention SMB in addition to NFS. 3. Fix a couple small gramatical things. 4. <example> is not a <pre> environment. 	r97475
----------------------------
Improves the user friendliness of the CacheRoot processing over my last pass. This version avoids the pool allocations but doesn't avoid all of the runtime checks. It no longer terminates during post-config processing. An error is logged once per worker, indicating that the CacheRoot needs to be set. [Paul J. Reder] 	r97466
----------------------------
use a subpool of c->pool for resources which are set aside, then clear it after writing the data to the network.  This closes files sooner with keepalive connections. 	r97462
----------------------------
Turn DOWN the volume of these errors... they are low enough level notes to land at loglevel INFO 	r97439
----------------------------
- <em> -> <var> (hey, that was easy :)) - add some <module>s - add <seealso>s to suexec.html - add explicit <seealso> from mod_cgid to mod_cgi - add short description of the ScriptSock directive -> update transformation 	r97436
----------------------------
"Since the directives CacheIgnoreCacheControl and CacheIgnoreNoLastMod are AP_INIT_FLAG one should be able to set them explicitely to ""Off"". Submitted by: Andre Malo Reviewed by: Paul J. Reder "	r97428
----------------------------
- <em> -> <var> - add <seealso>s to AcceptPathInfo and the CGI spec - little markup improvements - whitespace reformatting -> update transformations 	r97421
----------------------------
formal: - <em> -> <var> - markup changes - some whitespace reformatting content: - fix directive contexts - clarify the flag directives and add default values - add short description for CacheDefaultExpire 	r97418
----------------------------
"The value emitted by ServerSignature now mimics the Server HTTP header as controlled by ServerTokens. Submitted by:	Francis Daly <deva@daoine.org> Reviewed by:	Justin Erenkrantz "	r97416
----------------------------
formal changes: - <em> -> <var> - markup improvements - allow class attribute for <li> content changes: - remove the references to apache 1.3 in IndexOptions descriptions - clarify (prior non-existing) incremental index options example... 	r97412
----------------------------
SSIUndefinedEcho never defaulted to <!-- undef --> btw: could someone fix the directive description in 	r97395
----------------------------
Mr. Trawick was dead on, and this revealed a much bigger bug. Factor out the opts/override merging (since we do it three times) and eliminate all the nasty goto's.  This bug likely caused all sorts of dir_walk configuration issues including htaccess issues. Also add a few more docs where things aren't so obvious. PR: 14147 	r97380
----------------------------
Add examples of using ErrorLog, particularly logging to syslog. 	r97318
----------------------------
Change the CacheRoot processing to check for a required value at config time. This saves a lot of wasted processing if the mod_disk_cache module is loaded but no CacheRoot was provided. This fix also adds code to log an error and avoid useless pallocs and procesing when the computed cache file name cannot be opened. This also updates the docs accordingly.  [Paul J. Reder] 	r97291
----------------------------
Change the CacheRoot processing to check for a required value at config time. This saves a lot of wasted processing if the mod_disk_cache module is loaded but no CacheRoot was provided. This fix also adds code to log an error and avoid useless pallocs and procesing when the computed cache file name cannot be opened. This also updates the docs accordingly.  [Paul J. Reder] 	r97290
----------------------------
Fix an error in the <default> for MaxSpareThreads. 	r97266
----------------------------
Fix breakage in mod_mem_cache caused by the EnableSendFile patch. Specifically, we need to save the file open flags from the file opened by the default handler. Retrive those flags when building the apr_file_t on a cache hit. 	r97265
----------------------------
- fix context info of ModMimeUsePathInfo (ACCESS_CONF) - improve markup - fix some typos - update the transformation (in that order ;-) 	r97257
----------------------------
For the new EnableSendfile directive... 	r97222
----------------------------
A happy outcome is worth waiting for... add docs for AddOutputFilterByType sorry for the long delay. 	r97221
----------------------------
Document EnableSendfile.  I'm presuming that directives.html* and quick_reference.html* are now autogenerated.  Could someone run the xml builder and commit the compiled results? 	r97208
----------------------------
Introduce an EnableSendfile directive (defaulted to ON) to allow users to disable sendfile mechanics for NFS volume mounts and other kernel objects that don't support sendfile.  And EnableSendfile off can be used to help narrow bugs down to the sendfile mechanics or eliminate the possiblity that sendfile is a factor on any given platform. 	r97205
----------------------------
"If the server is configured with an accept mutex type that isn't comaptible with perchild, then force it to be FCNTL. PR:	13311 "	r97180
----------------------------
"Remove an unwise encoding=""none"" when dealing with the REDIRECT_REQUEST_METHOD because of what it might contain if the server is configured to handle unknown methods. "	r97161
----------------------------
"context list information are now taken from $lang.xml file. the module file holds the *untranslated* ""server config"", ""virtual host"" etc. "	r97139
----------------------------
"add a BrowserMatch directive to enable redirect-carefully for the Gnome VFS so that WebDAV works correctly with Nautilus and other code using the Gnome VFS PR:               12901 Submitted by:	  Rusty Conover <rconover@infogears.com> Reviewed by:      Jeff Trawick "	r97111
----------------------------
- add mod_logio entry to sitemap - add mod_logio transformation - add lacking section id to mod_log_config.xml (and update transformation) 	r97003
----------------------------
"Allow the UserDir directive to accept a list of directories. This matches what Apache 1.3 does.  Also add documentation for this feature. PR:	9299 Submitted by:	Jay Ball <jay@veggiespam.com> "	r97001
----------------------------
Re-order header files in suexec.c.  This adds apr.h, which is required to get the apr macros.  Other than that, it is just for clarity. 	r96995
----------------------------
SuExec should use /usr/local/apache2 not /usr/local/apache as the default directory. PR:     8789, 13104 Submitted by:   SangBeom han <sbhan@os.korea.ac.kr> 	r96994
----------------------------
"Fix the per-server config merge function in mod_cache to properly inherit CacheMaxStreamingBuffer PR: Obtained from:  Matthieu Estrade <estrade-m@ifrance.com> Reviewed by:	Brian Pane "	r96972
----------------------------
I just spent a few minutes helping someone on the users list figure out how to use <IfModule> with php4 and Apache2 (solution <IfModule sapi_apache2.c>).  Document the technique for posterity. Also, try to discourage people from adding random <IfModule> sections just for the heck of it. 	r96958
----------------------------
Removed an extra apr_atomic_init() call from the mem_cache post-config code (the APR init takes care of this at httpd startup) 	r96949
----------------------------
Remove mention of AuthDBMAuthoritative and AuthUserFileAuthoritative directives. 	r96923
----------------------------
Fix broken link to rewritemap in rewritelock description of the quickreference. Relative anchors to directives may only be set, if we're actually transforming the particular <modulesynopsis> document. 	r96922
----------------------------
add a note, that mod_alias and mod_userdir are forced to be run before mod_vhost_alias Reviewed by: Joshua Slive 	r96917
----------------------------
Rework the apxs -cp command to work when the source dir isn't available by querying apr-config and apu-config at link-time instead. (Note that the $apr_config value in configure.in isn't sufficient as we need to know where apr-config will be when we execute apxs later on - hence the --bindir option to apr-config and apu-config.) 	r96905
----------------------------
add missing unit `days' for CookieExpires 	r96880
----------------------------
Add ability to use multiple providers for basic and digest authentication. The syntax is: AuthBasicProvider file dbm AuthUserFile conf/basic-user AuthDBMUserFile conf/basic-user-dbm 	r96869
----------------------------
fix context of CacheNegotiatedDocs 	r96851
----------------------------
Consistify the configuration files for the .41 release.  This brings all three flavors back into sync. With luck, I won't be doing this again, but I need some time to play with awk magic first.  {The nested <IfModule> directives don't make this all that simple.} 	r96841
----------------------------
Obtained from: docs@httpd Submitted by: Thom May Reviewed by: Rich Bowen Hi, this chunk of the install page is no longer accurate; you can do ./configure --enable-layout=Debian --prefix=/blah and that works fine, with all options being respected. Cheers, -Thom 	r96837
----------------------------
Allow AddOutputFilterByType to take in multiple filters. 	r96819
----------------------------
Revert the examples to use AuthGroupFile 	r96798
----------------------------
- fix a typo - mention the Allowoverride FileInfo in RewriteOptions' synopsis - mention also, that pcre is used now (RewriteCond, RewriteRule) and set a link to perldoc.com (`perldoc perlre`) - add compatibility note for the cookie-flag (RewriteRule) - add RewriteMap dbm type choice compatibility note 	r96796
----------------------------
mention default value of IndexOrderDefault transform update: directives.html.en 	r96784
----------------------------
Add English doc for MaxMemFree Obtained from: Sander Striker 	r96782
----------------------------
fix links to the options directive. (hope to) clarify, when parameters have to be quoted for the AddAlt* directives (please correct my English if neccessary :) 	r96778
----------------------------
"Add support for using fnmatch patterns in the final path segment of an Include statement (eg.. include /foo/bar/*.conf). and remove the noise on stderr during config dir processing. Submitted by:	Joe Orton <jorton@redhat.com> Reviewed by:	Ian Holsman, Brian Pane "	r96776
----------------------------
Stage #2 of aaa rewrite: Add provider support so that mod_authn_* modules do not have to re-implement basic auth and to allow mod_auth_digest (and other modules) to leverage the authn backends. Adds AuthBasicProvider and AuthDigestProvider directives. This also moves a lot of the basic auth handling code inside of mod_auth_basic (but does not remove the code in server/protocol.c - that will have to wait for a version bump so that we don't totally bust old modules). This patch incorporates code review comments by Greg Stein. 	r96739
----------------------------
Change ModMimeUsePathInfo example from .html to .shtml Suggested by: Joshua Slive 	r96725
----------------------------
Add documentation of ModMimeUsePathInfo directive. (When I did a rebuild, it wanted to regenerate every file, so I'm not exactly sure what else is going to be checked in.  Did someone change a master file without re-running the transformations?) 	r96724
----------------------------
A couple small tweaks to the public_html tutorial. 1. Add a <seealso> to urlmapping.html. 2. Take some markup out of a <title>.  It is technically allowed, but probably not a good idea. 3. Replace <DirectoryMatch /home/*/cgi-bin> with <Directory /home/*/cgi-bin> since that is a shell-style wildcard and not a regular expression.  Also off non-CGI Options in a cgi-bin directory. 	replace
----------------------------
"Simplify mod_dav's handler. The old mechanism would jam a handler name in whenever DAV was configured for a directory. i.e. there weren't really any tests other than ""is DAV handling this directory?"" The name was just a marker which was tested later. The new mechanism simplies performs the test right in the handler. This is now possible since all handlers are called (before, you *had* to set your own name so that your handler would be called). Since the test is actually quite straightforward, we actually gain overall: no more fixups hook, and a couple integer comparisons (rather than a string compare). And hoo... the code is simpler, too. This code has been verified with ""litmus 0.8"", my own little continues to work, and it doesn't appear that the changes interfered with other operation. "	regression
----------------------------
Add ModMimeUsePathInfo directive. This directive allows mod_mime to lookup extension information for content served via Location blocks so that content-type, filters, etc can be applied to non-file content. (I wouldn't be shocked if we end up changing the directive name.) 	r96644
----------------------------
Added optional support for caching streamed responses in mod_cache. Notes: * I've created a new config directive CacheMaxStreamingBuffer, * A big block of code in cache_in_filter() got wrapped in an 	r96631
----------------------------
A little fine-tuning of the new sections doc. This doc could still use some help from an apache configuration-merging expert. 	r96618
----------------------------
Add reference to RemoveInputFilter and RemoveOutputFilter. 	r96614
----------------------------
"Fix FileETag None directive. - Fix segfault on strlen computation on the empty string in vlv case - If the etag is """", don't set the ETag header to be """" - leave the header NULL instead. Andrew's patch would change ap_meets_condition to accept """", but Justin thinks it would be better just to sidestep it all together and not set ETag when it would be """". PR: 12207 Submitted by:	Andrew Ho <andrew@tellme.com> "	r96609
----------------------------
update README.ldap and config.m4 to reflect new location of httpd ldap code 	r96595
----------------------------
Update the defaults on ThreadsPerChild and ThreadLimit and not that ThreadLimit is now part of mpm_winnt as well as update a few transformations. 	r96591
----------------------------
config.log and config.status are created by configure and need to be removed by make distclean 	r96576
----------------------------
suexec is sometimes built by make so it needs to be removed by make clean 	r96575
----------------------------
envvars-std is build by configure so it needs to be removed by make distclean or make extraclean 	r96570
----------------------------
Win32: Add ThreadLimit directive to the windows MPM 	r96555
----------------------------
Remove CacheOn config directive since it is set but never checked. No sense wasting cycles on unused code. Besides, the only truly bug free code is deleted code. :)   [Paul J. Reder] 	r96548
----------------------------
introduce 2 new callback oppurtunities to allow a 3rd party module to do the actual writing of the log file. also change buffered writing to make it runtime configurable instead of compile time configurable. i'm not 100% on the buffered output, mainly because I'm not sure it worked in a thread safe way *before* this change 	r96538
----------------------------
Corrected misspelled ISPAIFileChache/ISAPIFileCache directive into ISAPICacheFile 	r96536
----------------------------
Corrected the context and added the corresponding override information. Corrected default values. Corrected the ISPAIFileChache/ISAPIFileCache directive. The correct name is ISAPICacheFile. Added description for the ISAPIFakeAsync directive. 	r96535
----------------------------
The documentation says: ISAPIReadAheadBuffer defaults to 49152 bytes, which is exactly 48 kb. But the module actually uses a default of 48192 bytes. This seems to be a typo. Instead of changing the documentation I attached a patch for mod_isapi.c to set the default value of ISAPIReadAheadBuffer to 49152. Submitted by: Astrid Ke�ler <kess@kess-net.de> 	r96534
----------------------------
Add a little documentation on how to select DBMs during build and update the RerwiteMap and AuthDBMType directives to point to it. The build docs could still use a great deal of work.  There are tons of things that aren't documented at all. 	r96526
----------------------------
Updated the supported list of error-doc languages (LanguagePriority). 	r96525
----------------------------
Fix a null pointer dereference in the merge_env_dir_configs function of the mod_env module. PR 11791     [Paul J. Reder] 	r96523
----------------------------
Convert to xml and do a MAJOR revision and expansion of the sections (<directory>, <location>, etc) docs. Further review by config-merging experts would be appreciated. Reviewed by: Rich Bowen, Andre Malo 	r96522
----------------------------
"new option to ServerTokens. ""Maj[or]"" which displays a server response similar to Apache/2.0 Also surfaced the directive in the standard config, defaulting to FULL "	r96500
----------------------------
MaxSpareServers and MinSpareServers are native to prefork, not mpm_common. Submitted by: David Shane Holden <dpejesh@yahoo.com> 	r96492
----------------------------
which broke the build on Win32 mod_rewrite.h didn't spit out the decl of lookup_map_dbmfile if NO_DBM_REWRITEMAP was still defined, and mod_rewrite.dsp continued to define NO_DBM_REWRITEMAP Reported by:          Jerry Baker <jerrybaker@attbi.com> 	remove
----------------------------
Fix a problem whereby RewriteMap prg:'s would get out of sync due to the inappropriate use of nonblocking reads.  Also get rid of the stderr altogether since mod_rewrite never uses it. PR: 9534 	r96475
----------------------------
Zero-copy output for small files delivered over keepalive connections (previously, the setaside code in the core output filter would copy file buckets <8KB into the heap, resulting in poor keepalive performance) 	r96431
----------------------------
Add a ServerSignature <-> ServerTokens cross-reference and update a few transformations. 	r96424
----------------------------
Make it even more clear that EVERY host must have a <virtualhost> section with name-virtual-hosts. This is already clearly documented a few paragraphs below, but judging by questions on the newsgroup/mailing list, people don't read past the example. 	r96416
----------------------------
fix weird things that happen with canned error messages due to using two different request_recs after an ErrorDocument internal redirect failure. examples: wrong Content-Type, garbled output from ebcdic servers due to double charset translation 	r96364
----------------------------
"mod-deflate now checks to make sure gzip-only-text-html is set to 1, not anything. This will allow things like... SetEnv gzip-only-text/html 1 BrowserMatch ""GECKO"" gzip-only-text/html=0 Obtained from: Andr� Schild <A.Schild@aarboard.ch> Reviewed by:   Ian Holsman "	r96318
----------------------------
This was never a 'vulnerability'... the APR_FILEPATH_SECUREROOT flag passed to apr_filepath_merge refused to merge any rooted 'addpath'. However, that isn't the traditional 1.3 behavior, so fly past any leading '/'s on the way to merging the uri to the DocumentRoot. PR: 10946 	r96314
----------------------------
DeflateMemLevel specifies level (1-9), not bytes. 	r96259
----------------------------
support non-threaded configurations PR:             10920 	r96244
----------------------------
Hold the Apache screen open on NetWare if exit() is called for any reason during initialization and configuration of the main Apache process. 	r96172
----------------------------
"Introduce changes necessary to bring the remainder of the manual into xml. 1. Add a <relative-path href=""whatever""/> element to the manualpage DTD.  This should give the path from the location of the page to the root of the manual directory.  It is necessary for proper linking to directives, etc. 2. Add the stuff to common.xsl necessary to transform a <manualpage>. This is basically the minimum.  It creates something VERY similar to what we had before (with the exception of a little css here and there).  I very much hope that this will be improved soon to look nicer. 3. Add configuring.xml, which was written by Astrid Kessler.  I made only a very few small changes to bring it in line with the current DTD. I have not yet committed the corresponding configuring.html.en, since I want to give people a little opporunity to comment on this stuff. My appologies, but I am committing a few style changes to common.xsl along with the substantial changes.  That file is really hard to work with, and should probably be broken up. "	r96158
----------------------------
After an install, the default config files are useful.  After an upgrade they aren't. If the config directive's syntax changed, Apache will tell you which one changed, and the docs are a better place to go for details then the default config files.  BTW, the syntax of a directive hasn't changed for a VERY long time. If the semantics changed, then nobody will ever know that they need to look in the default config files to determine that they semantics changed, because there is no error message. The argument that you want to be able to get the defaults back doesn't hold water, because 99.9% of all admins backup their files before modifying them.  If you aren't backing them up, then that is your problem. The argument that you may not have a full config directory also doesn't hold water, because the assumption is that the conf/ directory is coming from a working server. 	r96157
----------------------------
vote on generating default config files. Abstaining for now on where they should live.  It would be work to move them. Is it worth it?  dunno 	r96154
----------------------------
I'm VERY reluctant to get into this argument, but... I do consider it useful to have an updated httpd-std.conf with a new version. Some docs-project people would like to have a directory to dump all sorts of sample configurations. 	r96153
----------------------------
Make a little effort to update the suexec docs to the 2.0 world. This still needs considerable attention. Submitted by: Chris Herbst <chris@herbst.com>, Joshua Slive 	r96146
----------------------------
Remove a paragraph from the UseCanonicalName defition that is not relevant now that Port is gone. PR: 11041 	r96145
----------------------------
Fix some hook ordering problems.  mod_vhost_alias should, perhaps, be HOOK_LAST. It redefines the document root, so it should only be used if no other mapper wants the request.  I haven't made that change here; I've simply put explict ordering to make sure we get mod_alias -> mod_userdir -> mod_vhost_alias I can't compile apache at the moment for other reasons, so this is untested, but it looks right to me. PR: 8853 	r96137
----------------------------
Do some sanity checking on the cache config directives. 	r96109
----------------------------
Revert the change in the previous commit, which broke the setting of @APACHECTL_ULIMIT@ during configuration 	r96081
----------------------------
Add Swedish language to error documents LanguagePriority 	r96065
----------------------------
Timeout/time fixes 	r96055
----------------------------
Fix a [very few] config changes.  Yes - needs to be awk-ized, but not at this moment. 	r96022
----------------------------
Add missing argument in CustomLog example. Submitted by: Thomas =?iso-8859-1?q?Sj=F6gren?= <thomas@northernsecurity.net> Reviewed by: Joshua Slive 	r96015
----------------------------
Documentation for the NetWare CGIMapExtension directive for mapping CGI script file extensions to the script interpreter NLM 	r95988
----------------------------
Correct path to the ScoreBoardFile directive. 	r95984
----------------------------
Submitted by: Owen Boyle, on users@ mailing list Additional clarification on UseCanonicalName directive. 	r95962
----------------------------
Re-use the same temp brigade to read all lines of a request header, to avoid the overhead of brigade creation and deletion.  (This produced a 5% reduction in the total CPU usage of a minimalist httpd configuration: <JHEPKCEMGPKFFDHHDDKDMELFEKAA.bill@wstoddard.com>) 	r95956
----------------------------
Add a new directive: MaxMemFree.  MaxMemFree makes it possible to configure the maximum amount of memory the allocators will hold on to for reuse.  Anything over the MaxMemFree threshold will be free()d.  This directive is usefull when uncommon large peaks occur in memory usage.  It should _not_ be used to mask defective modules' memory use. 	r95954
----------------------------
Make the mime types configuration file path relative to {sysconfdir}, just like the other config files. 	r95953
----------------------------
Preserve existing installation directories.  We copy over binaries, the build directory, the headers, and the man pages.  Everything else, the config, htdocs, manual, error, icons, and cgi directories are not installed if the directories already exist.  I got sick of having to re-edit printenv for my tests, and this is the same logic 1.3 used. 	r95911
----------------------------
"Add a filter_init function to the filters so that a filter can execute arbitrary code before the handlers are invoked. This resolves an issue with incorrect 304s on If-Modified-Since mod_include xbithack full is on, of course).  When mod_include runs as a filter, it is too late to set any flag since the handler is responsible for calling ap_meets_conditions(), which it should do before generating any data. If a module doesn't need to run such arbitrary code, it can just pass NULL as the argument and all is well. PR:	9673 Reviewed by:	Ryan Bloom and others "	request
----------------------------
Fix a long-standing bug in 2.0, CGI scripts were being called with relative paths instead of absolute paths.  Apache 1.3 used absolute paths for everything except for SuExec, this brings back that standard. 	r95899
----------------------------
- Fix segfault in core_output_filter when we are passed an empty brigade. - Stash the remainder of the brigade in more when we see a flush bucket. Previous to this commit, we would only process the buckets before the flush on a HTTP/1.0 request and then return. We are proably only finding this now since we now correctly check for keepalive connection status. 	r95896
----------------------------
"Change conn_rec->keepalive to an enumerated value of AP_CONN_UNKNOWN AP_CONN_CLOSE AP_CONN_KEEPALIVE This also fixes a problem where ap_discard_request_body would not discard the body when keepalive was 0.  This actually meant the keepalive status was unknown *not* closed, but no one ever remembered that. This problem was seen with mod_dav sending error responses (as reported by Karl Fogel). Suggested by:	Greg ""this isn't the '80s"" Stein Reviewed by:	Greg Ames "	r95891
----------------------------
ap_discard_request_body: exit without reading the body if connection->keepalive is false.  This works in conjunction with ap_die which resets connection->keepalive any time ap_status_drops_connection is true.  The latter is explicity tested here in case ap_die isn't involved. Submitted by:   Justin Erenkrantz, Greg Ames 	r95882
----------------------------
Include apr_lib.h for the definition of apr_toupper() to get rid of undefined symbol link failures (apr_toupper is a macro, at least on Unix). Reported by:  Trawick's regression build 	r95878
----------------------------
"new configuration option for mod_rewrite to set cookies. configuration is like the following RewriteRule (.*) - [CO=<cookiename>:$1:<domain>:<expiry in minutes>] Submitted by:	Brian Degenhardt <bmd@mp3.com> Reviewed by:	Ian Holsman "	r95840
----------------------------
Add a timeout option to wintty.  This allows the user to specify a number of seconds to wait after the program terminates before closing the window. Previously, the windows would remain open indefinately.  This option is not currently being used by Apache. 	r95836
----------------------------
prevent infinite recursion if an ErrorDocument gets an error Reported by: Colm MacC�rthaigh <colmmacc@Redbrick.DCU.IE> 	r95825
----------------------------
I've been threatening to do this for a few days, but I wanted to wait for other dust to clear. Comment-out the internationalized error responses in the default configs. I think these error docs are great, and anyone who understands the server should be using them, but because of their complexity, they are a danger to people who blindly install apache and forget it. Developers especially should continue to use them, because they are great at finding obscure bugs in mod_include, mod_negotiation, and sub-request processing. 	r95819
----------------------------
These emits occur mainline, outside of the pphrase_callback, so we never opened readtty or writetty.  But they are absolute failures, nothing the user could do to deal with them.  They are logged in the ssl vhost's error log. In this case, I forgot my SSLCertificateKeyFile, so the server never tried the callback.  writetty wasn't initialized, so we segfaulted. This segfault is due to misconfig, not to the dialog with the user. This is the easiest fix (easier to read, too), but we shouldn't need to worry too much that the release is tagged.  If we retag, fine, then grab it, but it only addresses a config problem. 	r95734
----------------------------
Fix the build on BSDi machines. The bsd_makefile trick didn't completely work as autoconf may run config.status and remove the fixes we've just applied, so this allows us to workaround that problem. Initailly suggested by Cliff, this is a modified version. 	r95708
----------------------------
Added configuration example, code example, and a little explanation, to facilitate logging all of your virtual hosts to a single file, and then splitting them back up after. Note that if Apache has problems with this many file handles, Perl might also. I'm not sure. 	r95701
----------------------------
"We must set the MIME-type for .shtml files to text/html if we want them to be parsed for SSI tags.  Add the config for that to the default config file so that it is easier to enable .shtml parsing. PR:	9787 Submitted by:	Dave Dyer <ddyer@real-me.net> "	r95693
----------------------------
"Fixed a problem with 'make install' on one of the tarballs (which have the CVS dirs removed already) with ReliantUnix's rm: Installing configuration files Installing HTML documents Usage: rm [-firR] file ... make[1]: *** [install-htdocs] Error 2 make[1]: Leaving directory `/home1/apache20/httpd-2.0.37' make: *** [install-recursive] Error 1 Submitted by:	Jean-frederic Clere <jfrederic.clere@fujitsu-siemens.com> "	r95691
----------------------------
"Make the default_handler catch all requests that aren't served by another handler.  This also gets us to return a 404 if a directory is requested, there is no DirectoryIndex, and mod_autoindex isn't loaded. PR:	8045 Submitted by:	Justin Erenkrantz "	r95690
----------------------------
"Allow 'make install DESTDIR=/path'.  This allows packagers to install into a directory different from the one that was configured.  This also mirrors the root= feature from 1.3.  We cannot use prefix=, because both APR and APR-util resolve their installation paths at configuration time.  This means that there is no variable prefix to replace. PR:	7803 Submitted by:	Andreas Hasenack <andreas@netbank.com.br> "	r95686
----------------------------
Added example for SuexecUserGroup directive 	r95684
----------------------------
Cleanup proxy timeouts a bit to remove emits and make consistent to vhost timeout. 	r95674
----------------------------
Added <seealso> for AddHandler to the SetHandler doc 	r95671
----------------------------
Added (slightly redundant) pointer from SetEnvIf directive docs to ../env.html for more examples. 	r95670
----------------------------
ScriptSock example 	r95662
----------------------------
Add missing description for AddDescription directive. Fix typo. 	r95635
----------------------------
Example for ServerRoot directive 	r95632
----------------------------
Example for ScriptLog 	r95631
----------------------------
Example for ScoreBoardFile 	r95630
----------------------------
Examples for HeaderName, ReadmeName 	r95629
----------------------------
Example of PidFile directive 	r95627
----------------------------
Added example of Using * as argument to NameVirtualHost. Added note that arg to NameVirtualHost is supposed to match the arg to VirtualHost, as this seems to come up several times a week on #apache 	r95626
----------------------------
Example for MimeMagicFile. 	r95624
----------------------------
"Solve the 80/20 by initializing and storing server_rec->timeout and server_rec->keep_alive_timeout in apr_time_interval_t format (in apr units, whatever they be), as both values exist to pass into APR, and all APR timeouts are in apr_time_t. Reviewed by:	Cliff Woolley "	r95623
----------------------------
Slightly overkill, but added example to MetaSuffix 	r95622
----------------------------
Example of MetaDir directive 	r95621
----------------------------
PR: Obtained from: Submitted by: Reviewed by: allow POST method over SSL when per-directory client cert authentication is used with 'SSLOptions +OptRenegotiate' enabled and a client cert was found in the ssl session cache. 	r95602
----------------------------
"PR: Obtained from: Submitted by: Reviewed by: 'SSLOptions +OptRengotiate' will use client cert in from the ssl session cache when there is no cert chain in the cache.  prior to the fix this situation would result in a FORBIDDEN response and error message ""Cannot find peer certificate chain"" "	r95601
----------------------------
Fix the display of the default name for the mime types config file. PR:           9729 Submitted by: Matthew Brecknell <mbrecknell@orchestream.com> Reviewed by:  Jeff Trawick 	r95591
----------------------------
Modified the CGIMapExtension directive to take an optional parameter that specifies how the CGI NLM should be launched. 	r95590
----------------------------
make some small steps towards getting the post config hook to return an error rather than exiting directly 	r95567
----------------------------
Add missing description in ReadmeName directive, mostly taken from HeaderName. 	r95566
----------------------------
Document that ProxyPass can't take a query string, but that RewriteRule can be used for reverse proxying with much more flexibility. 	r95559
----------------------------
"Fix apxs to allow ""apxs -q installbuilddir"" and to allow querying certain other variables from config_vars.mk. PR:    9316 "	r95549
----------------------------
Fix segfault at startup when the startup fails before running the post config hook. We were setting the hash table cleanup in the create_per_server_config hook and allocating the hash table in the post config hook. Move the register_cleanup to the post_config hook 	r95532
----------------------------
"Fix the binary build install script so that the build logic created by ""apxs -g"" will work when the user has a binary build. We didn't copy enough of the build directory and we edited the wrong version of config_vars.mk. "	r95489
----------------------------
Updated the section on OS configuration to cover some 2.0 issues 	r95462
----------------------------
Added a reference to the EnableMMAP documentation for the performance tuning details 	r95461
----------------------------
Close the <proxy> container properly. 	r95459
----------------------------
"add 2 new enviornment variables to deal with misbehaving backends ""proxy-nokeepalive"" which removes the Connection: line completely ""force-proxy-request-1.0"" which forces the request to be HTTP/1.0 this allows apache to reverse proxy misbehaving appservers "	r95456
----------------------------
"Enable SSL negotation in ab.c.  It is that, or remove all the entirely BOGUS ssl config options from ab.c.  If it works, nifty, if not, we now have directives that have some effect, rather than no effect, for SSL. Submitted by:	Madhu Mathihalli <madhusudan_mathihalli@hp.com> "	r95451
----------------------------
Fix the case where if there is no ErrorDocument specified for an error, the error would be sent to the client *twice* because both the filter and the core would trigger error responses. The problem is that the filters have already handled some errors (say 413) and due to the ap_get_client_block API, the error was morphed into 400. Therefore, ap_discard_request_body must use brigades directly rather than the ap_get_client_block API so that any potential errors are not dropped. The special value AP_FILTER_ERROR indicates that the lower level has already dealt with this problem (ap_die() will realize this).  Otherwise, we'll error with HTTP_BAD_REQUEST and ap_die() will take it from there. This also prevents needless memory copies when we are just going to discard it anyway. Thanks to Cliff Woolley who found this wacky problem. 	r95424
----------------------------
Thanks Ryan for cleaning up after my laziness.  :)  Here are just a few last little changes.  ->datafile should be initialized... but doing so brings up the fact that the check in run_rewritemap_programs() was expecting ->datafile to have a string attached to it.  For clarity, let's just use argv[0] there.  And since we've reinstated the use of ->checkfile, we no longer need that extra apr_stat() I hacked in, so let's get rid of it. 	r95375
----------------------------
Tokenize the arguments for rewrite programs during config parsing, and just use that information later.  I was having a problem with prg directives with arguments failing the configuration.  The problem was a call to stat, which was being passed the program name and the arguments. Obviously, the arguments were messing up the call to stat.  This gets the test suite working for me again. 	r95372
----------------------------
"A couple small corrections to the content negotiation docs: - The ""parent language"" matchine is available always, not just with ForceLanguagePriority - ForceLanguagePriority defaults to Prefer, not None. "	r95354
----------------------------
Error out a bit more nicely if the RewriteMap prg: is not found.  We can't just apr_stat in the first init round because we haven't run apr_tokenize_to_argv() yet, and it would be a relatively ugly hack to run it twice just for that.  Well, I suppose we could store the argv in the opposed to the old exit(1) method) if we go to execute a rewritemap and discover it doesn't exist, and log a nice descriptive message at the end of the error_log. 	rewritemap
----------------------------
Fix RewriteMap prg:'s that have command-line args. PR: 8464 Submitted by: James Tait <JTait@wyrddreams.demon.co.uk> 	r95334
----------------------------
Correctly return 413 when an invalid chunk size is given on input. - If get_chunk_size() returns a negative number, that probably implies an overflow.  So, create a 413 error and pass it to the output filters. - Modify ap_discard_request_body() to return OK quickly if we're a subreq or our status code implies that we will be dropping the connection. - Modify ap_die() so that if the new status implies that we will drop the connection, that we correctly indicate that we can not keepalive this connection.  (Without this, the error is returned, but the connection is not closed.) 	r95331
----------------------------
Fix http redirecting for UserDir.  Before this patch, the directive: UserDir http://www.foo.com/~*/ The code would ignore the http:// and instead use the user's home directory 	r95329
----------------------------
Document the --with-suexec-bin configure flag. PR: 9038 	r95304
----------------------------
Reorder these directives to match the output from ./configure --help 	r95303
----------------------------
A little refactoring of the mod_setenvif docs.  In particular, consolidate the details in the SetEnvIf directive and let the others simply reference that one. 	r95296
----------------------------
Updated the release showstoppers section to reflect the completion of the critical suexec fixes 	r95293
----------------------------
"Fix for suexec invocation of CGIs under user dirs when using cgid PR: 7810 Submitted by:	Colm MacCarthaigh <colmmacc@redbrick.dcu.ie> Reviewed by:	Brian Pane "	r95292
----------------------------
"Fix for suexec execution of CGI scripts from mod_include (including security patch to ensure that <!--#include file=""name.cgi""--> is run as the suexec user rather than the httpd user) PR: 7791, 8291 Submitted by: Colm MacCarthaigh <colmmacc@redbrick.dcu.ie> Reviewed by:	Brian Pane "	r95290
----------------------------
Fix the rest of the apr_pool_userdata_setn() bogosity w.r.t. DSO modules. It's totally unsafe to use apr_pool_userdata_setn() in the post_config phase of a module, since on some platforms when the DSO gets reloaded between phases, the data segment will be at a different address on the second phase and the userdata_get() call will fail. PR: 9413 Submitted by: Tsuyoshi Sasamoto <nazonazo@super.win.ne.jp> 	r95287
----------------------------
Added EnableMMAP to performance tuning guide 	r95279
----------------------------
Rename mod_suexex.ja.xml to mod_suexec.xml.ja. This is a simple add and remove operation because there was no change to old file and preserving history is not important. 	r95230
----------------------------
"John Von Essen <john at essenz.com> contributes the diskimg.gif icon: > Hopefully this is the right place to send this comment. I have alot of > disk images (.img) on my server. By default, there is no icon for a disk > image. > > So I made one... > >      AddIcon /icons/diskimg.gif .img > > The diskimg.gif can be found at: > > http://www.essenz.com/icons/diskimg.gif > > Could this be added into future releases? Disk images are fairly popular. > Especially when making boot floppies or driver disks for linux. Submitted by:	john at essenz.com "	r95203
----------------------------
./configure --enable-http --enable-mods-shared=most would cause mod_http to get built as a DSO, which it can't be.  This forces it to be static only. PR:  9244 Submitted by:  Cliff Woolley, and simultaneously by 	r95194
----------------------------
1. Bring us back down into 80 character lines again. 2. Change the incredibly misleading comment for .htaccess. 3. Shorten the comment for IndexOptions. 	r95192
----------------------------
"Shorten the comment for EnableMMap, and limit it just to the NFS issue. The most we could say about preformance is ""it's usually better to leave this on, but sometimes it's better to turn it off"", which is not really helpful to anyone. "	r95191
----------------------------
Clean up isapi_load, removing the request_rec arg [which we never need], and using the given server and request rather than deref'ing r->server [which segfaulted ISAPILoadModule in the 1.73 rev.] Reported by: Sebastian Hantsch 	r95187
----------------------------
As the prior commit message indicated, pass the accept thread a listen rec as opposed to simply the listen socket. However, the prior commit (which I crossed up with this patch) really closed a segfault where we attempted to log messages to ap_server_conf, after the server conf was destroyed, and prior to setting the new value in the next go-around of post_config. 	r95173
----------------------------
Resolve the EXEC_ON_READ bit for ServerRoot and other modules that test the directive context.  Should eliminate the segfault. 	r95171
----------------------------
Although it appears reasonable to immediately gather the Error log and level from the config; these are per-vhost entities that can't be processed as we preload the config tree.  There is more work to do, as Cliff Woolley guesses, before we can make this change. In the meantime, -e and -E should provide the admin sufficient options to work around problematic configs.  So I'm reverting those changes, for now. ServerRoot is global only, and it MUST be read immediately, so that part of the last patch stays. 	r95170
----------------------------
We need to grab ServerRoot, LogLevel, and ErrorLog right off the bat as we are reading the config. This closes a bug where ServerRoot /foo + LoadModule relative/mod_foo.so won't load mod_foo.so. Reported by: Ron Leung <rleung@covalent.net> 	r95160
----------------------------
Fix the links for the PidFile directive in stopping.html and add mpm_common and mod_cache to index-bytype.html (which, by the way, is clearly the abused stepsister of index.xml/index.html... we should find some automated way to generate the index-bytype as we have with the PR:  9187 Reported by:  Max Dittrich <amax@cs.tu-berlin.de> 	regular
----------------------------
prevent possible segv in ssl_init_CheckServers if s->addrs is NULL. for example: <VirtualHost *:>, for which the core only spits out a warning: Name or service not known: Cannot resolve host name *: --- ignoring! 	r95158
----------------------------
get binbuild working again, and zap the BinaryDistribution layout at the same time a few days ago the configure syntax for specifying a layout was fixed in binbuild.sh, but the layout was broken...  it turns out that we don't need the layout with Apache 1.3, a separate layout for binary builds was necessary in order to install under any prefix specified by the user with Apache 2.0, that works without any special tricks so the BinaryDistribution layout is no longer necessary 	r95152
----------------------------
Added EnableMMAP (commented out) to the standard config 	r95144
----------------------------
Remove SSLLog and SSLLogLevel directives in favor of having mod_ssl use the standard ErrorLog directives. 	r95129
----------------------------
Change mod_ssl from using ssl_log() to ap_log_error(). The issue is that ssl_log doesn't handle apr_status_t result codes.  This leads to a number of places (esp. with mutexes) where the error codes get lost.  Rather than extending ssl_log further, since mod_ssl is part of our core, migrate to ap_log_error.  This means that mod_ssl no longer does its own logging. Most uses of SSL_ADD_ERRNO are now mapped correctly to apr_status_t values (mainly because the APIs that used to return errnos are now APRized and have apr_status_t codes available). SSL_LOG_TRACE and SSL_LOG_DEBUG were mapped to the APLOG_DEBUG values. mod_ssl prints out a LOT of debugging information, so mod_ssl with LogLevel Debug may not be a good idea - perhaps mod_ssl should be less chatty. Numerous printf type collisions were also resolved. (The ssl logging code itself will be removed in a subsequent commit.) This has been discussed on dev@httpd, but the fact that there isn't much to review besides the mindless changes, I'm going to commit now and rely on CTR if I screwed up anything on the translation. 	r95127
----------------------------
Short of final troubleshooting and diagnostics, this patch introduces Async support via the ISAPIFakeAsync directive [default - still off.] 	r95123
----------------------------
Added documentation for the new EnableMMAP directive 	r95100
----------------------------
"fix a comment in config.layout which told the unsuspecting user to use --with-layout instead of --enable-layout PR:		9061 Submitted by:   Max Dittrich Reviewed by:    Jeff Trawick "	r95088
----------------------------
Part 3 of the ISAPI overhaul.  Reframe the 'server conf' into 'dir conf' options, creating one single cache of loaded modules [heck, that's what it was before.]  This allows finer grained control of specific modules that must be 'configured' around to deal with their peculiarities. This actually saves much code when we can use global config accessors. Grant the module cache it's own pool, and straighen up some other nits. No other substantial changes in this pass. 	r95073
----------------------------
Instead of using the hardcoded libtool path of srclib/apr, use the output of apr-config --apr-libtool. 	r95072
----------------------------
Instead of hardcoding srclib/apr{-util} in the INCLUDES, get the information from ap{ru}-config --includes which knows how to deal with VPATH builds itself. 	r95071
----------------------------
Part one of a several-fold overhaul to isapi.  This part simply normalizes the module to the usual order of config-cmds/helpers/ handlers/setup. 	r95069
----------------------------
First pass at trying to standardize httpd-2.0's usage of APR and APR-util so that they can be separated - use an installed APR and APR-util with httpd-2.0.  This is not expected to achieve full separation, but is merely the first step in the process.  The tree should still be buildable in the source-only case. This commit does the following things: - Use the standard find_apr.m4 and find_apu.m4 m4 macro files that flood and Subversion already use for locating APR and APR-util.  This adds the --with-apr and --with-apr-util configure options. - Stop using APRVARS and export_vars.sh. - Use apr-config and apu-config to determine dependencies. - Add AP_BUILD_SRCLIB_DIRS and AP_CLEAN_SRCLIB_DIRS values (names stink) to dynamically figure out what subdirs in srclib we will build. (What we really want to do is set one value - go L->R on build and - If we are using APR and APR-util that are already installed, don't specify them in srclib.  (This still needs some work I bet.) 	r95061
----------------------------
The suexec arguments now start with --with. Note that there are also two arguments missing, according to ./configure --help. Specifically, --with-suexec-bin and --with-suexec-umask. Can I can add those in, if desired, but if someone more familiar with it could do so, perhaps it would be a little more descriptive. Obtained from: #apache on openprojects.net 	r95050
----------------------------
Optimization: skip cache setup in location_walk() if the vhost config contains no <Location> blocks 	r95044
----------------------------
Added EnableMMAP directive to allow the server administrator to prevent mmap of file buckets upon read. 	r95040
----------------------------
mod_setenvif optimizations 	r95028
----------------------------
Performance fix: When a BrowserMatch or SetEnvIf pattern doesn't actually require regular expression parsing, use a fast string search instead. 	r95027
----------------------------
The default for DefaultType is text/plain, not text/html. PR: 8927 	r95019
----------------------------
Add transformation of mod_suexec.ja.xml. 	r95008
----------------------------
Use the ap_get_server_xxx() calls to return the info rather than short cutting it with the server_rec.  This avoids port showing up as 0 and also respects the UseCanonicalName setting in the .conf file. 	r95006
----------------------------
Changing *any* default behavior is a bad idea without _very_ careful consideration, IMO, as it can silently break existing configs.  Principle of least astonishment applies.  Besides, the security argument is bubkus. Security through obscurity at best, and hardly even that. 	r95004
----------------------------
vote:change default config so that we only report our version instead of everything PR: Obtained from: Submitted by: Reviewed by: 	r95001
----------------------------
Add DeflateBufferSize directive to replace hardcoded FILTER_BUFSIZE definition.  Also speeds up ctx init since it takes the buffer and does a malloc rather than a calloc on it. 	r94987
----------------------------
"Reverse the hook ordering for mod_userdir and mod_alias so that Alias/ScriptAlias will override Userdir. PR: 8841 Reviewed by:	Justin Erenkrantz "	r94985
----------------------------
"Added an optional function (ap_register_rewrite_mapfunc) which allows third-party modules to extend mod_rewrite's ""int:"" internal RewriteMap functionality. Concept by:  Tahiry Ramanamampanoharana <nomentsoa@hotmail.com> "	r94939
----------------------------
"Fix generated httpd.conf to respect layout for LoadModule lines. PR:	8170 Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Justin Erenkrantz "	r94921
----------------------------
Fix the link to the description of the CoredumpDirectory directive in the server-wide document. PR:          8643 	r94879
----------------------------
Enable mod_mem_cache to be configured to cache open file handle using new directive option: CacheEnable fd / will enable caching fds. If for some CacheEnable mem / 	reason
----------------------------
Name space protect mod_mem_cache config directives 	r94866
----------------------------
"Short-circuit out of mod_userdir's translation handler faster on non ""/~*"" requests "	r94855
----------------------------
Because mod_imap's handler runs on every request in the default configuration, rearrange the code to keep it from allocating a few pages worth of local variables on the stack on requests that don't use imagemaps 	r94849
----------------------------
Don't install *.in config files. 	r94847
----------------------------
"get closer to having apxs work from a binary distribution we need to copy libtool and instdso.sh verbatim, and we need to edit config_vars.mk and apxs still broken: ""httpd -l"" as invoked by apxs can fail since support libraries (apr, aprutil, etc.) are probably not findable "	r94817
----------------------------
"Fix suexec invocations from userdir - the ~ was not being prepended to the uid per our convention.  Therefore, bad things would happen (like we wouldn't cd to the right directory). Add a flag to the ap_unix_identity_t structure to indicate if we are in a userdir - if so, prefix the ~. (Modified by Justin, but Colm's patch pointed me in the right direction.) PR: 7810 Submitted by:	Colm <colmmacc@redbrick.dcu.ie> Reviewed by:	Justin Erenkrantz "	r94791
----------------------------
"Since UserDir is a raw argument, our config system allows it to be blank. To save us all the hassle, just flat out reject this silliness.  We could treat blank as ""."", but let the user shoot themselves in the foot explicitly (and don't give them any ideas on how to do it). PR: 8472 "	r94790
----------------------------
Add a configuration block for the OS/2 MPM. 	r94780
----------------------------
Fix perchild MPM so that it can be configured with the move to the experimental directory.  Fix perchild MPM so that it uses ap_gname2id for groups instead of ap_uname2id. Submitted by: Scott Lamb <slamb@slamb.org> 	r94760
----------------------------
AcceptPathInfo was totally backwards... it would reject when set to on and by default and accept when set to off for the default handler, and would PR: 8234 	reject
----------------------------
Moved the call to apr_mmap_dup outside the error branch so that it would actually get called. This fixes a core dump at init everytime you use the MMapFile directive. [Paul J. Reder] 	r94721
----------------------------
Trigger an error when a LoadModule directive attempts to load a module which is built-in.  This is a common error when switching from a DSO build to a static build. 	r94719
----------------------------
"Allow VPATH builds to succeed when configured from an empty directory. (Justin removed some unneeded changes in Makefile.in.) Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Justin Erenkrantz "	r94697
----------------------------
Fix subreqs with non-defined Content-Types being served improperly. If we do not know a C-T for a subreq, we *must* propogate that non-knowledge upwards to the main request. Previously, if you used a DirectoryIndex with a file without a C-T (say .shtml without AddType), the r->content_type will be kept as httpd/unix-directory when we promoted the subreq in mod_dir.  Since there would be no handler on this file, ap_invoke_handler (config.c:355) would set the handler to be httpd/unix-directory (which was the old C-T of the dir).  This would then trigger the handler to become httpd/unix-directory. mod_autoindex would then try to serve the request.  But, the filename was propogated upwards by mod_dir's DirectoryIndex via internal_fast_redirect - it would then return a 403 trying to generate a mod_autoindex page for a file. Now, we will use ap_default_type() which is correct. 	r94676
----------------------------
Merge in latest GNU config.guess and config.sub files.  Synchronize all config.guess/config.sub files to be identical.  Previously, we had three different versions of the guess files - now they are the same. I attempted to merge in ASF changes that were marked and still needed. Please verify that these work on your platform.  (Particular attention is required for the IBM platforms.) Part of PR 7818 stems from the fact that the bundled expat did not have an included config.guess/config.sub.  Therefore, it would take the config.guess from the system.  Icarus's autoconf/libtool is very old (2.13/1.3.5).  The machine that was used to roll 2.0.32 had a recent autoconf/libtool which explains the behavior that Sander saw in the PR.  Therefore, we now explicitly provide a config.guess/.sub for the bundled expat so that all of the versions are in sync.  This should minimize configuration problems. pcre was using a config.guess that was imported when Brian made the 3.9 import.  It did not have the Apache modifications, but seems to have had the Darwin changes.  Go figure.  Sync it up as well. PR: 7818 Obtained from: GNU FSF - ftp.gnu.org/gnu/config 	r94671
----------------------------
"Properly substitute sbindir as httpd's location in apachectl. We install $(PROGRAMS) into $(sbindir) not $(bindir), so this is correct. PR: 7840 Submitted by:	Andreas Hasenack <andreas@netbank.com.br> Reviewed by:	Justin Erenkrantz "	r94653
----------------------------
Flip the order.  If the user specifies ScriptInterpreterSource, either Registry or RegistryStrict, test the registry in preference over a shebang line.  This is how 1.3 behaved, and allows scripts with invalid shebang lines (straight from another box, for example) to run without modification. 	r94618
----------------------------
Proxy was bombing out every second keepalive request, caused by a stray CRLF before the second response's status line. Proxy now tries to read one more line if it encounters a CRLF where it expected a status. PR: 10010 Obtained from: Submitted by: Reviewed by: 	r94574
----------------------------
fix ProxyPass when frontend is https and backend is http 	r94515
----------------------------
"Pass the --includedir flag to the apr and apr-util configure calls. Submitted by:	Pier Fumagalli <pier@betaversion.org> Reviewed by:	Aaron Bannert "	r94513
----------------------------
"Allow us to override the default --libdir from the config.layout if it was specified to configure. Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Aaron Bannert "	r94511
----------------------------
"Add libdir entries to config.layout. Submitted by:	Pier Fumagalli <pier@betaversion.org> Reviewed by:	Aaron Bannert "	r94510
----------------------------
One for 2.0.34 - to fix the problem of utf-8 configuration files saved from MeSsed up editors that believe zero byte joiner lead bytes signify a utf-8 file.  Someone point me at an RFC ... gheesh. FWIW; fixes bugs report 10125 	r94446
----------------------------
"PR: Obtained from: Submitted by: Reviewed by: avoid the error_log message: [error] mod_ssl: Certificate Verification: Error ... if SSLProxyVerify is not configured or set to ""none"". the verify callback does not happen in the server context when SSLVerify is not configured or set to ""none"". "	r94444
----------------------------
Race condition one ... we were occasionally escaping all the way out to WSATerminate() before this thread picked up it's sleepy head to discover the world was gone beneath it on 1GHz+ CPU WinXP configurations. 	r94437
----------------------------
ignore generated file ap_config_layout.h 	r94435
----------------------------
fix SSL_X509_INFO_load_path so SSLProxyMachineCertificatePath works 	r94406
----------------------------
copy-n-pasto: ssl_cmd_SSLProxyMachineCertificatePath needs to set cert_path 	r94404
----------------------------
fix copy-n-pasto: ssl_cmd_SSLProxyCACertificatePath needs to use ssl_cmd_check_dir rather than ssl_cmd_check_file 	r94403
----------------------------
Win32: Change startup/shutdown message class to NOTICE. These messages should always be written to the error log regardless of the loglevel. 	r94386
----------------------------
"PR: Obtained from: Submitted by: Reviewed by:	Ryan Bloom this call breaks ssl proxy when the client is using keepalives. this function is also no longer needed with recent-ish filter changes. "	remove
----------------------------
Update the docs on the ScoreBoardFile directive for the new apr_shm.h API and the removal of the old SCOREBOARD_FILE stuff. 	r94370
----------------------------
pass sc to myCtxConfig macro 	r94337
----------------------------
change sc->server references to myCtxConfig, so proxy can use the verify callback. 	r94332
----------------------------
add myCtxConfig macro 	r94331
----------------------------
add SSLProxyEngine directive.  this was not required in the 1.x based mod_ssl because the SSL_CTX was created and configured for *every* startup time, which is much better for performance.  but we don't want to configure a proxy context for every vhost if it isn't going to be used, for the same reasons we don't create a server context for every vhost unless SSLEngine is on. 	request.
----------------------------
import ssl_proxy_enable in the post config phase, otherwise LoadModule order may leave us without the function. 	r94303
----------------------------
s/id/mode/ in ssl_cmd_SSLProxyVerify 	r94290
----------------------------
use ssl_cmd_verify_parse for SSLProxyVerify directive handler 	r94289
----------------------------
add ssl_config_server_new function to fold some duplication in server create/merge and to make sure merge config is fully inititialized 	r94280
----------------------------
inititialize and merge proxy config 	r94279
----------------------------
switch from SSLSrvConfigRec* to modssl_ctx_t* in the ssl_init_ctx* functions 	r94274
----------------------------
moving cfgMerge macros to ssl_engine_config.c, they are not used anywhere else 	r94271
----------------------------
breakup SSLSrvConfigRec in preparation for proxy support: + modssl_pk_server_t - certs/keys for the server + modssl_pk_proxy_t  - certs/keys for the proxy + modssl_auth_ctx_t  - stuff related to authentication that can also + modssl_ctx_t       - context that can be used by both server and proxy + SSLSrvConfigRec    - now contains original stuff specific to the 	r94267
----------------------------
already added configure check for SSL_set_cert_store 	r94265
----------------------------
de-hungarian-ize server config member names which are going to stay 	r94264
----------------------------
move server specific init config checks into ssl_init_check_server function (ssl_init_check_proxy will be different) 	r94250
----------------------------
"""new"" is a c++ keyword; s/new/mrg/g in config merge functions "	r94244
----------------------------
move warning about session cache not being configured to ssl_scache_init 	r94243
----------------------------
add modssl_dh_configure() function to fold some duplication in get_dh{512,1024} and provide toolkit compat for sslc 2.x 	r94225
----------------------------
add configure checks for ssl functions: -SSL_set_state: macro in OpenSSL, might be a function in a patched sslc -SSL_set_cert_store: patch submitted to OpenSSL, might be applied to OpenSSL or sslc 	r94223
----------------------------
configure already checks OpenSSL version so dont bother here 	r94193
----------------------------
Ensure that the build directory is created when using VPATH. Previously, configure would try to write config_vars.mk into build without ensuring that that directory existed first. 	r94188
----------------------------
constificationization of some char * config items 	r94177
----------------------------
performance enhancement: mod_ssl config directives that can have both a per-server and per-dir context were configuring the per-dir context for per-server commands.  this triggered ssl_hook_Access to always compare the per-server context against per-dir configs that were exactly the same. 	r94176
----------------------------
Integrate rbb's forward port of -k config into the -h(elp), and reorder some directives in the -h(elp) so they 'flow'. 	r94160
----------------------------
Port the -k config option to Apache 2.0.  This allows users to reconfigure their service after it has been installed. 	r94113
----------------------------
"Added exp_foo and rel_foo variables to config_vars.mk for all Apache and Autoconf path variables (like --sysconfdir, --sbindir, etc). exp_foo is the ""expanded"" version, which means that all internal variable references have been interpolated.  rel_foo is the same as $exp_foo, only relative to $prefix if they share a common path. This will be used in apxs.in and apachectl.in to allow Apache installs to be relocated as long as the same relative directory structure remains. Currently this is only possible if you use the Apache layout, but not with other layouts or any overridden --foodir paths. "	r94108
----------------------------
Fold the compiled-in knowledge of the allowable AcceptMutex settings into its help entry. Requires the use of a extern string rather than a function call for the initialization to be valid in the macro (Thx to Jeff!). In the meantime, bump down the error logging until we deal with true default and configured setting information ala 1.3. PR: Obtained from: Submitted by: Reviewed by: 	r94062
----------------------------
Fix for some damage that I did to configure.in while merging the latest version of PCRE 	r94047
----------------------------
Final commit to add ap_rset_content_type accessor. Add AddOutputFiltersbyType filters during call to ap_rset_content_type() 	r94028
----------------------------
Eliminate potential ap_server_root_relative segfaults, with the input of Jeff Trawick's style changes to the first patches.  Doesn't include the fixes to ssl [more complex], and we won't trap errors that involve ap_serverroot, since we presume that was normalized on the way in. Therefore, testing ap_server_root_relative(DEFAULT_FOO) cases should never become necessary. 	r93965
----------------------------
"PR: Obtained from: Submitted by:   Madhusudan Mathihalli <madhusudan_mathihalli@hp.com> Reviewed by:	dougm implement SSLSessionCache shmht and shmcb based on apr_rmm and apr_shm "	r93942
----------------------------
deal with the rename of kill_after_timeout to APR_KILL_AFTER_TIMEOUT 	r93940
----------------------------
Fix a comment about the /<target> appended to config.layout variables postpended with a '+' character. We don't currently support --target (and as Thom pointed out, --target means something completely different to Autoconf). Also change the default for '+' replacement to 'apache2' so 1.3 and 2.0 can coexist on such distributions. 	r93936
----------------------------
My [sixth?] major revamp of service.c.  Traded an event for a mutex to the service_init completion, expanded timeouts, moved SERVICE_STOPPED message posting to the main thread since sometimes, in odd cirumstances, our SCM thread wasn't resumed prior to termination, and ripped the code for the stderr logs to use nt_eventlog.c instead.  And generally tried to make the code just a little bit more grokable [as if such a thing is really possible.] 	r93928
----------------------------
"Now that we test ownership of the listeners in listen.c, -k ""start"" can no longer hang on to the listeners after it checks that they are free.  Also, we cannot be checking listeners if we are using -k ""config"" to alter the service config, since the service might be running as we try this, and we cannot check the listeners in -k ""restart"", since we are pretty certain they are owned by the running service we are about to try restarting.. "	r93926
----------------------------
Fix apxs -g handling. Move config_vars.mk from the top build directory to the build directory. Get build/rules.mk cleaned up for distclean/extraclean. PR:     10163 	r93923
----------------------------
SSL_SESSION_id2sz() is somewhat expensive, make sure we only call it if SSLLogLevel >= info 	r93898
----------------------------
it is not required that temporary keys survive restarts, since they are generated and destroyed on every restart. so get rid of SSLModConfigRec.tTmpKeys table and mess that was managing it. 	r93881
----------------------------
moving SSLVerifyClient directive parsing into ssl_cmd_verify_parse function, which can also be used for SSLProxyVerify directive. dropping support for undocumented integer form of levels (0..3) 	r93870
----------------------------
Stop copying APR's libtool.  And pass enough parameters to apr's subconfig so that it can figure out where we would like libtool to be installed. 	r93816
----------------------------
New directive ProxyIOBufferSize. Sets the size of the buffer used when reading from a remote HTTP server in proxy. Modify receive/send loop in proxy_http and proxy_ftp so that should it be necessary, the remote server socket is closed before transmitting the last buffer (set by ProxyIOBufferSize) to the client. This prevents the backend server from being forced to hang around while the last few bytes are transmitted to a slow client. Fix the case where no error checking was performed on the final brigade in the loop. PR: Obtained from: Submitted by: Reviewed by: 	r93811
----------------------------
"Scrap CacheMaxExpireMin and CacheDefaultExpireMin. Change CacheMaxExpire and CacheDefaultExpire to use seconds rather than hours. PR: Obtained from: Submitted by: Reviewed by:	Bill Stoddard "	r93810
----------------------------
"Fix a bug that would cause SERVER_CONFIG_FILE to be an absolute path, which would prevent the relocation of an httpd binary without having to specify the -f flag. Now it will be relative to the $prefix if $sysconfdir shares a common prefix, or it will remain relative to $sysconfdir. Submitted by:	Thom May <thom@planetarytramp.net>, Aaron Bannert "	r93798
----------------------------
33 has come and gone. Add note about the fact that we aren't doing config substitution properly. This is a showstopper, IMHO. 	r93794
----------------------------
new directive SSIUndefinedEcho. this allows webadmins to change the default '(none)' to something a bit more presentable (eg <!-- undef -->) PR: Obtained from: Rex (the hack he had to fix this was so ugly I was forced to do this) Submitted by: Reviewed by: 	r93788
----------------------------
implement a common function for getting a socket and trying to connect to the target host; use that common function for proxy HTTP and proxy CONNECT In that new function, fix this problem: An example host is www.ipv6.org.  The first address I get back is an IPv6 address, but my machine may not be configured to allow an AF_INET6 socket. Before the fix: The apr_socket() failure was fatal. After the fix:  When apr_socket() fails, we go to the next address from (an unrelated fix in this commit was to pass a server_rec in a broken ap_log_error() call) 	r93787
----------------------------
Need to check if the userdir is absolute before it gets split apart by ap_getword() Also fixed up the !HAVE_DRIVE_LETTERS case (such as NetWare) where the volume delimiter ( colon ) is not in an absolute position. 	r93780
----------------------------
Mention adding a missing errordir entry in the Debian config.layout. 	r93765
----------------------------
Add a missing errordir entry in the Debian config.layout. PR: 10067 Obtained from:  Dirk-Jan Faber <dirk-jan@selwerd.nl> 	r93762
----------------------------
"Fix a problem in the new --enable-layout functionality where it wouldn't allow overrides from variables like --prefix, --bindir, etc. Obtained from:  Partly from an autoconf-generated configure script. Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Aaron Bannert, Justin Erenkrantz "	r93738
----------------------------
fix <Directory ~ blah> containers. also, eradicate a few nefarious tabs which were found lurking in the vicinity. Submitted by:  Rob Simonson <simo@us.ibm.com> Reviewed by:   Greg Ames 	r93711
----------------------------
Added example of denying, or allowing, particular users to have UserDir directories. In a discussion on IRC, it was requested that an explicit example of this configuration be provided in the documentation. 	r93668
----------------------------
various SSLCACertificatePath fixes: - return value from apr_dir_read() was checking != APR_SUCCESS rather than == APR_SUCCESS, so no certs were ever loaded. - wasn't checking return value of apr_dir_open(), now log an error and ssl_die() on failure. - don't bother trying to load directories 	r93634
----------------------------
"No longer assume SERVER_CONFIG_FILE is in the ""conf"" directory. Instead look for it in the $sysconfdir. This required the use of a new m4 function from APR that retrieves the fully ""expanded"", or recursively interpolated, value of the $sysconfdir variable. "	r93622
----------------------------
switch SSLModConfigRec.tPublicCert to ssl_asn1_table api to prevent leakage on restarts. 	r93615
----------------------------
switch SSLModConfigRec.tPrivateKey to ssl_asn1_table api to prevent leakage on restarts. 	r93614
----------------------------
"Set defaults for non-autoconf path variables. Also export a couple variables that for whatever reason weren't being placed into config_vars.mk. Warning: This commit alters the ""default"" layout (ie. when no --enable-layout is specified). The most notable change will be htdocs in $prefix/share/htdocs, which works with the autoconf defaults, but may not be what we want. This will require more work. "	r93605
----------------------------
Add the ProxyRemoteMatch directive to the mod_proxy code. Doccos to be done soon 	r93597
----------------------------
changing mod_ssl to do a full startup/teardown on each restart rather than hack to only read passphrase on 1st round startup.  this change: - fixes current segv on restarts (SHARED_MODULE is not defined) - allows LoadModule ssl_module to be added to httpd.conf on restart (was core dumping previously) - allows certs/keys to be changed on restart provided key is not encrypted or SSLPassPhraseDialog is exec.  if key is encrypted and SSLPassPhraseDialog is builtin, existing private keys will be reused on restart (which happens currently for any type of key/dialog). note: mod_ssl currently leaks on restart; leaks more with this change. 	r93585
----------------------------
"fix some problems with variables in config_vars.mk Submitted by:	Aaron Bannert Tested by:	Jeff Trawick "	r93581
----------------------------
need to copy mod_log_config over for custom-loggers Obtained from: Steve Linde 	r93541
----------------------------
Convert mod_auth_digest to use the new apr_global_mutex_t type. Added some comments that will help us make this more portable. tmpnam() is not portable to platforms that will not inhereit the process, so we need to pull the lock filename from somewhere shared, like a configuration directive. 	r93533
----------------------------
Remember AddOutputFilterByType. 	r93517
----------------------------
fix a broken link to the SetOutputFilter description 	r93509
----------------------------
Add IPv6 notes to the documentation for the NameVirtualHost directive. 	r93495
----------------------------
Describe IPv6 syntax for Listen, Allow from, and <VirtualHost >. 	r93491
----------------------------
Introduce AddOutputFilterByType directive. AddOutputFilterByType DEFLATE text/html (I will add docco soon, I promise.  If someone beats me to it, cool...) 	r93490
----------------------------
"Remove and demote two showstoppers: - The support binaries now have an option for static builds at configure-time.  However, it is questioned whether httpd can even be built statically.  In point of fact, this exact item has been addressed, but httpd is still a bit murky so add a ""nice to have"" item. - The worker MPM showstopper has been questioned on-list and no justification or further information was provided.  No one else is able to reproduce this case, therefore it is now demoted to a ""nice to have."" It is not fair to us to have a showstopper when there is no reproduction or explanation present.  When information is provided on how to independently reproduce this case, this issue can be promoted.  But, no one else has reported problems with CGI and worker. "	r93455
----------------------------
Change the verbage on the ScoreBoardFile in our default configs. Also change the default to be commented out (unspecified) so we get anonymous shared memory by default. 	r93437
----------------------------
Fix a nice-to-have non-showstopper -- change the semantics for how we create a scoreboard from the ScoreBoardFile directive. 	r93436
----------------------------
"Implement new ScoreBoardFile directive logic. This affects how we create the scoreboard's shared memory segment. We now have the best of both worlds: if config specifies ScoreBoardFile create name-based shared memory, errors are fatal else /* we get to choose */ create anonymous shared memory if ENOTIMPL else This gives us the flexibility to have anonymous shared memory (on platforms that support it) as well as name-based shared memory when third-party programs want access to our scoreboard. The ap_scoreboard_fname static variable is now owned by the scoreboard.c file, and no longer by the MPMs. The MPMs MUST NOT set ap_scoreboard_fname to a default, since that will override the default creation logic and only allow name-based segments. Submitted by:	Aaron Bannert Reviewed by:	Justin Erenkrantz "	r93434
----------------------------
Fix ap_directory_walk() per-dir merge bug seen when no <Directory /> is present. showstoppers-- Kudos to Jeff for finding it. Kudos to BrianP for leading us in the right direction. Kudos to OtherBill for pointing out the right way to fix this. 	r93425
----------------------------
"Just toss these debug messages since so many people use httpd with LogLevel 'debug' and complain if they see anything that says ""error"" in it.  This case isn't even interesting unless you are hard-core. "	r93422
----------------------------
Change httpd.conf default UseCanonicalName to off to make the server more idiot proof. Also, move UseCanonicalName to directly under ServerName to make the connection clearer, and clean up the comments. I removed the http://123.123.123.231/ example, because it just makes it too tempting for people to use ServerName http://123.23.23.23/ 	r93396
----------------------------
These files cannot be distributed at present - Justin, update your RC.32 Win32 is not escaping or rejecting ANY hazerdous shell command strings in Apache 2.0 at present.  These would include the pipe character (|) which allows the user to construct malicious request strings. This needs consideration in code and configuration before we reintroduce a batch-file based example. Reported by: Ory Segal <ORY.SEGAL@SANCTUMINC.COM>  13 Feb 2002 	r93393
----------------------------
Address the issue raised on list that users with a LanguagePriority directive alone expect 'ForceLanguagePriority Prefer' behavior even if that directive is omitted. 	r93383
----------------------------
What happened?  0.9.6b built just dandy without the flags... 0.9.6c won't build for jack without these changes.  Of course they don't harm 0.9.6b builders either, unless they are outside of the states/EU/AU and find themselves free to ignore IP considerations. I'd really like to know _why_ 0.9.6c doesn't configure itself rationally. 	r93381
----------------------------
Clarify what <IfModule> means in the world of mod_so. PR: 9787 	r93372
----------------------------
Get rid of the DAVParam support. That was a concept to help out mod_dav providers in the 1.0.x series. Nowadays, the providers are full-fledged Apache modules and can define their own directives and set up per-server and per-directory parameters. (for example, mod_dav_fs and the DAVLockDB directive) 	r93348
----------------------------
Document the new default behavior for ServerName and improve the readability a little. 	r93316
----------------------------
Add the FileETag description 	r93307
----------------------------
Be a bit more sane with regard to CanonicalNames.  If the user has specified they want to use the CanonicalName, but they have not configured a port with the ServerName, then use the same port that the original request used. Submitted by:   Ryan Bloom and Ken Coar 	r93296
----------------------------
Tone down the logging levels for these two messages from ERROR to NOTICE. It's something to note, but it isn't an error worthy of logging by default. (Also always log any status values in read_request_line() - incl. timeouts.) 	r93271
----------------------------
Change the 'we turned /foo into http://host/foo' log message to DEBUG; no reason to clutter people's log files with this when it's supported behaviour.  Of course, they can find out about the performance impact by LogLeveling Debug. :-) 	r93251
----------------------------
add a optional function ap_cache_generate_key which allows a 3rd party module to generate the key name based on the request_rec. the idea here is for it to also be able to mess with expiry times and cachability add another option.. CacheIgnoreCacheControl. this ignores a 'incoming request's attempts to get a fresh copy. Mainly I see this as being usefull in r-proxy's 	r93242
----------------------------
Get AuthDBMType into the directives index. 	r93238
----------------------------
"suexec: Allow HTTPS and SSL_* environment variables to be passed through to CGI scripts. PR: 9163 Submitted by:	Brian Reid <breid@customlogic.com>, Zvi Har'El <rl@math.technion.ac.il> Reviewed by:	Joshua Slive, Lars Eilebrecht, Martin Kraemer "	r93223
----------------------------
CacheRoot takes an argument. Patch submitted by: Joe Norton <norton@alum.mit.edu> 	r93218
----------------------------
Okay with the configurability. Not okay with the two parents idea. 	r93200
----------------------------
I was leaning toward the configurable flavor, but OtherBill convinced me we should be more concerned with keeping the parent rock solid than adding extra layers to protect the children from a broken parent. 	r93191
----------------------------
If the RedirectMatch target is an abs_path, make it an absoluteURI 	r93143
----------------------------
Fix RedirectMatch so it won't emit invalid Location fields. 	r93137
----------------------------
add a ProxyTimeout directive 	r93117
----------------------------
"new directive 'ProxyPreserveHost'  which allows the incoming host line to be sent to the proxied server. Submitted by:	g.russell@ieee.org (1.3 version) Reviewed by:	Ian Holsman/Graham Legget/Chuck Murcko "	r93089
----------------------------
This patch restores most of Ryan's patch (11/12/2001) to remove the client_socket from the conn_rec.  Diffs from Ryan's patch include: - rename the create_connection hook to install_transport_filters - move the point of invocation of the hook till after the call to after ap_update_vhost_given_ip to enable the hook to use vhost config info in its decision making. 	r93087
----------------------------
"configuration change. allow a '!' directive to stop proxying these requests eg. ProxyPass /services/images/     ! ProxyPass /services/            http://service-machine/services/ which will stop requests to /services/images/ from being proxied Submitted by:	Jukka Pihl <jukka.pihl@entirem.com> Reviewed by:	Ian Holsman, Graham Legget, Chuck Murcko "	r93086
----------------------------
For NoProxy connections (when no backend->connection is needed), a NULL pointer would be dereferenced. Check it more thoroughly. 	r93077
----------------------------
"ScriptAlias requires mod_cgi Submitted by:	TD - Sales International Holland B.V. <td@salesint.com> "	r93076
----------------------------
Take advantage of the new pre_config return value when apr_proc_detach fails. I'll be making some changes to apr_proc_detach, and it will be nice to be able to report runtime errors. Tested on worker but the code changes are identical on other MPMs. 	r93069
----------------------------
I think this was supposed to have been bumped a couple times since the 14th, and was perhaps forgotten about? In any case, it needs to be bumped now -- pre_config hook return type has changed. 	r93065
----------------------------
Mention the pre_config prototype change, and fix some grammar. 	r93064
----------------------------
The pre_config hook now takes a return value. This allows modules to cause the server to bail out under error conditions. 	r93063
----------------------------
Shortcut where the resource has no language [discovered with no DefaultLanguage in cgi-bin, resolving Greg Ames' observations, we had a lurking segfault.] This begs the question, what exactly did the fn do with no language in terms of serving content back in 1.3.  Should be reviewed. 	r93046
----------------------------
I haven't created the optional function to specify the cache_key yet, That will come after this patch. ok.. brief summary of whats changed * new Optional Directives * CacheMemEntrySize -- max size of a individual entry in memory cache * CacheIgnoreNoLastMod - so we can cache mod-included files * it tries to figure out the size of the request based on buckets if the content-length header isn't set * mem_cache now caches the subprocess_env & notes tables * the CACHE_IN/OUT/CONDITIONAL run at FTYPE_CONTENT+1, so that all other content filters run BEFORE the cache in. note: the code is still experimental, and we need a bit more work mainly... * garbage collection * cache stats/reporting * manual removal of a key. 	r93030
----------------------------
Turn the log verbosity WAY down by not logging TIMEUP and EOF errors in timeouts. 	read_request_line
----------------------------
Enable the BrowserMatch for Microsoft's DAV client -- we know it is broken. Add a match for the WebDrive client. It is similarly broken. Sync up the NetWare and Windows .conf files a bit. Submitted by: Sander Striker <striker@apache.org>, Greg Stein 	r93013
----------------------------
Remove mod_auth_db since we've received enough votes (Justin, Ian, and Lars) and ample warning has been posted to dev@httpd. mod_auth_dbm should be able to take over all functionality of mod_auth_db with the AuthDBMType directive. 	r93010
----------------------------
"Currently pcre/config.h and pcre/internal.h are getting installed - it seems they aren't used, and adding a rogue config.h into the include path can cause problems for a module which picks it up. (Better late than never -- this patch was submitted Fri, 7 Dec 2001.) Submitted by:	Joe Orton <joe@manyfish.co.uk> Reviewed by:	Aaron Bannert "	r92979
----------------------------
Although this patch is technically correct, I'm not happy with the way it gets things done. OTOH, it is a simple enough change to get things working correctly for now. I will come up with the right way to do this in the next couple days. This patch re-enables the use of anonymous shared memory in the scoreboard on platforms that have it. 	r92978
----------------------------
Submitted by: Daniel Lopez LimitXMLRequestBody directive 	r92959
----------------------------
Make sure we use the same version of Make for building suexec as we do for building the rest of the package. 	r92906
----------------------------
Allow the user to get detailed debugging information without a full recompile [absolutely necessary on Win32 and other platforms that really don't support administrator-compilation.] -e level  follows the LogLevel options. The only question, should -e override the compiled-in default for the creation of the server_rec?  No strong feeling either way, here. 	r92891
----------------------------
Fix a problem in the parsing of the <Proxy foo> directive. 	r92882
----------------------------
allow mod_auth_digest to configure with --srcdir (added same include path as modules/mappers/config9.m4) PR: Obtained from: Submitted by: Reviewed by: 	r92880
----------------------------
Bring forward the FileETag directive enhancement from 1.3.23-dev. (Passes all 61 of the apache/etags.t test.)  Bump MMN due to change to core_dir_config structure (new fields at end). 	r92830
----------------------------
Fix a segfault in mod_rewrite's logging code caused by passing the wrong config to ap_get_remote_host(). 	r92827
----------------------------
Some servername goodness (well, if you call 'localhost' good, I don't.) Add to that some nits in the overall comments, and drop all the bitty copy modules/somemod/*.h include/ fooness, since we need the various modules to deposit their droppings into the build tree install/ dir just to compile ourselves. 	r92819
----------------------------
set a default port. configurable via INSTPORT 	r92814
----------------------------
Once again, try to bring the world into sync.  Someday soon, we need to generate this and Netware's from -std using awk.  It really would make more sense to strip out the appropriate directives as we build, instead of 'toggling' the mpm with <IfModule > (at least, as an option during build.)  But that requires an un-nested syntax such as <IfModule module module> or <IfNotModule module module> that would be simpler to parse in awk.  Our nested IfModules make this quite tricky. The better final solution is possibly to add things like HAS_SCOREBOARD to the 'build-in' defines, therefore assuring a simple test for any mpm architecture. 	r92813
----------------------------
"mod_ssl adjustments to help with using toolkits other than OpenSSL: Use SSL functions/macros instead of directly dereferencing SSL structures wherever possible. Add type-casts for the cases where functions return a generic pointer. Add $SSL/include to configure search path. PR: Obtained from: Submitted by:	Madhusudan Mathihalli <madhusudan_mathihalli@hp.com> Reviewed by:	dougm "	r92800
----------------------------
get SSLRandomSeed exec: working by passing the proper arguments to apr_proc_create() 	r92789
----------------------------
get SSLPassPhraseDialog exec: working by passing the proper arguments to apr_proc_create() PR: Obtained from: Submitted by: Reviewed by: 	r92786
----------------------------
This small patch modifies the log's to use plog instead of pconf. Basically pconf is cleared at different times from plog, and this has the effect of leaving stderr closed when going into the next stage of the config. This also had the effect of allowing FreeBSD with threads to create a pipe with stderr's fd at one end, and this In addition, move the clearing of plog from main.c to core.c where it seems more appropriate. This solves the first and main problem that FreeBSD has with the threaded MPM's. 	resulted
----------------------------
need to use $(top_srcdir) when installing build/instdso.sh else make install does not work when when configured with a --srcdir PR: Obtained from: Submitted by: Reviewed by: 	r92753
----------------------------
"Fix a typo in mod_deflate's m4 config section. Submitted by:	albert chin (china@thewrittenword.com) Reviewed by:	Justin Erenkrantz "	r92743
----------------------------
Fix seg fault in HTTP_IN when trying to handle the LimitRequestBody directive when reading a proxy response. We should bypass LimitRequestBody activities when handling a response from the proxied server. I don't think this will circumvent requestbody checking on a large request coming into the server that is destined to be proxied. (not tested though). 	r92722
----------------------------
OS/2: Allow but ignore unix config directives so the default config files don't have to be munged further. 	r92713
----------------------------
Fix LimitRequestBody directive by moving the relevant code from ap_*_client_block to ap_http_filter (aka HTTP_IN).  This is the only appropriate place for limit checking to occur (otherwise, chunked input is not correctly limited). Also changed the type of limit_req_body to apr_off_t to match the other types inside of HTTP_IN.  Also made the strtol call for limit_req_body a bit more robust. 	r92700
----------------------------
"Generalized the recent prep_walk_cache optimizations to allow other modules to register ""notes"" within the array of working data in the core_request_config "	r92697
----------------------------
Thanks Mr. Trawick, backtraces can be very enlightening. This fixes two bugs, the segfault when researching index numbers, and another.  We don't hint anywhere that LanguagePriority is a cumulative setting, in fact the syntax doesn't suggest so either. Merges are always slow, there is no reason to make this even slower. So the patch has the LanguagePriority directive override any existing LanguagePriority list from an earlier container. 	r92695
----------------------------
HostNameLookups -> HostnameLookups PR: Obtained from: Submitted by: Reviewed by: 	r92675
----------------------------
Cleanup the ForceLanguagePriority docs. 	r92667
----------------------------
A little cleanup on the AuthDBMType Directive. 	r92665
----------------------------
OS/2: Supply the configured libraries to the linker when building loadable modules. This allows things like mod_deflate to build (needs -lz). 	r92663
----------------------------
Update OS/2 MPM to allow for run-time configurable scoreboard size. 	r92662
----------------------------
document SSIErrorMsg & SSITimeFmt directives 	r92659
----------------------------
Introduce the ForceLanguagePriority options; Prefer will circumvent a Multiple Choices by electing the first matching language from the LanaguagePriority list. Fallback will circumvent a None Acceptable by electing the first language found from the LanaguagePriority list. This breaks [expectedly] the negotiation tests.  They need review. My test results will be posted to dev. 	r92655
----------------------------
Fix to make xbithack work again 	r92652
----------------------------
Improvements suggested by Brian Pane, first assure all OS's get to deal with handler 'server-parsed', do the xbithack bit tests before testing it's string values (protected against a null point). And make it [perhaps] more legible. 	r92642
----------------------------
make note of mod_cgid-suexec fix 	r92636
----------------------------
Two fixes in one: - No longer calls exit() when the secret fails to initialize, instead post_config just returns !OK and lets the server bail out. - No longer fails on DSOs -- since we load-unload-reload DSOs we lose any static memory that was initialized during the first load. This patch allows us to simply pass on the first call to post_config, and then do the initialization in the second call. Tested to work on Linux from an IE5.0 client. 	r92630
----------------------------
change ap_unix_create_privileged_process() to allocate enough space in the newargs array to allow for a null terminator.  This allows suexec and mod_cgid to work together reliably. Apparently, rounding up the size to a multiple of 8 bytes in apr_palloc hid the problem sometimes.  At other times, suexec would complain about a null command name. 	r92627
----------------------------
add a 'AuthDBMType' so that users can select what type of DBM they want to use to authenticate users. I think this removes a 'showstopper' (deprecating mod_auth_db) 	r92616
----------------------------
add ThreadLimit/ServerLimit to perchild 	r92583
----------------------------
SH_LDFLAGS wasn't getting evaluated properly when it included makefile variables but, we stopped needing SH_LDFLAGS in apxs on AIX since we switched to run-time linking and I never found out for sure that the use of SH_LDFLAGS actually helped BeOS or OS/390, so I'm yanking out the if/when we need such a thing in apxs, we'll have a new variable so we can distinguish between special flags needed for Apache core DSOs (which might have stuff specific to some Apache core DSO that was discovered during Apache configurat) vs. special flags needed by any DSO PR: Obtained from: Submitted by: Reviewed by: 	reference
----------------------------
Add some documentation on the ServerLimit and ThreadLimit directives. Both were added to mpm_common.html even though ThreadLimit is used only by worker at the moment.  It is expected that ThreadLimit will be supported by WinNT and perchild MPMs in the future. 	r92536
----------------------------
Update the AcceptPathInfo docs and add references from upgrading and mod_include docs. 	r92461
----------------------------
As suggested by Josh Slive, add the explicit 'default' to AcceptPathInfo. I'll leave docs up to him.  The conf becomes a quadstate (undef != default) but other than that, it should make things cleaner for the user. 	r92459
----------------------------
A little loopy commit.  Refer mod_cgid users to the mod_cgi docs for extra info, document the AcceptPathInfo impact in the PATH_INFO comments of mod_cgi, and document it's configuration in core. 	r92455
----------------------------
Apply the converse of the AcceptPathInfo patch for isapi's/cgi's. The default behavior remains, accept PATH_INFO, but it may be expressly revoked with AcceptPathInfo Off 	r92452
----------------------------
If dconf->accept_path_info is tristate, why not r->used_path_info? This patch allows us to force path_info off in mod_cgi[d] etc, patch forthcoming.  It also allows includes, php, etc to change the undefined value in the early handler or late fixup phases to Accept'ed. 	r92448
----------------------------
hack up core_dir_config so that server/core.c compiles again 	r92446
----------------------------
"Now all should be well.  AcceptPathInfo on will give us a document with path_info served from the core handler.  Any filters can then manipulate all the usual CGI envvars [as proven with this little excerpt with a <!--#printenv --> document... <FilesMatch "".*\.shtml.*""> </FilesMatch> a potentially questionable config, but effective. "	r92444
----------------------------
fix a problem with graceful restart.  If you look at daedalus early in the morning, you will usually see lots ( >50 ) of old generation processes happily serving requests with yesterday's config.  Late in the afternoon, they are usually gone due to MaxRequestsPerChild and perform_idle_server_maintenance. ap_mpm_pod_signal can time out during connect(), causing it to exit with an error.  If it was called by ap_mpm_pod_killpg during graceful restart, ap_mpm_pod_killpg will exit immediately.  This can cause us to not write enough characters to the pod to kill off all the old generation children. This fix decouples the loop which writes to the pod from the loop which generates dummy connect()s.  The connect()s aren't as important as writing to the pod when there is a steady stream of inbound connections. also, close the socket and destroy the temporary pool if the connect() fails. 	r92411
----------------------------
change binbuild.sh to use --enable-mods-shared=most.  This adds 13 modules to the build. Thanks again to Aaron for fixing this configure option. 	r92369
----------------------------
Update SSI docs to use AddOutputFilter in place of SetOutputFilter. 	r92349
----------------------------
Remove some comments from the errordocument and browsermatch sections. I like short config files. 	r92347
----------------------------
Config file updates.  Mostly just playing with comments, but a few functional changes: 1. Remove the directives in the document root <directory> section that are there to handle the index.html.var and put them in their normal place in the config file.  I see no reason to duplicate the directives and explanations. 2. Change from the funky FilesMatch/SetOutputFilter to AddOutputFilter for the SSI configuration. 	r92346
----------------------------
Resolved segfault in mod_isapi when configuring with ISAPICacheFile. PR: 8563, 8919 	r92301
----------------------------
get binbuild working when apr, apr-util, and expat are built shared in directories that are not well known to the loader. How it works: * libtool figures out the name of this system's library path environment variable (i.e. LD_LIBRARY_PATH, LIBPATH, DYLD_LIBRARY_PATH) at apr configure time (existing code) * save this variable name in SHLIBPATH_VAR in APRVARS * substitute this name when apachectl is created * uncomment the lines containing this variable during binbuild * install_bindist.sh updates the path to lib/ when the binary is installed (existing code) not done yet, but a good idea: * create a file or directory containing all environment variable settings for apachectl.  Others env vars need to be tweaked, at least on AIX and OS/390, so keeping them separate should reduce headaches long term. 	r92299
----------------------------
Fix prototype for post_config hook 	r92294
----------------------------
"Only let the ""suEXEC enabled"" message be printed once, even when we have a DSO that goes through the load-unload-load cycle. Suggested by:	Ryan Morgan <rmorgan@covalent.net>, Cliff Woolley "	r92256
----------------------------
"Add back in the ""suEXEC mechanism enabled (wrapper: /path/to/suexec)"" message that we had back in apache-1.3 and is still scattered throughout our docs. Unfortunately, when mod_suexec is a DSO we're going to get this thing twice in our logs. I believe as a side effect of the load-unload-load cycles of our DSOs we're losing the static data segment, which is where the ""didn't we already report this"" flag lives. "	r92255
----------------------------
avoid a call to X509_NAME_oneline() and ASN1_INTEGER_get() in ssl_callback_SSLVerify_CRL() unless SSLLogLevel >= info, otherwise the expense is unused. PR: Obtained from: Submitted by: Reviewed by: 	r92238
----------------------------
fix for last change that removed ssl_util_getmodconfig(): go back to using s->process->pool userdata, but just to store the global module config during startup so we only create _one_ SSLModConfigRec. (didn't realize this function was called in both ssl_init_Module and ssl_config_server_create) PR: Obtained from: Submitted by: Reviewed by: 	r92235
----------------------------
"ssl_util_getmodconfig() and ssl_util_getmodconfig_ssl() show up high in the gprof profile.  there's no need for the ""global"" SSLModConfigRec to live in the s->process->pool userdata table.  we now just point the SSLSrvConfigRec in each server_rec.module_config to the SSLModConfigRec so we can access it directly which is much faster. PR: Obtained from: Submitted by: Reviewed by: "	r92234
----------------------------
move srand() call from ssl_rand_choosenum() to ssl_init_Child() this was being called twice per-connection with 'SSLRandom connect builtin' configured (which is in the default config) this also gets rid of two time() syscalls per-connection PR: Obtained from: Submitted by: Reviewed by: 	r92232
----------------------------
call getpid() once at child init and save in the SSLModConfigRec to avoid getpid() calls at request time PR: Obtained from: Submitted by: Reviewed by: 	r92231
----------------------------
avoid calling ssl_util_vhostid() (and apr_sprintf underneath) at SSLSrvConfigRec. PR: Obtained from: Submitted by: Reviewed by: 	request
----------------------------
(core handles all timeouts) PR: Obtained from: Submitted by: Reviewed by: 	remove
----------------------------
Change the magic # as we have changed the conn_rec structure and have change the open_log and post_config hook function PR: Obtained from: Submitted by: Reviewed by: 	r92201
----------------------------
short-circuit out of xbithack_handler immediately if xbithack isn't enabled, and use strcmp instead of ap_strcmp_match for comparing against a non-wildcard pattern 	r92163
----------------------------
optimization: short-circuit out of the mod_actions handler if there are no actions defined in the config 	r92162
----------------------------
don't bother setting the ssl info callback unless SSLLogLevel >= info PR: Obtained from: Submitted by: Reviewed by: 	r92151
----------------------------
Fix post-config hook to return a int. I left the service start/stop/restart 'exits' in there, and changed the other ones to return HTTP_INTERNAL_SERVER_ERROR 	r92148
----------------------------
"Modify post_config hook so that it can return a error, causing the server not to start. previous method was to call exit(1) which would not fail gracefully PR: Obtained from: Submitted by: Reviewed by:	(Idea only Jeff Trawick) "	r92144
----------------------------
Mention the new --with-suexec-bin parameter. 	r92135
----------------------------
Allow SUEXEC_BIN to be defined by the configure script. 	r92134
----------------------------
Just some style changes from when I was working on the recent suexec patch. No more tabs, intended alignment remains. 	r92132
----------------------------
avoid a couple of calls to ssl_util_vhostid() and apr_psprintf() unless loglevel >= SSL_LOG_INFO PR: Obtained from: Submitted by: Reviewed by: 	r92122
----------------------------
optimize lookup of ssl-{unclean,accurate}-shutdown flags: - only look through the table once, rather than 2 apr_table_gets() - case-sensitive and use strcmp() as little as possible - only lookup once per-connection, as the flags will not change across keepalive requests PR: Obtained from: Submitted by: Reviewed by: 	r92121
----------------------------
two performance improvements: - switch from using r->notes to r->request_config - avoid a strcmp() when checking if val eq '!' PR: Obtained from: Submitted by: Reviewed by: 	r92120
----------------------------
get rid of 'apctx' table that used to live in SSL_get_app_data2(ssl) change app_data2 to be the request_rec itself. if something needs per-request context in the future, it can use r->request_config PR: Obtained from: Submitted by: Reviewed by: 	r92113
----------------------------
Bail out at configure time if an invalid MPM was specified. Submitted by: jean-frederic clere <jfrederic.clere@fujitsu-siemens.com> Reviewed by:  Jeff Trawick 	r92098
----------------------------
start moving c->notes usage to a new SSLConnRec structure hanging off of c->conn_config PR: Obtained from: Submitted by: Reviewed by: rbb, madhu 	r92093
----------------------------
when this module's resolver calls were apr-ized recently we removed the include of specific system header files; this left the opportunity for htons() to be undefined...  do something explicit for htons() so we don't have to worry about what apr_network_io.h brings with it 	r92091
----------------------------
Fix the timeout logic that I broke last week.  This adds a request level filter that sets the timeout on the socket that is connected to the client. Thanks Greg Stein for seeing this bug. 	r92073
----------------------------
"Prevent segv in ap_note_basic_auth_failure() when no AuthName is configured PR: Obtained from: Submitted by:	John Sterling <sterling@covalent.net> Reviewed by:	dougm "	r92072
----------------------------
Get IPv6 vhosts working (again ?). There were a couple of bogus IPv4-specific comparisons which prevented the data structures from being built correctly in ap_fini_vhost_config(). One of these (INADDR_ANY) can be easily rewritten to work with IPv6.  The other (DEFAULT_VHOST_ADDR) isn't necessary for IPv6.  Note that this is because we don't support the various flavors of _default_ that Apache-1.3+KAME-patch supports. PR:      8118 	r92054
----------------------------
"Fixed the behavior of the XBitHack directive. PR: 8804 Submitted by:	Taketo Kabe <kabe@sra-tohoku.co.jp>, Cliff Woolley "	r92040
----------------------------
Only do keepalives (and keep state on the connection record) if this request is the top-level page. Do not pass If-XXX-Since headers to the r-proxied server on a subrequest, and we can't handle a 30X response 	r92022
----------------------------
ProxyPass wasn't sending the right URL through to the backend server 	r92021
----------------------------
Add some runtime configuration variable for the beos mpm. 	r91977
----------------------------
Pull lingering close out of the pool cleanup phase.  This was causing too many bugs.  Instead, it is called where it used to be called.  I have abstracted some of the logic out of the lingering close so that it gets the socket from the connection using the core's conn_config vector.  This is in anticipation of a change to use a hook for the lingering close, which I hope to do soon. 	r91968
----------------------------
Apache for NetWare configuration and build documentation 	r91956
----------------------------
Get the proxy module compiling again.  This is a hack to get past the current compiler errors.  Basically, the core now puts the socket in the conn_rec->conn_config vector.  The proxy grabs that socket and uses it where it used to use the client_socket field from the conn_rec. Long-term, all of the direct socket communication needs to be removed, and this should go through a filter stack.  Short-term, this gets the proxy working again. I have tested http and connect, but I haven't looked at the FTP proxy, although it does compile now. 	r91952
----------------------------
Allow modules that add sockets to the ap_listeners list to define the function that should be used to accept on that socket.  Each MPM can define their own function to use for the accept function with the MPM_ACCEPT_FUNC macro.  This also abstracts out all of the Unix accept error handling logic, which has become out of synch across Unix MPMs. The code flow is much easier now for different transports: 1)  During pre-config, post-config or while parsing the config 2)  MPMs find the correct listener, and call the accept function 3)  That accept function returns a void pointer, which is passed 4)  create_connection adds the correct low-level filters. 	r91916
----------------------------
Fixed the LoadModule statements to fit the 8.3 and NLM extension 	requirement
----------------------------
"Fix a bug which would cause the response headers to be omitted when sending a negotiated ErrorDocument because the required filters were attached to the wrong request_rec. Submitted by:	John Sterling <sterling@covalent.net> Reviewed by:	Justin Erenkrantz, Cliff Woolley "	r91900
----------------------------
Really reset the MaxClients value in worker when the configured value is not a multiple of the number of threads per child.  We said we did previously but we forgot to. 	r91880
----------------------------
Add example for AllAltByType, AddAltByEncoding 	r91848
----------------------------
Added examples for AddAlt 	r91847
----------------------------
If shared modules are requested and mod_so is not available, produce a fatal config-time error. 	r91844
----------------------------
Port->ServerName hint 	r91801
----------------------------
"When no port is given in a ""ServerName host"" directive, the server_rec->port is now set to zero, not 80. That allows for SSL/plain, and depending also on the current setting of UseCanonicalName). This change makes redirections work, even with https:// connections. [Martin Kraemer] "	run-time
----------------------------
"Get rid of ""You configured HTTPS(443) on the standard HTTP(80) port!"" message. Submitted by: Madhu Mathihalli "	r91794
----------------------------
"Allow apachectl to support mod_ssl's <IfDefine SSL> tags which the group decided to keep. Obtained from:	mod_ssl 2.x by RSE Submitted by:	Madhu Mathihalli "	r91788
----------------------------
Fix so that errordocument works when a error gets returned from the proxy. Problem was ErrorHandler thought it was in some kind of recursion and couldn't find the custom error document Obtained from: Jin Hong <jinh@cnet.com> Submitted by: Reviewed by:   Ian Holsman 	r91757
----------------------------
Forces suexec to be compiled statically. This is necessary since it is difficult and sometimes impossible to relocate executables that are both setuid and dependent on dynamically loaded libraries. (that is: setuid binaries ignore LD_* environment variables). 	r91736
----------------------------
"fix eval of vars incase string has quotes example: CFLAGS = -DSUEXEC_BIN='""bin/suexec"" PR: Obtained from: Submitted by: Reviewed by: "	r91733
----------------------------
Introduce an Apache mod_ssl initial configuration template (ssl.conf, generated from ssl-std.conf).  [Ralf S. Engelschall] Revised Cliff's intro paragraph to point folks at docs until docs are provided.  [Will Rowe] 	r91707
----------------------------
make sure that the HTTP_IN filter is in place across internal redirects. Without this, we see an extra socket read + timeout on POSTs.  If the client sends in another request, we loop consuming memory. 	r91695
----------------------------
Fix RedirectMatch handling to properly handle URLs with host portions. Previously, we would segfault if no path is specified (case 1 below). We would also ignore any host and scheme portion of the URL (which is how we specify it on daedalus), so restore that capability. The query strings will still not be escaped (standards cops can determine if this is correct behavior). The following directives now work as expected: RedirectMatch /jakarta1(.*) http://jakarta.apache.org$1 RedirectMatch /jakarta2(.*) http://jakarta.apache.org/dist$1 RedirectMatch /jakarta3(.*) http://jakarta.apache.org/dist$1?bar=foo RedirectMatch /jakarta4(.*) http://jakarta.apache.org/dist$1?bar=foo#spaz 	r91672
----------------------------
"Two more mod_so configure-time fixes: - Treat --enable-so=yes as ""static"" (this includes --enable-so, etc). - An explicit --enable-so=shared issues an error. Put in a note about the last condition that I'm not as sure how to fix: If the user doesn't explicitly request mod_so, but instead gives a mass-enable parameter like --enable-modules=most or --enable-mods-shared=most then it is still possible to enable a bunch of modules while mod_so itself is not buildable (ie no APR_HAS_DSO or other build dependency failure). "	r91658
----------------------------
adjust for the change to SuExec's default install directory 	r91647
----------------------------
"Fix some bungling of the remote port in rfc1413.c so that IdentityCheck retrieves the proper user id instead of failing and thus always returning ""nobody."" Submitted by:    Dick Streefland <Dick.Streefland@xs4all.nl> Reviewed by:     Jeff Trawick "	r91632
----------------------------
Remerge proxy configuration.  Tally: of 9 votes; Majority for segregating mod_ssl Minority for segregating mod_proxy Also remove a lingering bit of ldap config from httpd-std.conf 	r91631
----------------------------
Perhaps fix the segfault... my earlier patch didn't since we already memcpy'ed the base into the merged per-dir config. This certainly cleans up that function though, and I hope increases it's legibility. 	r91624
----------------------------
Simplified mod_env's directives to behave as most directives are expected, in that UnsetEnv will not unset a SetEnv and PassEnv directive following that UnsetEnv within the same container. Also provides a runtime startup warning if a PassEnv configured environment value is undefined. 	r91611
----------------------------
Canonicalize all absolute <Directory > sections, not simply those that fail to end in a '/'.  Slash test is afterwords, once we've canonicalized any '\' and other aliases to '/'. 	r91608
----------------------------
Win32: ap_max_requests_per_child should not be a local static in mpm_winnt.c. This was preventing the MaxRequestsPerChild config directive from working properly. Handle MaxRequestsPerChild a bit more sanely.  When MaxRequestsPerChild is hit, the child signals an event that causes the main child thread to signal the parent to restart. 	r91578
----------------------------
"I certainly see the advantage of having SSL split out into another file. And indeed, that is the way that I would do it for my own server.  But the default config file is really there for beginners, not for advanced users.  Having multiple config files is bad for beginners because it makes it difficult to answer questions like ""where do I put this config directive?""  It also makes it more difficult to move a specific configuration from one server to another.  Finally, it is just overall more intimidating to be faced with a bunch of files to edit, rather than one file that controls everything. Having said that, it does look like the overall feeling is that at least SSL should be split out, and I won't object (strongly). "	r91530
----------------------------
Whoops ... invalid <Directory /> blocks for the new 'manual' tree location 	r91528
----------------------------
Not sure if the number of directives in a normal proxy setup would warrant needing a whole separate config file. I see such break outs as pretty much dependent on the number of lines it adds to httpd.conf... with SSL it makes sense. With proxy, well, I'm not sure. To be honest, though, breaking out both won't trouble me a bit, but this is my pref. PR: Obtained from: Submitted by: Reviewed by: 	r91527
----------------------------
The argument that this is a reversion to the httpd/access/srm multifile scenario is bogus, IMHO; the problem with those was that their purposes were not clear, nor were the orders of invocation.  Putting massive (or tiny but uncommon) chunks of easily self-contained special-function directives into separate files simplifies the basic configuration and doesn't revert to either of the trinity-file complaints, since these would need to be explicitly invoked with an Include directive. 	r91524
----------------------------
SSL config is large, complex & many users never need to see it at all. 	r91517
----------------------------
Remove the ldap config file.  This is now part of the ldap sub-project. 	r91511
----------------------------
The SSL config is huge, and has a lot of comments.  The proxy config is tiny, and very self-contained. 	r91499
----------------------------
"LoadFile(s) required by modules before they loaded weren't executed until server initialization.  This patch assures all such loaded files occur as they are parsed. Submitted by:	John Sterling <sterling@covalent.net> "	r91496
----------------------------
Exit when we can't listen on any of the configured ports.  This is the same behavior as 1.3, and it avoids having the MPMs to deal with bogus ap_listen_rec structures. This also backs out some circumventions I and Greg Ames had added to prefork; these are no longer necessary because of this change. 	r91494
----------------------------
"Fix a typo in the configure script.  This get AIX building cleanly. Submitted by:	Jens-Uwe Mager <jum@helios.de> Reviewed by:	Aaron Bannert <aaron@clove.org> and Ryan Bloom "	r91471
----------------------------
insure that a '*' in <VirtualHost *> or NameVirtualHost * matches all ports. The recent change to eliminate the Port directive exposed this problem. 	r91470
----------------------------
Clarify the new MultiviewsMatch directive.  I wanted this down on 'paper', even if it isn't proofread - please feel free to touch up. BTW - the new 'cleaned' formatting really stinks for hand-editing, the indentation really needs works.  Our per-directive meta-info is the ugliest aspect.  Would be good if the cleanup code could be customized to make the html not only clean, but legible ;) 	r91464
----------------------------
Fix the first bucket not getting chunked properly.  The reason was that we left the TE header in the output headers, so ap_set_keepalive didn't set r->chunked to 1.  So, ap_http_header_filter wouldn't insert CHUNK filter appropriately.  I have no clue how it chunked anything at all before this patch, but hey, it looks right now. Tested with Yahoo, Apple, apache.org, and /. /. is interesting in that it sends both Conn: Close and TE: chunked. 	r91463
----------------------------
TransferLog is (sort of) deprecated, and people never seem to realize that you can use this with CustomLog. 	r91421
----------------------------
"Ok, this formats a whole lot cleaner, and (I believe) makes a bit more sense.  Also provides a rundown of C89 common date format strings, for those users who don't have man strftime [It still points out that add'l format options may b available, see strftime.] Also, I believe _most_ installations require the TransferLog ""|bin/ path to rotatelogs, no?  Other question - how to reformat to html? Which utility does so? "	r91420
----------------------------
Close the mod_mime file extension matching issue by (as Ken Coar suggests) allowing users to continue to rely on the old 1.3 behavior of matching Any extensions, the strict behavior of matching NegotiatedOnly arguments, or including Handlers and Filters with the MultiviewsMatch directive for mod_negotiation control.  Unfortunately, the component matching occurs in mod_mime, so that's where this option must reside. 	r91419
----------------------------
Fix a typo in the configure script.  The argument is --enable-mods-shared, but we documented it as --enable-mod-shared. 	r91418
----------------------------
"Fixed the configure script to add a LoadModule directive to the default httpd.conf for any module that was compiled as a DSO. Submitted by:	Aaron Bannert <aaron@clove.org> "	r91415
----------------------------
Negotiation once allowed any file, of any filename extension, to be served.  The original patch to mod_negotation eliminated all extensions that did not reflect filename extensions associated with negotiation variables, unless the user expressly specified the file name with those filename extensions. This patch [attributed to me] was vetoed at its inception, it was provided as an alternative for those who had to have the current behavior. There is now another alternative patch that would introduce the MultiviewsMatch directive to mod_mime, for consideration and discussion. 	r91405
----------------------------
prefork: Don't segfault when we are able to listen on some but not all of the configured ports. Other points to ponder: why no log message for the segfault? similar change would seem to be needed in other MPMs...  we may be adding bogus entries to the poll set 	r91399
----------------------------
"Allow mod_so to be enabled by default even if no shared libraries from the core are requested. If you want to disable shared library support, pass --disable-so to configure (as always).  This will enforce that your httpd can NOT use shared libraries - which may be a good thing for you to do. Justin added the APR_HAS_DSO check per discussion on-list between Aaron, Ryan, Greg, and the rest of the peanut gallery.  This should allow us to not build mod_so when it isn't supported.  However, the rest of the configure scripts need to know that shared objects aren't supported and complain accordingly.  (sharedobjs = yes, error out?) Submitted by:	Aaron Bannert <aaron@clove.org> Reviewed by:	Justin Erenkrantz "	r91393
----------------------------
"allow file extentions specified by AddHandler, AddInputFilter, and AddOutputFilter to be ignored when matching the URI. Submitted by:	Bill Rowe "	r91376
----------------------------
Include paths must be relative to ServerRoot directive. 	r91304
----------------------------
Split the significant modules into segregated module configs. Probably should do the same with negotation/autoindex, since those are _so_ huge, but not this afternoon on my schedule. 	r91295
----------------------------
Cleanup the config (somewhat) so that win32 -could- actually run from the httpd-std.conf - but there are still some discrepancies to take back to the conference committee :) LDAP was voted some time ago into it's own httpd-ldap repository, and never built on Win32; No ldap config directives are present, so I've pulled it from both .conf files. It would be really nice if the proxy team would come in and clean out the deprecated/unsupported directives here. 	r91294
----------------------------
Remove the Port directive.  In it's place, the Listen directive is now a required directive, which tells Apache what port to listen on.  The ServerName directive has also been extended to accept an optional port.  If the port is specified to the ServerName, the server will report that port whenever it made to ease configuration errors that stem from having a Port directive, and a Listen directive.  In that situation, the server would only listen to the port specified by the Listen command, which caused a lot of confusion to users. 	reports
----------------------------
Fix --enable-mods-shared processing.  If most is specified, then all modules that can be compiled as shared modules are.  This was done by adding a module config specifier, static, which denotes that a module can not be compiled as a DSO. Submitted by:   Aaron Bannert <aaron@clove.org> 	r91262
----------------------------
Add a Listen directive to the default config file.  This allows us to later add another listen directive, in the default SSL config file, without stopping the server from listening on port 80.  The next step is to combine the Port and ServerName directives, so that Port can go away finally. 	r91260
----------------------------
Remove an old comment.  This config.m4 is numbered 9, which is the highest possible number, so it is garaunteed to be in the last batch.  Any module config.m4 should just use a number < 9 to ensure that this continues to work. 	r91259
----------------------------
Suexec is compiled to the builddir, not the source dir. PR: Obtained from: Submitted by: Reviewed by: 	r91246
----------------------------
Make doc changes to reflect change to ProxyErrorOverride PR: Obtained from: Submitted by: Reviewed by: 	r91202
----------------------------
Updated mod_proxy.html docs to include v2.0 configuration. PR: Obtained from: Submitted by: Reviewed by: 	r91198
----------------------------
"Fix the ""merge"" behaviour of the ProxyErrorOverride directive. PR: Obtained from: Submitted by: Reviewed by: "	r91172
----------------------------
Some style cleanups related to the ProxyErrorOverride function. PR: Obtained from: Submitted by: Reviewed by: 	r91171
----------------------------
Overhaul the compatibility with 1.3's subrequest and redirect processing. Eliminate URI-centric phases in ap_process_request_internal() for pure file subrequests (that don't correspond to URI space.)  translate_name hook and location_walks are skipped for these requests. Moves the reset of the per_dir_config out of directory_walk into the internal request processing code, so that resources with alternate map_to_storage requirements start with clean r->server->lookup_defaults. Optimizes out the authn/authz of effectively identical subreqests and redirects, as the sub_req_lookup calls once did.  Unlike 1.3, we copy r->user and r->ap_auth_type from main/prev for the request's reference. Stop copying the subrequest's r->chunked flag (Rbb assured me it looked bogus, chunking is on the parent request) and clean out other #if 0'ed cruft we don't need to refer back to anymore. 	r91169
----------------------------
Change ProxyHTTPOverrideReturnedErrors command to ProxyErrorOverride Docs update to follow. Submitted by: Ian Holsman <ianh@cnet.com> 	r91165
----------------------------
"Modify the standard config file to match to new semantics of MaxClients for the Worker MPM Submitted by:	 Aaron Bannert <aaron@clove.org> "	r91123
----------------------------
kill -l requires the short version of the signal (without SIG prefix). (apachectl graceful was broken.) The best way to do this is to change configure to internally represent the signal without the SIG prefix and prepend SIG before substitution (and export a version without the SIG prefix for apachectl). This highlights why we want to move apachectl's core functionality into httpd. 	r91102
----------------------------
AFAICT, we have never created server configs of _all_ modules for _all_ contexts, only when they come up (e.g., a directive of that particular module is provided) with the except that vhost containers complete the initialization of all modules.  I haven't stepped this, but it appears to be correct. This patch assures we can merge two incomplete directory sections together.  They will (obviously) need to be merged with a LHS default, e.g. a vhost's or main server's default dir config.  That's fine, this just allows either the LHS or RHS value to be null, and for merging to still succeed. Reported by:  Sander Striker <striker@apache.org> Additional Analysis:  Doug MacEachern 	r91098
----------------------------
There is still some stuff I'd like to do here, but I'll commit what I have for the moment.  I've done three things: 1. Emphasize that auth does not need to be in .htaccess. 2. Add detailed discussion of each of the auth directives (does this belong here?) 3. Remove the AuthGroupFile /dev/null which shouldn't be necessary. 	r91088
----------------------------
"The call to apr_explode_localtime() in mod_log_config is one of the more expensive operations in the httpd.  This patch attempts to reduce the overhead by caching the result for 15 seconds. Submitted by:	Brian Pane <bpane@pacbell.net> Reviewed by:	Cliff Woolley, Ryan Bloom, Dean Gaudet, Justin Erenkrantz "	r91083
----------------------------
Switch back to SIGUSR1 for graceful restarts on all platforms that support it.  This defines a symbol called AP_SIG_GRACEFUL in ap_config_auto.h which will have the appropriate signal value.  All direct references to SIGWINCH have been replaced with AP_SIG_GRACEFUL. On Linux 2.0, use SIGWINCH instead since SIGUSR1 is used by glibc 2.0's user-space threading library to control threads.  All later versions of Linux/glibc don't have this problem.  (Not to mention the security holes in older Linux versions which make it unsuitable for use as a web server.)  If your platform doesn't have SIGUSR1, use the appropriate mojo in configure to define what your graceful restart signal should be. In theory, a configure switch could be added to allow the admin to specify the appropriate signal that should be used.  This is left as an exercise to the reader for now. The docs need to be updated.  Since the signal is now configurable, just saying SIGUSR1 for graceful restart isn't completely true.  Also, the apachectl functionality needs to be moved into httpd - this is what Win32 does and it makes us consistent across platforms. Roy issued a veto against use of SIGWINCH by default, so this should 	resolve
----------------------------
Temporary hack to ensure that the split results are within a brigade attached to the proper pool. Otherwise, ctx->b would end up associated with the request pool, and the SOCKET bucket from the CORE_IN filter would get cleared at request end (thus the next request would go to CORE_IN for more data and get APR_EOF, and figured there were no more requests). This section of code was only triggered when a request had a body. The symptom was closing the connection (even though it should have been a keepalive) after the response was sent. For more info, see Message-ID on dev@: <20010917061613.B466@lyra.org> 	r91053
----------------------------
"Fix test for ltconfig, m4 processing removes the square brackets. (I just happened to notice ""-f: not found"" while running configure) "	r91033
----------------------------
Added AP_DECLARE_DATA to unixd_config, so that it makes it into the exp file. Submitted by: Mark Nesbitt <mnesbitt@us.ibm.com> 	r91022
----------------------------
Mention of logrotate as an alternative to HostnameLookups 	r91016
----------------------------
Remove an error during configure.  Libtool 1.4 doesn't have ltconfig. 	r91012
----------------------------
Added links to the AddInputFilter directive, which is otherwise rather hard to stumble across. 	r90972
----------------------------
Add links to the AddOutputFilter directive, which was otherwise rather hard to find. 	r90971
----------------------------
The per_dir_merge overlay of AddInputFilter/AddOutputFilter must absolutely replace a prior definition for the same file extension. Picture AddOutputFilter Includes .html in a directory, and needing to replace that behavior in a subdirectory which does not contain SSI html files.  This behavior must remain consistent to the other mime behaviors, as documented in manual/mod/mod_mime.html 	r90959
----------------------------
We finally got APR working well enough to support buffered reading of .var files, so the .var file issue is gone. The brokenness of the threaded MPM on FreeBSD is a FreeBSD issue, not an Apache issue, as far as anyone can tell.  I don't think this should be in the STATUS file at all, unless somebody thinks we should issue a big honking warning from configure if somebody tries to enable threaded. 	r90954
----------------------------
Server configuration goes in httpd.conf not in access.conf 	r90948
----------------------------
"work around an AIX ""issue"" in the construction of config_vars.mk by modifying the sed expression just a bit; note that before and after this change manualdir isn't being handled properly; using the default Apache layout we get manualdir = $datadir/manual instead of manualdir = $(datadir)/manual Submitted by:	Victor Orlikowski, after I narrowed down the issue "	r90930
----------------------------
strip parens from config_vars.mk values 	r90924
----------------------------
on AIX we need to pass in --disable-shared to apr and apr-util configurations; otherwise we get goofy executable files obviously libtool isn't doing the right thing, but I don't know what that is 	r90902
----------------------------
If the user doesn't specify a layout, then just use the Apache layout.  This means that we don't have to re-specify options that are already in config.layout. 	r90895
----------------------------
We should be copying the filters as well when we perform the extension merge (which seems to use a ; syntax). Try: AddOutputFilter GZ html  (server-level) AddOutputFilter Includes html  (directory-level) Oops. Without this, when you use mod_gz and go to /foobarnotthere/, the error page isn't handled by mod_include.  Oooops. 	r90871
----------------------------
After some consideration - Location walk is always required (before and after any other map_to_storage operations.)  Therefore, initialize any NULL r->per_dir_config at this phase (the earliest necessary point.) 	r90868
----------------------------
I love it when a plan comes together. We hadn't prepared for this possibility that someone didn't set up the r->per_dir_config (which the subreq's didn't).  Since we are first in line, we will handle it if need be. 	r90865
----------------------------
Move ForceType/SetHandler from mod_mime to core, copy the Set*Filter description for Add*Filter in mod_mime, and cross reference them. 	r90864
----------------------------
These no longer work, and even though most of this whole <IfModule mod_proxy.c> section doesn't work today, at least get the syntax right for <Proxy > blocks. 	r90858
----------------------------
Same as Jeff Trawick's patch [thank you!] only a tad faster, and error out on the old Set{Input|Output}Filter onefilter twofilter syntax (prior to this patch, only the last filter in a space seperated list would be configured.) 	r90813
----------------------------
* configure.in: added Cygwin specific APR_SETVARs. * os/config.m4: added Cygwin specific values for $OS and $OS_DIR. * support/logresolve.c: added OS specific #ifdef statement to define Submitted by: Stipe Tolj <tolj@wapme-systems.de> 	r90805
----------------------------
Since the mod_mime patch was applied, here is the rest of the patch to introduce the ForceType and SetHandler [absolute references] directly into the very top of the fixups phase.  This means these will always override _any_ mime module, not just mod_mime.  Ergo, other mime modules can continue to set charset, encodings, etc.  Since these are globals, they belong in the core. This highlights a very serious drawback to the type_checker hook.  By using run first, a module that identifies _partial_ information (maybe just the content type) won't pass the query on to other modules, like mod_mime, that might further define the encoding or charset.  The type_checker hook should clearly become a run-all, and the modules should decline if they see someone ahead of them answered a question they were going to try to figure. Which means - if type_checker becomes RUN_ALL - this new override hook fn should become a type_checker again - and RUN_REALLY_FIRST, and let other modules _choose_ not to override this election.  (We can run it again at the end, for a recount ;)  Votes? 	r90797
----------------------------
Fix mod_mime skipping over mime.types when some _other_ field was set with mod_mime, but not AddType. Why is everybody always breaking my local CHANGES file ;-? 	r90796
----------------------------
fix suexec's install by invoking some powerful Sascha magic. 	r90795
----------------------------
This is the same granularity of control as mod_mime gave to set handlers (and now AddInputFilter and AddOutputFilter by extension) so this seems entirely appropriate in the core as well.  Options FileInfo is required to change the processing behavior of files. 	r90760
----------------------------
Introduces mod_mime AddInputFilter and AddOutputFilter filter ext syntax. Significantly refactored the code to maintain single functions for the add_extension_info hash and remove_extension_info table processing. The AddInputFilter/AddOutputFilter could have been plural, as they accept a semicolon delimited list of filters (e.g. you need to stack two different filters based on a single extension.)  I expect that the plural could confuse users, though, as they might expect AddInputFilters foo bar var to add foo and bar to the extension var, which it definately doesn't do! 	r90756
----------------------------
Fix a growing connection pool in core_output_filter() for keepalive requests.  We were allocating a brigade out of the connection pool; the number of these brigades allocated per connection was theoretically unlimited. 	r90736
----------------------------
"- allows empty $val from httpd-2.0/build/config_vars.mk - make code more perlish. - read and parse the config file only once - use a hash instead of array for the list of internal config vars to test against - added -h option (just print usage) - wrapped numerous print STDERR calls into a simpler error() and notice() subs - simplified some of the logic in if's using perl constructs. Submitted by:	Stas Bekman <stas@stason.org> "	r90732
----------------------------
Remove some unneeded autoconf checks.  We now have no duplicate libraries in the generated EXTRA_LIBS in config_vars.mk (at least on Linux 2.4). APR already determines if we need nsl, socket - checking for it in httpd is merely redundant. None of the code in httpd-2.0 seems to deal with HAVE_GMTOFF as all of that code was moved to APR a long time ago. 	r90715
----------------------------
Clean up location_walk, so that this step performs a minimum amount of redundant effort (it must be run twice, but it will no longer reparse all <Location > blocks when the request uri hadn't changed.) The location walk block is refactored, with some significant changes in variable names for legibility.  Cooler still, it uses pool data instead of 'notes' for the important cache info :) Note the patch builds the <Location > per dir config from _nothing_, and then merges it into the per_dir_config.  When the underlying per_dir_config changes between passes, the location_walk can simply tack back on this preconstruct onto the new per_dir_config. 	r90713
----------------------------
backing out the ap_set_keepalive uncheck for Content-Length header 	r90707
----------------------------
ap_content_length_filter has already set Content-Length before ap_set_keepalive is called.  need to remove this check in order for keepalives to work. PR: Obtained from: Submitted by: Reviewed by: 	r90700
----------------------------
Improvements to APXS.  It now uses the config_vars.mk variables to figure out how to build stuff.  It uses the Apache build system for the generated module, but not for command line builds.  Maybe I'll fix that one day.  If somebody wants to beat me to it, that would be cool. 	r90696
----------------------------
"Eliminate proxy: (and all other 'special') processing from the ap_directory_walk() phase.  Modules that want to use special walk logic should refer to the mod_proxy map_to_location example, with it's proxy_walk and proxysection implementation.  This makes either directory_walk flavor much more legible, since that phase only runs against real <Directory > blocks. On a technical note, this patch also forces the Directory to be canonical (unless it is ""/"" or a regex.)  It also allows us to be more explicit when declaring <Directory > block errors. "	r90684
----------------------------
Split proxy: space using <Proxy[Match] > directive blocks from the <Directory[Match] > and <Files[Match] > blocks.  Mod_proxy now bypasses the directory and files testing phase (and skips the http TRACE default handler on it's own, as well).  Note that <Location > blocks continue to be processed for proxy: requests. Remaining questions include canonicalization and case folding of proxied uri space, prior to the proxy_walk testing and the second <Location > walk. 	r90678
----------------------------
"i think the answer to aaron's question is ""a typo"".  otherwise there is actually 1 less thread available to serve requests than configured. PR: Obtained from: Submitted by: Reviewed by: "	r90670
----------------------------
Added documentation of RemoveCharset, RemoveLanguage to mod_mime.html. Added links to directives.html. 	r90661
----------------------------
Add the ability for mod_include to add the INCLUDES filter if the file is configured for the server-parsed handler. This makes the configuration for .shtml files much easier to understand, and allows mod_include to honor Apache 1.3 config files.   Based on Doug MacEachern's patch to PHP to do the same thing. 	r90655
----------------------------
look for config.guess in apr's build dir 	r90650
----------------------------
sec, sec, who's got a sec?  This gave me a headache, but I had to clear out the last patch before I rearranged this to be _readable_. Next step for everyone's sanity, provide <Proxy > directives ;) 	r90646
----------------------------
Add the config of the ForceLanguagePriority directive, since we seem to agree on what it does.  My last question is where do I force this behavior without tons of extra filesystem/cpu consumption? 	r90613
----------------------------
My initial changes failed to accomodate this faux entry. If you didn't see any <Directory > blocks working right, try this cvs update. 	r90610
----------------------------
"support ""SSLVerifyClient optional_no_ca"" "	r90599
----------------------------
Increase security in core.c by testing (as we merge the path) that the URI does not go above the DocumentRoot (as defined by the OS, not by the URI specification), and give us the true name. When we are done, note the name is canonical for directory_walk. 	r90593
----------------------------
mod_cache cleanup: change the module variable from tcache_module to cache_module clear up various gcc warnings don't segfault when the silly user (me) configures CACHE_OUT manually 	r90579
----------------------------
Add some appropriate constness to the config 	r90577
----------------------------
Overhauled ap_server_root_relative, so that it now changes any path to canonical form through apr.  Also assures that a change to the ServerRoot through a -C option takes effect before locating the httpd.conf file. 	r90571
----------------------------
Performance death notices.  Note that we shouldn't have EVER coded a module with a fixed path ... the config phase should take the proxy/ path and ap_server_root_relative() it at startup. 	r90564
----------------------------
Optimize out what is a very expensive in-request call to ap_server_root_relative (and is becoming more expensive). Now the call happens in the config phase where it belongs. Note someone can hop in and transpose the stat and open with an open and getfileinfo if you are a performance hound. 	r90563
----------------------------
"My first try at relocating the manual tree outside of the htdocs/ directory. It will now reside in the ServerRoot, alongside with .../man/ and .../icons/ and .../htdocs/ - Please review the config.layout entries for the vendor specific entries, I supplied sensible defaults but you may disagree. Reviewed by:	William A. Rowe, Jr., Joshua Slive, Rich Bowen "	r90551
----------------------------
"fix part of PR #7528 ""UnsetEnv does not work from main body of httpd.conf"" PR also complains: ""also does not unsetenv()"", but this fix does not address that (i doubt unsetenv is portable or threadsafe) PR: Obtained from: Submitted by: Reviewed by: "	r90542
----------------------------
Remove a ton o' cruft.  Moves the mod_log_config 'var' extensions to ssl_engine_vars.c. 	r90517
----------------------------
"fix segv in mod_mime if no AddTypes are configured PR: Obtained from: Submitted by:	John Sterling <sterling@covalent.net> Reviewed by:	dougm "	r90506
----------------------------
Add rules.mk back to the substitute list.  I forgot to add the rules.mk.in files last night, but they are there now. 	r90488
----------------------------
*) Changed the late-1.3 log_config substitution %c to %X (logs the 	r90417
----------------------------
- Switch to AC_SEARCH_LIBS to check multiple libraries for mod_auth_db (the AC_* way of doing what Martin committed) - Fix the configuration check for mod_auth_digest so that: - Everything is on separate lines so that the preprocessor doesn't scream - It adds the path to APR.  (APR_SOURCE_DIR looks right, but I'm not sure.) By the time the modules are configured, the CPPFLAGS and such are not setup to point at APR.  This should probably be rectified and then this can be taken out - so you could assume that apr.h is in your CPPFLAGS somewhere when configuring the modules. 	r90392
----------------------------
On modern systems (e.g., FreeBSD), the db* functions reside in libc checked for (we are NOT testing for main(), but we are testing for dbopen(), Without the first fix, configuration would fail completely for FreeBSD 	right?).
----------------------------
change filter name to CaseFilterIn (mod_case_filter.c already uses CaseFilter) allow filter to be configured without 'CaseFilterIn On' PR: Obtained from: Submitted by: Reviewed by: 	r90383
----------------------------
Additional hint in the HeaderName documentation 	r90366
----------------------------
Added a default commented-out mod_ldap and mod_auth_ldap configuration to httpd-std.conf and httpd-win.conf PR: Obtained from: Submitted by: Reviewed by: 	r90352
----------------------------
Some documentation corrections. Add the missing LDAPSharedCacheSize directive to the docs. PR: Obtained from: Submitted by: Reviewed by: 	r90351
----------------------------
Added a little more detail to the SuppressDescription argument to IndexOptions 	r90339
----------------------------
Fix some <IfModule > badness on Win32 	r90296
----------------------------
check for timeout on socket read when we check for ECONNRESET and eof previously, we'd die on an assert() (really nasty for threaded MPM) when we hit a keepalive timeout for a browser like netscape which keeps the connection open 	r90244
----------------------------
Push back CHANGES to document the complete mod_mime segfault solution. Rounded out the mod_mime Add/Remove pairs by adding RemoveLanguage and RemoveCharset directives, and rolled in the remove_items handling. This is (effectively) my complete patch, sans pool optimizations. [William Rowe] 	r90239
----------------------------
"Add CookieDomain directive to allow setting of the Domain= cookie attribute; add CookieStyle to allow specification of cookie syntax: Netscape (default), Cookie or RFC2109, or Cookie2 or RFC2965.  We have historically supported only the obsolete Netscape syntax. PR:		several against 1.3 Obtained from:	brought forward from 1.3 "	r90180
----------------------------
"Lots of small config file changes including: - Beat everything down to less than 80 character lines. - Revise the comments for the DSO section to eliminate mention of ordering problems. - Add LoadModule lines for all extension modules, commented out. Note that it is very difficult in the current ./configure system to make the base modules DSOs, so I didn't include those. - Remove ServerType comments. - Add ""deny from all"" to the root directory container.  The comments indicate that it should be there. - Delete a little (in my opinion) excess verbosity in the description of the .htacess download blocker. - Remove the CacheNegotiatedDocs directive.  It was wrong, and is obscure enough that people should probably just look it up in the docs. - Make the example for Redirect a little more explicit - Change the examples and descriptions for READMENAME/HEADERNAME since, if multiviews are off, they haven't worked as described since 1.3.something. - Remove the phf trap example.  This is very old and probably worthless. - Remove MetDir/MetSuffix.  These are rarely used. "	r90142
----------------------------
"Begin to sanitize the MPM configuration directives.  Now, all MPMs use the same functions for all common MPM directives.  This should make it easier to catch all bugs in these directives once. Everybody should check their favorite MPM to ensure that it still compiles, and that these directives work.  This is a big patch, and although it looks good, and things compiled for me, that is no garauntee that it will work on all platforms.  :-) Submitted by:	Cody Sherr <csherr@covalent.net> "	r90132
----------------------------
Change the MaxSpareThreads to 150 for threaded MPM.  This mirrors the new prefork setting and removes the default case where we would spawn three children, but kill two of them immediately because MaxSpareThreads was set to 10 (only one children can be supported with the old value). Please note that I don't have email access as eBuilt's servers are AWOL this weekend (none of us have the desire to go in a fix the servers for semi-obvious reasons).  I'm trying to keep up on posts via apachelabs.org. So, if you want to change this, just go ahead and commit the changes... 	r90118
----------------------------
hot and muggy in Raleigh (i.e., it's August) De-emphasize some daedalus problems that don't seem so important any more. I haven't tried the mod_cgid/suexec thing in ages. <knocks on wood> We haven't seen a core dump on daedalus since the 2.0.22 tarball went live over a week ago.  It's got an APR circumvention for an apparent FreeBSD sendfile bug.  Once I'm 100% confident we've nailed the problem, I'll post this patch to the APR list. The 0x30303030 seg fault after restart problem is just gone.  OtherBill may have fixed this one with the inherit stuff...dunno. 	r90075
----------------------------
If we are going to get the length of a brigade, it helps if that brigade has data.  To that end, if we have just expanded ctx->b, we need to concat ctx->b to the end of b, so that b has something to pass back to the previous filter. This fixes the problem with the proxy not proxying non-keepalive connections. 	r90046
----------------------------
Remove the block argument from apr_brigade_partition.  This looked good in theory, but in reality, we should just rely on the timeouts to handle this. 	r90043
----------------------------
"Fix a segfault (was getting triggered by mod_include at least) caused by calling ap_allow_options() before setting rnew->per_dir_config. This is the ""easy looking"" fix but might have side effects of which I'm unaware... please double-check this change for correctness. "	r89978
----------------------------
Subtle variation for security.  If the mod_mime file has nothing specific to say about a given set of file extentions (and has only based the resolved fields on the default language, encoding and content type) then tell us we can ignore the result by leaving the exception list entirely undefined.  If mod_mime adds anything (a language, charset, or whatnot) then proceed to use the file in the Multiviews evaluation, otherwise mod_negotation will ignore the file found. This points out a need for a slightly twisted DefaultClientLanguage, as opposed to creating foo.html.html files.  Either that, or introduce a 'neutral' entity that the user can list (say, .default) for mod_mime to declare it as a fallback language/encoding/content-type/handler. 	r89919
----------------------------
Save hundreds of cycles on every autoindex request by _not_ attempting to to test the parent (..) sub request!  This patch also allows the user to see things that will redirect them.  That way, the lnk or dir within the directory is displayed correctly. Also allows an ALT text entry other than DIR by providing AddAlt ^^DIRECTORY^^, as the user (might) expect to be allowed to do. 	r89909
----------------------------
Add a timeout when making connections from within the proxy. Now, if someone wants to add a special scoreboard state for proxy attempting to make connection, be my guest. 	r89908
----------------------------
Begone ancient beast.  IndexOptions FancyIndexing is sufficiently less confusing. 	r89897
----------------------------
fix a problem in the threaded and worker mpm's where a keepalive connection on one thread can prevent the process from exiting. let's rename ap_graceful_restart_signalled to something more appropriate after the next beta. 	r89881
----------------------------
XBitHack has just been re-enabled in Apache 2.0, so the docs need to be updated to reflect that. 	r89874
----------------------------
Add a handler to mod_includes.c.  This handler is designed to implement the XbitHack directive.  This can't be done with a fixup, because we need to check the content-type, which is only available in the handler phase. PR:     7751 	r89872
----------------------------
"Add the ability to extend the methods that Apache understands and have those methods <limit>able in the httpd.conf. It uses the same bit mask/shifted offset as the original HTTP methods such as M_GET or M_POST, but expands the total bits from an int to an ap_int64_t to handle more bits for new request methods than an int provides. Submitted by:	Cody Sherr <csherr@covalent.net> "	r89869
----------------------------
Solve the merge bugs, by storing a copy bit to save us a ton of reallocation in the merge config phase.  Should keep most of the savings realized by moving to tables. Need others to vet this code, please!  Look at this and the prior patch as a single diff (-r n -r n-2) to see the overall changes. 	r89865
----------------------------
Activate ssl_hook_pre_config 	r89815
----------------------------
Provide the same optimization to the dir_config structure to track d_is_absolute, along with d_is_fnmatch. 	r89791
----------------------------
OS/2: set a decent size stack. Default is only 32k which runs out in some configurations. 	r89745
----------------------------
prevent seg faults in mod_status with ExtendedStatus enabled, after a restart.  A pointer to the previous generation's vhost server_rec could be left in the worker_score under certain conditions. 	r89660
----------------------------
Some doc updates realted to ssi. 1. Add info on how to activate ssi to upgrading.html. 2. Remove mention of the ssi magic mime-types, since they no longer work. 3. Place a warning on xbithack that it doesn't currently work, and reference the bug report. 4. Add a warning about mod_include parsing non-html content. 5. Misc little fixups. 	r89655
----------------------------
Take care of folk's assert() undefined errors. 	r89627
----------------------------
Provide vhost and abbreviated request strings on ExtendedStatus displays. 	r89541
----------------------------
Fix an issue with the pod and prefork: when the parent process wakes up a server process via connect(), use an APR timeout on the connect() so that we don't hang for a long time if there aren't server processes around to do accept() 	r89539
----------------------------
Check the pod after processing a connection so that we'll go away if a graceful restart occurred while we were processing the connection.  Otherwise, we won't wake up until a real connection comes in and we'll use the wrong config to process it and we may block in the wrong syscall (because the new generation is using a different accept mutex) and in general it is goofy. 	r89531
----------------------------
ExtendedStatus is back. 	r89530
----------------------------
"Allow all parts of Apache 2.0 to build when --srcdir is used.  This of Apache's build system.  It also required a small hack in APR-util, if we are using the bundled Expat, and we are using VPATH support, then we have hard-coded the xml/expat location.  I couldn't figure out how to allow the configure script to determine the correct location.  I added a comment, but if somebody else figures it out, we should fix that at some point. PR:	7630 "	required
----------------------------
"Add documentation for mod_suexec.  And add a note in the old docs about User that SuexecUserGroup now replaces putting User/Group directives inside of VirtualHosts. PR:	7634 "	r89499
----------------------------
"The ExtendedStatus directive was added back to mod_status when we back, we should put it into the default config file. PR:	7937 "	re-vamped
----------------------------
ProxyPass & ProxyPass Reverse now can be specified in <Location> directives 	r89424
----------------------------
Filenames aught to be normalized to the serverroot, and server_root_relative already canonicalizes names. 	r89382
----------------------------
Fix brokenness when ThreadsPerChild is higher than the built-in limit.  We left ap_threads_per_child at the higher value which led to segfaults when doing certain scoreboard operations. 	r89375
----------------------------
"Extend mod_setenvif to support specifying regular expressions on the SetEnvIf (and SetEnvIfNoCase) directive attribute field. Example:  SetEnvIf ^TS*  [a-z].* HAVE_TS will cause HAVE_TS to be set if any of the request headers begins with ""TS"" and has a value that begins with any character in the set [a-z]. [Bill Stoddard] "	r89353
----------------------------
Enable SetEnvIf to handle taking a regex on the header name (SPECIAL_NOT case). For example: SetEnvIf ^TS* ^[a-z].*  HAVE_TS will cause HAVE_TS to be set if a header beginning with TS appears in the request and the value of that header starts with [a-z] 	r89325
----------------------------
"Extend mod_headers to support conditional driven Header add, append and set. Use SetEnvIf to set an envar and conditionally add/append/set headers based on this envar thusly: If the request contains header ""TSMyHeader: value"" then header MyHeader: ""t=xxxxxxxxxx D=yyyy"" will be sent on the response. Update mod_headers.html. "	r89271
----------------------------
"Extend Header add|set|append support to accept format strings for the header values.  Configure thusly: Header add MyHeader ""%t %D yadda"" %t is the time the request was received relative to CUT since the epoch measured in microseconds. %D is the time delta from the time the request was received to the time the headers are sent on the wire. To facilitate parsing the header response, %D results in the string D=xxx and %t results in the string t=xxx. Thus the config directive above will result in this header being included in the response: MyHeader: t=991424704447256 D=3775428 yadda "	r89255
----------------------------
"handle the SERVER_IDLE_KILL state in some of the ExtendedStatus=On output I don't have 100% confidence in my guess as to why some of the state labels are in bold and some aren't (e.g., ""<b>Write</b>"" vs. ""Graceful"".  Hopefully any rhyme or reason to it is maintained with my change. "	r89249
----------------------------
Add RequestHeader 	r89245
----------------------------
Fixed a typo about the RequestHeader directive and compatibility. PR: Obtained from: Reviewed by: 	r89182
----------------------------
Updated mod_headers documentation to coincide with addition of RequestHeader directive. PR: Obtained from: Reviewed by: 	r89181
----------------------------
Change directive HeaderOut back to Header and HeaderIn to RequestHeader. 	r89170
----------------------------
Major update of install.html. This still needs a great deal of work.  In particular, many of the ./configure command line options are not documented because I was not able to get them to work in my testing.  However, there is enough documented here to get most people going.  Hopefully, as things are fixed, they will get added. 	r89168
----------------------------
Do not start piped log processes during the config file preflight.  This change also circumvents a problem on Windows where the rotatelog processes created during preflight was not getting cleaned up properly. 	r89127
----------------------------
"Fix httpd's definition of LTFLAGS to be consistent with that of apr and apr-util, allow it to be overridden by the configure command-line (default=""--silent"") and introduce LT_LDFLAGS to replace what we were formally abusing as LTFLAGS. "	r89094
----------------------------
It is easier to re-run configure's test and pick up the cached values than it is to replicate them in our own macros.  This isn't too expensive because CC and CPP have already been set by APR.  Too bad it generates a lot of output. Also, we don't need to repeat command-line options that are already being handled by APR now that we use APR's generated flags.  The switches are still usable on the command-line. 	r89092
----------------------------
When checking for gcc, use variable ac_cv_prog_gcc instead of GCC. This gets AP_DEBUG set properly for --enable-maintainer-mode builds. (As libtool configuration is removed from other places -- e.g., pcre, expat -- the same change will be needed of those configuration scripts use GCC.) 	r89084
----------------------------
Moved inside configure.in. 	r89082
----------------------------
Simplify the configuration process by moving all libtool stuff to APR and moving the last bits of hints.m4 inline.  Now we only run every test four times instead of five.  One down, three to go. 	r89081
----------------------------
A couple of default win config file tweaks. 	r89075
----------------------------
"Fix apachectl so that it uses the configure program name. Submitted by:	Daniel Lopez <daniel@rawbyte.com> "	r89061
----------------------------
Try to auto-detect the location of the OpenSSL stuff. The old logic was incorrect anyway (it tested for .../ssl/ssl.h and then used .../include/ssl.h). Now we have a configurable list of candidates, each with: a name, an include path, a lib path, and a list of libs. 	r89056
----------------------------
Get rid of some Apache 1.x OPTIMIZE_TIMEOUTS cruft.  Other logic in 1.3 which used this stuff would send SIGALRM to children in certain circumstances. 	r89047
----------------------------
Get rid of libssl.modules and libssl.version. libssl.version we no longer need, because mod_ssl no longer has its own version. libssl.modules is now more or less (except for the old custom Apache 1.3 configuration rules) replaced by the Autoconf based config.m4. 	r89003
----------------------------
"Cosmetics: align the entry of MPMs in ""configure --help"" output "	r89000
----------------------------
"mod_log_config: %c connection status incorrectly logged as ""-"" (non-keepalive) when MaxKeepAliveRequests is set to 0. "	r88974
----------------------------
"Add a comment about an assumption we make in our keepalive buffering. Delay the check for ""too many items in an iovec"" until we actually try to put something in there. This allows that N+1 bucket to be an EOS, FLUSH, FILE, or zero-length bucket without triggering a split. Only if that next bucket has iovec data will a split be made. "	r88969
----------------------------
Completely revamp configure so that it preserves the standard make variables CPPFLAGS, CFLAGS, CXXFLAGS, LDFLAGS and LIBS by moving the configure additions to EXTRA_* variables.  Also, allow the user to specify NOTEST_* values for all of the above, which eliminates the need for THREAD_CPPFLAGS, THREAD_CFLAGS, and OPTIM.  Fix the setting of INCLUDES and EXTRA_INCLUDES.  Check flags as they are added to avoid pointless duplications.  Fix the order in which flags are given on the compile and link lines. 	r88960
----------------------------
Revert the change that moved keepalives out of conn_rec.  That variable controls the number of requests per connection, regardless of the protocol used by the request. 	r88908
----------------------------
Fix seg fault at start-up introduced by Ryan's change to enabl modules to specify their own logging tags. mod_log_config ap_register_log_handler() was being called by http_core before the directive hash table was created. This patch creates the directive hash table before ap_register_log_handler() is Submitted by:  [jean-frederic clere <jfrederic.clere@fujitsu-siemens.com>] Reviewed by:  Jeff Trawick, Bill Stoddard 	registered
----------------------------
Allow modules to specify their own logging format specifier.  Basically, mod_log_config has registered an optional function, that other modules can use to specify a function to be called.  This is analogous to the way that mod_include works.  This also allows http to do the connection logging itself, without exposing HTTP specific pieces to other modules. 	r88888
----------------------------
There is a bug in how we sort some hooks, the pre-config hook is one that is definately incorrect.  Basically, the first time we call the pre-config hooks, they are sorted correctly.  However, when we call them the second time, we use the order that modules are loaded into the server.  This move basically puts the http_module after mod_log_config in the compiled server.  It is a hack, and a work-around to allow for my next commit. When the hook sort issue is solved, this should be re-named to config.m4 	r88887
----------------------------
Move the keepalives field out of the conn_rec and into an HTTP specific connection record.  This also moves some HTTP specific back out of the core and into the HTTP module. 	r88881
----------------------------
Force the dav/fs config.m4 file to be added to the configure script after the dav/main config.m4.  This script should make sure that dav is enabled before turning on dav/fs, but I leave that for somebody else to do. 	r88828
----------------------------
Make the dav/main config.m4 file be added to the configure script after httpd, and make dav default to no if http is not enabled.  Dav still defaults to yes if http is in the server.  Dav is incredibly HTTP centric, and makes little to no sense without HTTP 	r88827
----------------------------
"We now keep the entire conn_rec across downstream keepalives, not just the socket. Made the ""keepalive mismatch"" message more accurate. PR: Obtained from: Reviewed by: "	r88793
----------------------------
Moved config.m4 to config9.m4. This allows most (if not all) other modules to be handled before mod_so, so that sharedobjs is set if needed, so that mod_so is enabled as needed if building any modules shared. NOTE: This is no guarantee. There exists the possibility that a config.m4 could be used after this one, and that the modules it specifies are the only ones that the server will be built with as shared. This is highly unlikely, but possible. 	r88781
----------------------------
"Remove BindAddress from the default config file, because it is no longer a valid directive. PR:	7539 Submitted by:	giles@nemeton.com.au "	r88776
----------------------------
Allow modules to be added to the server at configure time.  The syntax is: --with-module=module_type:/path/to/module module_type is the directory under modules/ that the module should be copied to.  Currently, this only adds static modules 	r88772
----------------------------
Downstream keepalives in mod_proxy should not kick in if the upstream client is < HTTP/1.1 PR: Obtained from: Reviewed by: 	r88754
----------------------------
Reworked the storage of the client socket between keepalive connections to fix some nasty problems with the socket lasting longer than the memory pool it was allocated from. PR: Obtained from: Reviewed by: 	r88730
----------------------------
"Some code rewriting in ap_proxy_connect_handler(): *) Fixed bug where a hostname without a ""."" in it (such as ""localhost"") would not trigger an IP address check with ProxyBlock. *) Fixed ProxyBlock bugs with ap_proxy_http_handler() and ap_proxy_connect_handler(). *) Updated ap_proxy_connect_handler() to support APR, while moving some common code between http_handler and connect_handler to proxy_util.c. PR: Obtained from: Reviewed by: "	r88721
----------------------------
Temporary (hopefully) reversion to the previously used hack to allow --prefix to work for now.  This means that part of the Apache layout is duplicated in configure.in again. There are a _LOT_ of inconsistencies in different places about what items in config.layout are actually used and how they can be set. Also, change the couple of other things that are necessary to make /usr/local/apache2 the default prefix when using this way of doing things. PR: Obtained from: Submitted by: Reviewed by: 	r88704
----------------------------
Make Apache check APR's configuration when determining the default MPM. This way, if APR is built without threads, then Apache defaults to the prefork MPM. 	r88695
----------------------------
"- change inconsistent use of logdir and logfiledir all to logfiledir, to make the config.layout file work properly. - change default layout to be ""Apache"", as defined in config.layout, instead of duplicating (some of) that layout in configure itself. - change default installation path to /usr/local/apache2 PR: Obtained from: Submitted by: Reviewed by: "	r88692
----------------------------
Use APR's macro to generate config.nice 	r88685
----------------------------
Fixed problem where responses without entity bodies would cause the directly following proxy keepalive request to fail. PR: Obtained from: Reviewed by: 	r88657
----------------------------
"Fix segfaults for configuration file syntax errors such as ""<Directory>"" followed by ""</Directory"" and ""<Directory>"" followed by ""</Directoryz>"" "	r88649
----------------------------
*) Added support for downstream keepalives in mod_proxy. *) Changed mod_proxy ap_proxy_http_handler() to support APR properly. PR: Obtained from: Reviewed by: 	r88648
----------------------------
Fix --enable-layout processing on NetBSD.  This makes us use a consistant location for the config.layout file, and it makes us a bit more portable. PR:     7482 Submitted by:   jun-ichiro hagino <itojun@iijlab.net> 	r88647
----------------------------
Prevent cobbering of lenght for subsequent sends. Still not quite then our timeout could be len * timeout if we happen to only stuff one byte down the pipe each time. PR: Obtained from: Submitted by: Reviewed by: 	right;
----------------------------
"Add a ScriptSock default to the defualt config file.  This is only enabled when the mod_cgid module is used. PR:	7408 Submitted by:	Taketo Kabe <kabe@sra-tohoku.co.jp> "	r88575
----------------------------
"Cleanup the build process a bit more.  The Apache configure script no longer creates its own helper scripts, it just uses APR's. Submitted by:	jean-frederic clere <jfrederic.clere@fujitsu-siemens.com> "	r88530
----------------------------
"Bring forward the suexec umask setting option from 1.3, and also fix some configure.in bits that would define macros that needed to be numbers as strings instead. Obtained from:	Apache HTTP Server 1.3 "	r88493
----------------------------
Virtual host config file fix backported from v1.3 PR: Obtained from: Reviewed by: 	r88485
----------------------------
Bring forward the -V option for suexec from 1.3.20-dev.  It looks like the umask() option needs to be brought forward, as well. Is this still 2.0.14-dev? 	r88483
----------------------------
turn on setuid permissions when installing suexec Submitted by: Ken Coar 	r88467
----------------------------
Fix content-length computation.  We ONLY compute a content-length if We are not in a 1.1 request and we cannot chunk, and this is a keepalive or we already have all the data. 	r88464
----------------------------
Report unbounded containers in the config file.  Previously, a typo in the </container> directive could result in the rest of the config file being silently ignored, with undesired defaults used. 	r88461
----------------------------
Move more code from the http module into the core server.  This is core code, basically the default handler, the default input and output filters, and all of the core configuration directives. All of this code is required in order for the server to work, with or without HTTP.  The server is closer to working without the HTTP module, although there is still more to do. I tried to fix Windows, but somebody should probably make sure I did it correctly. 	r88449
----------------------------
"Use a proper prototype for ap_show_directives() and ap_show_modules() so that they match their prototypes in http_config.h. PR:			6980 "	r88445
----------------------------
"no need to calculate the config file name in display_info() since we don't have to read it PR:		6980 "	r88431
----------------------------
fix make install so that suexec is installed where the server expects to find it ( <prefix>/sbin by default). also enable ./configure --sbindir=DIR to work as advertised. 	r88422
----------------------------
Fix mod_info, so that <Directory> and <Location> directives are not displayed twice when displaying the current configuration. 	r88416
----------------------------
Don't directly include ap_config_auto.h directly. It isn't available on Windows platforms. Including ap_config.h will pick it up, or it will grab the appropriate Windows header/defines. 	r88402
----------------------------
core_pre_config isn't needed Submitted by: Cliff Woolley 	r88384
----------------------------
Remove references to apr_bucket_init_types() and apr_bucket_insert_type().  I imagine that core_pre_config() could go away completely, but I'll leave that to someone who knows more about hooks than I do. 	r88381
----------------------------
"Move link on httpd command line documentation.  Add link to scoreboardfile directive documentation. Submitted by:	Herve Dumont <hdumont@club-internet.fr> "	r88374
----------------------------
Applied patch from 1.3 tree - added link back from AllowOverride to AccessFileName 	r88367
----------------------------
"Add config directives to override the DEFAULT_ERROR_MSG and DEFAULT_TIME_FORMAT. PR:	6193 Submitted by:	Dan Rench <drench@xnet.com> Reviewed by:	Ryan Bloom "	r88346
----------------------------
Clean up namespace badness with s/configfile_t/ap_configfile_t/ 	r88312
----------------------------
Shift XML handling code from Apache down into APRUTIL - teach APRUTIL how to find Expat and respond to --with-expat - Apache's configure points APRUTIL's configure at its srclib/expat-lite (this will go away; aprutil can work against installed expats or fallback - shift some of the timing of INCLUDES and top_builddir processing in the APRUTIL configure.in script - expose the new apr_xml functions in apr_xml.h, apr_xml.c (by building it), and apu_compat.h - rewrite util_xml.[ch] in terms of apr_xml 	r88299
----------------------------
clean out some old crud from ap_config.h 	r88296
----------------------------
"Fix a seg fault in mod_userdir.c.  We used to use the pw structure without ever filling it out. PR:	7271 Submitted by:	Taketo Kabe <kabe@sra-tohoku.co.jp> and Cliff Woolley <cliffwoolley@yahoo.com>] "	r88279
----------------------------
Back down the default number of initial threads created with the threaded Unix MPM.  Tweak the sample configuration files to 	reflect
----------------------------
- more ap_conf_vector_t fixup. - break out the cmd_parms to ap_set_config_vectors to clarify/doc what is happening in there and because the function operates independent of cmds. 	r88227
----------------------------
"Change a few ""no"" module to ""most"". Leave suexec: it must be explicitly enabled. "	r88224
----------------------------
"use ""conf"" rather than ""sec"" for the configuration data. misc style, whitespace, and other cleaning nits. "	r88222
----------------------------
fix some bugs that appeared once some APACHE_MODULE() invocations were changed in the config.m4 files. 	r88220
----------------------------
"implement ability to do --enable-modules and --enable-mods-shared for ""all"" and ""most"". still need to tweak various config.m4 files to sort them out. "	r88219
----------------------------
Take 4: The last one worked for me, but Ralf says it's not portable. Did I ever mention that having an AddOutputFilter directive that did this stuff internally would be nice?!?! Submitted by:   Ralf S. Engelschall 	r88202
----------------------------
Remove some Makefile.libdir's.  These were used by Configure in Apache 1.3, but they aren't used at all by 2.0. 	r88200
----------------------------
Rename the module structures so that the exported symbol matches the file name, and it is easier to automate the installation process (generating LoadModule directives from the module filenames). Next step is to remove the 4th argument to the APACHE_MODULE macro completely and require people to use the matching names, and to 	reduce
----------------------------
"Remove all instances of apache_apr_flags=""--enable-threads"" from the config.m4 files.  If we leave those in, then Apache automatically enables threads for all machines when a threaded MPM is chosen.  We want people to have to force threads for platforms that don't run threads well (i.e. FreeBSD). "	r88185
----------------------------
Move the call to set the socket timeout outside the loop. ve : 	r88168
----------------------------
"Fix some spelling mistakes and remove the mpmt_beos MPM from the config.m4 file. Submitted by:	Cliff Woolley <cliffwoolley@yahoo.com> "	r88147
----------------------------
Windows doesn't have ap_config_auto. Perhaps we need a HAVE_CONFIG_AUTO macro? 	r88138
----------------------------
Don't disable threads just because we are using the prefork MPM. If somebody wants to compile without threads, they must now add --disable-threads to the configure command line.  [Ryan Bloom] 	r88127
----------------------------
*) remove some obsolete/unused defines from httpd.h. *) remove DEFAULT_XFERLOG from main.c; it is never set/used *) move ap_get_max_daemons() to ap_mpm.h *) move DEFAULT_LISTENBACKLOG to mpm_common.h 	r88103
----------------------------
Clean up the mod_tls configure process.  This should remove most, if not all, of the hand-editing required to make mod_tls compile.  I have also updated the README to reflect the current process.  I have also noted that we require OpenSSL 0.9.6 to compile.  I am getting all sorts of warnings from the OpenSSL header files, and I get a single error from the OpenSSL libraries, but I am assuming that is a problem with my configuration, not the mod_tls code. 	r88093
----------------------------
"fix the check for killpg(); as it was, we didn't check for killpg() and we got an ugly ""killpg: not found"" message on stderr during configure "	r88086
----------------------------
Update all the references I can find to use SetOutputFilter to actives SSIs. 	r88072
----------------------------
Fix the configure scripts, so that we don't try to substitute into test/Makefile unless we actually have a test directory.  The problem is that we don't distribute test directories with our tarballs, so our configure script outputs error messages.  This fixes that problem. 	r88067
----------------------------
"Make the config file use SetOutputFilter, since AddOutputFilter is dead now. Submitted by:	Greg Stein "	r88064
----------------------------
get rid of some warnings and an undefined reference which crept into some modules overnight 	r88063
----------------------------
[ missed in last commit ] clean out some headers and libs from the configure process (not needed) 	r88062
----------------------------
Clean up some of the includes: - explicitly include apr_lib.h since ap_config.h doesn't - use apr_want.h where possible - use APR_HAVE_ where possible - remove some unneeded includes 	r88060
----------------------------
*) clean out some old crap from ap_config.h; other simplifications; don't *) toss ap_config_path.h -- we can put those values into ap_config_auto.h 	r88057
----------------------------
Remove the SetFilter directive from the code.  This directive wasn't nearly as useful as the SetOutputFilter and SetInputFilter, and it never 	really
----------------------------
Add new LogFormat directive, %D, to log time it takes to serve a request in microseconds. 	r88046
----------------------------
Change AddInputFilter and AddOutputFilter to SetInputFilter and SetOutputFilter.  This corresponds nicely with the other Set directives, which operate on containers while the Add* directives tend to work directly on extensions.  [Ryan Bloom] 	r88042
----------------------------
"Fix a bug with AliasMatch.  When forward fitting a bug from 1.3 to 2.0, we forgot a single line which broke this option. PR:	6881 "	r88010
----------------------------
Back out previous change. dav/main/config.m4 adds its directory the the INCLUDES variable. No need to do it yet again. 	r88002
----------------------------
"Make sure that mod_include's post_config hook always runs before mod_cgi(d)'s post_config hook.  Mod_include creates a hash table in the post_config stage that mod_cgi(d) uses during it's post_config stage, so it must be done in this order. Submitted by:	 Brian Havard <brianh@kheldar.apana.org.au> "	r87992
----------------------------
Bring mod_status for 2.0 back in line with mod_status for 1.3.  This is basically a straight port of the 1.3 module to 2.0.  The MPMs need to be modified a bit to work with mod_status, but prefork, mpmt_pthread, and dexter have already been changed.  I will fix perchild tonight.  There is a lot of common code that can be abstracted, and there seems to be a small bug with regard to what mpmt_pthread and dexter report as current connections.  ExtendedStatus does work again, although until the bug mentioned above is fixed, it isn't as useful on mpmt_pthread and dexter. Next week, I will look at allowing other modules to add data to the STATUS page and possibly to the scoreboard itself. 	r87949
----------------------------
This file will go away.  For this moment, the s/FindFirstFile/apr_stat/ fixes parsing of utf-8 resources against the NTFS filesystem.  The only remaining utf-8 change is to the config parser [which is simple - any unicode config file (FFFE/FEFF lead word) will be utf-8 encrypted]. 	r87946
----------------------------
Get the correct IP address if ServerName isn't set and we can't find a fully-qualified domain name at startup. PR:             7170 Submitted by:   Danek Duvall <dduvall@eng.sun.com> 	r87938
----------------------------
Clean up the cgid module now that it supports suexec. 	r87910
----------------------------
Make mod_cgid work with SuExec.  This has been tested and works reliably on my machine, but since this is security related, this should be tested and scrutinized by as many people as possible. 	r87905
----------------------------
Moved several CHANGES back to APR where they belonged in the first place, Adopt apr features for simplifing mod_userdir, and accept the new Win32/OS2 exceptions without hiccuping Also note a potentially serious flaw - others please review. 	r87902
----------------------------
Replace configure --with-optim option by using and saving the environment variable OPTIM instead.  This is needed because configure options do not support multiple flags separated by spaces. 	r87887
----------------------------
Force --with-optim and --with-port to have argument values, since they result in later compile errors otherwise. I would have removed --with-optim in favor of just setting it with an environment variable, but then it wouldn't be saved in config.nice. A better solution is needed because these arguments can only accept a single value (quotes and spaces are stripped).  Perhaps setting OPTIM within config.nice?  First things first. 	r87886
----------------------------
get mod_unique_id building again...XtOffset was undefined 	r87843
----------------------------
"As Greg noted, set_keepalive has to happen before we check r->chunked, but it also has to happen after ap_basic_http_header.  Otherwise, we don't set r->connection->keepalive correctly, and it can be -1 for requests that don't support keepalive.  This moves ap_basic_http_header to above the call to set_keepalive (after reversing the previous patch), which should be perfectly safe, while still fixing the original bug. Submitted by:	Greg Stein "	r87824
----------------------------
The ap_set_keepalive call needs to be after the call to ap_basic_http_header.  Without this, there are times that HTTP 1.0 	requests
----------------------------
Turn MultiViews on in the default config file.  This allows people who install for the first time to actually get a valid first page. 	r87783
----------------------------
If --enable-suexec is specified, then we need to build suexec automatically.  This bit me multiple times last night as I was trying to setup apache.org.  I would make a change to the configuration, run make; make install, and it would fail.  The problem was that suexec wasn't getting re-compiled ever, so my changes weren't getting picked up.  This solves that problem, by making sure that suexec gets compiled if it was specified on the configure line. 	r87779
----------------------------
Get mod_suexec compiling on FreeBSD again 	r87763
----------------------------
"Stop checking to see if this is a pipelined request if we know for a fact that it isn't.  Basically, if r->connection->keepalive == 0. This keeps us from making an extra read call when serving a 1.0 Submitted by:	  Ryan Bloom and Greg Stein "	request.
----------------------------
"Stop using environment variables to set ONE_PROCESS and NO_DETACH.  Now we use the -D command line argument to Apache to configure these options. Submitted by:	Greg Stein "	r87661
----------------------------
Per suggestion, tuck NOTEST_* in config_vars.mk. Yep, I changed the name. NONAC_* causes autoconf to complain loud and long. PR: Obtained from: Submitted by: Reviewed by: 	r87660
----------------------------
note that rewrite map expansions work in rewriteconds 	r87659
----------------------------
Fix typo in anchor.  Link to mod_so.html#loadmodule instead of mod_so.html for LoadModule directive. 	r87651
----------------------------
Fix a typo in an example and make a slight clarification in the TransferLog docs. 	r87648
----------------------------
"This is the second in a series of clean-ups of the environment variable docs.  Here is what I have done: 1. Removed some obsolete CERN references and done a tiny bit of cleanup of mod_env.html. 2. Included references from mod_env.html and mod_setenvif.html to env.html. 3. Prettied-up env.html a little bit by including sub-headings. 4. Added some ""caveats"" to env.html: - No overriding basic CGI variables - suexec restrictions - no non-alphanumeric characters in env variable names "	r87621
----------------------------
Set MKDIR for APR's RUN_SUBDIR_CONFIG_NOW macro. 	r87613
----------------------------
Stop leaking sockets.  This is a minimal leak, but it was there. Basically, we were creating a socket_t, but never assigning a port or IP address to it.  We then re-read the config file, and search the list of allocated sockets for the socket that we have already allocated for this port, but we never find the port and address, because we never stored them in the socket_t.  This was keeping the Listen directive from working properly. 	r87601
----------------------------
"This file needs to be renamed from config.m4 to config5.m4 to allow the ordering to work correctly otherwise it breaks the build. It didn't seem possible to move the file in CVS so I've added a new copy and deleted the original.  It's such a simple file if we don't have the history it's not an issue! Submitted by:	Ryan Bloom <rbb@covalent.net> "	r87594
----------------------------
*) simplify config file list construction (especially the second sed *) comment extensively. *) process into lines which are always guaranteed to sort properly -- don't 	r87557
----------------------------
Add BeOS to hints.m4.  This explains why I've been having to set the MPM via configure... 	r87556
----------------------------
"Find all config.m4 files when building generated_lists.  Also, convert the sort to use 'sort -n -b'.  These arguments are specified by single unix, so they should be portable.  This restores the ability to order the config.m4 files. Submitted by:	Dale Ghent <daleg@elemental.org> "	r87555
----------------------------
Because we can't get APR_EAGAIN from sendfile if we have a timeout, we can simplify this test now. 	r87545
----------------------------
Last change to get SuEXEC working again, and respecting configuration changes made using autoconf setup. 	r87539
----------------------------
Get SuEXEC building properly. 	r87538
----------------------------
On Unix, we do not want to use an absolute path for CGI scripts.  SuEXEC will not let us use one, and when not using SuEXEC, we chdir() into the correct directory. 	r87537
----------------------------
We cannot set the SUEXEC_BIN directory from autoconf, because all of the instructions say that in order to modify this variable, you have to modify httpd.h 	r87536
----------------------------
Make it possible to build suexec from the top-level Makefiles, and make it install when using make install 	r87531
----------------------------
Get suexec compiling again. 	r87530
----------------------------
Finish up the config.m4 file overhaul, so that we can load config.m4 files in order. 	r87528
----------------------------
Move the config.m4 file to config5.m4 in the generators directory so that we can actually make the cgi module decision based on MPM. 	r87527
----------------------------
Allow buildconf to find the config.m4 files in the correct order.  This allows the decisions made in one config.m4 file to be based on decisions made in previous config.m4 files.  For example, the config.m4 in the generators config.m4 can choose the correc cgi module based on which MPM is chosen. To do this, we find all filenames config*.m4, and then we re-order the filename so that it looks like:  *config.m4/path/to/file.  Once all files are in this format, we sort the files, and then re-arrange the file names again to put them in the correct order.  There may be better ways to do this, but I couldn't find a portable way to call sort so that this would work. 	r87526
----------------------------
Get mod_cgid to use apr calls for creating the actual CGI process. This also allows mod_cgid to use ap_os_create_priviledged_process, thus allowing for SuExec execution from mod_cgid.  Currently, we do not support everything that standard SuExec supports, but at least it works minimally now. 	r87524
----------------------------
Allow SuExec to be configured from the ./configure command line 	r87521
----------------------------
Back out the .libs thing from the aprutil linking. Add --disable-shared (for now) to the subdir config to ensure that we only get a static library for aprutil (which allows for linking all of its functions into the executable). [ APR will need something similar if/when it gets libtool-ized ] Mark a note in STATUS indicating we should eventually toss the --disable-shared flag. 	r87512
----------------------------
This program should run entirely without ap_config support from Apache, given that it is apr'ized 	r87498
----------------------------
Allow the server to run in the bin/ subdirectory, and back up over the bin/ directory when determining the Win32 ServerRoot. 	r87495
----------------------------
Back out the target path change from serverroot\bin back to serverroot for Apache.exe and it's associated lib*.dll files until after beta one. Change the make projects as well... and a commit of the actual .mak files will be coming in a moment. 	r87477
----------------------------
Add the config.layout page back. 	r87443
----------------------------
Find the RM program during configuration. 	r87427
----------------------------
Rework the RFC1413 handling to make it thread-safe, use a timeout on the query, and remove IPv4 dependencies. 	r87423
----------------------------
"Get ""NameVirtualHost *"" option working in Apache 2.0 "	r87393
----------------------------
When the platform supports IPv6 (according to APR) and the system is configured to support IPv6, Apache gets IPv6 listening sockets unless the Listen statement says otherwise (i.e., Listen specifies an IPv4 numeric address string or a hostname which resolves to an IPv4 address). 	r87388
----------------------------
get_addresses() . use apr_parse_addr_port() so we handle IPv6 addresses on . don't hardcode AF_INET when a hostname or IP address was dump_a_vhost() . check the address family before looking for certain IPv4 ap_fini_vhost_config() . pass apr_status_t to ap_log_error() after apr_getnameinfo() 	r87377
----------------------------
Fix the call to apr_snprintf() for formatting the sockaddr in a vhost entry when dumping the vhost config. 	r87365
----------------------------
Get mod_rewrite to work as a DSO by changing the way it keeps track of whether or not its post config hook has been called before.  Instead of a static variable (which is replaced when the DSO is loaded a second time), use userdata in the process pool. 	r87328
----------------------------
Get mod_cgid to work as a DSO by changing the way it keeps track of whether or not its post config hook has been called before.  Instead of a static variable (which is replaced when the DSO is loaded a second time), use userdata in the process pool. Still to go: mod_file_cache, mod_rewrite 	r87321
----------------------------
Fishing for undefined symbols, came across only this one. 	r87319
----------------------------
Major update of mod_log_config docs. 	r87288
----------------------------
config.m4: support mod_ext_filter (I'd been using --with-module mod_ext_filter.c: get rid of a warning 	r87287
----------------------------
configure's --with-* type switches are the standard way to specify foreign directories to a package. APRUTIL works this way, and does not need APR's location at buildconf.sh time. 	r87260
----------------------------
"Add cgi and cgid back into the configuration system. Submitted by:	Paul J. Reder <rederpj@raleigh.ibm.com> "	r87237
----------------------------
Get Apache to configure completely again.  This still doesn't build, but now we are getting very close. 	r87187
----------------------------
Get the modules configuration stuff working correctly.  This just deals with STANDARD modules and Protocol, not MPMs. 	r87186
----------------------------
Start to add back the config.m4 and Makefile.in's that were separated out during the repository move. 	r87184
----------------------------
Start pointing the configuration scripts to the correct directories 	r87183
----------------------------
Get buildconf working in the new repository.  Nothing builds, but we can at least configure everything. 	r87176
----------------------------
Remove multilogs.html which is documented in mod_log_config.html and update STATUS. 	r87169
----------------------------
Get Apache to use the new generated exports list.  This works on my Linux machine, but I am pretty sure there are going to be problems for others.  The idea here, is to be able to generate a list of the exported functions from APR.  This list needs to be correct, we can not list functions that are not exported on the platform being built on.  To accomplish this, we generate a list of the exported symbols when we configure APR.  As a part of this list, we also include all of the #if macros that surround those symbols.  Apache then uses this list of functions and macros to generate a file that refers to each of those symbols.  Because we have the macros, when we compile this file, the compiler ignores any symbols that aren't valid on this platform. 	r87142
----------------------------
"Document mod_log_config %{FOOBAR}C option Submitted by:	Sander van Zoest <sander@covalent.net> "	r87140
----------------------------
"Enable logging a cookie with mod_log_config Submitted by:	Sander van Zoest <sander@covalent.net> "	r87136
----------------------------
Fix some const confusion with simpler code. XXX note that 1.3.13 grew the xmethods in some recent patch: typedef struct { } action_dir_config; XXx seems like whoever applied needs to port forward to 2.0 :-) 	r87133
----------------------------
Bring mod_dav.html up to the new format, fix up some questionable HTML, and remove the LimitXMLRequestBody which is actually in the core. 	r87121
----------------------------
add --with-dbm switch to configure, allowing the user to set the type of DBM that apu_dbm will use (defaults to builtin sdbm). first pass at gdbm config support (seems to work fine in my simple test). - added src/lib/aputil/apu_private.h.in to hold aputil config info - apu_dbm.c now uses #if for the config values (rather than #ifdef) - cleared out temp hack in configure.in to force sdbm usage 	r87100
----------------------------
Always include lib/sdbm in INCLUDES (until somebody that can spell lbi/aputil teaches the configure to be a little smarter).  This lets apu_dbm compile, which in turns lets us build httpd again. 	r87089
----------------------------
Remove mentions of the obsolete ResourceConfig/AccessConfig. 	r87066
----------------------------
Add a directive to mod_mime which allows people to configure a filter stack for a given mime-type. 	r87026
----------------------------
Clean up some timeout arg warnings 	r87006
----------------------------
Get exports.c symbols to compile even if the declaration is hidden in APR include file. Implement all exports.c symbols even if the package or function isn't available in the current configuration. 	r86989
----------------------------
"Make cgi-bin work as a regular directory when using mod_vhost_alias with no VirtualScriptAlias directives. PR:	6829 "	r86974
----------------------------
Include ap_config.h to get the definition of AP_DECLARE_DATA. 	r86950
----------------------------
"Port mod_info to 2.0.  This is basically a complete re-write to use the config tree instead of re-reading the config file.  As a part of this change, the config tree needs to be exposed to modules as ap_conftree. Submitted by:	Ryan Morgan <rmorgan@covalent.net> Reviewed by:	Ryan Bloom "	r86948
----------------------------
add apr_get_home_directory(), teach mod_userdir to use that instead of calling getpwnam[_r] directly, back out mod_userdir's config check for getpwnam_r 	r86932
----------------------------
"Get mod_userdir compiling on FreeBSD when APR_HAS_THREADS. This doesn't account for the fact that getpwnam() isn't thread-safe on FreeBSD; it also doesn't account for systems where getpwnam_r lives outside of libc. See thread with subject ""[?PATCH?] using getpwnam_r in mod_userdir"" in Nov. 2000 new-httpd for some better long-term ideas for how to handle the problem. "	r86917
----------------------------
"In mass hosting setups (using mod_vhost_alias or mod_rewrite) where the hostname is interpolated into the filename, we need to be sure that the result of interpolation doesn't expose parts of the filesystem that should be private. This was done by checking the syntax of the Host: header according to RFC 1123 and RFC 952. However, many people have broken configurations that violate this syntax (frequently because they use underscores in their names), and it also doesn't accommodate the current effort to internationalize the DNS. I don't think the former is a compelling reason to relax the syntax checking, but the latter does justify this change. The only RFC on internationalized DNS at the moment is RFC 2825 which is an introduction to how difficult the whole thing is; the other official documentation is a pile of Internet Drafts produced by the Internationalized Domain Names Working Group of the IETF (with names starting ""draft-ietf-idn-""). However they have very little to say about URIs, and the current Internet draft about internationalized URIs (draft-masinter-url-i18n-05) has very little to say about hostnames :-( On the gripping hand there is some useful information at <http://www.apng.org/idns/> where there is some iDNS testbed work going on. The basic idea is that although the format of the hostnames in the DNS itself remains compatible with RFC 1123, the actual hostname presented to the resolver is in UTF8, and therefore the hostname in the URL and Host: header is also in UTF8. This change relaxes the checking so that only character sequences that are sensitive to the filesystem are rejected, i.e. forward slashes, backward slashes, and sequences of more than one dot. PR: 6635 "	r86898
----------------------------
The LoadModule line should specify a .so file, not a .la file 	r86853
----------------------------
Allow the core_output_filter to save data in the filter past the end of the first request if this is a keepalive connection.  This allows us to save the end of the first request until we have enough data from the second request to make it worthwhile to send the responses.  In order to do this, we need to allocate mmap's from the connection pool instead of the request pool.  If we don't use the connection pool, then the mmap is freed before the data is sent, because the mmap is freed at the end of the first request. 	r86840
----------------------------
Merge forward mod_log_config enhancement. Added three log methods: CLF compliant '-' byte count, method and protocol. CVg:   then name the system in this line, otherwise delete it. 	r86818
----------------------------
Document mod_log_config %c option 	r86815
----------------------------
Add a new LogFormat directive, %c, that will log connection status at the end of the response as follows: 'X' - connection aborted before the response completed. '+' - connection may be kept-alive by the server. '-' - connection will be closed by the server. 	r86814
----------------------------
Create a feature macro that determines if Autoconf was used to configure the server.  The ap_ugly_hack variable is only valid if Autoconf was used for the configuration. 	r86802
----------------------------
"Cause the command line version of mpm_winnt to do nothing with the service config unless the -k run argument is provided. Submitted by:	John Sterling <sterling@covalent.net> Reviewed by:	William Rowe "	r86795
----------------------------
Simplify the configuration mechanisms for threading in APR. Revise how Apache configs APR and allow MPMs (or other config scripts) to Submitted by: Joe Orton <joe@light.plus.com> Reviewed by: Greg Stein 	r86794
----------------------------
Get rid of a couple of buff calls by manipulating the APR socket timeout directly. 	r86786
----------------------------
Fix a buglet in the APR-ization of ap_lingering_close() -- use APR_SO_TIMEOUT instead of BO_TIMEOUT.  (We were actually setting a different socket option.) 	r86785
----------------------------
Make mod_cgi and mod_include work when compiled as DSO's again.  This is accomplished by moving suexec out of it's own file and into unixd.[ch]. The problem was that suexec.c wasn't being linked into the server unless a module was actually using ap_os_create_process.  This is still not clean, but it works now. 	r86772
----------------------------
Remove the suexec patch from mod_mime_magic 	r86765
----------------------------
note some filter configuration issues 	r86759
----------------------------
Don't truncate the string if a RewriteMap lookup has a syntax error. Submitted by:   erik quanstrom <quanstro@clark.net> 	r86758
----------------------------
Create modules.c in the build tree. This file depends on your configuration and thus cannot be shared by multiple build trees. 	r86756
----------------------------
Don't segfault if the filter doesn't have any request config prepared. This can happen when the config doesn't tell us to do anything but the administrator coded us in Add{Input|Output}Filter.  Instead of segfaulting, we turn into a noop. 	r86748
----------------------------
The request body should be read with the normal send/receive timeout instead of in non-blocking mode. 	r86734
----------------------------
other than minor tweaks: . mod_charset_lite is now a bit naughty, looking in core_dir_config to see if its filter is coded in Add{Input|Output}Filter.  There are various weird scenarios that happen when one of the filters gets added both by mod_charset_lite and due to Add{Input|Output}Filter.  It is much nicer (to the code and to the user) to avoid the problem rather than to trying to keep things from blowing up when we are misconfigured in this manner. It may be generally useful to add API functions a module can call to see if its filter is configured on input/output. Note that CharsetOptions [No]ImplicitAdd is no longer interesting, but that code has not yet been removed. . Fix input filtering so that we handle translating a brigade in multiple passes when our translation buffer fills up. . xlate_brigade is cleaned up a bit and hopefully has less bugs (far too many changes in one commit, but I couldn't access locus from 30,000 feet) 	r86733
----------------------------
Get everything working with suexec patches again. 	r86731
----------------------------
"Don't build mod_suexec by default. It breaks other platforms, and since suexec isn't built by default anyway, it makes sense to treat mod_suexec similarly. Submitted by:	Greg Stein "	r86730
----------------------------
Back out the suexec change to mod_rewrite.c.  It now builds again. (No, it wasn't a simple issue to get the suexec patch working.) The suexec support doesn't apply to the external mapping process, which is not related to any particular request.  Instead, [IMHO] the external mapping process should switch to the configured user/group that the daemon processes switch to. 	r86729
----------------------------
"One more update for ""config directory"" patch, plus update of keep-alive documentation. PR: Obtained from: Submitted by: Reviewed by: "	r86727
----------------------------
Fix a breakage due to Maoj's suexec patch of earlier today. 	r86723
----------------------------
I didn't know that mod_userdir was even used on Windows. Oops. #ifdef out Unix-specific portions for now. 	r86719
----------------------------
Add back suexec support. 	r86712
----------------------------
Add a temporary pool argument to unixd_pre_config, so that it can call APR functions (grumble). This is needed for apr_stat, which will be in the suexec path coming up. 	r86710
----------------------------
Add logic to rebuild mm's configure 	r86704
----------------------------
Belatedly update the documentation to include the NameVirtualHost * stuff. This isn't quite a sync with the 1.3 docco because we don't want to mention 1.3 in the 2.0 docs. 	r86673
----------------------------
Belatedly update the documentation to include the NameVirtualHost * stuff. This isn't quite a sync with the 1.3 docco because we don't want to mention 1.3 in the 2.0 docs. 	r86671
----------------------------
Namespace protect the rest of the macros defined by ap_config.h 	r86661
----------------------------
Sub-requests have to have a value for their request_config structure, or we'll seg-fault.  This should set the sub-request's request_config structure to the same exact same structure as the main request is using. 	r86655
----------------------------
Set the request config in the new r, not the old r. 	r86654
----------------------------
We have to create the core_request_config structure in the core on internal that makes sure getline didn't leave any droppings. 	redirects.
----------------------------
ap_get_client_block() now uses a brigade in core_request_config instead of a brigade in core_dir_conf.  For now, getline() and ap_get_client_block() share a brigade. 	r86647
----------------------------
The final line of the config file was not being read if there was no \n at the end of it.  This was caused by apr_fgets returning APR_EOF even though we had read valid data.  This is solved by making cfg_getline check the buff that was returned from apr_fgets. If apr_fgets return APR_EOF, but there was data in the buf, then we 	return
----------------------------
Add a core_request_config so we have a safe semi-hidden place to save core data that lives across function calls during a single request.  Change getline() to take a request_rec parm (rather than a conn_rec) so we can access the core_request_config. This is in preparation for adding look-ahead functionality to getline(), so it can support header line folding once again.  I'm committing these changes first so the core_request_config can be used elsewhere (i.e. ap_get_client_block). 	r86642
----------------------------
Restore functionality broken by the mod_rewrite security fix: so that the lookup can depend on the requested URI etc. Because the new code is recursive you can now write configurations like the following (with nested map lookups) which wasn't directly possible before -- you had to use a RewriteCond and a %N backref instead, as in http://www.apache.org/docs/vhosts/mass.html#xtra-conf RewriteMap tolower int:tolower RewriteMap host2user txt:/home/www/conf/virtusertbl RewriteRule /(.*) /home/${host2user:${tolower:%{HTTP_HOST}}|www}/public_html PR: 6671 	rewrite
----------------------------
"Tighten up the syntax checking of Host: headers to fix a security bug in some mass virtual hosting configurations that can allow a remote attacker to retrieve some files on the system that should be inaccessible. The problem occured with requests including the line ""Host: ..."" -- the last dot is stripped and the remaining "".."" then Reported by: Peter Christoffersen <pch@mindpass.com> Message-ID: <8quts6$2el$1@news.inet.tele.dk> Newsgroups: comp.infosystems.www.servers.unix "	reveals
----------------------------
http_filter(): when delivering body bytes, only deliver one block of data (however much is returned by bucket read) instead of delivering the entire body at once; this gets painful with a large body make a note of an issue with the blocking state of the socket; currently, the socket is non-blocking, but when reading body bytes we should feel free to wait for body bytes until a timeout occurs; 	r86628
----------------------------
"Rename output filters field (""filters"") in core_dir_config to ""output_filters"" for consistency with the name of the input filters field (""input_filters""). "	r86623
----------------------------
input filtering changes: get dechunking working verify that infrastructure for input filters works Unlike with my previous patch, ap_get_client_block() saves state between calls in the core's per-request dir config. Unlike with my previous patch, HTTP_IN keeps a count of remaining bytes in the conn_rec.  Code that needs to prod it to deliver a certain amount of request body plays with conn_rec->remain directly. 	r86613
----------------------------
Completes the port of the <Directory /> handling for Win32... there is still a patch needed for OS2 ... Brian? 	r86579
----------------------------
Just a scratch of a start of an upgrading doc.  It would help if people note any changes here that will affect end-user configuration. 	r86550
----------------------------
Write all of the request body to the child, not just what the kernel would accept on the first write. Because the pipe is non-blocking (via setting an APR timeout), we have to send in a loop. 	r86495
----------------------------
"Make mod_log_config compile cleanly when using BUFFERED_LOGS PR:	6519 Submitted by:	Mike Abbott <mja@sgi.com> Reviewed by:	Ryan Bloom "	r86445
----------------------------
Use autoconf to substitute the proper values into apachectl, and install it when we install everything else. 	r86436
----------------------------
*) convert fs/lock.c to use APR UUIDs for the opaque locktokens. *) blow away opaquelock.c and dav_opaquelock.h since direct use of APR UUIDs *) toss the uuid_state from the per-server config in mod_dav.c 	r86413
----------------------------
Be a little more explicit about the consequences of ErrorDocument xxx http://.... 	r86411
----------------------------
Port over the config directory stuff... 	r86409
----------------------------
Add a bit of infrastructure which will be needed for input filtering: 1) separate filter lists hanging off the r and the c 2) AddInputFilter directive (blatant rip-off of Ryan's AddOutputFilter 	r86403
----------------------------
"Multiple build and configuration fixes Build process: -add datadir and localstatedir substitutions -fix layout name -fix logfilename misspelling -fix evaluation of installation dir variables and -replace $foobar by $(foobar) to be usefull in the makefile Cross compile: -add rules for cross-compiling in rules.mk. Okay, rule to check for -use CHECK_TOOL instead of CHECK_PROG for ranlib -add missing ""AR=@AR@"" to severaly Makefile.in's -cache result for ""struct rlimit"" -compile all helper programs with native and cross compiler PR:	6384 Submitted by:	""R�diger"" Kuhlmann <Tadu@gmx.de> Reviewed by:	Ryan Bloom "	r86399
----------------------------
Change core_input_filter() so that it returns an empty brigade upon FIN/EOF or error.  This meshes with what getline() looks for.  It isn't perfect, but it avoids some nasty loops consuming all available storage on http/1.1 connections.  In keepalive state, we call getline to read the next request...  getline() calls core_input_filter() (indirectly)... core_input_filter() calls apr_recv() which returns APR_SUCCESS/0 bytes to signal FIN/EOF.  But core_input_filter() returned a bucket with length zero to getline(), so getline() called core_input_filter() again. 	r86379
----------------------------
"Fix the default logformat and CLF description. PR: 6556 Submitted by:	Mike Abbott <mja@sgi.com> Reviewed by:	Joshua Slive "	r86358
----------------------------
Fix link to RemoveHandler in the directives list. 	r86357
----------------------------
Debug messages in mod_charset_lite are now controlled by CharsetOptions DebugLevel=n instead of CharsetDebug on/off.  Use the debug level to decide which debug messages to issue (if any).  Use ap_log_rerror() instead of ap_log_error() when appropriate. Describe CharsetOptions in the doc. 	r86338
----------------------------
Set BSD_MAKEFILE in configure.in. The macro APACHE_GEN_MAKEFILES is executed in the context of config.status with variable substitution already performed, so the check in the macro itself did not work. 	r86334
----------------------------
We don't have config.guess until later in the build cycle, so change the test to use uname.  with this change a clean CVS copy will build using ./buildconf;./configure;make exactly like it should. Thanks Sascha. 	r86310
----------------------------
Fix a security problem that affects certain configurations of mod_rewrite. If the result of a RewriteRule is a filename that contains expansion specifiers, especially regexp backreferences $0..$9 and %0..%9, then it may be possible for an attacker to access any file on the web server. The fix replaces a multi-pass string expander with a one-pass expander, and includes the code quality improvements that were committed separately to 1.3. Message-Id: <E13OQB5-0004Xs-00@hand.dotat.at> 	r86302
----------------------------
Avoid a segfault when parsing .htaccess files.  An uninitialized tree pointer was passed to ap_build_config(). 	r86265
----------------------------
"Change the registered filter name to XLATEOUT (from XLATE). Set up the context in the filter in case the filter was inserted via AddOutputFilter. Provide a temporary hack to avoid having the module and core both insert the output translation filter.  For now, code ""CharsetOptions NoImplicitAdd"" in a container with ""AddOutputFilter."" Make a few cosmetic changes (e.g., rename the mis-named xlate_register_filter routine). "	r86250
----------------------------
Fix some problems with the recent port of RemoveEncoding and RemoveType to 2.0.  (--with-maintainer-mode works wonders!) 	r86248
----------------------------
Port the RemoveEncodings/RemoveTypes code from 1.3 to 2.0.  This includes the bug fix that was recently committed to the 2.0 tree. 	r86240
----------------------------
PR: 5040 Fix an AddHandler example. 	r86237
----------------------------
PR: 5596 Clean up confusion over which directives can go in <VirtualHost> 	r86235
----------------------------
PR: 5961 Make the NameVirtualHost docs a little more accurate. 	r86234
----------------------------
"Fix a bug parsing configuration file containers.  With a sequence like this in the config file the second container would be terminated at the blank line due to sediment in the buffer from reading the prior </IfModule> and an error message would be generated for the real </IfModule> for the second container.  Also due to this problem, any two characters could be used for ""</"" in the close of a container. "	r86233
----------------------------
Change AddFilter name to AddOutputFilter 	r86227
----------------------------
Add the AddFilter directive.  This directive takes a list of filter names that have been previously registered with the server.  Currently the directive is only valid inside the config file, but once the Options directive is tweaked a bit, I would feel more comfortable exposing this directive to htaccess files. As a part of making adding this filter, I removed the ctx pointer from the ap_add_filter prototype.  The problem is that the core is the thing that is actually inserting the filter into the filter stack, but the core doesn't know how to allocate memory for each filter.  The solution is to have the filters themselves be responsible for allocating the ctx memory whenever it is required. 	r86220
----------------------------
Encourage people to use the simpler NameVirtualHost * syntax for new setups and use a syntactically valid hostname in the example. 	r86214
----------------------------
This commit adds support for purely name-based virtual hosting that does not require any IP addresses in httpd.conf and which disregards the local IP address of any connections. This will be particularly appreciated by people running little servers on machines with dynamically configured IP addresses, and by people wishing to use identical httpd.conf files on all the machines in a load-balanced cluster. The syntax is: The implementation is a straightforward extension of what is there already although the patch is made somewhat larger by the need to avoid duplicate code for normal and wildcarded NameVirtualHosts. PR: 5595, 4455 [ported from 1.3.13] 	r86208
----------------------------
New doc describing configuration process. 	r86207
----------------------------
"Fix merging of AddDefaultCharset directive. PR:		5872 (reported against 1.3) Submitted by:	Jun Kuriyama <kuriyama@imgsrc.co.jp> Reviewed by:	Jeff Trawick "	r86176
----------------------------
Fix default Timeout & KeepaliveTimeout. Still need to limit directive values to prevent integer microsecond overflow. 	r86168
----------------------------
Keep this note for 2.0 developers, as well.  Needs additional comments to follow, after the Bills haggle out the final config registry details. PR: Obtained from: Submitted by: Reviewed by: 	r86147
----------------------------
Fix charset translation breakage on EBCDIC machines...  the core turned on buff's translation by default, but mod_charset_lite (when configured to do so) turned on its own filter-based translation, resulting in gibberish. To be determined... whether or not mod_charset_lite should enable translation of text objects by default (a la 1.3)...  probably... for now you have to tell mod_charset_lite to translate. 	r86135
----------------------------
Finish fixing the pcre build.  PCRE's configure script should be called, and we can't clean config.h and then touch the file, we actually need some of the data that config.h contains. 	r86132
----------------------------
the ExtendedStatus directive is also dead 	r86114
----------------------------
Remove the obsolete ResourceConfig and AccessConfig directives 	r86113
----------------------------
Use LimitExcept in the commented-out example for the UserDir stuff 	rather
----------------------------
Add entry about win32 socket timeouts... 	r86094
----------------------------
Change the rewrite log lock from intra-process to lock-all (and we really can log it if it fails). Don't segfault if RewriteLock wasn't coded in the config (i.e., if Fix a missing error code in a call to ap_log_error(). 	rewrite_log_lock
----------------------------
Allow <Limit*> to accept arbitrary extension method named instead of varfing.  Nothing takes advantage of this yet; that's coming next.  Also replace the shorthand Allow setup to use the new API (this is possibly a problematical change for the core default handler; no problem to back that out). 	r86057
----------------------------
"Fix a config tree problem. The following configuration file demonstrates the problem: <IfModule mod_rewrite.c> RewriteEngine on RewriteMap    quux-map       prg:/tmp/apache-2.0/map.quux.pl RewriteRule   ^/~quux/(.*)$  /~quux/${quux-map:$1} </IfModule> After this config file is parsed, the only statement in the config tree is the last statement in the IfModule container (""RewriteRule blah blah""). The problem is that when ap_build_config_sub() handles this type of construct, it moves *current to the end of the list before returning. If this construct were the first thing in the file, the caller would set conftree to *current, not realizing that there were list elements before *current.  The caller doesn't have addressability to those list elements. With this change, ap_build_config_sub() sets *conftree before walking *current to the end of the list. "	r85993
----------------------------
Disable the dbm_ usage in mod_rewrite so that it links. Still to do: decide at config time whether any modules need dbm, whether 	r85982
----------------------------
Finish the http_config.h documentation.  :-) 	r85955
----------------------------
Add more of the comments to http_config.h.  This is a horrible job by the way. 	r85954
----------------------------
Begin to document http_config.h.  This documents most (if not all) of the structures defined by this header file.  The functions will be the next thing that needs documenting. 	r85942
----------------------------
Move the Server Token stuff out of http_config_globals.h because it is now isolated in http_core.c 	r85941
----------------------------
REmove the mpmt MPM.  This also removes all of the config logic required to get this MPM to compile.  I may try to combine the two threading MPMs a bit more, or I may not. 	r85887
----------------------------
Change --enable-shared that Apache defines to --enable-mods-shared.  The original name was conflicting with an option for ./configure that libtool defines automatically. 	r85886
----------------------------
"Remove EXEC_ON_READ from ClearModuleList and AddModule.  Having these as EXEC_ON_READ was causing a seg fault, and it was unnecessary.  Neither of these directives changes how the server interprets the config file, they only change how the server responds to the configuration. PR:	6318 "	r85883
----------------------------
Clean up rules.mk and add support for building C++ source files. If your module uses C++, you need to add APACHE_REQUIRE_CXX to your module's config.m4. Unfortunately, we cannot use any sophisticated pattern matching in make, so instead of adding the C++ source files to LTLIBRARY_SOURCES, you need to write for foo.cpp and bar.cpp: LTLIBRARY_OBJECTS_X = foo.lo bar.lo 	r85873
----------------------------
"Grab OtherBill's latest 1.3 code to provide a default ServerName and log the error. Submitted by:	""William A. Rowe, Jr."" <wrowe@lnd.com> "	r85859
----------------------------
"ab would start up more connections than needed, then quit when the desired number were finished. Also fixed a logic error involving ab keepalives. Submitted by:	Victor J. Orlikowski Reviewed by:	Roy Fielding "	r85855
----------------------------
Make Apache use the new APR buildconf script to generate APR and MM ./configure. With this change, APR can build without Apache again. 	r85844
----------------------------
Remove all pthreads calls from the mpmt MPM prefork emulation.  This makes the mpmt MPM look almost exactly like the original prefork MPM.  Basically, all that's left is re-naming the defined directives so they work with 1.3 config files.  That will come later. 	r85819
----------------------------
shift the LimitXMLRequestBody directive to the core. use it from util_xml. 	r85816
----------------------------
Stop doing the find for make clean.  This was causing us to clean every directory twice.  We should still clean those directories that weren't configured in the current configuration, but this wasn't the right solution. 	r85807
----------------------------
Fix building the mpmt MPM.  The problem was that IfModule uses the name of the C file to determine if a module is present.  mpmt emulates three different MPMs though.  If the default config file we have sane defaults for each of the three MPMs that mpmt emulates. To fix this, the build process creates a soft link to the original MPM name during the configure process, and the build process actually compiles that file, instead of the original mpmt.c.  This allow the mpmt MPM to work just as well as mpmt_pthread. 	r85798
----------------------------
"the new ""mpmt"" MPM is busted. the config system didn't listen to me when I said that I really wanted --with-mpm=mpmt_pthread. I made it listen :-) the new behavior: if you explicitly state an MPM, then it is used. if it guesses one, then it is free to replace that guess with mpmt. [ yes, this will probably change again when mpmt works ] "	r85789
----------------------------
Initial version of the mpmt MPM.  This MPM can emulate dexter, mpmt_pthread, and prefork.  This basically just combines a lot of common code.  This builds and serves pages in all three modes, but I don't think killing the server works in any of them.  The configuration system hasn't changed at all, so using --with-mpm=(prefork|dexter|mpmt_pthread) all work. My goal is to remove the three separate MPMs in a few days, and then work on merging one of the BeOS and the OS/2 MPMs into this as well.  :-) 	r85788
----------------------------
"do the config/build for module stuff ""right"" "	r85785
----------------------------
turn dav/fs/ into a real module move the DAVLockDB directive to the dav_fs module 	r85783
----------------------------
"This patch fixes several problems with mod_file_cache - Pool usage problem - SIGSEGVs when both MMapFile and CacheFile directives are present.  The fix combines the cleanup routines and only cleans up resources when appropriate. - Log sendfile errors. Submitted by:	Greg Ames Reviewed by:	Bill Stoddard "	r85781
----------------------------
Fix make distclean and make clean.  Before this commit, we only cleaned directories that have been configured by the last call to ./configure. This means that if somebody does ./configure --with-mpm=dexter;make and then ./configure --with-mpm=prefork;make and then make distclean, dexter doesn't get cleaned up.  Same thing goes for clean. All this does is with distclean and clean, after we have recursively gone through the tree to clean everything, we do a quick find to get all of the left-over Makefiles.  Then we just do the same operation on those directories. 	r85773
----------------------------
config magic for enabling DAV, Expat, and SDBM. *) AP_LIBS contains the target .a files from src/lib/ *) AP_LIB_DIRS contains add'l directories (besides pcre and apr) that we *) apache_need_expat and apache_need_sdbm are two new configure feature *) hackery to deal with dav/fs/ since it isn't really a module *) do endian testing, so we can feed it into Expat to optimize that code 	r85743
----------------------------
brand new Makefile.in to work in the Apache 2.0 config/build system 	r85739
----------------------------
Fix the problem with ./buildconf not working right out of CVS.  The general problem, is that we were using AC_CONFIG_AUX_DIR_DEFAULT, which the autoconf source says shouldn't be called directly.  It should be called using AC_REQUIRE, but I couldn't make that work.  So, since we know exactly where the files that we are looking for are located, we'll just point autoconf directly to them, and ignore all of the hoops.  :-) I am not convinced the AC_CONFIG_AUX_DIR(.) call that I am using is strictly necessary, but it doesn't cause any problems and it logically makes sense. 	r85733
----------------------------
Remove the config stuff from the STATUS file.  I believe the configuration in 2.0 is as clean as it's going to get now.  Most of the cruft has been work can easily be added within the current configuration framework. Also, update CHANGES to reflect the recent changes to the config system. 	removed.
----------------------------
"Finish the Configuration cleanup.  This basically merges all of the autoconf scripts that APR provides for other programs into apr_common.m4. Other programs can then just include that file to get the APR checks that are required. Submitted by:	Sascha Schumann <sascha@schumann.cx> "	r85725
----------------------------
initial whack at the config/build stuff. 	r85719
----------------------------
Fix the configure process.  This does a couple of things to allow APR and Apache to share information. 1)  Move the calling of APR after Apache decides which MPM is run, but 2)  Setup the cache files correctly for RUN_NOW configured subdirectories. 	r85714
----------------------------
Pass the configure args to sub_configure scripts with the RUN_NOW macro. This allows people to specify --disable-threads on Apache's configure command line, and APR respects it.  This is the first step to fixing a problem introduced by making Apache call APR's configure script before making any config decisions. 	r85711
----------------------------
One bug and one fluff: need to use the '.' shell ``command'' to source the file; and remove error message first time APR's configure is run, and APRVAR doesn't exist. PR: Obtained from: Submitted by: Reviewed by: 	r85705
----------------------------
Make sure to get the required vars for the config.guess/et.al. family first. Right now, this is semi-duplicated, since APR does the same. PR: Obtained from: Submitted by: Reviewed by: 	r85704
----------------------------
We need to preload first, before running any other configures. PR: Obtained from: Submitted by: Reviewed by: 	r85703
----------------------------
Fix the configure script.  If a either the mpmt_pthread or dexter MPM's are chosen, the default CGI module is mod_cgid.  If any other MPM is chosen, mod_cgi is the default.  I would rather have the maintainers for other platforms change their own defaults, than make mod_cgid the default on all threaded MPM's. 	r85702
----------------------------
"Detect libraries based on which platform configure is being run on. Basically, Apache now runs APR's configure script first.  APR's configure script has been setup to create a new file, APRVARS.  APRVARS is basically all of the environment variables that APR wants to export to the program that is using it.  This allows the calling program to ""source"" APRVARS and get those environment variables. Removed hack to make platforms use -ldl. "	r85701
----------------------------
parms needs err_directive incase execute_now() returns non-NULL (e.g. if LoadModule fails) 	r85692
----------------------------
Bug fix: . check proper error variable when handling errors from ap_write(pipe_of_death) . log proper error variable after ap_poll() failure . ditto for ap_create_pipe() failures . ditto for ap_set_pipe_timeout() failures Stylistic change: . pass 0 instead of errno to ap_log_error when APLOG_NOERRNO is specified 	r85684
----------------------------
Remove select checks from Apache config.  These checks were used to define ap_select in ap_config.h.  The only file that used ap_select() was prefork.c.  I have modified prefork.c to use select instead of ap_select. In the future, this should be modified to use ap_poll like the rest of the Unix MPMs.  There are other MPMs that are continuing to use select, but this too should change in time. 	r85663
----------------------------
"Fix error messages issued from MPMs which explain where to change compiled-in limits (e.g., ThreadsPerChild, MaxClients, StartTreads). missing: the same minor changes for the 2nd BeOS MPM Submitted by:	Greg Ames Reviewed by:	Jeff Trawick "	r85645
----------------------------
ap_create_pipe was changed to return a pipe with both handles blocking (previously, both handles were non-blocking). ap_set_pipe_timeout() is now the only way to manipulate the blocking state of the pipe.  Pass -1 for timeout to make it blocking; pass 0 for timeout to make it non-blocking. ap_block_pipe() is gone. A few minor bugs were fixed along the way. OS-specific notes: non-Unix in general: Only Unix/BeOS currently has the optimization to keep track of the blocking state.  This is used to avoid syscalls as well as to handle ap_put_os_file(), which is a case where we don't know the blocking state of the handle we are given. OS/2: ap_set_pipe_timeout() with timeout value > 0: The code didn't play with the blocking state before and it doesn't still.  I did add logic for special timeout values 0 and -1 to play with the blocking state. ap_create_pipe():  old logic didn't do anything with the blocking state of the second handle; it still doesn't; hopefully it is blocking pre-BONE BEOS: old code to make a pipe non-blocking was a no-op; now it returns APR_ENOTIMPL BONE: old code to make a pipe non-blocking; it passed &zero as the parm to FIONBIO instead of &one; this bug was fixed Win32: The pipe was always created blocking before; no change previously, ap_setprocattr_io() ignored the blocking flag; now it on appropriate pipe handles (Bill Stoddard was just working in ap_set_pipe_timeout(), so I presume this is golden) 	respects
----------------------------
This Win32 patch adds the key HKCR/filetype/shell/execcgi/command as the preference over the HKCR/filetype/shell/open/command for registry-based script execution, allowing two behaviors to coexist peacefully (the pipe based console behavior and the Win32 shell behavior.) The new ScriptInterpreterSource registry-strict directive dismisses bth the HKCR/filetype/shell/open/command and the shebang processing for administrators who are interested in explicit authorization of file type execution allowed in the context of subscriber-created scripts.  The net result: only HKCR/filetype/shell/execcgi/command processing is permitted. Docs to follow shortly. PR: Obtained from: Submitted by: Reviewed by: 	r85625
----------------------------
This patch disallows bogus args to the ScriptInterpreterSource directive PR: Obtained from: Submitted by: Reviewed by: 	r85624
----------------------------
"Repair C++ compatibility in ap_config.h, apr_file_io.h, apr_network_io.h, and apr_thread_proc.h. Submitted by:	Tyler J. Brooks <tylerjbrooks@home.com> "	r85613
----------------------------
Make unixd_config.user_name const char * instead of char * to avoid a warning when the set-user-name command handler saves the address of the arg from the config file. 	r85606
----------------------------
Buffering for config file reads is now enabled. 	r85587
----------------------------
Turn on buffering for config file reads.  This is dependent on ap_fgets() doing the right thing. Brian Havard implemented buffering for ap_fgets() on Win32 recently; OS/2 had it already.  This provides it for Unix. changes to ap_read(), ap_getc(), ap_fgets() for Unix: 1) this fixes a problem in where ap_open() where a lock is created for 2) this fixes problems setting rv correctly in the ap_read() buffered 3) since ap_read() works as expected, it is possible to make ap_getc() 4) ap_fgets() no longer cares about '\r' 	r85586
----------------------------
Rebuild Apache and APR configure scripts when lib/apr/hints.m4 changes. 	r85582
----------------------------
Get the ap_config.h cleanup working on FreeBSD by adding includes of additional system headers. A platform check in logresolve.c to determine whether or not we include <arpa/inet.h> was converted to a feature check. 	r85567
----------------------------
Fix the configuration process.  If no modules are specified in a given directory, then that directory is no longer added to the build process. Also, I have added a .cvsignore to the file_cache directory and removed a generated file from this directory.  Finally, I have removed some unnecessary checks from the config.m4 files. 	r85561
----------------------------
Clean up a big chunk of ap_config.h.  This basically stops ap_config.h from including any files.  Because of this change, other files must include their own headers.  I also cleaned up a couple of other bugs in some modules because I had to compile them all. I expect this to break multiple platforms, but this will be fixed over time. The massive configure cleanup is almost done.  I will go through the files one more time after this commit. 	r85553
----------------------------
Fix a couple of problems with the pre/post config processing changes: 1) symptom: on system with bad/no DNS setup, ServerName isn't cause: ap_fini_vhost_config() called before ap_process_config_tree(), so ServerName was never stored in the config structure 2) symptom: on system with virtual hosts configured, SIGSEGV in cause: This stuff needs to be cleaned up further, exploring the use of a post-config hook for fixup_virtual_hosts(), ap_fini_vhost_config(), and ap_sort_hooks(), getting a lot of logic out of main(), and processing the config tree only once. 	r85522
----------------------------
Split generating Makefiles and creating config_vars.mk. The Makefiles are now rebuilt, when you run config.status. 	r85512
----------------------------
"Get FreeBSD 3.4 building again.  It doesn't have lib dl, so the build was broken as of the time we started always sticking in -ldl. src/modules/standard/config.m4: . don't add ""-ldl"" to LIBS for FreeBSD either . back out previous change regarding LTFLAGS; it should be o.k. to add it for any platform, because libtool knows what to do with it (no, Greg A., I haven't added support for it to OS/390 libtool yet :) ) src/lib/apr/configure.in: . if dlopen() isn't found in lib dl, don't fret (yet); try to find it in the default libraries; "	r85505
----------------------------
Cleanup more of the Apache configuration.  This removes all of the shared memory checks, because Apache relies completely on APR for shared memory support.  In doing this, we also need to know how APR/MM are providing our shared memory (ie file or memory) that requires the change made to APR's configure script that was just committed. 	r85501
----------------------------
Update the Dexter MPM to use APR for shared memory.  This removes a lot of duplicate code and allows me to clean up some config stuff in a few minutes. 	r85493
----------------------------
Remove waitpid from the config checks and all calls to waitpid from the server. 	r85488
----------------------------
Remove a bunch of string functions from Apache.  These are basically standard string functions like strstr, strcasecmp, etc that Apache used to define for platforms that don't have them.  These functions and the feature tests have moved down to APR where they really belong.  In doing this, I am also able to remove a bunch of tests from the Apache configure process. 	r85487
----------------------------
Remove all occurances of strerror from Apache.  ap_strerror works just fine with standard errno values, and it is more portable.  This also allows me to remove the check for strerror from Apache's configure script. 	r85486
----------------------------
When mod_cgid is started as root, the cgi daemon now switches to the configured User/Group (like other httpd processes) instead of continuing as root. 	r85481
----------------------------
Bring forward a change from 1.3 (the ability to use SetEnvIf* and BrowserMatch* in .htaccess files). 	r85447
----------------------------
PR: Obtained from: Submitted by: Reviewed by: Migrate the 'real' pre_config hook update from winnt.c to mpm_winnt.c and correct newly required symbols for http_main.c 	r85436
----------------------------
"Fix typo in configure script when checking for mod_so.  bash doesn't seem to have a problem but /bin/sh on Solaris does. Symptom: ""./configure: test: unknown operator =="" "	r85434
----------------------------
Remove the ability to enable/disable DSO support in APR.  The only current way to check for DSO support is to look for libdl.  Apache automatically adds -ldl to it's LIBS flag from config.m4 in modules/standard.  Other platforms will need to add the correct flag for their system. 	r85432
----------------------------
Add server tokens back to 2.0.  Also bring forward the change to allow the PRODUCT_ONLY value for ServerTokens.  This is relatively clean, all of the code lives in http_core, and when a module wants to add a token, they just call ap_add_version_component from the post_config hook.  Actually ap_add_version_component can be done anytime after the config has been parsed, it just makes the most sense to do it in post_config IMHO. 	r85426
----------------------------
Fix mod_so handling.  Basically, if --enable-so or --enable-some-module=shared is specified on the ./configure line, then mod_so is included in the build, -ldl is added to LIBS, and --enable-dso is added to APR's configure line.  Otherwise, mod_so is turned off, -ldl is not added, and APR is specifically told to build without DSO support. 	r85418
----------------------------
mod_cgid: fix parmlist to ap_open() so that we can open the ScriptLog file o.k. in log_script(), don't do anything with script_err parm if it is NULL (for mod_cgid, it is always NULL; rather than simply ripping out such logic I kept it in case somebody wants to factor out common parts of mod_cgi.c and mod_cgid.c later) 	r85405
----------------------------
"Modify the config order so that we read the config, process all EXEC_ON_READ directives at the same time, run pre_config hook for all modules, and then walk the tree.  This allows all modules to have a pre_config hook and know that it will be called at a reasonable time.  I also made ""Include"" an EXEC_ON_READ directive so that it is included in the tree properly. This was required after the other changes that were made. "	r85393
----------------------------
mod_cgi: Make ScriptLog directive work again by fixing the flags passed to ap_open(). TODO: Roll recent mod_cgi logging changes into mod_cgid. 	r85392
----------------------------
APACHE_XLATE, when doing translation that isn't single-byte-only We must zap the Content-length header (if any).  Otherwise, the browser will be seriously confused :)  The header is zapped in ap_set_keepalive() right before we look for Content-length, transfer encoding, HTTP level, etc. to decide, among other issues, whether or not to turn on chunked encoding.  For HTTP 1.1, if we don't send Content-length, we need to use chunked encoding, so we have to zap the header before that decision. Interestingly, in Russian Apache the Content-length header is zapped after ap_set_keepalive() is called, so with HTTP 1.1 they break the content-length-or-chunked rule. 	r85379
----------------------------
Add pre_config hooks back in for all modules.  This is important for the server tokens code that is coming soon. 	r85378
----------------------------
Fix a SIGSEGV in ap_md5digest() (bad parms to ap_seek()).  This is used when you have ContentDigest enabled and we can't/don't mmap the file. 	r85373
----------------------------
Fix building with DSO support.  If any module is configured to be compiled for shared support then APR_HAS_DSO is enabled and -ldl is added to the LIBS variable.  -ldl may need to be modified based on platform.  If no modules are designated as shared then APR_HAS_DSO is disabled and nothing is added to LIBS.  In basic testing this compiled without errors or warnings. 	r85362
----------------------------
APACHE_XLATE: in ap_send_error_response(), move the setting of the translation handle to before we process ErrorDocument strings.  The previous placement of this logic only handled the hard-coded response documents. When ErrorDocument specifies a redirection, we don't get here. When the error response is headers only, we don't need to set the handle for content.  Thus, all paths through ap_send_error_response() should be handled now. 	r85356
----------------------------
An xlate configuration module shouldn't mess with BO_WXLATE; ap_set_content_xlate() takes care of that detail. 	r85351
----------------------------
We now report the correct line number for syntax errors in config files, so remove the associated status item. 	r85349
----------------------------
We now report the correct line number for syntax errors in config files. 	r85348
----------------------------
Mention the line number problem for config file errors and Greg Ames' mod_mmap_static patch. 	r85343
----------------------------
"mod_cgi: Restore logging of stderr from child process when ScriptLog isn't used (as in 1.3), except that on Unix it is now logged via ap_log_rerror() instead of by the child having STDERR_FILENO refer to the error log. Submitted by:	Greg Ames Reviewed by:	Jeff Trawick "	r85331
----------------------------
PR: Obtained from: Submitted by: Reviewed by: One reason ap_config.h can be a problem.  Change VERSION->AB_VERSION to avoid ap_config.h #undef. 	r85320
----------------------------
PR: Obtained from: Submitted by: Reviewed by: Cleanup MSVC .dsp build for support/ files.  Give all support/ .dsp's the GCD configuration.  The entire Win32 environment now builds, but I'm sure that will be fixed soon :-) 	r85316
----------------------------
PR: Obtained from: Submitted by: Reviewed by: Cleaning up.  Note that apache (or https) -D DEFINE is now enabled, the shared data is now properly moved to either ap_hooks.c or http_config.c, and all should be well with rewrite_args. Next stop, no more apache_main entry point.  That's why this file needs to be empty of any callbacks or shared data, as it will bind to the core but the core won't be looking back into http_main. 	r85312
----------------------------
This patch corrects the issues from the AP_EXPORT and linkage specification arguments to the ap_hooks.h declarations.  As with the APR_ and AP_ patches, API_VAR_EXPORT becomes API_EXPORT_VAR, and MODULE_VAR_EXPORT becomes MODULE_EXPORT_VAR. I will be happy to revert the inclusion of ap_config.h from httpd.h if this bothers anyone.  More individual modules need to be patched if we do so. The API_EXPORTs all moved into central storage in the ap_config.h header.  Without WIN32 or API_STATIC compile time declarations, these macros remain no-ops. This patch also moves the following data from http_main to http_config: And the following variables had already moved into ap_hooks.c: The changes to http_main.c are in preparation for that module to move out to a seperate .exe for win32.  Other platforms will be unaffected, outside of these changes. 	r85309
----------------------------
Add mod_charset_lite for configuring character set translation. 	r85304
----------------------------
Fix a memory leak with ap_wait_or_timeout. 	r85286
----------------------------
"Fix the config parser so that if there is no current node, and we are evaluating an EXEC_ON_READ directive, and the directive's sub_tree is empty, we don't try to set the node's parent pointer.  This stops a seg fault. Submitted by:	Jeff Trawick "	r85269
----------------------------
configure is a generated file; hence it should be in .cvsignore. 	r85264
----------------------------
Make Apache and APR use the same flags to specify maintainer mode.  I chose to use --with-maintainer-mode, because that flag can be passed down using AC_CONFIG_SUBDIRS.  I couldn't find any easy way to pass environment variables to configure scripts called from within Apache's configure. 	r85262
----------------------------
Fixes to allow Apache to run as a Win95 service... highlights main_win32.h : Moved delarations to a header, by request ap_listen.h :  References types declared in http_config.h http_main.h :  Add the Win32 flavor entry point declaration apr.hw :       Cleanup the redundancy department of redundancy win32/proc.c : Double null termination was required here Everything else should be obvious and isolated to Win32. Build files will be committed seperately. 	r85253
----------------------------
ap_wait_or_timeout() can't be static since it is called from dexter.c, prefork.c, and mpmt_pthread.c. (Yes, we still need a function prototype somewhere, but at least we can link properly now.) 	r85252
----------------------------
Move wait_or_timeout from the MPM's into the new mpm_common.c file.  I also renamed wait_or_timeout to ap_wait_or_timeout for namespace protection. 	r85250
----------------------------
Cleanup ap_config.h fallout for Win32.  Only a few very minor changes to ap_config.h and util.c, but they might hurt someone... please watch those two carefully. 	r85237
----------------------------
fix up the repository with the correct add/remove sequence. this is the initial checkin of ap_config.h: it is a copy of ap_ac_config.h 	r85234
----------------------------
Commit the EXEC_ON_READ changes.  This allows modules to hook into the config file read phase.  Full details are in the CHANGES file blurb. Examples to see how this should be used are provided for <IfModule> <IfDefine> LoadModule, AddModule and ClearModuleList expect docs in the next day or two. 	r85217
----------------------------
We no longer have to -DHAVE_CONFIG_H on the $(CC) line, because the ap_ac_config.h file has been renamed to ap_config.h which is included directly. 	r85211
----------------------------
src/build/build2.mk: build PCRE's configure script if needed (when you src/Makefile.in    : re-order libpcreposix.la and libpcre.la to make 	r85195
----------------------------
Vertically align all the descriptions of the modules in ./configure --help (m4 is gnarly) 	r85190
----------------------------
Get tree build to work correctly with config Include directive 	r85172
----------------------------
Make apxs mostly work for 2.0.  It doesn't add the module to the config file yet, but that should be trivial to add back in. 	r85150
----------------------------
Win32: Fix some bugs in the restart logic.  This is still rather adhoc. A more rigorous solution is to maintain a list of overlapped io structures in the child_main control thread and use HasOverLappedIoCompleted() to manage the connections and pending io. We must resort to maintaining a list of pending io (i.e. overlapped structures) should we ever begin using AcceptEx to receive data. Why? We need to be able to detect when a connection is received but no data is being sent over that connection. There is a Win32 function (whose name I forget at the moment) to handle this. Why can't Win32 just timeout the connection using setopt??? It would make life so much easier if AcceptEx just returned TIMEOUT in this condition rather than requiring the application to explicitly poll the socket to see if data is available. 	r85131
----------------------------
Configure creates config.nice now containing your configure options. Syntax: ./config.nice [--more-options] Obtained from: PHP 	r85127
----------------------------
Blurf. Move the preload down a bit to ensure that the location of config.guess is set :) 	r85126
----------------------------
Final .dsp changes to produce the lightest weight builds without precompiled headers or source browse files under Win32.  Enabling these is straightforward, if that's what the user desires.  Also correct minor errors, and reset some project defaults to their current config. 	r85121
----------------------------
Fix the parsing of a config file when the first item in either the config file or a container is a container. 	r85061
----------------------------
"fix path to mm's configure.in fix aclocal.m4's dependencies Submitted by:	Sascha Schumann <sascha@schumann.cx> Reviewed by:	Jeff Trawick "	r85056
----------------------------
"Fix the progname stuff to work the same way the rest of the configure scheme works. Submitted by:	Sascha Schumann Reviewed by:	Ryan Bloom "	r85050
----------------------------
Some windows tweaks to the default configuration, including providing a default ServerName of 127.0.0.1, including the new auth digest and file cache module LoadModuleDirectives, et. al. 	r85049
----------------------------
Define HAVE_STRING_H, HAVE_STDLIB_H, HAVE_CTYPE_H, HAVE_LIMITS_H at configure time.  Some of the modules use these. 	r85046
----------------------------
If a developer uses --with-program-name=foo, the config files are renamed to match the name of the executable.  In this example, httpd.conf will be 	renamed
----------------------------
Allow the Apache-2.0 executable name to be specified with the --with-program-name command line argument to configure.  This does not change the name of the config files or anything else, yet. 	r85035
----------------------------
Remove ServerType from the Windows config file 	r85029
----------------------------
"drop the ""container"" param from ap_walk_config(). callers should simply minor refactor between ap_walk_config() and ap_walk_config_sub() to clean up "	remove
----------------------------
"clean up cmd_parms: config_file is no longer valid; end_token is bogus; move configfile_t and functions from httpd.h to http_config.h new signature for ap_build_config() (since config_file removed from cmd_parms) add ""data"" to ap_directive_t for future use by modules. add filename. syntax checking for section-close directives: a section-open must exist, </FOO> command_rec structures are obsolete. Remove from http_core.c. do not store </FOO> directives in the config tree. clean out section-close logic from http_core.c (and old, related comments) <Limit> and <LimitExcept> must walk their children. new mechanism in ap_check_cmd_context() for testing enclosure in a <IfModule> and <IfDefine> must pass cmd->context when walking the children several places: we had a walk followed by ap_get_module_config(). that "	r85024
----------------------------
handle error messages during building and processing of the configuration. add missing return statements, wrap some lines, remove unused vars. move syntax error reporting and exit(1) back to the right place (to be 	r85023
----------------------------
"Add `IndexOptions +VersionSort', to nicely sort filenames containing version numbers. Submitted by:	Martin Pool <mbp@linuxcare.com.au> "	r85021
----------------------------
Parse the config tree, instead of the config file.  This is a first step there are some big improvements to be made to this code, but this works now, and it is a first step. 	r85015
----------------------------
Add logic to timeout CGI scripts properly.  This requires that APR pipes can be timed out. 	r84986
----------------------------
Add a pool to dupfile.  There is no reason that when we duplicate a file,       we would want to use the same pool for the duplicated file as we used for the original file.  This should solve a problem we were having with dieing quietly on startup, because we are no longer closing stderr in the original process and then opening the config file as file descriptor 2. The original problem report can be found in the message <20000311232812.A1066@sanguine.linuxcare.com.au> 	r84985
----------------------------
Add back in logic to put the ending container directive in the tree.  This needs to be there until we have a validating tree.  Without this, it is possible for a config file to read: <Ifmodule mod_foo.c> </Limit> and still be read correctly.  When the tree building functions can validate for us, this should be removed, and there is a comment that says so. 	r84979
----------------------------
apr_config.h is a private include file, and shouldn't be used by any C files outside of APR.  ap_signal has been moved to apr.h, so this include is no longer needed. 	r84967
----------------------------
Fix minor configuration & platform dependencies 	r84962
----------------------------
First step to getting configuration modules working.  This step creates a tree, but does not use the tree for anything. 	r84949
----------------------------
Recognize an EBCDIC platform during configuration and turn on CHARSET_EBCDIC. 	r84935
----------------------------
Arrgh... Release aprlib.mak/.dsp is broken. Now aprlib.mak is deleting apr.h and apr_config.h so I don't have to in makefile.win 	r84919
----------------------------
Windows: Cleanup auto-generated apr.h and apr_config.h 	r84918
----------------------------
Russian Translation, contributed by Pavel Polischouk <pavelp@iil.intel.com> Dirk, do you think the AddCharSet's are OK like this? Submitted by:   Stas Bekman <sbekman@stason.org> 	r84907
----------------------------
Eliminate apr_win.h and apr_winconfig.h (and the ugly #ifdefs they cause). Now, apr.h and apr_config.h are generated from apr.hw and apr_config.hw at build time. At this point, the server will not compile on Windows because of the recent DSO commits. Fixing those next. Submitted by: Bill Rowe & Bill Stoddard 	r84896
----------------------------
Eliminate src/apaci, and replace with a header file containing paths: include/ap_config_path.h. 	r84871
----------------------------
Fix the warnings associated with the pre_config patch. 	r84864
----------------------------
"ap_hook_pre_config is gone Submitted by:	William Rowe Reviewed by:	Jeff Trawick "	r84863
----------------------------
Put the pre_config hook back into the table.  This solves the problem of the pre-config hook only being valid for MPM's.  This patch also distinguishes between STANDARD modules and MPM's. 	r84862
----------------------------
"Get mod_rewrite working with APR locks This has been tested on Linux and works (with the caveats: must use --disable-hsregex, must define NO_DBM_REWRITEMAP, must remove Dirks March 14 patch from util.c and httpd_config.c). Submitted by:	Paul Reder Reviewed by:	Bill Stoddard "	r84829
----------------------------
Clear hook registrations between reads of the config file. When DSOs are unloaded and re-loaded the old hook pointers may no longer be valid. This fix eliminates potential segfaults. 	r84828
----------------------------
Explain the changed syntax of CacheNegotiatedDocs 	r84814
----------------------------
Explain the changed ErrorDocument syntax. 	r84813
----------------------------
Test for AP_USE_HSREGEX, not USE_HSREGEX, as that's what actually gets defined (in ap_config_auto.h) when using the bundled hsregex. 	r84795
----------------------------
Strict prototypes are no use until someone rewrites the config API. 	r84791
----------------------------
After adding the AddCharset's back in; here is some minor stuff to make that work and some examples. PR: Obtained from: Submitted by: Reviewed by: 	r84786
----------------------------
Added AddCharset back in again. Need that badly for my production hosts. Still checking and this also exposes the lack of EBCDIC and the NOT_PROXY change which is done since 1.3.9 PR: Obtained from: Submitted by: Reviewed by: 	r84785
----------------------------
Another one in the department of fairly useless patches which are best described as feature creep. Allows ${ENV} constructs in the config file. This avoids the need for mod_perl or m4 cleverness whilst mainting some of the usefullness. It does not do (of course) multiline things or anything that clever. Feel free to flame me. PR: Obtained from: Submitted by: Reviewed by: 	r84765
----------------------------
"Nasty backwards compatibility breaking 'fix' to get rid of ErrorDocument	201 ""Some string without a closing quote case which is just pure ugly. I am _NOT_ going to be offended if anyone rolls back this patch OR if anyone suggests to have an ErrorDocument2 which the proper syntax/semantics. But I thought lets take my chance whilst everyone is still Dw. PR: Obtained from: Submitted by: Reviewed by: "	recovering
----------------------------
Take my chance and try to sneak in a very nasty change which will break some backward compatibility but get rid of half a dozen nasty if-then special cases in any config file parser or gui. I am _NOT_ going to be offended if anyone rolls this patch back; or hack's it with a RAW_ARG as to also take the old config as well. PR: Obtained from: Submitted by: Reviewed by: 	r84763
----------------------------
more post-old-style Configure cleanup 	r84747
----------------------------
changed module name to more consistent naming scheme, as used by configure: mod_auth_xxx -> auth_xxx_module 	r84729
----------------------------
Rebuild the configure for MM.  Once this has settled we can remove the configure script as it shouldn't really be there anyway. 	r84716
----------------------------
"Add requried #include ""ap_config.h"" in a couple of OS/2 specific files. "	r84715
----------------------------
A little CFLAGS reformation. Additions to Apache's CFLAGS should be using EXTRA_CFLAGS instead, so we don't affect packages that Apache configures. 	r84690
----------------------------
"Some Apache users are nervous about the version number (e.g., ""Apache/1.3.11"") in the Server: version string -- so add a new ServerTokens keyword that displays just the product name with no version (i.e., ""Apache""). "	r84678
----------------------------
Fix the make clean rules.  We must delete *.slo files or we are leaving stale libraries in the modules/standard directory when configured for dynamic modules. 	r84625
----------------------------
"Rework the code to handle apache -k shutdown|restart. The fundamental problem being solved here is determining the best way to discover the Apache parent process PID (stored in the location specified by the PidFile directive). This patch attempts to read the config file directly to determine the pidfile and avoids going through the motions of calling all the module initialization This patch will not work if the pidfile directive is in a file pointed to by an include directive. Not sure is this is a common case or not on Windows. If it is, it is easy enough to add a bit more code to follow include directives. An interesting modification would be to detect the presence of a \ -C directive containing a pointer to the pidfile: E.g., apache -k restart -C ""pidfile d:/mypidfile"". Let's keep it simple for now and see what happens. "	routines.
----------------------------
Fix prefix handling.  Before this patch, when using --prefix on the configure line, the binary ignored it when setting HTTPD_ROOT.  This patch fixes that problem. 	r84595
----------------------------
These changes allow BeOS to use the new buildconf configuration. 	r84588
----------------------------
Make clear that there are more directives which are actually not allowed in <VirtualHost> sections. Submitted by: sehh <sehh@altered.com PR: 5596 	r84576
----------------------------
Enhance AddCharset description. Submitted by: Youichirou Koga <y-koga@isoternet.org> PR: 5554 	r84574
----------------------------
"Try to reduce confusion over multiple and possible ""conflicting"" versions of the term ""default"" by changing AddDefaultCharset to be of the mode Off | On | charset PR: Obtained from: Submitted by: Reviewed by: "	r84569
----------------------------
"Streamline the AddDefaultCharset directive. Now this one directive controls the entire 'charset' specification setup. If there is heartburn, I have no trouble with backing this out, but it makes live easier for those not using the ""default"" charset, and reduces directive bloat a bit :) PR: Obtained from: Submitted by: Reviewed by:	Martin "	r84564
----------------------------
The 'canonical' name for this #define (as of Configure, ap_config_auto.h) is USE_HSREGEX 	r84549
----------------------------
Add missing AddCharset directive. PR: Obtained from: Submitted by: Reviewed by: 	r84545
----------------------------
Set timeouts to sendfile operation in http_protocol.c. Fix bugs in Win32 sendfile implementation. 	r84543
----------------------------
Include ap_config.h before httpd.h, this ensures that AP_USE_HSREGEX is defined correctly in all C files. 	r84531
----------------------------
Get OS/2 working with new configure system. Yay! :) 	r84522
----------------------------
Let ap_config.h figure out whether netdb.h should be included or not. This fixes a compile problem on platforms that do not have netdb.h. 	r84506
----------------------------
Manoj has been pushing for this for a while, but I've been too dense to understand that he was right.  :-)  Basically, this makes the modules use ap_config to test for header file inclusion.  This method is not to be used for larger modules that run autoconf theirselves.  Including ap_config is only valid for modules which rely on Apache to do their configuration.  Currently, this is only the core modules. 	r84497
----------------------------
"This is a huge change to the configure system.  Basically, this name space protects most, if not all, of the Apache macros.   This has been tested on Linux using all of the Unix MPM's.  The biggest push was that Apache's httpd.h header file can no longer include the ap_config.h file.  Most of the other files include this themselves now. Submitted by:	Ryan Bloom and Manoj Kasichainula "	r84492
----------------------------
Remove config.cache, if configure is rebuilt 	r84473
----------------------------
Be more explicit about the performance of UseCanonicalName DNS after the scoreboard change. 	r84440
----------------------------
"Make our nitpicking and complaining guys happy: Added the mod_rewrite `URL Rewriting Guide' to the online documentation (htdocs/manual/misc/rewriteguide.html). This paper provides a large collection of practical solutions to URL based problems a webmaster is often confronted with. This version of the text was translated from my WML source on my website and my old official version is now discarded. So, as it was requested, this can be treated as an official donation of this text to the ASF. This way the ASF is now the official owner of this text. <IRONIC> Be happy and give Ken and Jim the credit for achieving this by being such sensitive and friendly to other developers like me and always name by writing free software and contributing to projects like Apache. Sorry that I have forgotten to donate this piece of text to the ASF in the past and instead added such a contemptible hyperlink directing to a page on www.engelschall.com. I hope this is now fixed and the closed and holy ASF world is rescued again. </IRONIC> <PERSONAL> I think, I don't have to say that I'm more than angry and disappointed how developers like me are constantly bashed in the ASF... we can go for it also in the future, but we should stop looking astonished all the time if we find out that too less people contribute to the ASF and old developers like me no longer have a warm feeling here, please. It's our own fault in thinking that contributions are for free and anonymous just because our project is a group effort. IMHO we already have forgotten the golden rule of Open Source development: if one wants happy and long-term contributing developers one especially has to make sure they receive the requested credit. There is an upper limit a project can accept to give, of course. But credit always has to depend on the amount, quality _and_ duration of contribution and IMHO cannot be judged by stating that just all people are equal and so some contributors can be bashed for the fact that their name occurs more often. It is correct that my name occurs more often caused by the fact that I always try to bring in my stuff to the project. But keep in mind that this is because I _HAVE_ stuff to bring in which I've created _OUTSIDE_ the project. So I think its unfair to bash me just because I try harder to bring in my additional stuff. If a developer has not much externally created stuff, he cannot bring it in to the project, of course. But just because one has more externally created stuff and tries to bring it in, is IMHO no reason and excuse to bash him for this. It's not my fault that I write in my freetime more Open Source packages like most of you. So if you dislike stuff developers want to bring in, decide on the contribution based on fair technical arguments (pros and cons). But don't judge the contributions all the time just because you think this way you ""promote"" someone (be it RSE, GNU or whoever else). Hell, an Open Source project is not a group of people to rule their own closed world and be celebrated in the press for this. It's still an effort to create the best piece of _software_ money can't buy. So you should stop thinking about contributors as our enemy. They are the main driving force of every project, although some people seem to not understand this at all. And whatever you think about my personal opinion, but IMHO it's not bad for a project if someone's name is ""promoted"" with it, too. What is actually bad are those complains and discussions which make developers angry and the fact that they result in even less contributions. </PERSONAL> "	reminding
----------------------------
Finish the MPM decision logic.  This moves the threads checking stuff into the mpm directory where it belongs.  It also adds logic so that if threads aren't detected, we automatically choose to use the prefork mpm.  Lastly, I also cleaned up a variable name to make it more consistent with the other variables used in our configure script. 	r84365
----------------------------
This fixes the bug in my last commit.  Apache always caches a value for enable-threads.  This allows us to re-configure the server for different MPM's without worrying about not having APR-threads available. 	r84360
----------------------------
Clean up APR's configure script a bit.  This commit also allows Apache to specify that APR should be built without threads for the prefork MPM.  This is broken if we then try to configure Apache again using a threaded MPM, but this is easily fixable, and I will be doing that soon.  Lastly, I removed all thread calls from APR when it is told to build without threads. 	r84359
----------------------------
Add back support for UseCanonicalName in <Directory> containers. Found by Dave Colasurdo <davecola@us.ibm.com> 	r84347
----------------------------
Add back support for UseCanonicalName in <Directory> containers. Mistake was found by Dave Colasurdo <davecola@us.ibm.com> 	r84345
----------------------------
We don't need the capability to build an acconfig.h anymore; AC_DEFINE provides everything we need for equivalent functionality. This change deletes the intrastructure that built acconfig.h.in before. 	r84344
----------------------------
Speed up building, by making --disable-shared the default until we put proper DSO support into the autoconf configuration scripts. 	r84333
----------------------------
Don't actually run ./configure in buildconf, it wastes lots of time if we want to use ./configure's flags, among other things. 	r84332
----------------------------
We actually don't have to remove config.cache, because AC_CONFIG_SUBDIRS redirects APR's config.cache to point to Apache's. 	r84331
----------------------------
Eliminate the .h.stub files; AC_DEFINE can generate the necessary #defines in the config header for us. 	r84329
----------------------------
Put back the removing of config.cache. Also add a -f flag to the rm to eliminate a warning. 	r84328
----------------------------
mmap_static isn't in the standard directory yet; this directory shouldn't try to configure it. 	r84326
----------------------------
Make Apache's configure script run APR's. 	r84325
----------------------------
"Peter Watkins writes: In September, there was discussion of mod_log_config and some need to break the client request ""%r"" into its separate components. A patch was committed to the 1.3 dev tree that exposed the method and protocol the same as ""%r"" because %U does not include query string information. The attached patches add support for logging query string in such a way that ""%m %U%q %H"" is the same as ""%r"". I would like to see this committed to take care of the unfinished business begun with ""%m"" and ""%H"". Thanks, -Peter PR: 5174 Submitted by:	Peter Watkins <peterw@usa.net> Reviewed by:	Martin Kraemer "	request
----------------------------
Fix some warnings when configured with --enable-maintainer-mode. ap_start_(shutdown|restart) are no longer static in dexter, because we explicitly state we are creating them to be called from places other than the parent.  This is the first in a series of patches to get the 2.0 code to compile cleanly again. 	r84290
----------------------------
Use ap_open_stderr in http_config.c.  This cleans up some non-portable code that has been bothering me. 	r84281
----------------------------
"Add the AddCharset functionality to mod_mime. Submitted by:	Youichirou Koga <y-koga@isoternet.org> Reviewed by:	Ken Coar, Martin Kraemer "	r84265
----------------------------
Add strucutre to autoconf-config system to allow modules to specify config tests to run if they are enabled. 	r84231
----------------------------
Make most other modules selectable by autoconf's ./configure. 	r84230
----------------------------
Make the call to configure a module a little simpler if the module struct's name is the same as the module's. 	r84227
----------------------------
autoconf: Start adding support for selecting modules on the ./configure line. This commit only supports mod_env and mod_log_config. 	r84225
----------------------------
autoconf: Generate modules.c based on configuration. This is the first step to supporting selection of modules, and it seems to make --with-mpm actually work now. 	r84223
----------------------------
"Add the long-awaited IndexOptions DescriptionWidth keyword. It was waiting for a way to avoid breaking HTML tags, but that's already been done as much as possible -- we can't do anything about breaking HTML elements without putting a full parser in. PR:		2324 "	r84210
----------------------------
"Add a FoldersFirst keyword to the IndexOptions directive, which causes subdirectories to always appear first in FancyIndexed listings. Reviewed by:	Ryan Bloom, Martin Kraemer, Jim Jagielski "	r84205
----------------------------
Place ap_config_auto.h in src/include. It didn't seem to work earlier, but it does now. *shrug* 	r84202
----------------------------
Eliminate ap_config.h's checks when using autoconf. Now, ap_ac_config.h is used instead, and autoconf's configure script will check for everything else. 	r84200
----------------------------
Remove a vestige of the old timeout system. ident lookups need timeouts, though. 	r84198
----------------------------
Fix a thinko. Apache's configure.in shouldn't attempt to create APR's Makefile. 	r84190
----------------------------
Added missing links to htdocs/manual/mod/directives.html for AllowCONNECT and ProxyDomain. Submitted by: Patrik Grip-Jansson <patrikj@gnulix.org>, Ralf S. Engelschall Reviewed by: Ralf S. Engelschall PR: 5319 	r84171
----------------------------
explain how ServerName interacts with NameVirtualHost better 	r84125
----------------------------
ToDo: timeout pipes to CGIs 	r84100
----------------------------
Add a config directive to Dexter to not maintain any connection status, similarly to what ExtendedStatus did in 1.3.  It's not perfect, since the server might still go through effort to derive status info only to have it not recorded, but it does go most of the way. 	r83986
----------------------------
Need to pass in just the directory, not including the filename. Note that CGI arguments are being completely ignored. suexec needs to be handled, the CGI arguments need to be canonicalized (e.g., quote args containing spaces, etc.) and ScriptInterpreterSource needs reimplementing. Whew! 	r83978
----------------------------
Apply Ben H's patch to the winnt mpm... Well this was thought provoking. Drive out the use of malloc in two places. In listen.c, using the global process pool instead.  That changes the API into listen so that a process is passed in rather than the config pool.  That's all was easy. The pain is propogating a change into all N of the mpm, they are all similar but different in their use of listen.c  There is a lot to dislike about similar but code scattered code. I changed the N setup_listener routines, they now take only the server since they can dig the config and global pool out of there. Free today: ap_setup_prelinked_modules now takes the process so it can allocate it's table in the process's pool rathern than use malloc. 	r83962
----------------------------
ap_server_argv0 was undefined. Use a simple default (basename(argv[0])) 	r83945
----------------------------
Well this was thought provoking. Drive out the use of malloc in two places. In listen.c, using the global process pool instead.  That changes the API into listen so that a process is passed in rather than the config pool.  That's all was easy. The pain is propogating a change into all N of the mpm, they are all similar but different in their use of listen.c  There is a lot to dislike about similar but code scattered code. I changed the N setup_listener routines, they now take only the server since they can dig the config and global pool out of there. Free today: ap_setup_prelinked_modules now takes the process so it can allocate it's table in the process's pool rathern than use malloc. 	r83943
----------------------------
"Add process_rec to the top of {server,connection,request}_rec hierarchy of structs that abstract server activities.  Store some stuff in process_rec (finally a place to have nearly guiltless globals) for example the global and configuration pools.  Put some operations on process_rec in http_main, in particular the destroy_and_exit operation, and the use it to do all the exit calls. Change ap_read_config to operation on this ""object"" rather than on the configuration pool.  Modify server_rec to point to the process, so you can get at it most all the time which should finally allow most of the server's malloc calls to be eliminated. There are no locks in the process struct as yet, put them in as needed. Some of the hooks should take this rather than conf. pool. "	r83942
----------------------------
Stop CVS from complaing about a manually created src/lib/pth/ subdir if one build with GNU Pth through the pre-configured setup in config.options. 	r83920
----------------------------
"Fix the following bunch of warnings in dexter MPM: egcc -c  -I../../../os/unix -I../../../include -I../../../modules/mpm/dexter -pipe -O2 -pedantic -Wall -Wshadow -Wpointer-arith -Wcast-align -Wmissing-prototypes -Wmissing-declarations -Wnested-externs -Winline -Wno-long-long -funsigned-char -DTARGET=\""apache\"" -DUSE_EXPAT -I../../../lib/expat-lite `../../../apaci` dexter.c dexter.c:188: warning: no previous prototype for `clean_child_exit' dexter.c:491: warning: no previous prototype for `ap_start_shutdown' dexter.c:504: warning: no previous prototype for `ap_start_restart' dexter.c:682: warning: declaration of `pconf' shadows global declaration dexter.c: In function `setup_listeners': dexter.c:683: warning: declaration of `pconf' shadows global declaration dexter.c: In function `process_socket': dexter.c:744: warning: pointer targets in passing arg 3 of `getsockname' differ in signedness dexter.c: In function `worker_thread': dexter.c:932: warning: pointer targets in passing arg 3 of `accept' differ in signedness dexter.c: In function `ap_mpm_run': dexter.c:1365: warning: declaration of `i' shadows previous local dexter.c: At top level: dexter.c:1404: warning: declaration of `pconf' shadows global declaration dexter.c: In function `dexter_pre_config': dexter.c:1405: warning: declaration of `pconf' shadows global declaration "	r83837
----------------------------
Make ``configure --with-option=devel'' under GCC 2.95.1 happy by avoiding various warnings... 	r83836
----------------------------
"Remove support for ap_suexec_enabled Submitted by:	Dean Gaudet "	r83790
----------------------------
"Remove timeouts as part of pthreads changes. Submitted by:	Bill Stoddard "	r83788
----------------------------
"Changes from pthreads.  Removes timeouts, adds mutex. This probably breaks the proxy on everything but pthreads. Submitted by:	Bill Stoddard "	r83769
----------------------------
"Removed timeouts. Submitted by:	Bill Stoddard, Dean Gaudet "	r83768
----------------------------
"Replace all alarms and timeouts with a mutex on alloc. Replace file descriptors with APRFile. Add ap_is_aborted macro. Submitted by:	Bill Stoddard, Dean Gaudet "	r83766
----------------------------
"Removed RLIMIT stuff, supposedly to be implemented later in mod_cgi. Disabled suexec, supposedly to be reimplemented later. Submitted by:	Bill Stoddard, Dean Gaudet "	r83764
----------------------------
"Rearchitect the mess in http_main.c, http_core.c and buff.c. Basic restructuring to introduce the MPM concept; includes various changes to the module API... better described by docs/initial_blurb.txt. Created multiple process model (MPM) concept by ripping out the process guts from http_main.c and http_core.c and moving them to separate files under src/modules/mpm/ Moved socket creation stuff to listen.c. Moved connection open, maintenance and close to http_connection.c. I/O layering and BUFF revamp.  Much of buff.c moved to ap_iol, iol_socket, and iol_file.  See docs/buff.txt. Moved user and auth fields from connection_rec to request_rec. Removed RLIMIT stuff, supposedly to be implemented later in mod_cgi. Disabled suexec, supposedly to be reimplemented later. Submitted by:	Dean Gaudet "	r83763
----------------------------
"Fix some changed assumptions in config file format. Submitted by:	Tony Finch Reviewed by:	Randy Terbush "	r83638
----------------------------
Replace Min/MaxSpareServers with Min/MaxSpareThreads. This allows the admin to specify with finer granularity how the server pool should be 	run.
----------------------------
Add a MaxThreadsPerChild directive 	r83495
----------------------------
Add a little naming consistency, and put in an error condition for MaxSpareThreads being too high. 	r83493
----------------------------
Add support for dynamically creating and destroying threads based on a Min/MaxSpareThreads algorithm, and clean up a couple of stray pieces of gunk from the days of scoreboardhood. 	r83492
----------------------------
Assorted fixes for the OS/2 mpm: - pchild really should be thread local - clean_child_exit() should call _endthread(), not exit() - Use DosSleep() for delay in wait_or_timeout() instead of ap_select - Rework logic of searching for listen rec in child main, was getting hung in infinite loop when two sockets were being listened to. NOTE: I got it from prefork.c originally so that's probably broken too. - Remove a debugging fprintf I accidentally left in... 	r83453
----------------------------
Fix context description of RedirectMatch. It's also useable in per-dir context - similar to Redirect. Submitted by: Klaus Johannes Rusch <KlausRusch@atmedia.net> PR: 4611 	r83409
----------------------------
Make ProxyBlock description more accurate. Submitted by: John Smolin <smolin@alum.mit.edu> PR: 4112 	r83405
----------------------------
- ap_listen.h: interface to Listen, ListenBackLog and SendBufferSize directives - I didn't update mpmt_pthread with this change, it shouldn't be hard to fix. - maybe this isn't the best way to abstract listen... but it gets a little bit of the job done 	r83385
----------------------------
Backout the DocumentRootCheck stuff. I wash my hands of this... :) PR: Obtained from: Submitted by: Reviewed by: 	r83383
----------------------------
Always perform the check for DocumentRoot when doing the config test 	r83337
----------------------------
"PR: Obtained from: Submitted by:	Mathijs Maassen <mathijs@xs4all.nl> Reviewed by:	Jim, Lars Add the new DocumentRootCheck directive. This determines if we check for each DocumentRoot during startup. "	r83325
----------------------------
A minor enhancement to SetEnvIf*: allow it to test envariables as well as request attributes. 	r83292
----------------------------
Note that -t may is useful to test configurations before doing a restart 	r83237
----------------------------
Allow SetEnvIf* to set things according to the protocol of the request. 	r83220
----------------------------
"Always log months in english format for %t in mod_log_config. PR:		4366, 679 Submitted by:	Petr Lampa <lampa@fee.vutbr.cz> "	r83211
----------------------------
"Someone finally stood up and made the ReadmeName and HeaderName features use subrequests.  Not only that, but they can be parsed for SSIs too! PR:		1574, 3026, 3529, 3569, 4256 Submitted by:	Raymond S Brand <rsbx@rsbx.net> Reviewed by:	Ken Coar "	r83202
----------------------------
Add functionality to the install-bindist.sh script created by binbuild.sh to use tar when copying distribution files to the serverroot. This allows upgrading an existing installation without nesting the new distribution in the old. install-bindist.sh now detects the local perl5 path to install apxs and dbmmanage with proper path to perl interpreter. Add an install-binsupport target which copies the source files for apxs and dbmmanage to bindist to allow these scripts to be properly installed relative to the destination serverroot. FWIW - abort during commit for changed files commited without comments. 	r83149
----------------------------
"Point out that for multiple AddLanguage directives with the same extension, the last one encountered dominates.  This is true of lots of directives, but this is the one on which we got a PR.. PR:	3570 "	r83135
----------------------------
Document the MaxRequestsPerChild values wrt KeepAlives and how to tune it 	r83078
----------------------------
RemoveHandler was missing from the directives list 	r82988
----------------------------
"Commit %V and \n changes to mod_log_config. Submitted by:	Tony Finch <dot@dotat.at> "	r82860
----------------------------
Updated docs; no FollowSymLinks in <DirectoryMatch> PR: 2657 Obtained from: Brian Thomas <wolfie@mpath.com> 	r82834
----------------------------
Remove the ReferIgnore directive from mod_log_config (Dean's veto). Get rid of the array for the 'env=' clause, since it only takes a single variable name; use a char * instead.  Check for conditional envars by seeing if the condition string is non-NULL rather than using a separate Boolean cell. 	r82826
----------------------------
"Add conditional logging based upon environment variable existence. Also add RefererIgnore functionality from mod_log_referer to mod_log_config; mod_log_referer and mod_log_agent are now deprecated.  The list of envariables to check is set up as an array even though the current implementation (TAKE23) only handles one; just in case we ever want to do something strange like, 'env=foo,bar,!bag'. PR:		519, 548, 1351, 1811(?), 3449 "	r82819
----------------------------
"Added a <LimitExcept method ...> sectioning directive that allows the user to assign authentication control to any HTTP method that is *not* given in the argument list; i.e., the logical negation of the <Limit> directive.  This is particularly useful for controlling access on methods unknown to the Apache core, but perhaps known by some module or CGI script. Submitted by:	 Roy Fielding and Tony Finch <dot@dotat.at> "	r82783
----------------------------
Update htdocs with new ScriptInterpreterSource directive. 	r82759
----------------------------
This is the document on how to use mod_rewrite to eliminate the need for virtualhost settings in the config file.  Many thanks to Tony Finch <dot@dotat.at> for contributing this! 	r82655
----------------------------
Add the documentation for the RemoveHandler directive. 	r82616
----------------------------
Two minor enhancements to mod_rewrite: First RewriteRule now also supports the ``nocase|NC'' flag (as RewriteCond already does for ages) to match case insensitive (this especially avoids nasty patterns like `[tT][eE][sS][tT]'). Second two additional internal map functions `escape' and `unescape' were added which can be used to escape/unescape to/from hex-encodings in URLs parts (this is especially useful in combination with map lookups). Submitted by: Magnus Bodin, Ian Kallen Integrated and fixed by: Ralf S. Engelschall 	r82563
----------------------------
"Fix a few minor inconsistencies related to directive scoping ============================================================ 1. httpd -h Under ""httpd -h"" one gets a nice English description in which scope a directive can occur. But we talk here only about <Directory> and <Location>, although <Files> is treated the same (also with `cmd->override == ACCESS_CONF|OR_ALL'). So I think it's correct to also list <Files>, too. 2. Used scope variants Currently we have 203 directives and they use the following scopes (the numbers in parenthesis gives the number of directives using a particular scope): This is well spreaded and sounds reasonable. Except for the two classes: The first one is just a syntax overkill. It means only OR_ALL, because OR_ALL includes (implicitly) already RSRC_CONF and ACCESS_CONF. So, when we fix this to OR_ALL we get: The remaining RSRC_CONF|ACCESS_CONF|OR_AUTHCFG is used by two directives: UseCanonicalName and ContentDigest. Two not too old directives which were added mostly at the same time. They're are implemented the same way. But the scope looks incorrect. Why? First, it's again syntax overkill, ok. We can reduce it to RSRC_CONF|OR_AUTHCFG. But when we compare it to all other used scopes, it looks very inconsistent. No other of the 203 directives want to be applicable in such a non-orthoginal scope: on the first hand inside the AuthConfig scope (which means .htaccess under ""AllowOverride AuthConfig"" plus _INSIDE_ of <Directory>/<Location>/<Files> sections in httpd.conf only) and on the other hand also in RSRC_CONF (which means _OUTSIDE_ of <Directory>/<Location>/<Files> sections in httpd.conf only). Sure, finally it's everywhere in httpd.conf plus .htaccess under AuthConfig scope.  But it's not intuitive: Directives which want to be applicable in such a total scope use OR_OPTIONS, OR_FILEINFO or OR_INDEXES. And when we think about UseCanonicalName and ContentDigest we find out that they belongs more to Options, XBitHack and CheckSpelling than to any AuthXXXX directives. So, I propose to change the scope of those two directives to OR_OPTIONS.  It makes no big difference, of course. It still is useable everwhere inside httpd.conf, but inside .htaccess now under Options instead of AuthConfig.  And it both belongs to the more correct group of directives and makes our list of used scopes more consistent. With the above patch be get this consistent scope-list: When we take into account that _theoretically_ there are a lot more variants of these or'ed values are possible, this list is _VERY_ clean. Actually it's the most clean variant I can think of (except for the fact that the whole mechanism is a horrible mess ;-)... "	r82558
----------------------------
A little update (DefaultLanguage wasn't on the directives page). 	r82534
----------------------------
Actually, without a DefaultLanguage documents are considered to have _no_ language attribute. Apache does not default to English. 	r82433
----------------------------
Put in Paul's DefaultLanguage code.  I don't recall seeing any negative comments, and it's pretty valuable for multilingual sites. 	r82425
----------------------------
Finalize my suEXEC/APACI patch... This is a temporary version. I'll update the paths later based on what we decide regarding the APACI default paths. (Any native english speaker is welcome to proofread the text. :-)) 	r82386
----------------------------
"Make it more clear that AuthName takes a single argument, and fix a broken example in the FAQ. PR:		3360 Submitted by:	Jonathan Hartzog <jhartzog@w00f.com> "	r82360
----------------------------
PR: 2706 necessary, but a user was confused by the difference between the docs and the configuration file, and consistency is a good thing. 	r82329
----------------------------
"Add a ""default-handler"" handler that calls the default_hander() function which is normally called for static content.  This allows you to override a specific handler.  This is not a complete solution to being able to ""unconfigure"" things as asked for in PR#2979, but it is still useful. PR: Obtained from: Submitted by: Reviewed by: "	r82288
----------------------------
"Add a note about the size restriction on AddDescription text. PR:		3218 "	r82266
----------------------------
Add missing ProxyVia directive. PR: Obtained from: Submitted by: Reviewed by: 	r82264
----------------------------
"Add the new mod_autoindex features to new_features_1_3, add hyperlinks to the IndexOptions keyword arguments (in the new form HREF=""#indexoption:keyword""). "	r82230
----------------------------
Document `ErrorLog syslog:facility' variant of error logging. Requested by: Youichirou Koga <y-koga@jp.FreeBSD.org> Performed by: Ralf S. Engelschall PR: 3096 	r82204
----------------------------
Back off a portion of the incremental-IndexOptions patch; unprefixed keywords should clear all inherited options and start setting the local directory's options from scratch. Otherwise, 'keyword' and '+keyword' are essentially identical, and clearing inheritance a pain. 	r82194
----------------------------
There appear to be no dissenters (other than for brand-new and incompatible syntaxes) after three days, and I want to get this in for 1.3.3.  It can always be modified or reverted later. Add +/- prefixes to IndexOptions keywords, allow merging of multiple occurrences, and document the changes. 	r82175
----------------------------
"Correct name for IndexOptions keyword. PR:		3066 "	r82150
----------------------------
"Fix 'resource config' to be 'server config.' PR:		2997 "	r82039
----------------------------
Fix documentation of ProxyPass/ProxyPassReverse according to the trailing slash problem. Submitted by: Jon Drukman <jsd@gamespot.com> Reviewed by: Ralf S. Engelschall PR: 2933 	r82023
----------------------------
"Sameer posted the AllowCONNECT back in march. I adapted it to default to ports 443 and 563 (for https:// and snews://) and wrote a description for the mod_proxy.html document. Submitted by:	Sameer Parekh <sameer@c2.net> "	r82014
----------------------------
Add some more detailed information about ListenBacklog and MaxClients, plus a few misc cleanups. PR: Obtained from: Submitted by: Reviewed by: 	r82008
----------------------------
ExtendedStatus is first in 1.3.2, _NOT_ 1.3.  Please be careful when noting such things to avoid confused users. PR: Obtained from: Submitted by: Reviewed by: 	r81998
----------------------------
"Update the filname column width-sizing piece of mod_autoindex so that it's customisable with a NameLength keyword on the IndexOptions directive.  A value of '*' means 'as wide as the longest filename,' which was the default effect of the last patch in this area. PR:	1949, 2324 "	r81979
----------------------------
Clean up mod_autoindex's storage of the IndexOptions settings. They are per-directory, not per-filename, so keeping them in an array is confusing and pointless.  They're now stored in an int in the module config record.  Also (finally!) fix the FancyIndexing directive so it gets merged into any IndexOptions settings for the current directory, rather than replacing them. 	r81972
----------------------------
Forgot that LimitRequestBody is allowed everywhere. 	r81919
----------------------------
mod_status isn't included by default so ExtendedStatus is Extension not Base directive 	r81910
----------------------------
Move the ExtendedStatus option to mod_status 	r81907
----------------------------
And now the docs for ExtendedStatus 	r81902
----------------------------
Allow CheckSpelling to be used anywhere, not just at the server level. 	r81878
----------------------------
"Link DSO modules against possible libraries from $(LIBS) (take 2) ================================================================= Currently we have the following entry in our dso.html document: | Because DSO modules cannot be linked against other DSO-based libraries (ld | -lfoo) on all platforms (for instance a.out-based platforms usually don't | provide this functionality while ELF-based platforms do) you cannot use the | DSO mechanism for all types of modules. Or in other words, modules compiled as | DSO files are restricted to only use symbols from the Apache core, from the C | library (libc) and all other dynamic or static libraries used by the Apache | core, or from static library archives (libfoo.a) containing position | independend code. The only chance to use other code is to either make sure the | Apache core itself already contains a reference to it or loading the code | yourself via dlopen(). The important part here is: ""cannot be linked .... on all platforms"".  But there _are_ platform (especially ELF-based ones) which support linking DSO files agains other DSO files.  And even on platforms where this is not possible is it possible to at least link against libraries assuming they contain PIC code. So, the idea is this: In the configuration process we already determine the variable LDFLAGS and LIBS. They hold -L and -l options for linking executables.  We parse these options and separate them into three classes: OBJ, PIC and DSO.  And then we re-assemble a LIBS_SHLIB variable from only the options in classes PIC and DSO. This variable is then used on the build command for mod_xxx.so. Example: | $ ./configure --prefix=/tmp/apache \ |               --enable-module=auth_db \ |               --enable-shared=auth_db \ |               --enable-rule=SHARED_CHAIN Without SHARED_CORE the mod_auth_db.so cannot be linked or at least not loaded correctly under run-time. With SHARED_CHAIN enabled it is linked against the libdb.so and all is fine (at least under this ELF-based Debian box I tried): | :> make mod_auth_db.so | gcc -c  -I../../os/unix -I../../include -I/usr/include/  -DLINUX=2 | -DUSE_HSREGEX `../../apaci` -fpic -DSHARED_MODULE mod_auth_db.c && mv | mod_auth_db.o mod_auth_db.lo | ld -Bshareable -o mod_auth_db.so mod_auth_db.lo -lm -ldb | root@gw1:/e/apache/SRC/WORK/apache-1.3-libsshlib/src/modules/standard | :> ldd mod_auth_db.so |         ./mod_auth_db.so => ./mod_auth_db.so |         libc.so.5 => /lib/libc.so.5 |         libm.so.5 => /lib/libm.so.5 |         libdb.so.1 => /usr/lib/libdb.so.1 This way we provide the maximum we can provide. Sure, on some platforms the user still has no chance. But this shouldn't mean he becomes no chance on other platforms where there _is_ a chance. So this patch is a first step for more friendly and flexible DSO support. The complete mechanism is triggered by a new Rule named SHARED_CHAIN. To avoid problems this is DISABLED(!) for ALL(!) platforms currently. But when experience shows that it worked fine for users we can enable it for tested platforms per default. "	r81846
----------------------------
No longer correct (and never really was) to tell them to type cc ... to compile suexec. PR: 2517 Obtained from: Submitted by: Reviewed by: 	r81767
----------------------------
"cache in the event that the client cancels the transfer, provided that the configured percentage of the file has already been transfered. It works for http transfers only. The new httpd.conf directive is: CacheForceCompletion <percentage> PR: 2277 Submitted by: 	Glen Parker <glenebob@nwlink.com> Reviewed by:	Martin Kraemer, Brian Behlendorf "	r81685
----------------------------
Add a note about the case-sensitivity of <Limit> as pointed out by Dean. 	r81653
----------------------------
"PR: Submitted by:	Ralf Engelschall Reviewed by:	Brian Behlendorf *) Add <IfDefine>..</IfDefine> sections to the core module (with same spirit "	r81563
----------------------------
Add some more background info about mod_proxy's behaviour; e.g., that CacheRoot effectively enables cacheing 	r81508
----------------------------
PR: HostnameLookups were *not* allowed in .htaccess files.  They should be, but for now it doesn't.  This can't be as easy as changing ACCESS_CONF|RSRC_CONF to OR_FILEINFO or something, is it? 	r81470
----------------------------
Add the ServerTokens to the main directive list 	r81403
----------------------------
"Make the evolution of the BrowserMatch* directives more clear. PR:		2147 Submitted by:	Daniel Ryde <ryde@tripnet.se> "	r81386
----------------------------
Correct the ServerTokens docs a little bit. 	r81328
----------------------------
PR: 1773 IdentityCheck not allowed in .htaccess files. 	r81312
----------------------------
Little enhancement of suEXEC docs to make sure the user knows that he can install suEXEC via APACI but only if he is carefully and does something explicitly (options). Submitted by: Jason A. Dour <jason@dour.org> 	r81278
----------------------------
"PR: Obtained from: Submitted by:	Jim Jagielski Reviewed by: Replace the AddVersionPlatform directive with ServerTokens directive which allow for either Minimal (""Apache/1.3.0""), OS (""Apache/1.3.0 (UNIX)"") or Full (""Apache/1.3.0 (UNIX) PHP/3.0"") type Server headers. SERVER_SUBVERSION is no longer supported. "	r81244
----------------------------
"Fix AllowOverrides --> AllowOverride in docs. PR: 2213 Obtained from: Submitted by:	Thomas Neumann <Thomas.Neumann@comconsult.de> Reviewed by: "	r81238
----------------------------
Update windows instructions for 1.3b6. Move compilation stuff to the end on the basis that most users will be interested in the pre-compiled installer. Document the registry key used and how it relates to command line arguments (-d, -f) and the ServerRoot directive. Show how to start and stop the Apache service from the command line. 	r81233
----------------------------
A HTML fix and a documentation fix for ServerSignature directive. Submitted by: Lars Eilebrecht Reviewed by: Martin Kraemer, Ralf S. Engelschall 	r81064
----------------------------
Some clarification that only one NameVirtualHost is used per IP:port pair 	r81012
----------------------------
Although mod_mmap_static is an experimental module it works fine and already is distributed with Apache it was not prepared the same way as the other modules. Hence let us give it a first cut for a documentation and an (disabled, of course) entry in the Configuration.tmpl file. Dean: Feel free to fix both my english and my initial content in the 	r80796
----------------------------
Document the fact that StartServers, MaxSpareServers and MinSpareServers have no effect on Unix. Also that ThreadsPerChild has no effect on Unix. 	r80625
----------------------------
Reanimation of an undocumented feature of mod_proxy: ProxyReceiveBufferSize Submitted by: Ralf S. Engelschall PR#: 1348 	r80598
----------------------------
"- The ""merging"" optimization in mod_setenvif did not deal with SetEnvIfNoCase properly; and it used strcmp() to compare header names when it should use strcasecmp(). - Change the merging optimization so that it only considers the most recent setenvif for merging.  This means that mod_setenvif will consider all directives in the order they appear in the config file. - Document that mod_setenvif considers directives in the order they appear, and give an example use. - Perform more comparisons at compile-time in order to speed up things at compile-time. "	r80545
----------------------------
We don't allow ServerRoot in vhost.  1.2 just does it and changes the global one, 1.3 whines. PR: 1935 Obtained from: Submitted by:   Randy Moore <ramoore@atlantech.net> Reviewed by: 	r80512
----------------------------
"Change to the multiple-slash behaviour of LocationMatch for consistency with AliasMatch and RewriteRule.  This was discussed in nh.9711, search for subject ""mod_rewrite/1440"".  My proposed change had the support of Roy, Ken and Dirk... I modified it slightly here so that it wouldn't break every single existing config that has <Location /server-status>. PR:		1440 "	r80426
----------------------------
I thought we got rid of all the <Limit> ... </Limit> in our examples... is there some reason this one is still around?  I'm ditching it anyhow unless someone explains why it's necessary. 	r80383
----------------------------
Add %a to mod_log_config for inserting the remote IP-address.  This is the adapted patch against 1.3 of Todd Eigenschink <eigenstr@mixi.net>'s original patch for 1.2.5. For 1.2.5 we don't want it because its a feature.  I also added corresponding entries to the CHANGES and mod_log_config.html file. Submitted by: Todd Eigenschink <eigenstr@mixi.net> Reviewed by: Ralf S. Engelschall 	r80340
----------------------------
First part to fix the synchronization-locking for RewriteMap programs under Unix derivates who doesn't accept the locking of pipes directly. But we perhaps have another problem: According to FreeBSD's manpage and a hint by the submitter of PR#1029 flock() has to be used on opened filedescriptors which are _not_ duplicated via fork().  This currently is not the case... Submitted by: Ralf S. Engelschall Reviewed by: Ralf S. Engelschall, Jim Jagielski 	r80311
----------------------------
Add the new RewriteMap types `rnd' and `int' to mod_rewrite to allow Apache to be used as a Reverse Proxy (where the backend servers are choosen via a `rnd' map) and to allow mass virtual hosting without <VirtualHost> sections (where you have to fix the case of server names when translating the Host-Header to a directory structure). Together with the comitted ProxyPassReverse directive we now have solved two things the users have asked in the past: 1. The ability to use Apache as a full-featured Reverse Proxy 2. The ability to do mass virtual hosting without <VirtualHost> sections. For both topics we should write stand-alone documents (perhaps inside htdocs/manual/misc/) because they are not trivial to do, even when we now have the functionality ;-) Submitted by: Ralf S. Engelschall Reviewed by: Dean Gaudet, Ralf S. Engelschall 	r80298
----------------------------
Add the ProxyPassReverse directive which allows Apache to be used as a full-featured Reverse Proxy in front of a backend webserver cluster. Submitted by: Ralf S. Engelschall Reviewed by: Martin Kraemer, Ralf S. Engelschall 	r80296
----------------------------
Fix various parsing bugs with <Dir/Loc/Files> sections.  Improve the error messages generated.  Introduced cmd->end_token to make it easier to do nested sections with proper error reporting.  (Note that it can't be used for <IfModule> or <Limit> unfortunately.) PR#379: <Files> is not allowed within <Location> because it has no effect. PR#1817: Change <Files> to work with basenames only.  This fixes both the bug introduced by the wildcarding change (* doesn't match /) and bugs such as <Files a*b> not working. PR:             379, 1817 	r80233
----------------------------
document piped errorlog 	r80220
----------------------------
doc the addencoding mess 	r80193
----------------------------
"Add all the BrowserMatch directives mentioned on the known_client_problems page. Submitted by:	Lars Eilebrecht Reviewed by:	Dean Gaudet "	r80155
----------------------------
PR: Playing whack-a-mole; first stab at docs for LogLevel.  Could someone confirm? 	r80141
----------------------------
Add a document describing a solution which uses XSSI and negotiation to custom-tailor the apache ErrorDocuments to taste, adding the advantage of returning internationalized versions of the error messages depending on the client's language preferences. 	r80119
----------------------------
Add the UseCanonicalName directive which controls how self-referential handful of folks two weeks ago.  The default should be no behaviour change. This changes the prototype of construct_url(), and adds two new API functions: get_server_name() and get_server_port().  So the MODULE_MAGIC_NUMBER has been bumped. PR:             315, 459, 485, 1433 Submitted by:   Michael Douglass <mikedoug@texas.net>, Dean Gaudet 	redirects
----------------------------
"PR: If SCO's going to break their links, I'm not going to go searching for where they moved it to. Cold and rainy and dark. ml"" --> <H1 ALIGN=""CENTER"">Connections in the FIN_WAIT_2 state and Apache</H1> <OL> <LI><H2>What is the FIN_WAIT_2 state?</H2> Starting with the Apache 1.2 betas, people are reporting many more connections in the FIN_WAIT_2 state (as reported by <code>netstat</code>) than they saw using older versions.  When the server closes a TCP connection, it sends a packet with the FIN bit sent to the client, which then responds with a packet with the ACK bit set.  The client then sends a packet with the FIN bit set to the server, which responds with an ACK and the connection is closed.  The state that the connection is in during the period between when the server gets the ACK from the client and the server gets the FIN from the client is known as FIN_WAIT_2.  See the <A HREF=""ftp://ds.internic.net/rfc/rfc793.txt"">TCP RFC</A> for the technical details of the state transitions.<P> The FIN_WAIT_2 state is somewhat unusual in that there is no timeout defined in the standard for it.  This means that on many operating systems, a connection in the FIN_WAIT_2 state will stay around until the system is rebooted.  If the system does not have a timeout and too many FIN_WAIT_2 connections build up, it can fill up the space allocated for storing information about the connections and crash the kernel.  The connections in FIN_WAIT_2 do not tie up an httpd process.<P> <LI><H2>But why does it happen?</H2> There are numerous reasons for it happening, some of them may not yet be fully clear.  What is known follows.<P> <H3>Buggy clients and persistent connections</H3> Several clients have a bug which pops up when dealing with <A HREF=""../keepalive.html"">persistent connections</A> (aka keepalives). When the connection is idle and the server closes the connection (based on the <A HREF=""../mod/core.html#keepalivetimeout""> KeepAliveTimeout</A>), the client is programmed so that the client does not send back a FIN and ACK to the server.  This means that the connection stays in the FIN_WAIT_2 state until one of the following happens:<P> <UL> </UL><P> If you are lucky, this means that the buggy client will fully close the connection and release the resources on your server.  However, there are some cases where the socket is never fully closed, such as a dialup client disconnecting from their provider before closing the client. In addition, a client might sit idle for days without making another connection, and thus may hold its end of the socket open for days even though it has no further use for it. <STRONG>This is a bug in the browser or in its operating system's TCP implementation.</STRONG>  <P> The clients on which this problem has been verified to exist:<P> <UL> </UL><P> This does not appear to be a problem on: <UL> </UL> <P> It is expected that many other clients have the same problem. What a client <STRONG>should do</STRONG> is periodically check its open socket(s) to see if they have been closed by the server, and close their side of the connection if the server has closed.  This check need /export/home/cvs/CVSROOT/cvsedit "	r80009
----------------------------
In several htdocs/manual pages, the TransferLog directive is still attributed to the mod_log_common module (which is no longer supported as of apache_1.2). The patch replaces these references with references to mod_log_config. Note that I still left the mod_log_common.html file (and a back compatibility reference to it) in the docs distribution. 	r79715
----------------------------
"Correct some misstatements about the Auth*File directives; they're ServerRoot-relative if not absolute. PR:		1511 "	r79709
----------------------------
More tweaks related to serverroot/logs/etc. 	r79688
----------------------------
"We talk about a ""proper installation"" occasionally... and assume folks know how to set the perms on the serverroot.  But I don't think we document it anywhere.  Nowhere that's easily found direct from the ""how to install"" page.  Document it better, link to it.  Remove the install_1_1 docs. Update a 1.2 reference to 1.3. "	r79686
----------------------------
"Correct missing keyword on ScriptAliasMatch example. PR:		1512 Submitted by:	Ronnie Brunner <brunner@netcetera.ch> "	r79677
----------------------------
"Recommend removal of <Limit> containers rather than adding methods to them. Submitted by:	Marc Slemko "	r79667
----------------------------
Correct Typos; Add new -V switch; add paragraph about new ServerRoot=/usr/local/apache; 	r79582
----------------------------
"Add a ""SuppressColumnSorting"" option to the IndexOptions list, which will keep the column heading from beling links for sorting the display. PR:		1261 Reviewed by:	Jim Jagielski, Martin Kraemer, Dean Gaudet "	r79543
----------------------------
"Document that ""RewriteEngine on"" is _not_ inherited by vhosts, unlike many other directives. PR: 570 Obtained from: Submitted by: Reviewed by: "	r79487
----------------------------
Put <Limit> into its correct alphabetical position. 	r79362
----------------------------
Document valid method names in <Limit> statements. Mention that GET also restricts HEAD requests (see PR#1196). 	r79360
----------------------------
"|From Martin.Kraemer@mch.sni.de Mon Sep 15 21:04:46 1997 |Date: Fri, 5 Sep 1997 14:22:32 +0200 (MET DST) |From: Martin Kraemer <Martin.Kraemer@mch.sni.de> |Reply-To: new-httpd@apache.org |To: Apache Mailing List <new-httpd@apache.org> |Subject: [DOC] mod_auth_anon.html corrections | |The mod_auth_anon.html documentation describes the default of |the Anonymous_LogEmail and Anonymous_MustGiveEmail being ""off"", but in |the code, the default seems to be ""on"". | |The ""Example"" section could be improved because when used as-is, the |server returns a [500] server error (configuration error:  couldn't check |user.  No user file?). I added a comment to clarify things. Submitted by:	Martin Kraemer Reviewed by:	Dean Gaudet "	r79267
----------------------------
"Changes to mod_log_config to allow naming of format strings. Format nicknames are defined with ""LogFormat fmt nickname"", and can be used with ""LogFormat nickname"" and ""CustomLog logtarget nickname"". "	r79202
----------------------------
Add CheckSpelling to list of directives 	r79198
----------------------------
Add link to mod_setenvif docs. Add placeholder for mod_unique_id. Put proxy & rewrite into alphabetic order. Note the modules which are not longer part of Apache 1.3 (mod_browser, mod_auth_msql). 	r79178
----------------------------
Change Module line examples into AddModule to reflect the new Configure syntax 	r79176
----------------------------
"Strongly note that the standalone FancyIndexing and IndexOptions directives override each other. PR:		1106 "	r79166
----------------------------
Update the fin_wait_2 page to reflect the current understanding of the issues; remove the suggestion that Apache is buggy, since no bugs have been found in that code.  It now appears most likely that it is just the result of a bad interaction.  The real solution, as always, is still a timeout for FIN_WAIT_2. PR: Obtained from: Submitted by: Reviewed by: 	r79161
----------------------------
"Update the list of directives for BrowserMatch*'s new location, add the SetEnvIf* directives, and apply Lars' fix to mod_mime. Submitted by:	Lars Eilebrecht <Lars.Eilebrecht@unix-ag.org> "	r79090
----------------------------
Ta-daah!  The documentation for mod_setenvif, which defines the SetEnvIf* and BrowserMatch* directives.  (And in time for 1.3b1, too) 	r79088
----------------------------
"PR: Submitted by:	Lars Eilebrecht <Lars.Eilebrecht@unix-ag.org> Reviewed by:	Brian Behlendorf Document ContentDigest. "	r79080
----------------------------
"Update FAQ #35 (where's the dump?) to mention the new-for-1.3 CoreDumpDirectory directive. Submitted by:	Lars Eilebrecht <Lars.Eilebrecht@unix-ag.org> "	r79071
----------------------------
Update sample output from Configure to something more like what it generates now. 	r79045
----------------------------
Initial documentation for the new Configure 	r78950
----------------------------
"Enhanced and cleaned up the URL rewriting engine for 1.3: First the grouped parts of RewriteRule pattern matches (parenthesis!) can be accessed now via backreferences $1..$9 in RewriteConds test-against strings in addition to RewriteRules subst string. Second the grouped parts of RewriteCond pattern matches (parenthesis!) can be accessed now via backreferences %1..%9 both in following RewriteCond test-against strings and RewriteRules subst string. This provides maximum flexibility through the use of backreferences. Additionally the rewriting engine was cleaned up by putting common code to the new expand_backrefs_inbuffer() function. Submitted by:	Ralf S. Engelschall Reviewed by:	Dean Gaudet, Ralf S. Engelschall "	r78903
----------------------------
"Add a CoreDumpDirectory directive to allow users to specify where Apache should try to core dump. Reviewed by:	Brian Behlendorf, Dean Gaudet Submitted by: Obtained from: "	r78880
----------------------------
"Let the user use ``RewriteCond %{...} !=""""'' instead of ``RewriteCond %{...} !^$'' which is ugly and has bad performance. Obtained from: Submitted by:	Ralf S. Engelschall Reviewed by:	Dean Gaudet, Ralf S. Engelschall "	r78852
----------------------------
"Document the AddModuleInfo patch. Submitted by:	""Lou D. Langholtz"" <ldl@usi.utah.edu> "	r78823
----------------------------
"mod_access overhaul.  Network/netmask and CIDR syntax.  Critical path speedups.  Forced double-reverse DNS.  Deprecate the ""allow from user-agents"" syntax.  ""HostnameLookups double"" support. PR:		762, 860 Reviewed by:	Paul Sutton, Marc Slemko (well he liked the double reverse part) "	r78820
----------------------------
Change ThreadsPerChild config default from 20 to 50 to match compiled-in default. 	r78746
----------------------------
"NoProxy and ProxyDomain directives. Submitted by:	Martin Kraemer <Martin.Kraemer@mch.sni.de> Reviewed by:	Dean Gaudet "	r78664
----------------------------
Fix poor html formatting of example.  Remove <Limit> from example since it is a bad thing to suggest. 	r78647
----------------------------
Add documentation for IndexOptions SuppressHTMLPreamble (and alphabetise the options list, too). 	r78625
----------------------------
"Add a BrowserMatch for the AppletViewer user-agent that comes with JDK 1.0.2. Fixes PR:	837 Submitted by:	Manoj Kasichainula <manojk@io.com> "	r78562
----------------------------
Enable regex support in mod_alias with AliasMatch, ScriptAliasMatch and RedirectMatch directives. New syntax for regex support in http_core: <DirectoryMatch>, <FilesMatch>, <LocationMatch> sections. 	r78559
----------------------------
"The AccessFileName directive can now take more than one file. Submitted by:	""Lou D. Langholtz"" <ldl@usi.utah.edu> Reviewed by:	Dean Gaudet, Marc Slemko, Brian Behlendorf "	r78555
----------------------------
"Add documentation of new syntaxes for UserDir {disable|enable}, and a nod in the security_tips for ""UserDir disabled root"". "	r78492
----------------------------
"Add ListenBacklog directive to control the backlog passed to listen(). Also change the default to 511 for platforms that use an 8-bit datatype to store it. A slightly different implementation than suggested by Taso Devetzis <devetzis@snet.net>, who submitted the PR. PR: 240 Reviewed by:	Dean Gaudet, Jim Jagielski Submitted by: Obtained from: "	r78428
----------------------------
Update bind-8.1 docs in FAQ. Update known_bugs with 1.2.1 relevance. Remove some 192.168.x.x host references in known_bugs. Add note about sunos 4.x and KeepAlive off. 	r78406
----------------------------
Update mod_dir documentation to include IconHeight and IconWidth keywords for the IndexOptions directive. 	r78358
----------------------------
PR#657: apache doesn't recognize <Limit GET, POST>, NCSA does 	r78340
----------------------------
Remove leftover JDK question and fix BrowserMatch string. 	r78284
----------------------------
"SendBufferSize is not valid in a VirtualHost, so make Apache say so. Note that allowing this to be set on a per socket (ie. per Listen directive) basis could be useful for some, but isn't currently implemented.  Also note that the code as written may fail to work correctly on some systems that don't copy the socket settings fully on an accept(). Reviewed by:	Randy Terbush, Dean Gaudet Submitted by: Obtained from: "	r78281
----------------------------
Document AddHandler can be used with multiple extensions (like the other Add* directives). Remove <...> around AddHandler, ForceType and SetHandler syntax. 	r78261
----------------------------
Remove an invalid compat. note about AddType only taking a single extension which must not have a dot (PR#489) 	r78259
----------------------------
Update suexec docs. Reviewed by: Ken Coar, Randy Terbush Submitted by: Jason Dour 	r78245
----------------------------
Corrected BrowserMatch settings for JDK 1.0.2 workaround. 	r78160
----------------------------
Clarify that the ScriptLog is opened by the child processes so permissions need to be set appropriately.  Perhaps wouldn't hurt to put an error in the error_log if it can't be opened. 	r78111
----------------------------
PR#507: TransferLog has no default. %{FOOBAR}e wasn't documented. 	r78103
----------------------------
Document the problem of config file errors. 	r78071
----------------------------
"Clean up Linux configuration by detecting 2.x linux and enabling HAVE_SHMGET, and HAVE_SYS_RESOURCE_H.  Don't touch Linux 1.x systems for fear of various compatibility problems.  Ditch that silly hack LINUX_TWEAK that I wish I hadn't introduced. Reviewed by:	Paul S., Roy "	r78037
----------------------------
Document scoreboardfile lameness. 	r78000
----------------------------
document how to avoid scoreboardfile 	r77986
----------------------------
Satisfy not allowed in server config contexts (PR#422) 	r77951
----------------------------
In view of lack of response to patching http_core.c to handle proxy: change the access example to use <Files> block instead of <Directory>. 	r77944
----------------------------
Forgot to mention XBitHack as a method of enabling SSI. Update docs for this directive to state it only applies to text/html files. 	r77937
----------------------------
Fix description of DirectoryIndex to explain that a directory index will only be returned if Options +Indexes is set. 	r77917
----------------------------
Document UnsetEnv. Fix documented syntax of SetEnv. 	r77915
----------------------------
Add ScoreBoardFile, add <..> to IfModule Submitted By: Martin.Kraemer@mch.sni.de 	r77913
----------------------------
Added CacheDirLength and CacheDirLevels. Fixed link for CacheLastModifedFactor. 	r77874
----------------------------
"Added semi-FAQ about ""invalid group ID"" during httpd startup. Corrected ErrorDocument 401 section to a question.  (This *is* a FAQ, after all ;-) "	r77872
----------------------------
Add another one... ErrorDocument 401. 	r77860
----------------------------
"Enhanced section on caching of parsed documents to include info about XBitHack Full. Submitted by:	Marc Slemko "	r77842
----------------------------
"Added section on CGI usage in non-ScriptAliased directories. Submitted by:	Marc Slemko "	r77840
----------------------------
Update the ErrorDocument information to clarify a few things, especially the handling of 401 responses.  The example that was in the docs before would never work!  No wonder people have trouble with it... 	r77838
----------------------------
"Enhance the FAQ with info about ""I wanna use /etc/passwd for Web authentication"", and inadvertent POST restriction by omitting the method from <Limit> blocks.  (Many thanks to Rob H and Marc S for portions of the former.) "	r77817
----------------------------
pr#190: document expense of identitycheck Reviewed by: Submitted by: Obtained from: 	r77767
----------------------------
"Add documentation for DNS issues (reliability and security), and try to explain the virtual host matching process. Try to continue gracefully by disabling the vhost if a DNS lookup fails while parsing the configuration file. Reviewed by:	Roy, Jim Submitted by: Obtained from: "	r77744
----------------------------
Document ScoreBoardfile.  Note that PidFile is subject to security concerns as well. Reviewed by: Submitted by: Obtained from: 	r77729
----------------------------
"Add security notes about protecting /, and avoiding ""UserDir ./"". Submitted by:	Ken Coar Obtained from: "	r77725
----------------------------
"Clarify that mod_info uses startup-config and not running-config and note that mod_info and mod_status can be enabled from things like .htaccess files. Submitted by:	Ken Coar "	r77688
----------------------------
Add a reasonably often used UserDir example that can be non-intuitive, especially since 1.1 needs the trailing slash. 	r77681
----------------------------
Add documentation for nokeepalive and force-response-1.0. 	r77674
----------------------------
Fix documentation; HostNameLookups and IdentityCheck can not be used in htaccess files and RFC931 is now RFC1413. 	r77623
----------------------------
Reduce default timeout to 300 seconds all around.  Not reduced further because there are still likely some odd snippets of code that don't properly reset the timer. Reviewed by: Dean Gaudet, Jim Jagielski, Randy Terbush 	r77615
----------------------------
Fix spelling of 'authorative' to 'authoritative' and typo in mod_log_config. Submitted by: Hubert Lin <hubert@mesun.me.ncu.edu.tw> 	r77612
----------------------------
Update systems w/FIN_WAIT_2 timeout to reflect info I have received. 	r77605
----------------------------
"Reviewed by:	Brian Behlendorf Submitted by:	Dean Gaudet The docs show some examples using <Limit GET POST> ... </Limit> where the <Limit>s are not strictly required.  Since it is less secure to specify them than it is to leave them out I think the examples should be modified. If they're to be left in, then some of them need &lt; ... &gt;. "	r77548
----------------------------
Update documentation for new KeepAlive syntax. 	r77503
----------------------------
Add text about possible problems with ScriptLog. Also fix a spelling error. 	r77425
----------------------------
Proxy module documentation update. Add ProxyBlock, expand NoCache and config sections. 	r77385
----------------------------
Add docs for HostNameLookups. 	r77375
----------------------------
Update suEXEC docs to reflect recent changes. 	r77357
----------------------------
Fix misspelled link to common config topics. 	r77332
----------------------------
Clarify meaning of Timeout. 	r77301
----------------------------
Add link for missing HostNameLookups directive. 	r77278
----------------------------
First of cut of suexec docs 	r77125
----------------------------
Correct links to suexec.html 	r77122
----------------------------
First step to adding docs for SUEXEC. Relocate a missing file, etc. 	r77118
----------------------------
"Fix compat notes, and make the UserDir docs to be (a) correct, and (b) to use more ""friendly"" expamples (hah). "	r77102
----------------------------
"Fix various typos. Put directives in alphabetic order. Put <hr>'s between directives. Remove documentation about %s in ErrorDocument "". Update default MaxClients to 256. "	r77094
----------------------------
Replace magic mime type with handler name Add notes to CacheNegotiatedDocs and LanguagePriority about HTTP/1.1 	r77069
----------------------------
Document the Common Log Format Document the new % directives (p, P, T, {}n) Explain how to use multiple log files w/vhosts Expand CustomLog definition Add compat. note about CookieLog 	r77067
----------------------------
Add docs for files/ifmodule/sendbuffersize 	r77065
----------------------------
Add redirecttemp/perm directives 	r77057
----------------------------
Update mod_log_config to reflect standard status and new directive 	r77053
