----------------------------
Add default value for DBDExpire, DBDKeep, DBDMin and DBDMax. Pointed out by: Andrew Ford <A.Ford ford-mason.co uk> 	r657498
----------------------------
* Include <limits.h> earlier if available since INT_MAX is defined there on Windows and we need INT_MAX already for the definition of MAX_REQUESTS. PR: 45024 	r657433
----------------------------
configure: Don't reject libtool 2.x PR 44817 	r657354
----------------------------
* Don't track 1.3 compatibility * SeeRequestTail was backported to 2.2 in r602508 	r655888
----------------------------
note that KeepAliveTimeout of the first defined virtual host in the set of NameVirtualHost will be used improve r653856 PR: 36770 	r655438
----------------------------
"When testing for slash-terminated configuration paths in ap_location_walk(), don't look past the start of an empty string such as that created by a <Location """"> directive. "	r654998
----------------------------
mention the default for ProtocolEcho. Pointed out by: Andrew Ford <A.Ford ford-mason.co.uk> 	r654507
----------------------------
*) mod_cgid: Explicitly set permissions of the socket (ScriptSock) shared by 	r654332
----------------------------
* modules/ssl/mod_ssl.c (ssl_cleanup_pre_config): Remove the call to CRYPTO_cleanup_all_ex_data here, fixing a per-connection memory leak which occurs if the client indicates support for a compression algorithm in the initial handshake, and mod_ssl is linked against OpenSSL >= 0.9.8f. Thanks to Amund Elstad and Dr Stephen Henson for analysis of this issue. 	r654119
----------------------------
mention that KeepAliveTimeout will be ignored in a name-based virtual host context. PR: 36770 	r653856
----------------------------
* modules/session/config.m4: Have --disable-session disable mod_session_* also. 	r649054
----------------------------
Move the KeptBodySize directive, kept_body filters and the ap_parse_request_body function out of the http module and into a new module called mod_request, reducing the size of the core. 	r647263
----------------------------
Move the initialization of rebind to the post_config handler so that it is done during the actual module load stage rather than the preload stage.  If done during the preload stage, the pool passed into the initialization function will be cleared and all allocations will be freed. 	r646582
----------------------------
Handle integer configuration directive parameters with a dedicated function, akin to dbd_param_flag().  Only needed when APR_HAS_THREADS. 	r646453
----------------------------
Adjust socache init interface to take sizing hints, and namespace tag for memcache: * modules/cache/ap_socache.h (struct ap_socache_hints): New structure. Change init callback to take namespace string and hints structure pointer. * modules/cache/mod_socache_dc.c (socache_dc_init): Adjust accordingly. * modules/cache/mod_socache_dbm.c (struct ap_socache_instance_t): Rename timeout field to expiry_interval. (socache_dbm_init, socache_dbm_create): Take expiry interval from hints rather than hard-code to 30. (socache_dbm_expire): Update for timeout field rename. * modules/cache/mod_socache_shmcb.c (socache_shmcb_init): Adjust for hints and namespace; adjust subcache index sizing heuristics to use passed-in hints. * modules/cache/mod_socache_memcache.c (struct ap_socache_instance_t): Add tag, taglen fields. (socache_mc_init): Store the passed-in namespace in instance structure. (mc_session_id2sz): Adjust to not take context, use configured tag as string prefix, and not use a return value. (socache_mc_store, socache_mc_retrieve, socache_mc_remove): Adjust for mc_session_id2sz interface changes. * modules/ssl/ssl_scache.c (ssl_scache_init): Pass namespace and hints to socache provider init function. 	r645978
----------------------------
* modules/ssl/ssl_engine_config.c: Remove unused macro. 	r645941
----------------------------
Session cache interface redesign, Part 9: Switch mod_ssl to use the ap_socache interface. * modules/ssl/ssl_scache_shmcb.c, modules/ssl/ssl_scache_memcache.c, modules/ssl/ssl_scache_dc.c, modules/ssl/ssl_scache_dbm.c: Remove files. * modules/ssl/mod_ssl.c (modssl_register_scache): Remove function. * modules/ssl/ssl_private.h: Remove modssl_sesscache_provider etc. (SSLModConfigRec): Switch to using socache types. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Switch to use socache provider. * modules/ssl/ssl_engine_mutex.c, modules/ssl/ssl_scache.c: Switch to using socache constants. * modules/ssl/config.m4: Drop distache/memcache configuration, remove old objects. 	r645940
----------------------------
Session cache interface redesign, Part 8: Abstract out the mod_ssl session caching interface into a separate set of modules, mod_socache_*. * modules/cache/ap_socache.h: New file. * modules/cache/config.m4: Copy CHECK_DISTCACHE from ../ssl/config.m4; add new socache modules. * modules/cache/mod_socache_dbm.c: Copied from ../ssl/ssl_scache_dbm.c. s/ssl_scache_/socache_/; add module structure and register_hooks. * modules/cache/mod_socache_shmcb.c: Copied from ../ssl/ssl_scache_shmcb.c. s/ssl_scache_/socache_/; add module structure and register_hooks. Add SHMCB_MAX_SIZE definition, replacing APR_SHM_MAXSIZE. * modules/cache/mod_socache_memcache.c: Copied from ../ssl/ssl_scache_memcache.c. s/ssl_scache_/socache_/; add module structure and register_hooks. Enable for APR-Util 1.3.x at compile-time, omitting configure-time checks. * modules/cache/mod_socache_dc.c: Copied from ../ssl/ssl_scache_dc.c. s/ssl_scache_/socache_/; add module structure and register_hooks. 	r645844
----------------------------
* In the case that we fail to read the response line from the backend and if we are a reverse proxy request shutdown the connection WITHOUT ANY response to trigger a retry by the client if allowed (as for idempotent requests). BUT currently we should not do this if the request is the first request on a keepalive connection as browsers like seamonkey only display an empty page in this case and do not do a retry. Related to PR 37770 	r645813
----------------------------
Include http_config.h from http_core, since now without CORE_PRIVATE, you need the definition for the module type. 	r645432
----------------------------
mod_session_crypto: Initialise SSL in the post config hook. 	r645244
----------------------------
Fix the defaults, which currently override the config instead of default the config. [Ruediger Pluem] 	r645243
----------------------------
If you study all of the directive implementations, you'll note that we get less than 20% of the NOT_IN_LIMIT rules correct. <Limit > works in about 4 directive contexts and yet, we ignore this fact for 100's of directives.  Simply eliminate this nonsense in anticipation of a 100% solution. 	r645190
----------------------------
If you study all of the directive implementations, you'll note that we get less than 20% of the NOT_IN_LIMIT rules correct. <Limit > works in about 4 directive contexts and yet, we ignore this fact for 100's of directives.  Simply eliminate this nonsense in anticipation of a 100% solution. 	r645189
----------------------------
Remove an unnecessary config structure lookup during encrypt and decrypt. [Ruediger Pluem] 	r645187
----------------------------
Clarify the operation of the SessionCryptoPassphrase directive as raised by rpluem. When SessionCryptoCertificateFile is set, asymmetrical encryption will be used, and SessionCryptoPassphrase will be interpreted as the passphrase protecting the private key. When SessionCryptoCertificateFile is not set, symmetrical encryption is used, and SessionCryptoPassphrase will contain the key to use. Make sure that the engine parameter is properly passed into the crypto functions, and fix a missing cleanup on an error case. 	r645186
----------------------------
In hopes of replacing <Limit > with <Method > - choose another example to point to for documenting these functions. 	r645165
----------------------------
Make sure we protect ourselves against the session being NULL, which it will be if no session is configured. 	r645112
----------------------------
Add condition for <If> sections to core config merge (a fix to r644253) 	r644730
----------------------------
Avoid calling access control hooks for internal requests with configurations which match those of the initial request.  Revert to the original behaviour (call access control hooks for internal requests with URIs different from the initial request) if any access control hooks or providers are not registered as permitting this optimization. Introduce wrappers for access control hook and provider registration which can accept additional mode and flag data. The configuration walk optimizations were originally proposed a while ago (see http://marc.info/?l=apache-httpd-dev&m=116536713506234&w=2); they have been used since then in production systems and appear to be stable and effective.  They permit certain combinations of modules and clients to function efficiently, especially when a deeply recursive series of internal requests, such as those generated by certain WebDAV directives. The major change from the original proposal is a cleaner mechanism for detecting modules which may expect the old behaviour.  This has been tested successfully with Subversion's mod_authz_svn, which specifically against its own private access control configuration files. 	requires
----------------------------
HTTPD Core: Implement <If> sections for conditional (runtime) configuration. N.B. This is a first pass, and has a way to go! 	r644253
----------------------------
Update mod_filter to use ap_expr Advantage: supports more complex expressions while simplifying mod_filter (c.f. PR 43956 - this means chaining is no longer necessary) NOTE: this changes FilterProvider syntax, so can't be backported to 2.2. 	r642983
----------------------------
Update Timeout section, the semantics changed completely since 1.3 and the caveats on signals not being reset thankfully no longer apply either. 	r641855
----------------------------
Add a caveat about SetEnv running late 	r641391
----------------------------
Add AuthzMergeRules to example configuration, and avoid use of ISO SQL:1999 Booleans in example SQL.  Revise some introductory text. 	r640951
----------------------------
Document new ChrootDir directive (r611483) 	r639005
----------------------------
Make the RewriteRule docs shorter (!) by referencing the regex docs in the 	rewrite
----------------------------
PR 43562. fix regression in mod_speling behavior from 1.3/2.0 and, basically, incorrect behavior from what is expected as well as dependency on AcceptPathInfo. 	r635953
----------------------------
Fix quoting for AuthLDAPUrl examples. Submitted by: Per Lundberg (Per.Lundberg bredband.com) 	r634155
----------------------------
When sending a proxy request of the form GET http://[3ffe:1:1001:3000:230:5ff:fe05:3c3c]/server-status HTTP/1.0 through the httpd-2.x mod_proxy.c code, while a directive ProxyDomain .my.dom.ain is in effect, the request is redirected to Location: http://[3ffe:1:1001:3000:230:5ff:fe05:3c3c.my.dom.ain]/server-status The patch fixes this bug, by testing whether the hostname part of the unparsed_uri contains colon characters (which is the case only for IPv6 literals). This patch is also a candidate for httpd-2.0 and httpd-2.2 	r632304
----------------------------
* Do not segfault when either no mutex is needed either because no session cache is configured or the session is thread safe. 	r631693
----------------------------
Session cache interface redesign, Part 6: Move mutex handling up out of the session cache providers: * modules/ssl/ssl_private.h (modssl_sesscache_provider): Add name and flags fields.  Define MODSSL_SESSCACHE_FLAG_NOTMPSAFE constant. * modules/ssl/ssl_scache.c (ssl_scache_store, ssl_scache_retrieve, ssl_scache_remove, ssl_ext_status_hook): Lock and release the mutex around provider calls, if necessary. * modules/ssl/ssl_engine_mutex.c (ssl_mutex_init): Do nothing if no session cache is configured, or the session cache does not require a mutex.  Otherwise, fail if no mutex is configured and the session cache *does* require a mutex. (ssl_mutex_on, ssl_mutex_off): Remove checks for mutex mode; functions now invoked only if necessary. * modules/ssl/ssl_scache_dc.c, modules/ssl/ssl_scache_memcache: Set name and flags fields in provider structures. * modules/ssl/ssl_scache_shmcb.c, modules/ssl_scache_dbm.c: Remove mutex handling through; set name and flags fields in provider structures; mark both as unsafe for concurrent access in flags. 	r631297
----------------------------
* modules/ssl/ssl_scache.c (ssl_ext_status_hook): Do nothing if no provider is configured. Submitted by: rpluem 	r631119
----------------------------
Session cache interface redesign, Part 5: Use the ap_provider interface for session cache storage providers. * modules/ssl/mod_ssl.c (modssl_register_scache): New function. (ssl_register_hooks): Call it. * modules/ssl/ssl_private.h: Define MODSSL_SESSCACHE_PROVIDER_GROUP and MODSSL_SESSCACHE_PROVIDER_VERSION constants. Remove ssl_scmode_t type.  Change nSessionCacheMode in SSLModConfigRec into a long sesscache_mode, storing the OpenSSL SSL_SESS_CACHE_* flags directly. * modules/ssl/ssl_engine_config.c (ssl_config_global_create): Set sesscache_mode to SSL_SESS_CACHE_OFF by default. (ssl_cmd_SSLSessionCache): Remove ifdef spaghetti; fetch configured session cache by provider name.  Set mc->sesscache_mode for configured providers. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_session_cache): Use the configured mode flags directly from mc->sesscache_mode. 	r631000
----------------------------
Session cache interface redesign, Part 4: Move provider-specific configuration handling down into the provider code.  Eliminate all use of SSLModConfigRec within provider code. * modules/ssl/ssl_private.h (modssl_sesscache_provider): Add 'create' function which creates and configures the cache provider, before initialisation.  Change 'init' function to take the context pointer as an input parameter, and reorder to be first. * modules/ssl/ssl_scache.c (ssl_scache_init): Adjust accordingly. * modules/ssl/ssl_scache_memcache.c (struct context): Add servers field. (ssl_scache_mc_create): New function. (ssl_scache_mc_init): Use servers from context not SSLModConfigRec. * modules/ssl/ssl_scache_dbm.c (struct context): Define. (ssl_scache_dbm_create): New function. (ssl_scache_dbm_init, ssl_scache_dbm_kill): Adjust to use filename and pool from context. (ssl_scache_dbm_store, ssl_scache_dbm_retrieve, ssl_scache_dbm_status): Use filename from context.  Use context pool for temp storage of the DBM object, and clear before use. (ssl_scache_dbm_expire): Remove static tLast; use last_expiry from context.  Use context pool for temp storage and clear before use. * modules/ssl/ssl_scache_dc.c (struct context): Add target field. (ssl_scache_dc_init, ssl_scache_dc_status): Use target from context. * modules/ssl/ssl_scache_shmcb.c (struct context): Add data_file, shm_size fields. (ssl_scache_shmcb_create): New function; moved argument parsing logic from ssl_cmd_SSLSessionCache (ssl_scache_shmcb_init, ssl_scache_shmcb_status): Use config from context. * modules/ssl/ssl_engine_config.c (ssl_config_global_create): Remove handling of old provider-specific fields. (ssl_cmd_SSLSessionCache): Call provider ->create function to parse the argument and create provider-specific context structure. 	r630974
----------------------------
Session cache interface redesign, Part 3: Move provider-private context out of SSLModConfigRec and into an opaque context pointer.  Use real error propagation in the ->init functions rather than ssl_die(). * modules/ssl/ssl_private.h (modssl_sesscache_provider): Take a context out-parameter from ->init, and return an apr_status_t. Add context pointer as first arg for the other function types. (SSLModConfigRec): Remove tSessionCacheData* fields; add sesscache_context field. * modules/ssl/ssl_scache.c (ssl_scache_init): Move once-per-process invocation check back into here. (ssl_scache_*): Adjust to use context pointer. * modules/ssl/ssl_scache_shmcb.c, modules/ssl/ssl_scache_dc.c, modules/ssl/ssl_scache_dbm.c: Adjust all implementations to use opaque context pointer. * modules/ssl/ssl_scache_memcache.c: Move memcache context into the context structure rather than using global state. * modules/ssl/ssl_engine_config.c: Remove handling of pSessionCacheData* fields in SSLModConfigRec. 	r630323
----------------------------
Re-implement the SSL session cache abstraction using a vtable; first step towards use of the ap_provider interface: * modules/ssl/ssl_private.h (modssl_sesscache_provider): Add new vtable type. (SSLModConfigRec): Reference the vtable here. Replace all the ssl_scache_* prototypes with provider vtable objects. * modules/ssl/ssl_scache.c (ssl_scache_init, ssl_scache_kill, ssl_scache_retrieve, ssl_scache_store, ssl_scache_remove, ssl_ext_status_hook): Use callbacks from vtable rather than ifdef spaghetti. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_session_cache): Only install the OpenSSL callbacks if a vtable is configured. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Set up vtable pointer. * modules/ssl/ssl_scache_dc.c, modules/ssl_scache_mc.c: Adjust to make implementations static, and add vtable definition. * modules/ssl_scache_shmcb.c: Likewise; also move the init one-per-process requirement down here. * modules/ssl_scache_dbm.c: Likewise; also (temporarily) use a local subpool in the store callback. 	r630163
----------------------------
Change default of mod_substitute to flattening... Via current discussion on dev@httpd 	r627764
----------------------------
Kasper Brand came across a flaw in the current implementation when CRL information - i.e.  SSLCARevocationFile/SSLCARevocationPath - is set on a per-vhost basis (don't know how much sense it makes to have non-global CRLs, but anyway...). The attached patch (47B2B1A7.1060009@velox.ch on httpd-dev) addresses this issue, and it also improves the logging behavior for an SNI enabled configuration (previously some of the messages would always go to the first vhost, or wouldn't appear at all, depending on the LogLevel of the first vhost). 	reviewed:
----------------------------
The ordering of arguments in the directive desctiptions of LDAPTrustedGlobalCert and LDAPTrustedClientCert were backwards. 	r627637
----------------------------
"Fix reference to RewriteCond - there's no class=""module"" in our XML. "	r627428
----------------------------
Addition of a test script which creates a Sample/test configuration for installations that wants to support SNI. Primarily done as a lot of web developers find the creation of certificates hard - and do not want to go to the expense of sourcing a handful from a well-known CA just for testing and experimenting. Also update the CHANGES log with the word 'SNI' as to make googling it easier. 	r620630
----------------------------
As per PR 44135 Feeling brave mucking with the rewrite docs =) setenvif -> added link to rewrite.html#rewritecond 	rewrite
----------------------------
Added notice that support forums will likely ask for an errorlog entry. 	r619699
----------------------------
* Fix a typo (timout -> timeout) PR: 44360 Submitted by: Rainer Jung <rainer.jung kippdata.de> Reviewed by: rpluem 	r619125
----------------------------
Update transformation. Note that commit r618551 also addresses PR44356 (missing slash on ProxyPass) 	r618552
----------------------------
Resolve console-mode stdout file descriptor issues for mod_perl by replacing it in lockstep with unix stdout replacement (in pre_config).  Only an undetached server (console mode single process/debug) will retain the original stdout, just as on unix.  Inspired by research of Tom and myself (CHANGES to credit both). PR: 43534 	r609354
----------------------------
Introduce the ProxyFtpDirCharset directive, allowing the administrator to identify a default, or specific servers or paths which list their contents in other-than ISO-8859-1 charset (e.g. utf-8). Submitted by: Ruediger Pluem 	r607638
----------------------------
* Change loglevel from ERROR to WARNING if the renaming of the vary, headers or data file fails. 	r607440
----------------------------
* Adjust etag generation to produce identical results on 32-bit and 64-bit platforms and avoid a regression with conditional PUT's on lock and etag. Add a warning to the documentation of FileETAG that changes of the ETAG format can cause conditionals to fail on mod_dav_fs provided backends. PR: 44152 Submitted by: Michael Clark <michael metaparadigm.com> Reviewed by: rpluem 	r607437
----------------------------
* Make loglevel consistent for similar situations. As this really should not happen set it to error. 	r607245
----------------------------
Enable to configure the https port - missing pieces. 	r606806
----------------------------
Enabled to configure the https port as we do with http port too. 	r606316
----------------------------
Plug in build/installwinconf.awk, unplug httpd-win.conf and follow the same general configuration as all platforms. 	r606158
----------------------------
"Start preparing to use the general-case httpd.conf.in, on Win32. Note the quoted log *filenames*, which lets us figure out the difference between fixing ""access_log"" to be a windows friendly ""access.log"", and leaving the custom log format name pretty_log alone. Also, prefer the user specified port for example ServerName. "	r606135
----------------------------
* Use a separate subpool to manage the data for the socket and the connection member of the proxy_conn_rec struct as we destroy this data more frequently than other data in the proxy_conn_rec struct like hostname and addr (at least in the case where we have keepalive connections that timed out and were closed by the backend). This fixes a memory leak with short lived and broken connections. PR: 44026 	r603237
----------------------------
Document the usage of ProxyIOBufferSize to extend the default AJP message length. 	r602806
----------------------------
* mod_substitute is no longer experimental. 	r602736
----------------------------
* Optimize memory behaviour of mod_substitute by * Precreate all needed brigades, save them in the filter context and reuse * Use a temporary pool for all the needed copy stuff and clean it up every * Use transient instead of pool buckets. * There are cases that lead to the exceptional situation of a very large 	r602469
----------------------------
Briefly mention UserDir's url redirection abilities 	r599655
----------------------------
UserDir accepts multiple file paths. Submitted by: Vincent Jong <megaspaz tron.megaspaz.net> 	r599646
----------------------------
Repeated 'RewriteRule' 	r599603
----------------------------
mod_ssl: Add support for OCSP validation of client certificates: * modules/ssl/ssl_engine_config.c (modssl_ctx_init, modssl_ctx_cfg_merge): Initialize and merge OCSP config options. (ssl_cmd_SSLOCSPOverrideResponder, ssl_cmd_SSLOCSPDefaultResponder, ssl_cmd_SSLOCSPEnable): Add functions. * modules/ssl/mod_ssl.c (ssl_config_cmds): Add config options. * modules/ssl/ssl_private.h: Add prototypes, config options to modssl_ctx_t. * modules/ssl/ssl_util_ocsp.c: New file, utility interface for dispatching OCSP requests. * modules/ssl/ssl_engine_ocsp.c: New file, interface for performing OCSP validation. * modules/ssl/ssl_engine_kernel.c (ssl_callback_SSLVerify): Perform OCSP validation if configured, and the cert is so-far verified to be trusted.  Fail if OCSP validation is configured an the optional-no-ca check tripped. * modules/ssl/config.m4: Check for OCSP support, build new files. * modules/ssl/mod_ssl.dsp: Build new files. * modules/ssl/ssl_toolkit_compat.h: Include headers for OCSP interfaces. PR: 41123 Submitted by: Marc Stern <marc.stern approach.be>, Joe Orton Reviewed by: Steve Henson <steve openssl.org> 	r599385
----------------------------
* mod_substitute is now below filters and no longer in experimental. 	r598669
----------------------------
move mod_substitute from exp to filters 	r598651
----------------------------
mod_filter: don't segfault on (unsupported) chained FilterProviders. PR 43956 	r598299
----------------------------
no content changes move the xml doc for KeptBodySize to its rightful, alphabetical location (the transformed version was already alphabetized) 	r594855
----------------------------
Add mod_serf, a reverse proxy module, which uses serf[1] as its http client library. To enable, pass something like this to configure: To try it out, put something like this in your httpd.conf: <Location /> </Location> LocationMatch and all related directives can also be used, magical eh? [1] - http://code.google.com/p/serf/ 	r594425
----------------------------
fix to http://svn.apache.org/viewvc?rev=591499&view=rev to properly copy into char ***retvals when AuthLDAPUrl has extra attributes specified 	r593919
----------------------------
Add in SeeRequestTail directive, to handle the shortcoming of only storing 63 bytes of the request, when the requests are longer than that and only vary towards the end; eg: 	r590641
----------------------------
"Update the patch for environment variable interpolation in ProxyPass/Reverse/etc directives: r421686, r422178, r421686, r421725 That patch stalled on wrowe's veto.  This update introduces a new ""interpolate"" keyword to all directives affected, so should meet his concerns by adding explicit per-directive control (disabled by default). "	r589371
----------------------------
Fix possible crash at startup in case of nonexistent DocumentRoot. PR#39722 	r589177
----------------------------
"mod_proxy: add ""nocanon"" keyword to ProxyPass, to suppress URI-canonicalisation in a reverse proxy. PR 41798 "	r588791
----------------------------
Unless I've misread this, POD is write-blocking, read nonblocking timeout 0. 	r587673
----------------------------
We now have an API to describe pipe creation timeout states, so use it to ensure no platform has quirks with their particular default. 	r587670
----------------------------
mod_substitute module docs, first bash. 	r587150
----------------------------
"Improve documentation of ""DefaultType None"" "	r584842
----------------------------
Document ProxyMaxForwards change in r581117 	r581253
----------------------------
Default to NOT setting Max-Forwards in violation of RFC2616 Leave old behaviour as a configuration option (ProxyMaxForwards) PR 16137 	r581117
----------------------------
"Document ""DefaultType None"" option (PR 13986) "	r580502
----------------------------
Fix keepalive to proxy backend PR 43472 	r580466
----------------------------
Share a single write-pipe handle for piped stderr logging, this prevents an extra logging process from hanging around after the initial config-phase. Reviewed by: rpluem, wrowe 	r580437
----------------------------
With the exception of exclusively test/stress modules, add all of the modules we are compiling (in any shape). drop mod_imagemap, mod_userdir from the default-loaded modules add mod_authn_core/mod_authz_core to the default-loaded modules Several other modules should be considered for default-loaded or default-not loaded changees. 	r580249
----------------------------
"Add ""DefaultType None"" option PR 13986 and PR 16139 "	r579991
----------------------------
mod_log_config: Add format options for %p so that the actual local or remote port can be logged. PR:  43415 Submitted by: Adam Hasselbalch Hansen <ahh@one.com> Extensively commented on and/or modified by Ruediger Pluem and Jeff Trawick 	r579425
----------------------------
Clarify what happens if you don't have a ServerName in your <VirtualHost>, since people sometimes assume that this implies the host has no name, resulting in confusion. Suggested by: Michael Rasmussen <mikeraz patch.com> 	r578949
----------------------------
document the mod_userdir-like tilde expansion sometimes performed by mod_rewrite A tilde can sneak into a rule via a backreference and cause some surprising behavior 	r577254
----------------------------
* Add the novary flag to RewriteCond in order to prevent the appending of HTTP headers used in a rewrite condition to the Vary header of the response. 	r574684
----------------------------
Don't call into get_worker while holding the timeout_list mutex. PR: 42031 	r574462
----------------------------
Propagate Proxy-Authorization header correctly PR 25947 RFC2616 tells us: (1) If we haven't authenticated, we must pass the header on. (2) If we have authenticated, we MAY pass it on. I've made the latter case configurable by ENV(Proxy-Chain-Auth). Also, Proxy-Authenticate is a response header, and doesn't belong in a check of request headers. 	r574021
----------------------------
Check all IP addresses listed in ProxyBlock PR 36987 	r573911
----------------------------
Add option to escape backreferences in RewriteRule. PR 34602  and  PR 39746 Patch by Guenther Gsenger 	r573831
----------------------------
Refactor releasing the child processes by eliminating the time lookup, eliminating the bogus/misimplemented function, and introducing fairness to release any dead threads before getting hung up on releasing longer lived threads. Also pick up the time-to-wait from the server global timeout. 	r573103
----------------------------
Add support for proxy-nokeepalive (for testings). 	r572919
----------------------------
* Improve ProxySet documentation by pointing out one pitfall and one interesting use case. 	r571836
----------------------------
mod_proxy: Add Proxypass status option to ignore errors PR 43167.  Patch by Francisco Gimeno 	r571338
----------------------------
Document new IndexOptions options 	r570535
----------------------------
IndexOptions ContentType=text/html Charset=UTF-8 magic. 	r570532
----------------------------
Fix FilterTrace directive's description 	r570444
----------------------------
We are Substitute now :) 	r569659
----------------------------
mod_expires - don't segfault on bad configuration. PR 43213: Julien Perez 	r569622
----------------------------
Bless the module mod_substitute, with the Substitute directive and SUBSTITUTE filter name. 	r569533
----------------------------
note odd DBDPersist format in 2.2.0 and 2.2.1 	r569105
----------------------------
DBDPersist takes On or Off 	reported
----------------------------
Rework locking on timeout_mutex.  We now drop (and reaquire) the lock inside the while loops.  This is the least line of code changes to stop a dead lock between the queue in push2worker (a blocking function) and the timeout_mutex.  These two timeout list iterations should be rewritten with better locking rules, but for now this should fix the bug, without rewriting the entire function. PR: 41712 	r567852
----------------------------
Document ProxyStatus 	r563990
----------------------------
Minimal ProxySet directive documentation :) 	r563480
----------------------------
* Avoid that relative changes to Options change the settings for FileETag. This does NOT address the remaining issues with relative settings and FileETag mentioned in PR 42027, but at least it isolates the problem to them. Currently these issues can be worked around with absolute settings. PR: 42027 Submitted by: Rici Lake <rici ricilake.net> Reviewed by: rpluem 	r562860
----------------------------
Some updates to the RewriteRule docs, mostly focusing on clearly describing what can be in the substitution string. Included is a description of how mod_rewrite decides whether to treat the substitution as a file-system or URL-path. PR: 22529 	r561840
----------------------------
Fix rewriterule directive, as per comment #9 in http://issues.apache.org/bugzilla/show_bug.cgi?id=40004 	r559494
----------------------------
Address PR42898 by qualifying the value of Pattern for RewriteRule, and later explaining how to snarf the rest of the request url. (and the usual build detritus). 	r558837
----------------------------
Demote use of AddType for cgi and remove redundant paragraph regarding DOCUMENT_ROOT 	r558718
----------------------------
Undocument 1.3 quoting behaviour for ErrorDocument. 	r558686
----------------------------
"Reword description of matching NVH with VH, per docs@, subject ""NameVirtualHost and <VirtualHost>"" June 12, 2006. "	r558629
----------------------------
with LimitRequestBody xxx and the deflate output filter configured, mod_deflate eats the 413 error bucket, a 500 error is logged, and a blank screen appears at the browser. 	r554011
----------------------------
Add alternative fixes for CVE-2007-3304: * configure.in: Check for getpgid. * include/mpm_common.h (ap_mpm_safe_kill): New prototype. * server/mpm_common.c (reclaim_one_pid): Ensure pid validity before calling apr_proc_wait(). (ap_mpm_safe_kill): New function. * server/mpm/prefork/prefork.c, server/mpm/worker/worker.c, server/mpm/experimental/event/event.c: Use ap_mpm_safe_kill() on pids from the scoreboard, throughout. * include/ap_mmn.h: Minor bump. 	r551843
----------------------------
* server/mpm/prefork/prefork.c (reap_children), * server/mpm_common.c (ap_wait_or_timeout): Remove dead code; NEED_WAITPID has never been defined by the 2.x build system. 	r551823
----------------------------
Fix the timeout logic. The order is now: 1 - worker->timeout 2 - proxy_conf->timeout 3 - server->timeout. ap_get_module_config() is not perfect by that is easy to port back to 2.2.x. 	r550514
----------------------------
Make default values for memcache config defines, rather than inline constants. 	r546707
----------------------------
Arrange the proxy timeout behaviour. 	r546128
----------------------------
For the DBM SSL Session Cache, propogate down pools to use for allocations.  In most cases, we can use the conn_rec::pool, but for ssl_callback_DelSessionCacheEntry, we still use the long lived configuration pool, but this change at least makes it easier to fix in the future. 	r545610
----------------------------
Use the absolute timeout, as provided by mod_ssl, rather than trying to calculate a relative timeout. (which did it wrong anyways). 	r545385
----------------------------
* Preset the form fields for route and redirect with the values of the active configuration in the scoreboard and not with the ones loaded from the configuration files. 	r544930
----------------------------
PR#39710 - badly broken errordocuments for CGI We've just had another duplicate report of this on bugzilla. We've got a simple patch, and people asking WTF is going on with inaction.  Noone seems clear on why the patch shouldn't be applied (http://marc.info/?l=apache-httpd-dev&m=117760311129386&w=2). 	r541926
----------------------------
"Fold in ProxyPassMatch directive with docs. Support full regex substitution but also allow for ""simple"" cases (ala JkMount) to work as well. "	r537599
----------------------------
Add regex pattern matching to ProxyPass, allowing, for example: 	r537429
----------------------------
HTTP proxy ProxyErrorOverride: Leave 1xx and 3xx responses alone.  Only processing of error responses (4xx, 5xx) will be altered. PR: 39245 This is based on a patch submitted by Bart van der Schans <schans hippo.nl> and tweaked slightly by me based on discussions on dev@ since April 2006. I think rpleum was the first to mention the 1xx issue. 	r527969
----------------------------
Encourage people to look at ./configure --help Several people this week have seemed to think that this document should list all the options. Perhaps that's not entirely unreasonable, but it isn't going to happen any time soon. 	r527129
----------------------------
"Too many users are baffled by this message.  Some days even the devs are ;-) Votes to backport to 2.2 and 2.0? New resulting message is bin/httpd -f /dev/null -C ""LoadModule ftp_module ../apache22/modules/mod_ftp.so"" Syntax error in -C/-c directive: API module structure 'ftp_module' in file /usr/local/apache22/modules/mod_ftp.so is garbled - expected signature 41503230 but saw 41503232 - perhaps this is not an Apache module DSO, or was compiled for a different Apache version? "	r520733
----------------------------
HTML files changed by adding docs for BalancerMember directive 	r515256
----------------------------
Documenting the sooper-sekrit BalancerMember directive 	r515251
----------------------------
Return METHOD_NOT_ALLOWED, not FORBIDDEN, to a TRACE request when TraceEnable is Off.  This agrees with our documentation, and with our Allow: header in response to OPTIONS. 	r507526
----------------------------
* Save the key we generate during our first run of cache_generate_key_default on each request in the request_config. During consecutive runs of cache_generate_key_default during processing the request we restore it from there as we might not be able to generate the same key again as the ingredients used to compose the key might have changed and we constantly must use a key that could be generated during the quick handler phase. PR: 41475 	r506621
----------------------------
* Add CacheIgnoreQueryString directive to cache requests with a query string even if no expiration time is specified. Futhermore the query string will not be used for key generation such that requests to the same URI path, but with different query strings are mapped to the same cache entity. Turning this setting to ON violates RFC 2616/13.9 and thus it is turned off by default. PR: 41484 Submitted by: Fredrik Widlund <fredrik.widlund qbrick.com> Reviewed by: rpluem 	r504183
----------------------------
Introduce configuration groups to allow inheritance by virtual hosts of database configurations from the main server.  The post_config hook function determines the minimal set of distinct configurations necessary so that database connection pools are shared between virtual hosts whenever possible. The SQL statements which should be prepared for each database connection are now stored in a hash for each virtual host during the configuration phase, and these hashes are merged in the normal manner using apr_hash_overlay() with that of the main server.  This allows for statements to be de-registered by DBDPrepareSQL, if desired.  The post_config hook function then compares the statements registered for each virtual host when determining if a separate configuration group is required.  The changes in r424798, r432560, r432562, and r466641, which still have problems with configuration inheritance, are therefore no longer necessary. 	r503931
----------------------------
Unix MPMs: Catch SIGFPE so that exception hooks and CoreDumpDirectory can work after that terminating signal. Submitted by: Eric Covener <covener gmail.com> Reviewed by:  trawick 	r500881
----------------------------
* configure.in: Substitute MOD_SO_ENABLED variable. * support/apxs.in: Use it to eliminate run-time check for whether httpd has mod_so built-in. Submitted by: David M. Lee <dmlee crossroads.com> PR: 40653 	r494781
----------------------------
* configure.in: Bump autoconf version requirement (matching APR). 	r492510
----------------------------
Destroy pmain pool when exiting ap_mpm_run() so that cleanups mod_log_config and mod_dbd). 	registered
----------------------------
Handle error conditions in dbd_construct() properly.  Simplify ap_dbd_open() and use correct arguments to apr_dbd_error() when non-threaded.  Register correct cleanup data in non-threaded ap_dbd_acquire() and ap_dbd_cacquire().  Clean up configuration data and merge function.  Use ap_log_error() wherever possible. 	r491884
----------------------------
Stop mod_dbd emitting bogus error messages when it's loaded but not configured. 	r485311
----------------------------
Stash DBD connections in request_config of initial request only, or else sub-requests and internal redirections may cause entire DBD pool to be stashed in a single HTTP request. 	r481509
----------------------------
ifdef out suexec for the platforms that don't support it 	r479799
----------------------------
* Start re-organizing the function declarations to put related items together * Fix http_scheme and default_port implementations to return proper equivalents of DECLINED, so they can exist without breaking stuff * Explain why some of the config access utility routines are ifdeffed out 	r479025
----------------------------
TimeOut can be set in a vhost context Submitted by: Eric Covener Reviewed by:  Jeff Trawick 	r475698
----------------------------
Restore the pdconf configuration structure in the SENDFILE case. 	r468409
----------------------------
Fix address-in-use startup failure caused by corruption of the list of listen sockets in some configurations with multiple generic Listen directives. The logic in error is that which prunes out generic IPv4 listening sockets when we already have a v4-mapped generic IPv6 listening socket for the same port. 	r467034
----------------------------
At support for ProxyIOBufferSize in AJP. 	r467014
----------------------------
add example test_config routine 	re-order
----------------------------
mod_authnz_ldap: Add an AuthLDAPRemoteUserAttribute directive. If set, REMOTE_USER will be set to this attribute, rather than the username supplied by the user. Useful for example when you want users to log in using an email address, but need to supply a userid instead to the backend. 	r463427
----------------------------
So I'm sitting in Rich's talk and think to myself, it's kind of stupid that DumpIO always logs at Debug, esp when you consider that it's likely you'll be doing so in conjunction with SSL... One Big Log is understating it! :) Add DumpIOLogLevel to allow one to change the level... 	r463291
----------------------------
describe new check_config hook 	r462915
----------------------------
added pre_config, check_config, and test_config hooks moved open_logs hook 	r462914
----------------------------
Fix rewritemap/dbd bug pointed out by Davi Arnaut, and improve error reporting. 	r454732
----------------------------
Fix bugs pointed out by rpluem in rewritemap/dbd 	r454723
----------------------------
Add SQL Query capability to RewriteMap 	r454683
----------------------------
Seems like a good idea to close the <Directory> tag in the example. 	r453083
----------------------------
Make sure that original socket timeout gets restored even if the cping/cpong fails. 	r452549
----------------------------
Add force recovery for balancer. In case all balancer members were in error state 503 was returned until the recovery timeout expired. The patch forces recovery in case all balancer members are in error state regardless of recovery timeout directive. This fixes the time gap when 503 was returned and backend was already up and running. 	r451572
----------------------------
* server/mpm/prefork/prefork.c (prefork_check_config): Remove unused variable. 	r451297
----------------------------
* Notice a timeout as an error message. This might be valuable for detecting clients with broken network connections or possible DoS attacks. 	r451287
----------------------------
* Notice that reading of the request entity body failed due to a timeout 	r451006
----------------------------
mod_disk_cache: Make sure that only positive integers are accepted for the CacheMaxFileSize and CacheMinFileSize parameters in the config file. PR39380 [Niklas Edmundsson <nikke acc.umu.se>] 	r450042
----------------------------
Generic fix for PR#31759 If a handler returns a value that is neither reserved nor a valid HTTP response code, log an error and substitute HTTP_INTERNAL_SERVER_ERROR. Allow a handler to override this explicitly by setting a note. 	r448711
----------------------------
* Print the correct error message for erroneous configured ProxyPass directives. PR: 40439 Submitted by: serai lans-tv.com Reviewed by: rpluem 	r441947
----------------------------
Replace ap_get_server_version with ap_get_server_banner() and ap_get_server_description(). High-level summary: The full server version information is now included in the error log at startup as well as server status reports, irrespective of the setting of the ServerTokens directive. Third-party modules must now use ap_get_server_banner() or ap_get_server_description() in place of ap_get_server_version(). 	r440337
----------------------------
Allow the typical non-DAV methods to be unrestricted in our DAV examples (in particular, POST).  Also change <Location> to <Directory> in the docs.  This particular example was not a security problem because <Location> was being used to *extend* access, rather than to *restrict* access, but it is better to encourage people to use <Directory> by default. PR: 40030 	r433694
----------------------------
My last effort was a little too succinct and not quite precise enough.  Try being more explicit. This does leave the danger that people will clip the <Location> example as the proper way to do things, when they should be is only correct when used in conjunction with Alias. 	reading
----------------------------
Make it clear that url-path is always case-sensitive. Provide an example of using a regex to make it case-insensitive. Make it clear that ScriptAlias is only used when you want BOTH mapping and script-designation. Partially in response to the disputed vulnerability: http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-4110 	r432997
----------------------------
Don't use NULL s->server_hostname as hash lookup key. Reported by paritosh (at limewire.co.in) on dev@httpd (thread Re: apache 2.2 crashes at the start time in mod_dbd.c then preparing AuthDBDUserPWQuery) Fixed by paritosh and Yours Truly. 	r432560
----------------------------
"Introduce a check_config phase between pre_config and open_logs, to allow modules to review interdependent configuration directive values and adjust them while messages can still be logged to the console. The open_logs phase is already used somewhat for this purpose by certain MPMs (winnt, prefork, worker, and event) but only by forcing their functions ahead of the core ap_open_logs() function, and since this phase runs after the ap_signal_server function during startup, it can not be used to generate messages on the console when restarting. Add the check_config phase to mod_info and mod_example. Handle relevant MPM directives during this phase and format messages for both the console and the error log, as appropriate.  Bounds and sanity checks on the values of the MPM directives are handled in sequence in this phase instead of in the various directive handling functions, since those functions (e.g., set_max_clients()) may not be called at all if their directives do not appear in the configuration files, and even if they are called, there is no guarantee that this will occur in any particular order. Remove from the worker and event MPMs the code in the pre_config phase that alters the configuration node tree by re-ordering ThreadsPerChild ahead of MaxClients.  This code is effective but insufficient; for example, if ServerLimit follows MaxClients, the test against server_limit in set_max_clients() is invalid.  (In practice, this only results in incorrect or absent warnings on the console, because server_limit is set to its configured value when the main loop re-runs the configuration process.) Prevent ap_threads_per_child from exceeding thread_limit in the winnt, worker, and event MPMs.  This situation could occur if ThreadsPerChild was not specified in the configuration files and ThreadLimit was set to a value smaller than DEFAULT_THREADS_PER_CHILD, because set_threads_per_child() would never be called and therefore its bounds check against thread_limit would not be performed. Remove from the winnt, prefork, worker, and event MPMs the changed_limit_at_restart flag.  Set the first_server_limit and first_thread_limit values during the first execution of the check_config function, and use them to detect changes to ServerLimit and ThreadLimit across restarts and issue appropriately formatted warnings.  Remove the comments about the error log being a ""bit bucket""; this was true when the code was originally committed in r92530 but that was due to a bug fixed in r92769. Be consistent about setting all MPM configuration directive values in the pre_config phase. Rephrase and reformat the console and log file messages relating to MPM configuration directives to be consistent across all MPMs.  Use briefer messages when logging to the error log than to the console. Update miscellaneous stale comments and messages (e.g., reference to daemons_min_free in worker and event MPMs, ""prefork open_logs"" in winnt MPM, and StartServers in netware MPM). The winnt, netware, beos, and mpmt_os2 MPMs should be tested by developers with access to those platforms, especially the winnt MPM, which has unique logic with respect to distinguishing between parent and child processes during the configuration phases. Update the English documentation for the worker MPM's ThreadsPerChild directive, which no longer needs to precede other MPM directives in the configuration files if it has a non-default value.  The German (.de) and Japanese (.ja) translations should be updated by developers fluent in those languages. "	r431460
----------------------------
* Followup patch on r427959: Also substitute close_on_recycle with close in mod_proxy_fcgi. This makes mod_proxy_fcgi compile again. 	r428152
----------------------------
Fix return values from wait_for_many_objects. The return value is index to the signaled thread in the creted_threads array. We can not use WAIT_TIMEOUT as return value because its value is defined as 258, thus limiting the MaxThreads to that value that leads to the assertion errors. 	r428029
----------------------------
"Fix the assertion if the WaitForMutipleObjects WAIT_OBJECT_NN. This will correctly close the thread handle without using invalid thread handle array index. Spotted when large balancer timeout was set and all the threads were busy waiting for the connection: [Wed Aug 02 14:29:58 2006] [crit] [Wed Aug 02 14:29:58 2006] file \\build-2.2.2\\server\\mpm\\winnt\\child.c, line 1120, assertion ""(rv >= 0) && (rv < threads_created)"" failed "	returns
----------------------------
Allow optional name=value options within <Proxy section line. Additional arguments are allowed only for 'standard' url's, meaning that the wildchar urls will return error like before. This allow to specify the worker/balancer parameters on the definition line, without the need for extra ProxySet options. 	r427928
----------------------------
Enable ProxySet inside <Proxy> section to create balancer or worker if they were not already created. This allows to have ProxySet directive before BalancerMember directives inside Proxy section. 	r427920
----------------------------
SECURITY: CVE-2006-3747 (cve.mitre.org) mod_rewrite: Fix an off-by-one security problem in the ldap scheme handling.  For some RewriteRules this could lead to a pointer being written out of bounds.  Reported by Mark Dowd of McAfee. Ack: trawick, lars, jorton, wrowe, benl 	r426138
----------------------------
ScriptSock has been global-only for a couple of years now; fix the docs 	r425124
----------------------------
Backout r410758 because DavLockDB needs to point to an httpd-writable directory and @exp_runtimedir@ doesn't qualify.  Also document a missing module requirement. 	r424817
----------------------------
Remove dependence on server config from ap_dbd_prepare, as that may be called in per-directory config functions where there is no server context causing segfault. Discussion at http://mail-archives.apache.org/mod_mbox/httpd-dev/200607.mbox/<831327593.20060720023332%40engec.ru> and subsequent thread. 	r424798
----------------------------
Revert r422298, because it introduces GNU Make specific extensions to the Makefile, and should be replaced by doing the work inside configure, instead of the Makefile.in. 	r422925
----------------------------
include/ap_config.h: Include the autoconf generated header that defines what is available. configure.in: The times function is not really available on mingw32. Disable em. 	r422197
----------------------------
Bring in basic support for building the winnt MPM under mingw32, using the autoconf build system.  Currently this will get you to the point of linking errors on gen_test_char. configure.in: Default to winnt MPM on mingw32 hosts. configure.in: Add AP_DECLARE_EXPORT for mingw32 hsots. os/config.m4: Use win32 dir under mingw32. os/win32/Makefile.in: Add in a new makefile to generate libos on win32. server/mpm/config.m4: Add winnt MPM to the help string. server/mpm/config.m4: winnt MPM is a threaded MPM. server/mpm/winnt/child.c: SO_UPDATE_ACCEPT_CONTEXT is defined under a different header in mingw32. server/mpm/winnt/{Makefile.in,config.m4}: Base build for winnt MPM. os/win32,server/mpm/winnt: Update svn:ignore for .deps/.libs 	r422182
----------------------------
Support environment variable interpolation in reverse proxy configuration 	r421686
----------------------------
* Add the filename of the configuration file to the warning message about the useless use of AllowOverride. PR: 39992 Submitted by: Darryl Miles <darryl darrylmiles.org> Reviewed by: rpluem 	r420307
----------------------------
"- clean up SSLProtocol description; ""flavo[u]r"" is meaningless in this context, use ""version"" instead "	r419861
----------------------------
Make it clear what is meant by per-directory rewrites and specify the rewrites in <Location> is unsupported. (The same is probably true for <Files>, but I'd have to think about that a little more.) PR: 39843 	r418360
----------------------------
New SSLLogLevelDebugDump [ None (default) | IO (not bytes) | Bytes ] configures the I/O Dump of SSL traffic, when LogLevel is set to Debug. The default is none as this is far greater debugging resolution than the typical administrator is prepared to untangle. 	r416265
----------------------------
Add CheckCaseOnly doc. Submitted by: olivier Thereaux <ot@w3.org> 	r415460
----------------------------
A keepalive response need not neccessarily have included any content-length header, handle this case properly for 304 responses. PR39789 	r413861
----------------------------
A little bit more detail, and an example, for how DocumentRoot is handled. Examples good. 	r413683
----------------------------
For quite some time now, 'graceful' and 'restart' have done a config file syntax check prior to actually attempting to restart. These notes are no longer true. 	r413222
----------------------------
* Show how to pass additional arguments to config.nice * Note that su is required for `make install` * Minor gramatical nitpicking. 	r413203
----------------------------
PR#39761 Make the error message more meaningful when DBD is configured without a driver. 	r413015
----------------------------
* If possible, check if the size of an object to cache is within the configured boundaries before actually saving data. Submitted by: Niklas Edmundsson <nikke acc.umu.se> Reviewed by: rpluem 	r411469
----------------------------
* configure.in: Use common variables for the required APR/APR-util version. 	r410828
----------------------------
On graceless shutdown or restart, send AP_SIG_GRACEFUL to all worker threads so that any that are polling on Keep-Alive connections will wake up and exit promptly.  Otherwise, on Linux, they wait until poll()'s timeout interval completes, which is often too long for the parent process; the parent issues SIGKILL before the child's main thread manages to re-join all the worker threads.  PR 38737. On Solaris, by contrast, the close_worker_sockets() function successfully alerts all worker threads that they should exit quickly. On Linux, this side-effect of one thread closing another's socket doesn't occur; see: http://bugme.osdl.org/show_bug.cgi?id=546 Also, expand on the placeholder in CHANGES regarding previous cleanups to scoreboard.c and scoreboard.h in r404848 and r404849. 	r409715
----------------------------
* Add a note about trailing slashes for ProxyPass and fix the balancer example accordingly. PR: 39203 	r409455
----------------------------
"* Handle the cases ""no proxy request"" and ""reverse proxy request"" in the same manner, when setting scheme and port_str. This is needed because if a cached entry is looked up by mod_cache's quick handler r->proxyreq is still unset in the reverse proxy case as it only gets set in the translate name hook (either by ProxyPass or mod_rewrite) which is run after the quick handler hook. This is different to the forward proxy case where it gets set before the quick handler is run (in the post_read_request hook). If a cache entry is created by the CACHE_SAVE filter we always have r->proxyreq set correctly. Also set scheme to ap_http_scheme(r) instead of ""http"" to handle SSL correctly. PR: 39593 "	r407357
----------------------------
Document r399947, addition of optional scheme:// to ServerName directive 	r406697
----------------------------
Stop returning DECLINED from the output filter for proxy Filters can't return that type of status. The way to decline filter handling is to pass through the input data unchanged and hopefully remove the output filter permanently. As long as the proxy flag was set in the fixup hook, we didn't fill in our request config and the filter will be a no-op anyway. 	requests.
----------------------------
PR#39386: Fix merge-config to support prepared statements (Brian J. France) 	r396310
----------------------------
Merge the fcgi-proxy-dev branch to trunk, adding a FastCGI back end for mod_proxy.  This log message is just a summary of the changes, for the full original log messages see r357431:393955 in branches/fcgi-proxy-dev. * modules/proxy/mod_proxy_fcgi.c: New file, holds the impementation of our new fcgi backend for mod_proxy. * modules/proxy/fcgi_protocol.h: New file, holds constants and structures for the fcgi protocol. * modules/proxy/mod_proxy_balancer.c (proxy_balancer_canon): Set up r->path_info, so the PATH_INFO env * modules/proxy/config.m4: Build the new mod_proxy_fcgi module. * support: Add fcgistarter to svn:ignore. * support/Makefile.in: Build the new fcgistarter program. * support/fcgistarter.c: New program, a helper for starting fcgi worker processes. 	r396063
----------------------------
* configure.in: Add --with-included-apr flag to force use of the bundled copies of APR and APR-util. 	r395211
----------------------------
PR#39321 - don't segfault if a bad URL is specified in ProxyPass 	r394390
----------------------------
Sync context of LDAPConnectionTimeout and LDAPVerifyServerCert with latest changes to mod_ldap (http://svn.apache.org/viewcvs?rev=387675&view=rev) 	r388301
----------------------------
LDAPConnectionTimeout and LDAPVerifyServerCert can be configured per-vhost 	r386776
----------------------------
Remove the global only flag from the LDAPConnectionTimeout directive and add it to all of the caching directives 	r386751
----------------------------
Drop the LogLevel of the messages for the deprecated access control directives from WARN to INFO. 	r384628
----------------------------
Make AJP flushing admin configurable. 	r384580
----------------------------
APR_FILEPATH_NOTABOVEROOT was undefined with a left-hand NULL or empty path.  The SECUREROOTPATH and NOTABSOLUTE tests were sufficient for this application.  Adjusts for a bug in earlier versions of APR with this undefined value. 	r382147
----------------------------
don't use &nbsp; in configuration code that might be copy and pasted and cannot be interpreted correctly by the httpd 	r378577
----------------------------
* acinclude.m4 (APACHE_CHECK_SSL_TOOLKIT): Add PKG_CONFIG_PATH for specified OpenSSL location to avoid picking up system pkg-config configuration. PR: 38277 	r378473
----------------------------
Add more detail about how to use the new authorization configuration 	r378124
----------------------------
*) mod_proxy: Fix KeepAlives not being allowed and set to Also, document previous patch: *) Correctly initialize mod_proxy workers, which use a 	r378032
----------------------------
Make the worker and event MPMs support GracefulShutdownTimeout just like the prefork MPM does. Submitted by: Chris Darroch <chrisd pearsoncmg.com> Ported to event MPM by: rooneg Issue number: 38621 * server/mpm/worker/worker.c (ap_mpm_run): Make the graceful shutdown log message refer to the right * server/mpm/experimental/event/event.c (ap_mpm_run): Ditto. * CHANGES: Note change. 	r377291
----------------------------
* modules/aaa/config.m4: Place mod_access_compat in the 'yes' list as not handling older auth configs out-of-the-box is badness. 	r375678
----------------------------
* Do not overwrite the status of initialized workers and respect the configured status of uninitilized workers when creating a new child process. 	r374929
----------------------------
Use HTMLTable option in the config example so that directory listings will satisfy people concerned about html spec compliance. 	r371933
----------------------------
Fix the documentation for the LDAPTrustedMode directive. 	r370859
----------------------------
* Add a sentence about DDOS. * Mention problems with low Timeouts and long running CGIs. * Stress out the experimental character of event MPM and that it does not work with ssl currently. 	r369902
----------------------------
* Add some remarks how to mitigate the risk of DoS attacks by setting proper values for the Timeout and Keepalive parameters. 	r369827
----------------------------
* Add CacheMinExpire directive to set the minimum time in seconds to cache a document in the case that no valid expire time was supplied with the document. Submitted by: Brian Akins <brian.akins turner.com> Reviewed by: Ruediger Pluem 	r369811
----------------------------
Determined that yes; apr_general.h may be included in .rc files, so eliminate a substitute declaration. Correct version and copyright generation, this involves 'long line' flavor of the first ASF copyright line;  next step will be no more awk generation of .rc files, so there we will use the new macro AP_SERVER_COPYRIGHT and defined tokens from this file for versions. 	r368395
----------------------------
Authz refactoring Merge from branches/authz-dev Basically here is a list of what has been done: - Convert all of the authz modules from hook based to provider based - Remove the ap_requires field from the core_dir_config structure - Remove the function ap_requires() since its functionality is no longer supported or necessary in the refactoring - Remove the calls to ap_some_auth_required() in the core request handling to allow the  hooks to be called in all cases. - Add the new module mod_authz_core which will act as the authorization provider vector and contain common authz directives such as 'Require', 'Reject' and  '<RequireAlias>' - Add the new module mod_authn_core which will contain common authentication directives such as 'AuthType', 'AuthName' and '<AuthnProviderAlias>' - Move the check for METHOD_MASK out of the authz providers and into the authz_core provider vector - Define the status codes that can be returned by the authz providers as AUTHZ_DENIED,  AUTHZ_GRANTED and AUTHZ_GENERAL_ERROR - Remove the 'Satisfy' directive - Implement the '<RequireAll>', '<RequireOne>' block directives  to handle the 'and' and 'or' logic for authorization. - Remove the 'AuthzXXXAuthoritative' directives from all of the authz providers - Implement the 'Reject' directive that will deny authorization if the argument is true - Fold the 'Reject' directive into the '<RequireAll>', '<RequireOne>' logic - Reimplement the host based authorization functionality provided by 'allow', 'deny' and 'order' as authz providers - Remove the 'allow', 'deny' and 'order' directives - Merge mod_authn_alias into mod_authn_core - Add '<RequireAlias>' functionality which is similar to '<AuthnProviderAlias>' but specific to authorization aliasing - Remove all of the references to the 'authzxxxAuthoritative' directives from the documentation - Remove the 'Satisfy' directive from the documentation - Remove 'Allow', 'Deny', 'Order' directives from the documentation - Document '<RequireAll>', '<RequireOne>', 'Reject' directives - Reimplement the APIs ap_auth_type(), ap_auth_name() as optional functions and move the  actual implementation into mod_authn_core - Reimplement the API ap_some_auth_required() as an optional function and move the  actual implementation into mod_authz_core Major Changes: - Added the directives <RequireAll>, <RequireOne>, <RequireAlias>, Reject - Expanded the functionality of the directive 'Require' to handle all authorization and access control - Added the new authz providers 'env', 'ip', 'host', 'all' to handle host-based access control - Removed the directives 'Allow', 'Deny', 'Order', 'Satisfy', 'AuthzXXXAuthoritative' - Removed the ap_require() API - Moved the directives 'AuthType', 'AuthName' out of mod_core and into mod_authn_core - Moved the directive 'Require' out of mod_core and into mod_authz_core - Merged mod_authn_alias into mod_authn_core - Renamed mod_authz_dbm authz providers from 'group' and 'file-group' to 'dbm-group' and 'dbm-file-group' Benefits: - All authorization and access control is now handle through two directives, 'Require' and 'Reject' - Authorization has been expanded to allow for complex 'AND/OR' control logic through the directives '<RequireAll>' and '<RequireOne>' - Configuration is now much simpler and consistent across the board - Other modules like mod_ssl and mod_proxy should be able to plug into and take advantage of  the same provider based authorization mechanism by implementing their own providers Issues: - Backwards compatibility between 2.2 and 2.3 configurations will be broken in the area  of authorization and access control due to the fact that the directives 'allow', 'deny',  'order' and 'satisfy' have been changed to 'Require all granted', 'Require all denied' or some variation of the authz host-based providers. - Existing third party authorization modules will have to adapt to the new structure. 	removed.
----------------------------
* Fix PR38017 by handling the selection of the hostname in the same way for non proxied and reverse proxied requests. We need to handle both cases in the same manner as for the reverse proxy case we have the following situation: If a cached entry is looked up by mod_cache's quick handler r->proxyreq is still unset in the reverse proxy case as it only gets set in the translate name hook (either by ProxyPass or mod_rewrite) which is run after the quick handler hook. This is different to the forward proxy case where it gets set before the quick handler is run (in the post_read_request hook). If a cache entry is created by the CACHE_SAVE filter we always have r->proxyreq set correctly. So we must ensure that in the reverse proxy case we use the same code path and using the canonical name seems to be the right thing to do in the reverse proxy case. 	r367798
----------------------------
PR#38084 Correct DBDParams string in example INOUE Seiichiro (who reported the bug) suggests referencing the pgsql documentation.  I disagree, but I wonder if PgSQL is really a good choice of example, since it (untypically) parses the params itself rather than have the apr_dbd driver do it. 	r360505
----------------------------
* include/ap_config.h: Fix the macro name. 	r356248
----------------------------
* include/ap_config.h: Define AP_HAVE_DESIGNATED_INITIALIZER for GCC (but not G++) or any compiler which claims C99 support. * configure.in: Don't define AP_HAVE_DESIGNATED_INITIALIZER here. 	r356234
----------------------------
Add required AuthName directive 	r355326
----------------------------
PR 36090 Fix recursive ErrorDocument handling 	r354118
----------------------------
Some config file changes: - Make the <Files> section safer by adding Satisfy all (as is already present in 1.3) - Remove some handler examples that almost nobody will use (the config file is not the documentation) - Remove some win32 specific stuff from the default config, since win32 uses its own config file - Remove the config section for the perchild mpm 	r349747
----------------------------
Fix case where a shared keepalive connection results in different workers from being accessed. Try to be wise and fast about the tests before we do the expensive string comparison. 	r349723
----------------------------
- try to add a note to explain the behaviour of clients use a pipelined connection wrt to MaxRequestsPerChild and KeepAlive. 	r349476
----------------------------
When computing the timeouts for keepalives and write completion, get the current time _after_ processing the event that led to the timeout, rather than before. [forward-port of commit 349189 from the async-read-dev branch] 	r349190
----------------------------
* Deprecate AddOutputFilterByType * Link up Require and AuthType to the relevant aaa modules. 	r345301
----------------------------
Remove on/off arguments from AuthDigestProvider. 	r345064
----------------------------
Remove on/off from the argument list for AuthBasicProvider, attempt to clarify the discussion of AuthBasicAuthoritative, and add some extra clarifications in a few places. 	r345057
----------------------------
Remove support for 'On' and 'Off' for AuthBasicProvider and AuthDigestProvider as it doesn't actually work as advertised. Reviewed by: Joshua Slive (concept) 	r345054
----------------------------
Fix typo in ProxyStatus syntax error message. Submitted by: Christophe Jaillet <christophe.jaillet wanadoo.fr> Reviewed by:  trawick 	r344491
----------------------------
Add in the UseCanonicalPhysicalPort directive, which basically allows Apache to configurably ( :) ) use the physical port when constructing the canonical port. Also add the exact ordering to the docs, so people can easily see how it works. We now have compatibility with both 2.0 and 1.3. 	r344369
----------------------------
drop dependency on apr_wait_for_io_or_timeout() 	r343999
----------------------------
* build/config_vars.sh.in: Check for the *-config scripts both at the DESTDIR-relocated path and at the not-relocated path, to cope with both builds with and without the bundled APR. 	r330257
----------------------------
* build/config_vars.sh.in: Prepend DESTDIR to paths to installed apr/apu-config scripts. Submitted by: Torsten Foertsch <torsten.foertsch gmx.net> 	r330246
----------------------------
Change directives from OR_AUTHCFG to ACCESS_CONF SQL config in .htaccess doesn't make sense and could have security issues. 	r329497
----------------------------
Restore the socket timeout after setting it to zero for nonblocking writes in ap_core_output_filter.  (This fixes the mod_proxy errors that the new core output filter had been causing.) 	r329075
----------------------------
* configure.in: Move apr/apr-util version checks later to fix in-tree apr/apr-util build failures due to $EGREP not getting set early enough. 	r328852
----------------------------
* configure.in: Require apr >= 1.2.0 and apr-util >= 1.2.0. 	r328641
----------------------------
* Fix PR36906 by not lower caseing the whole worker name. Only lower case the schema when storing the worker url. Thus preventing case sensitive URI's in BalancerMembers to get broken. 	r328463
----------------------------
"Talking to end-users has highlighted the new simpler default configuration layout as a major selling point ""feature"" of 2.2. Add it to the list of new features. "	r327998
----------------------------
"These days in most cases, ""all bound IP addresses"" means :: and 0.0.0.0 or even just ::. Rather than confuse users by trying to explain this in the configuration, simply remove the now-erroneous reference to 0.0.0.0. "	r327892
----------------------------
* Fix PR31226 (AddOutputFilterByType deflate not active with mod_proxy), by allowing ap_add_output_filters_by_type to handle proxied requests. Basic tests by jorton and me show that this works, nobody can actually remember why this limitation was introduced at all (r94028) and the mailing list archives also gave no hint. Submitted by: Joe Orton 	r327179
----------------------------
* modules/generators/config5.m4: Improve Solaris 10 check in mod_cgid to know about the now-released patches that fix the AF_UNIX bugs. 	r326018
----------------------------
* Added further directives that are controlled via AllowOverride FileInfo 	r315051
----------------------------
NET_TIME, as a standalone feature, was a horrid idea. The core filter will NOT operate correctly across platforms (even between Linux/Solaris) without setting up the conn->timeout, so always apply the timeout when establishing the core filter. The keep-alive-timeout is entirely an HTTP-ism, and needs to move to the http protocol handler.  Note #1; this isn't triggered in the event mpm, but the event mpm introspects s->keep_alive_timeout directly adding it to the pollset, so this is a non-sequitor. Finally, once the headers are read, the named virtual host may have a different (more/less permissive) timeout for the remainder of the request body.  This http-centric patch picks up that subtle detail and can switch to a named-vhost timeout. 	r306495
----------------------------
"One way or another, whether we leave the casts in or out, right now we are using ""void *"" containers to store long integers; Add a configure-time check to ensure that it is valid to assume that a ""void *"" container is large enough to store a long int. See <200510031150.j93Boh700945@devsys.jaguNET.com> and ensuing discussion on httpd-dev. "	r294809
----------------------------
Fix pool in dbd_construct, and set sensible config defaults (based on feedback from Brian France) 	r292769
----------------------------
Use rsync to install manual and htdocs to speed up installation times. * Makefile.in: Update install-man and install-htdocs to use rsync if available, otherwise fail back to current cp -rp and rm -rf .svn/ strategy. * configure.in: Look for rsync. * acinclude.m4: Include RSYNC in exported config_vars.mk (Incorporates suggestions on rsync flags from colm.) Reviewed by: colm, trawick (concept), niq (concept) 	r292718
----------------------------
Add note about no Directory Indexes to SetHandler docs. 	r292292
----------------------------
* server/request.c (core_opts_merge): When AllowOverride is specified for the directory, ignore the inherited override_opts field. PR: 35330 Submitted by: kabe <kabe sra-tohoku.co.jp> 	r291120
----------------------------
* modules/experimental/config.m4: Don't duplicate the mod_dbd APACHE_MODULE expansion and remove the commented-out stuff. 	r290700
----------------------------
* fix some content errors of the TraceEnable description * add markup 	r290537
----------------------------
At last, TraceEnable docs 	r290495
----------------------------
Backport r239420 and r239421 to the 2.2.x branch; Enhance CacheEnable/CacheDisable to be of use to proxy servers. 	r290133
----------------------------
Backport r265506, r240044 and r240049 to the 2.2.x branch; Appends .PID to the ScriptSock filename. 	r289972
----------------------------
Backport r264759 and r264788 to the 2.2.x branch. Fixes the get_suexec_identity hook for mod_cgid. 	r289965
----------------------------
Document the ReceiveBufferSize change done in r157583 Submitted by: Murray Nesbitt <murray@cpan.org>] 	r280384
----------------------------
Fix config file for mod_dbd Submitted: Brian J. France <list firehawksystems.com> 	r279940
----------------------------
Record the fact that we failed to set the username as requested. This is useful to know as the most likely cause will be a misconfiguration and so should be easily fixed, but to be fixed it's helpful if you're aware it needs fixed! 	r279893
----------------------------
Move the timeout mutex up, to limit the time we are holding it. 	r279794
----------------------------
Introduce SSLProxyVerify better.  Add a warning note on exactly what verification is done by the proxy in the proxy-to-SSL-server case. 	r265741
----------------------------
* modules/ssl/ssl_util_ssl.c (SSL_X509_STORE_create): Catch errors malformed or misconfigured CRLs.  Clear error stack beforehand to ensure reported errors are relevant. PR: 36438 	returned
----------------------------
mod_log_config: %{hextid}P will log the thread id in hex with APR versions 1.2.0 or higher. 	r265033
----------------------------
"Fix CVE CAN-2005-2700: * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Ensure that optional"" to ""SSLVerifyClient require"". The boolean ""verify_old & SSL_VERIFY_PEER_STRICT"" is true if the old context merely has optional verification configured, since the definition of SSL_VERIFY_PEER_STRICT is (SSL_VERIFY_FAIL_IF_NO_PEER_CERT | SSL_VERIFY_PEER). "	renegotiation
----------------------------
Fix PR36410; Change how the get_suexec_identity hook is handled by CGID. Instead of using mod_userdir and mod_suexec specific hacks, we now run the hook on the httpd side of the handler. If this is NULL, we pass on a magic empty_ugid constant, otherwise pass on the On the cgid side of the equation, we add our own hook, with REALLY_FIRST, and then order the hooks. This ensures that cgid's doer runs before any other We use cgid's request config to store the ugid. If ugid == empty_ugid, we DON'T call ap_os_create_privileged_process, because our doer would return the magic empty_ugid constant. Having the doer return NULL is no good, because then userdir and mod_suexec's doers would be called. Instead, we call plain old apr_proc_create(). 	registered
----------------------------
Fix a grammar mistake; note what happens when the timeout is 	reached.
----------------------------
Noticed in the development of fips-enabled mod_ssl, when we are configured to support exactly one protocol, use that explicit server and client mechansim to handshake with the client or proxied machine, rather than the generic SSLv23_[client|server]_method(). 	r264621
----------------------------
"Move the ""GracefulShutdownTimeout"" command definition into mpm_common "	r264103
----------------------------
Remove as many ghastly scoreboard loops from the graceful-shutdown code, and as we lost the timeout inherent in ap_wait_or_timeout(). 1 second seems a sane choice. 	replace
----------------------------
"Move the ""GracefulShutdownTimeout"" directive into mpm_common, for re-use with other MPM's. "	r240296
----------------------------
"Documentation changes relevant to new graceful-stop command line argument for httpd and apachectl, and the the ""GracefulShutdownTimeout"" directive. "	r240271
----------------------------
"Implement a ""graceful-stop"" for the prefork MPM (might aswell do the hard one first). General approach is to send SIGUSR1 to all children (which will de-listen, and exit when finished), and to gather all children as they exit. We don't use a sleep(timeout) for the timeout implementation, because this would lead to a rut of defunct children until the timeout had expired. set_graceful_shutdown stolen from Ken Coar. See <3E84B1EC.3050007@Golux.Com> (28 Mar 2003). "	r240270
----------------------------
Update the documentation for the ScriptSock directive to match the .PID extension. 	r240049
----------------------------
Append the .PID to the ScriptSock filename. This change ensures that multiple Because a different socket will be created for each instance, this change also unlinks the script-socket on exit, to prevent pollution. unlink() happens from within the parent process, since the change in userid's means the cgid process likely won't have the correct permissions. 	running
----------------------------
"nit: Consistently CamelCase ""ScriptSock"". "	r240043
----------------------------
"Implement ""de-listening"" for graceful restarts with the prefork MPM. With this change; 1.) httpd -k graceful sends SIGUSR1 to the parent pid, which in turn 2.) Active children each close their copy of listener fd's. This means that the listening sockets are freed for re-use. In the ordinary case, this makes no difference. However if for example admin changes ""Listen 80"" to ""Listen 81"" in the config, this rev makes port 80 immediately available (no waiting for the graceful children to die). "	r239711
----------------------------
Enhance CacheEnable/CacheDisable to control caching on a per-protocol, per-host and per-path basis. Makes Cache(En|Dis)able useful for forward proxy servers. 	r239421
----------------------------
Arghhh.... missed the version. Sorry for the noise. Revert the hack for setting the lbmethod. The problem is deeper inside caused by the new hook to the balancer module that is never called on WIN32. Although the hack fixed core dump, the proxy is still unusable because the configuration is failing due to the empty lbmethod names array. 	r233516
----------------------------
Revert the hack for setting the lbmethod. The problem is deeper inside caused by the new hook to the balancer module that is never called on WIN32. Although the hack fixed core dump, the proxy is still unusable because the configuration is failing due to the empty lbmethod names array. 	r233514
----------------------------
Do not check the value of r->handler. This allows the use of SetHandler for an entire directory, and since we already check via the stat structure if this is a directory, there is no reason for this extra check, which causes a regression since 1.3. PR: 25435 	r233369
----------------------------
Fix mess left by incompleteness of previous ProxyPassReverse fix 	r232247
----------------------------
Fix ProxyPassReverse & family to work correctly in <Location> 	r231355
----------------------------
* server/vhost.c (get_addresses): Fail with an error message rather than an assert() for errors which plague users on Solaris boxes which don't have a properly configured resolver. PR: 27525 	r230453
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Pass NULL to apr_global_mutex_create if no cache file name is specified, rather than inventing an inappropriate name with tmpnam(). PR: 30385 	r227230
----------------------------
* modules/ldap/util_ldap_cache.c (util_ldap_cache_init): Only remove the shm segment by name if a name is configured. 	r227012
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Fail if util_ldap_cache_init fails; let ap_log_error call strerror. Downgrade informational messages to APLOG_INFO from APLOG_NOTICE. (util_ldap_child_init): Remove some noisy but fairly pointless debugging output. 	r226974
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Don't attempt to * modules/ldap/util_ldap_cache.c (util_ldap_cache_init): Properly any existing shm segment if apr_shm_create() fails. (util_ldap_cache_module_kill): Don't attempt to remove the shm segment here; apr_shm_destroy() does that anyway. 	remove
----------------------------
* modules/ssl/mod_ssl.c (ssl_hook_pre_config): Initialize all algorithms in OpenSSL; enables PKCS#8 keyfile support. PR: 35469 	r226777
----------------------------
Add the path to the mod_ssl include for the setenvif module. 	r225293
----------------------------
* modules/metadata/mod_setenvif.c: Unconditionally include mod_ssl.h. (setenvif_post_config): Fix prototype fubar. 	r224718
----------------------------
add generated convenience rewritemap 	r224539
----------------------------
"Describe the new syntax: SetenvIf OID(""2.16.840.1.113730.1.13"") ""(.*)"" NetscapeComment=$1 Ehhmm.... How do I make html from this again? "	r220310
----------------------------
"Allow extraction of the values of SSL certificate extensions into environment variables, so that their value can be used by any module that is aware of environment variables, as in: SetEnvIf OID(""2.16.840.1.113730.1.13"") ""(.*) Generated (Certificate)"" ca=$1 sets ca=TinyCA if the cert was issued by TinyCA. Similarly, SetenvIf OID(""2.16.840.1.113730.1.13"") ""(.*)"" NetscapeComment=$1 will set $NetscapeComment to the whole string. It is technically allowed to have multiple instances of an extension field, all with the same oid. In this case, the environment variable will be set to the list of all fields, separated by commas. The [PATCH] uses a cross-module call from mod_setenvif to mod_ssl (the latter may also be missing: in this case the variable will never be set). It calls a common function in the ssl module that is also used for the SSLRequire directive's test. "	r220307
----------------------------
Document change to mod_ssl's SSLRequire directive, bump version to 2.3.0 as already done in the ap_release.h header 	r220040
----------------------------
Added TraceEnable, and note Request Splitting/Response Splitting. 	r209903
----------------------------
Add the httxt2dbm utility to create DBM files for RewriteMap.  This replaces the txt2dbm script in the manual, and allows the use of any available DBM format. 	r209539
----------------------------
This test for TraceEnable cases cannot be buried within the max-forwards logic cases. 	r209406
----------------------------
Fixed complaints about unpackaged files within the RPM build after changes to the config files. 	r208967
----------------------------
Initially a no-op.  Add trace_enable configuration.  The http and proxy flavors of interpreting this flag are yet to be committed. 	r208785
----------------------------
Add more detail to the RewriteMap rnd: example, as well as rewriting some of the text that makes this feature seem less useful than it actually is. 	r201923
----------------------------
* Rewritemaps use ${...} * adjust the mime type directory in mod_mime.xml.ja as well (to get it uptodate again) * `build all` 	r193077
----------------------------
Somehow I just committed the wrong file. This patch adds an example for RewriteMap 	r193036
----------------------------
mod_cgid: Fix buffer overflow processing ScriptSock directive. Submitted by:        Steve Kemp <steve steve.org.uk> Reviewed/tweaked by: trawick 	r192995
----------------------------
- Add documentation on the new AcceptFilter directive. - Update Listen with the optional protocol arg. 	r190982
----------------------------
* build/config_vars.sh.in: Expand LTFLAGS here, to fix `apxs -q LIBTOOL` again. PR: 32787 Submitted by: William Barker <william.barker wilshire.com> 	r190893
----------------------------
Merge the listen-protocol sandbox branch to trunk. I will be adding documentation for the new directives hopefully in the next day or so. * server/core.c: Added 'Protocol' to the core module config * server/listen.c: Attempt to inherit protocols from Listener Records to Server configs. * include/{ap_listen.h,http_core.h}: Add Protocol to respective structures. * include/http_core.h: Add the accf_map table to the core_server_config structure * include/ap_mmn.h: Minor MMN Bump for the new interfacces. * modules/ssl/ssl_engine_init.c: Use the new protocol framework to enable mod_ssl for 'https' websites. 	r190563
----------------------------
"* configure.in: Define MKINSTALLDIRS and INSTALL in config_vars.mk. Don't use AC_PROG_INSTALL since any system ""install"" command is never used anyway. * build/rules.mk.in: Remove fixed reference to install.sh and mkdir.sh in abs_srcdir. * build/config_vars.sh: Munge definitions of MKINSTALLDIRS and INSTALL to use installed scripts. "	r190396
----------------------------
Sanitize the installed config_vars.mk to remove references to the build and source directories, and to remove variables which are internal to the httpd build system: * build/config_vars.sh.in: New file. * Makefile.in (build/config_vars.out): New target. (install-build): Install build/config_vars.out as config_vars.mk. * configure.in: Add include path for srclib/pcre to INCLUDES rather than CPPFLAGS, and use a topdir-relative not absolute path name. Generate build/config_vars.sh. Reviewed by: Paul Querna PR: 20874, 28145 	r190392
----------------------------
* Makefile.in (install-build): Make installed config.nice 0755 too. Submitted by: Daniel Rall <dlr apache.org> 	r189963
----------------------------
"* modules/mappers/config9.m4: Substitute INSTALL_DSO as ""yes"" if mod_so is linked in, or ""no"" otherwise. * build/special.mk: Remove hack to guess whether mod_so is linked in based on BUILTIN_LIBS; rely on INSTALL_DSO definition from config_vars.mk. "	r189603
----------------------------
"* modules/generators/mod_cgi.c (cgi_bucket_read): Log a specific error if a timeout occurs from a blocking read; more helpful than a generic ""apr_bucket_read failed"" error from some higher-up filter. "	r189560
----------------------------
* Makefile.in (DISTCLEAN_TARGETS): Clean up more files generated by configure. 	r189557
----------------------------
- Fix style nits in the new hash config code. No Functional changes. 	r179618
----------------------------
- Fix graceful restarts with the new hashed configuration.  The hash now allocates out of the pconf pool, instead of the process pool. 	r179617
----------------------------
Note that SSLUsername is ignored if FakeBasicAuth is used. 	r179371
----------------------------
- Use a hash for the configuration command lookup implementation.  Now modules can properly directives without dependence on the LoadModule order. 	r178990
----------------------------
* Makefile.win Fix config installation. 	r178665
----------------------------
"Clean up the notes to the logformat section of the mod_log config docs. These have been growing using the ""here's something else we should say"" technique, without any serious thought for readability. In particular: - Remove the ""..."" in all the format strings, since almost nobody uses this and it can be confusing.  It is still documented, just not included in the definitions. - Create three sections: modifiers, examples, and a ""notes"" section for stuff that doesn't go any place else. - Remove the discussion of %v being the canonical name.  I think that it is quite clear since the addition of %V what the difference is. "	r178530
----------------------------
We have been installing config.nice in build/ for a while, so we might as well tell people about it. 	r178520
----------------------------
Fix trailing backslashes in configuration directives. PR: 34834 Submitted by: Timo Viipuri <viipuri dlc.fi> Reviewed by: Paul Querna 	r178209
----------------------------
Add the auth provider name as a note in the request so that authn_provider_alias is able to look up the original provider along with the per_dir configuration. 	r178052
----------------------------
authn_provider_alias adds the configuration block tag <AuthnProviderAlias baseProvider Alias> Authentication directives contained within this block can be AuthDigestProvider directives.  These directives will be merged in to the per_dir configuration just before the base provider is called. 	referenced
----------------------------
* support/ab.c: Rewrite SSL support so that it works reliably, and enable it by default when the --enable-ssl is passed to configure. Adds support for -Z and -f arguments to tweak SSL protocol options. Submitted by: Masaoki Kobayashi <masaoki techfirm.co.jp> 	r170612
----------------------------
* configure.in: Disallow use of bundled APR with external APR-util, or bundled APR-util with external APR, another cause of the dreaded PR21718. 	r170029
----------------------------
Make sure that the LDAPVerifyServerCert patch is compatibile with apr-util 1.1.x.  Once apr-util 1.2 is released, the ifdef's need to be removed and apr_ldap_set_option() will handle the SDK differences. 	r169834
----------------------------
Add the LDAPVerifyServerCert directive to the util_ldap doc 	r169711
----------------------------
Add the LDAPVerifyServerCert directive to util_ldap to force verification of a server certificate when establishing an SSL connection to the LDAP server 	r169705
----------------------------
Make sure mod_rewrite always runs before mod_proxy in the translate_name hook.  This makes doing RewriteRules on a Reverse Proxy.. Slightly more predictable than the order of LoadModules. Reported By: David D. Miller <justdave bugzilla.org> 	r169692
----------------------------
Add docs for SSLCADNRequestFile and SSLCADNRequestPath, based on patch by Tim K. Taylor. 	r169311
----------------------------
"Add AP_INIT_TAKE_ARGV. There can be some inconsistent results because of the behavoir of ap_getword_conf. Do not rely upon any last argument that is """".  If the argument is in the middle of the line, it should work correctly. This is updated from the version sent to dev@httpd to fix the behavoir with 0 arguments. * include/http_config.h: minor MMN bump for the new interface. * modules/generators/mod_autoindex.c: Migrate IndexOptions to the new ARGV command type. "	r168202
----------------------------
Missing ErrorDocument line for Not Acceptable. PR: 28581 	r168028
----------------------------
* server/config.c (process_resource_config_nofnmatch): Fail with useful error message if the config file can't be opened. 	r167965
----------------------------
Two clarifications of ErrorDocument: 1. /-rooted paths are relative to DocumentRoot. 2. Bad requests will sometimes ignore ErrorDocument. PR: 27352 	r167959
----------------------------
%t has logged request time for a very long time. From mod_log_config.c: 	r165671
----------------------------
* modules/mappers/mod_userdir.c (get_suexec_id_doer): Fix allocation size. PR: 34588 	r165151
----------------------------
- don't allow PROPFIND in the default config for public_html directories 	r164763
----------------------------
Document that SSLRequire is broken for use in threaded MPMs and .htaccess files. 	r164756
----------------------------
httpd-config would be a great thing to replace apxs with. 	r164755
----------------------------
AllowEncodedSlashes fix was backported in 2.0.52.  Remove this STATUS file entry. 	r164752
----------------------------
* manual/mod/mod_log_config.html.ja.euc-jp manual/mod/mod_log_config.xml.meta manual/mod/directives.html.de manual/mod/directives.html.en manual/mod/directives.html.es manual/mod/quickreference.html.de manual/mod/quickreference.html.en manual/mod/quickreference.html.es manual/mod/mod_log_config.html.en manual/mod/mod_log_config.xml.ja manual/mod/mod_log_config.xml.ko manual/platform/netware.xml.ko manual/platform/netware.html.en Update transformation 	r164425
----------------------------
* docs/manual/mod/mod_log_config.xml Fix XML validation error 	r164424
----------------------------
Document BufferedLogs PR: 32492 	r164258
----------------------------
Ensure that we always return a FQDN... This is not guaranteed by either apr_sockaddr_info_get() or apr_getnameinfo(). Also note that under OS X, apr_getnameinfo() always seems to fail (at least on my machines) so if we don't specific ServerName at the global setting, we get a warning. 	r164092
----------------------------
Fix issue where mod_ssl does not pick up the ssl-unclean-shutdown setting when configured e.g. as a reverse proxy: * modules/ssl/ssl_private.h: Remove ssl_hook_Translate. * modules/ssl/ssl_engine_kernel.c (ssl_hook_ReadReq): Merge in ssl_hook_Translate.  (ssl_hook_Translate): Remove. * modules/ssl/mod_ssl.c (ssl_register_hooks): Ensure that _ReadReq hook runs after mod_setenvif.c; don't register translate_name hook. PR: 34452 	r161958
----------------------------
"* docs/conf/extra/httpd-ssl.conf.in: Don't reference directories which aren't created by ""make install"".  Use BrowserMatch. "	r161883
----------------------------
Make sure we don't overwrite existing config if it has a name other than httpd.conf. Submitted by: Rici Lake 	r161776
----------------------------
got rave reviews from my customer on using buffered i/o for RewriteMap files, so brag about it a little. 	r161509
----------------------------
Add redirect-carefully BrowserMatch for FrontPage. PR: 32842 	r161475
----------------------------
Ignore generated config files. 	r161431
----------------------------
lookup_map_txtfile: used buffered i/o rather than reading RewriteMap txt: files one byte at a time. I was horrified to see a dump of a server with hundreds of worker threads in each thread finds one key, inserts it into the cache, then the rest of the information is discarded.  there are further improvements which could be made but let's try the simplest first. 	read()
----------------------------
As discussed on the list, change the default setting for KeepAliveTimeout from 15 seconds to 5 seconds. 	r161140
----------------------------
Bring the windows config file in line with the simplifications of the main httpd.conf. Make a vain attempt to modify Makefile.win appropriately. 	r160989
----------------------------
Uncomment the secureListen directive when building the httpd-ssl.conf file for NetWare 	r160952
----------------------------
Rethink the built-in vs shared modules for NetWare.  Reposition mod_asis, mod_actions, mod_cgi, mod_imagemap, mod_userdir and mod_autoindex as shared rather than built-in. 	r160625
----------------------------
Don't always enable mod_imap.  I always turn it off in my configs.  Now you must --enable-imap, or --enable-mods-shared=all|most to pick it up. 	r160307
----------------------------
Actually use the compare_cache_size value that is being set by LDAPOpCacheEntries.  The actual cache_size was previously defaulting to the value of search _cache_size set by LDAPCacheEntries. 	r159542
----------------------------
Turn LDAPTrustedClientCert and LDAPTrustedMode into the RSRC_CONF context.  The current code is broken for use as OR_ALL. 	r158678
----------------------------
Add ReceiveBufferSize directive to control the TCP receive buffer. Submitted by: Eric Covener <covener gmail.com> Reviewed by:  Justin Erenkrantz (with minor formatting tweaks) 	r157583
----------------------------
Win32: Move call of mpm_service_install to rewrite_args hook but continue thru post_config to check httpd.conf 	r154319
----------------------------
Fix 'Anonymous *', which denied access * modules/aaa/mod_authn_anon.c (check_anonymous): 	r153815
----------------------------
Support use of an external copy of the PCRE library: * configure.in: Set abs_{builddir,srcdir} higher.  Add --with-pcre flag; build against external PCRE library if used. * Makefile.in (install-include): Don't install pcre headers any more. * srclib/Makefile.in (SUBDIRS): Remove. PR: 27550 (part two) Submitted by: Andres Salomon <dilinger voxel.net>, Joe Orton 	r153400
----------------------------
* include/util_ldap.h (util_ldap_state_t): Fix gcc format string warnings: use a long for connectionTimeout since the code expects a long. * modules/ldap/util_ldap.c (compare_client_certs): Make static to fix gcc missing-prototype warning. 	r153390
----------------------------
Move the POSIX reg* implementations into the ap_* namespace; internalise the ap_reg*<->PCRE wrapper: * configure.in: Add srclib/pcre to the include path. * include/ap_regex.h: Renamed from include/pcreposix.h.  Prefix all constants with AP_; prefix all functions and types with ap_.  Define AP_DECLARE to nothing if necessary.  Remove regcomp error codes. * include/httpd.h: Include ap_regex.h not pcreposix.h. (ap_pregcomp, ap_regexec, ap_regfree): s/regex_t/ap_regex_t/. (ap_regexec, ap_regerror): Prototypes moved to ap_regex.h. * server/util.c (regex_cleanup, ap_pregcomp, ap_pregsub, ap_pregfree): Adjust for ap_ prefixed types.  (ap_regexec, ap_regerror): Removed. * server/Makefile.in: Build util_pcre.c. * server/util_pcre.c: Copied from srclib/pcre/pcreposix.c; remove use of PCRE-internals to do error mapping; rename types to add AP_/ap_ prefixes as above.  Use APR includes.  (ap_regerror): Use apr_snprintf. * srclib/pcre/Makefile.in: Don't build pcreposix.c into libpcre.la. * modules/*: Update to use new type and constant names. PR: 27750 (part one) Submitted by: Andres Salomon <dilinger voxel.net>, Joe Orton 	r153384
----------------------------
"* modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Move the SSLUsername-controlled assignment of r->user above the SSLRequire checks so that the ""username"" gets logged if SSLRequire denies access. "	r153280
----------------------------
Stop exposing source filenames in the configuration files. * docs\conf\httpd-win.conf * docs\conf\httpd-std.conf.in Replace all occurences of *.c with *_module within IfModule clauses, as pointed out by Paul Querna to be possible nowadays. 	r152951
----------------------------
Document the new optional parameter for AuthLDAPUrl 	r151743
----------------------------
Better handle the case where ProxyBadHeader StartBody is in effect and we think we've started reading in the line read is still in buffer (and document that) to allow us to add to the bb. 	response
----------------------------
* modules/proxy/config.m4: Fix mod_proxy build after filename changes. 	r151329
----------------------------
mod_proxy: Fix ProxyRemoteMatch directive. PR: 33170 Submitted by: Rici Lake <rici ricilake.net> Reviewed by:  Justin Erenkrantz 	r151248
----------------------------
Also translate Destination headers when ProxyPassReverse'd * modules\proxy\mod_proxy_http.c (process_proxy_header): reverse map Destination header. NOTE: This is some darn nasty looking code... * modules\proxy\ajp_header.c (ajp_unmarshal_response): reverse map Destination header. 	r151246
----------------------------
Error out on configurations where the cache provider starts with a '/'. Saves certain people a bit of time figuring out why their caching doesn't work... * modules/cache/mod_cache.c (add_cache_enable): Throw an error when a provider starting with 	r151232
----------------------------
Allow AuthLDAPURL to override the default connection type with an option second parameter of NONE, SSL or TLS | STARTTLS 	r151083
----------------------------
Add CacheStorePrivate, CacheStoreNoStore, and clarify CacheIgnoreCacheControl. * docs/manual/mod/mod_cache.xml: Update documentation for CacheIgnoreCacheControl and add documentation for two new directives. * modules/cache/mod_cache.c (cache_url_handler): Honor 'Cache-Control: no-cache' request header. (cache_save_filter): Only honor no-store or private when their respective rest of file: add in standard configuration syntax stuff... * modules/cache/mod_cache.h: Minor formatting tweak and add new fields. Suggested by: Pier Fumagalli 	r149492
----------------------------
Fix #32367 support for ProxyPass /foo ! 	r149420
----------------------------
Set the connection timeout for LDAP SDK's that support the option. For SDK's that don't, log a warning message. 	r149419
----------------------------
Remove upper limit on the LimitRequestFieldSize directive 	r149269
----------------------------
As per bug 33290, we probably don't want a <Limit> here. 	r149092
----------------------------
Added a new LDAPConnectionTimeout directive to util_ldap so that the socket connection timeout value is configurable. 	r126565
----------------------------
* configure.in: Add --enable-pie flag; define PICFLAGS and PILDFLAGS. * build/rules.mk.in: Factor out BASE_CC and BASE_CXX from COMPILE. Substitute PICFLAGS into COMPILE and CXX_COMPILE, but not into {SH,LT}{,_CXX}_COMPILE.  Substitute PILDFLAGS into LINK but not {SH,MOD}_LINK. Reviewed by: jerenkrantz 	r126362
----------------------------
* support/suexec.c (safe_env_lst): Declare array as static const. 	r125784
----------------------------
mod_ldap: Updated to use the new apr-util v1.1 apr_ldap_*_option() API for the setting of server and client SSL certificates. Replaced LDAPTrustedCA directive with LDAPTrustedGlobalCert and LDAPTrustedClientCert directives to correctly support global certs (CA certs / Netware client certs) and per connection client certs as supported by Netware, OpenLDAP and Netscape/Mozilla. 	r125645
----------------------------
German translation of configuring.xml Reviewed by: nd 	r125201
----------------------------
* modules/ssl/mod_ssl.c: Declare new config directives SSLCADNRequestFile and SSLCADNRequestPath. * modules/ssl/ssl_private.h (modssl_pk_server_t): Add ca_name_path, ca_name_file fields. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_verify): If either of SSLCADNRequestFile or SSLCADNRequestPath are configured, load the CA DN list sent in the CertificateRequest from those certificates. * modules/ssl/ssl_engine_config.c (modssl_ctx_init_server): Use pcalloc to zero-initialize the entire modssl_pk_server_t structure. (ssl_config_server_new): Merge the ca_name_* fields. (ssl_cmd_SSLCADNRequestPath, ssl_cmd_SSLCADNRequestFile): New functions. PR: 32848 Submitted by: Tim Taylor <tim.taylor dfas.mil> 	r125165
----------------------------
Fix VPATH errors introduced in r124104. * configure.in: Use correct source path to get-version.sh and include/ dir. 	r125087
----------------------------
Rewrite Cookies and other headers in mod_proxy_ajp as configured with ProxyPassReverse and ProxyPassReverseCookiePath. * modules/proxy/proxy_ajp.c (ap_proxy_ajp_request): Update call to ajp_parse_header(). * modules/proxy/ajp.h (ajp_msg_get_string): constify argument. (ajp_parse_header): Add conf argument. * modules/proxy/proxy_util.c (ap_proxy_location_reverse_map): Promoted from mod_proxy_http. (ap_proxy_cookie_reverse_map): Promoted from mod_proxy_http; * modules/proxy/ajp_msg.c (ajp_msg_get_string): constify argument. * modules/proxy/proxy_http.c (ap_proxy_location_reverse_map, proxy_cookie_reverse_map: Removed. (process_proxy_header): Update header mapping table to reference the now * modules/proxy/ajp_header.c (ajp_unmarshal_response): And conf argument.  Reverse map cookies and (ajp_parse_header): Update call to ajp_unmarshal_response(). * modules/proxy/mod_proxy.h (ap_proxy_location_reverse_map, ap_proxy_cookie_reverse_map): Declare (ap_proxy_header_reverse_map_fn): Typedef for the signature of the above 	r124901
----------------------------
Sync available error languages with used LanguagePriority. 	r124607
----------------------------
Change 'directory' to 'resource': just the word 'directory' led some users to the wrong assumption that Require isn't allowed in <Files> sections. 	r124546
----------------------------
Mention configuration details for AJP and the balancer. 	r124545
----------------------------
update config for pt-br inclusion 	r124362
----------------------------
Deposit mod_bucketeer.so and mod_dumpio.so into the installed apache2 instance.  This does not configure httpd.conf to load them. 	r124276
----------------------------
This has been coming up rather frequently on IRC, and it's a good example. It's alluded to in the SetEnvIf docs, but it's not a complete example there. 	r124246
----------------------------
svn:eol-style = native ... svn config adjusted ;-) 	r124110
----------------------------
As per bug 22061, this paragraph predates RedirectMatch, and is thus soemwhat inaccurate. 	r123579
----------------------------
The current config.guess in APR outputs i386-pc-os2-emx on OS/2 rather than i386-pc-os2_emx (dash instead of underscore), adjust the tests to match. 	r122967
----------------------------
Move the timeout explanation sentence to the proper place in the table. 	r122772
----------------------------
simplify the BalancerMember load factor weighting. Instead of being percentages (and adjusting when the number don't add up), loadfactors/lbfactors are now normalized values, so values like: work as expected (ie: a gets 25%, b gets 25% and c gets 50%). So we could also have the above as: or even 	r122551
----------------------------
* include/http_config.h: Add missing parameter name. 	r111964
----------------------------
FilterDeclare declares. 	r111628
----------------------------
Mention that SSLEngine can be set to 'option' to enable TLS Upgrade. A more detailed section explaining TLS Upgrade would be helpful. 	r111588
----------------------------
Remove AddDefaultCharset from the default configuration because setting a site-wide default does more harm than good. PR: 23421 	r111581
----------------------------
* mod_log_config.c: Revert r109866 which used apr_file_writev instead of an 	r110069
----------------------------
mod_log_config.c: Use iovecs to write the log line to eliminate a memcpy 	r109866
----------------------------
Add generic reverse proxy worker so that module-driven reverse proxying works. It is enabled by default, but IMO it should be configurable like any other worker so we can limit the number of outgoing connections. 	r109316
----------------------------
fix link to LoadModule 	r106807
----------------------------
Initial pass at refactoring some files to eliminate our 150K C source behemoths. * Makefile.in: Change order of dependencies to bring in exports.o first so that we have every symbol 'used' before the linker starts processing. * build/rules.mk.in: Add a 'program-install' target which just copies httpd. * server/Makefile.in, modules/http/config2.m4: Add in new file targets. * NWGNUmakefile, libhttpd.dsp: Blind updates for Netware and Win32.  (I tried.) * server/core.c: Move core_input_filter, net_time_filter, and core_output_filter  and all supporting functions to... * server/core_filters.c (copied): ...here. * modules/http/http_protocol.c: Move functions from here to there...namely: * modules/http/byterange_filter.c (copied): Relocate ap_byterange_filter() and friends. * modules/http/chunk_filter.c (copied): Relocate chunk_filter(). * modules/http/http_etag.c (copied): Relocate ap_set_etag and ap_make_etag(). * modules/http/http_filters.c (copied): Relocate ap_http_filter(), ap_http_header_filter(), ap_discard_request_body(), ap_setup_client_block(), ap_should_client_block(), and ap_get_client_block(). 	r106692
----------------------------
Use ap_log_cerror and loglevel debug in filter_trace 	r106691
----------------------------
ap_process_http_async_connection (used by the Event MPM): fix CLOSE_WAITs/leaked connections.  The logic to deal with ap_read_request failures got lost when merging in the HTTP pipelining fix.  If ap_read_request fails, the connection state should get set to CONN_STATE_LINGER so the MPM will invoke lingering close.  Test case: client sends a Connection: keepalive header then closes the connection before the keepalive timeout pops. Also add a comment to make the pipelining flow more obvious. 	r106662
----------------------------
mod_cgid: Catch configuration problem where two web server instances share same ServerRoot but admin forgot to use ScriptSock. 	reviewed
----------------------------
Slight clarification in the role of ServerRoot 	r106258
----------------------------
The Event MPM. Designed to minimize Apache's KeepAlive overhead. This MPM depends on the current APR-trunk for new features added to the apr_pollset interface. Currently the underlying operating system must support KQueue or EPoll. Status: Should work as a drop in replacement for all non-ssl servers. SSL Requests that use HTTP 1.1 Pipelining do not currently work. Testing: I have tested it with Linux 2.6, FreeBSD 5.2.1, and OS X 10.3. Originally based on the patch by Greg Ames. 	r105919
----------------------------
Preparation step to simplify merging to a newer pcre: * srclib/pcre/ltmain.sh, ltconfig, config.guess, config.sub: Remove files which are unneeded when pcre is built by the httpd build system. * srclib/pcre/RunTest: Remove generated file, a leftover from an older version of pcre. 	r105820
----------------------------
Clarify the sample configuration. 	r105758
----------------------------
Update SSLSessionCache section. 	r105743
----------------------------
"Add -t -DDUMP_CERTS option to mod_ssl which dumps the filenames of all configured SSL certificates to stdout, useful for cron-ing through a ""do I need to renew any of my certificates this week"" tool: * modules/ssl/ssl_engine_config.c (ssl_hook_ConfigTest): New function. * modules/ssl/mod_ssl.c (ssl_register_hooks): ...register it as a test_config hook. "	r105741
----------------------------
* modules/ssl/config.m4: Use libtool's -export-symbols-regex flag to hide all global symbols defined by mod_ssl other than the module structure (where possible). 	r105740
----------------------------
Document SSLPassPhraseDialog's piped input mode. 	r105684
----------------------------
Remove bogus comment: for SSLPassPhraseDialog exec:..., argv is defined and documented and can't be changed. 	r105683
----------------------------
If the entry has a password then don't allow util_ldap_cache_getuserdn() to update the expiration timeout since it has no idea when the password was last validated. Submitted by: Jari Ahonen [jah progress.com] 	r105681
----------------------------
* modules/ssl/ssl_engine_kernel.c (ssl_hook_UserCheck): Fix possible NULL pointer dereference in some configurations. PR: 31848 	r105663
----------------------------
Change FilterDeclare/FilterProvider semantics as discussed in http://marc.theaimsgroup.com/?l=apache-httpd-dev&m=109899588616670&w=2 	r105646
----------------------------
"mod_cache: Add CacheIgnoreHeaders directive. (Justin made some minor tweaks to the patch.) PR: 30399 Submitted by:	Rdiger Plm <r.pluem@t-online.de> Reviewed by:	Justin Erenkrantz "	r105569
----------------------------
use the correct struct for CacheDisable. (cache_disable instead of cache_enable) PR: 31128 Submitted by: Edward Rudd <eddie omegaware.com> 	r105510
----------------------------
OR_ALL is not a good choice. Use more restrictive permissions for the mod_filter directives. OR_OPTIONS for all but FilterTrace, which isn't allowed in htaccess, because it could DoS the server (see docs). We should consider to introduce an allowoverride filters or so. 	r105477
----------------------------
add mod_filter to the configure parameters 	r105474
----------------------------
* modules/filters/config.m4: Drop check for zutil.h.  Add -lz to MOD_DEFLATE_LDADD to correctly support shared mod_deflate against static zlib (where possible). 	r105445
----------------------------
* modules/ldap/util_ldap.c (util_ldap_child_init): Don't segfault if the cache has been disabled (when _cache_lock == NULL). (util_ldap_post_config): Set mutex permissions if necessary. 	r105412
----------------------------
As the first stage of a simplification of the default config in 2.1 (only!), I'm going to remove all the html files under httpd-2.1/docs/docroot/ and replace them with an index.html file containing only <html><body><h1>It works!</h1></body></html> I'm going to do this because: 1. The old welcome page is a constant source of confusion to random web surfers who stumble on unconfigured apache installs. 2. New users, when finding on a docroot with dozens of files, are often confused about where to put their own content. 3. The international welcome page is a large source of bug reports from people wanting to tweak grammar or provide new translations. 4. This will allow us to simplify the default config by removing the config stuff necessary to handle the typemap. 	r105393
----------------------------
* modules/ssl/ssl_scache_shmcb.c (ssl_scahe_shmcb_init): If anonymous shm is not supported, always remove the named segment first to cope with unclean shutdowns. PR: 21335 (continued) 	r105249
----------------------------
* configure.in: Only export CC and CPP if a cache file is not specified. 	r105230
----------------------------
Merge mod_filter with util_filter structs; add API for protocol stuff. Rename FilterDebug directive to FilterTrace. 	r105226
----------------------------
* server/core.c (merge_core_dir_configs): Fix Satisfy merging since per-method Satisfy feature was added. PR: 31315 Submitted by: Rici Lake <rici ricilake.net> 	r105215
----------------------------
* configure.in: Ensure that $CC and $CPP are correctly passed through to the pcre configure script if config caching is disabled (the autoconf 2.5x default). 	r105210
----------------------------
Make worker retry algorithm much  simpler removing incremental timeout increase. 	r105177
----------------------------
Fix worker retries and limit default retry timeout to 10 minutes. Thanks to Christian von Roques for spotting that. 	r105136
----------------------------
* modules/ldap/util_ldap.c (util_ldap_post_config): Fix false positives from gcc -Wformat-security. * modules/ldap/util_ldap_cache.c (util_ldap_url_node_display): Add default to switch to avoid uninitialised variable warnings. * modules/ldap/util_ldap_cache_mgr.c (util_ald_create_caches): Fix to 	return
----------------------------
Add proxy_ajp and proxy_balancer to the LoadModule list. 	r105103
----------------------------
Just like for balancers initialize the workers on post_config instead on first request to skip the race condition. 	r105064
----------------------------
MaxSpareServers cannot be equal to MinSpareServers. 	r105058
----------------------------
Move the shared scoreboard data initization to the balancer module. The initialization is done like for the worker, on first request. This is done because during config phase we don't have a scoreboard to allocate from. Thanks to Chritian von Roques for spotting that. 	r105057
----------------------------
Add 'default' foward proxy worker to the proxy_server_conf. Forward worker is constructed on ProxyRequests directive with sceme and host equals '*', meaning all. 	r105044
----------------------------
Echo a warning from configure if you select an experimental MPM. Reviewed by: Jeff Trawick 	r105003
----------------------------
Rewrote config tree walk using recursion the way God intended. Added ?config option. Added printout of config filename and line numbers. PR: 30919 Submitted by: Rici Lake <rici ricilake.net> 	r104942
----------------------------
handling of encoded non-slashes was borked in the AllowEncodedSlashes path thanks to FirstBill for pointing that out! 	r104937
----------------------------
* configure.in: Only build against APR 1.x. 	r104936
----------------------------
Fix the handling of URIs containing %2F when AllowEncodedSlashes is enabled.  Previously, such urls would still be rejected with 404. 	r104925
----------------------------
#ifndef AP_UNSAFE_ERROR_LOG_UNESCAPED the stderr to errorlog stuff for those who don't want to escape (as in server/log.c) 	r104834
----------------------------
Add dynamic management to load balancer: <Location /manager> SetHandler balancer-manager </Location> It enables changing load factors, session routes, redirection 	routes,
----------------------------
Add pool used for allocating proxy_server_conf to that struct. It will be used for dynamic configuration, to ensure that dynamic params has the same lifetime as the config has. 	r104811
----------------------------
Allow multiple IP addresses to be configured for the same secure port 	r104802
----------------------------
Win32: Fix stranded piped loggers on apache -k start,restart,config,install 	r104799
----------------------------
Added SSL custom indicators. They can be set using SetEnv directive, so we don't need an extra one like the JkEnvVar is in the mod_jk. 	r104796
----------------------------
Added ProxySet directive (can be rename to something else). The purpose is to be able to set the worker/balancer params withouth the need for very long config lines : <Proxy balancer://cluster> ProxySet stickysession=JSESSIONID </Proxy> Or... ProxySet balancer://cluser nofaiover=On timeout=2 	r104794
----------------------------
Implement REQ_ATTRIBUTE using request rec environment table, so we can use standard SetEnv directive for that. The ajp specific attributes has to be prefixed using 'AJP_', and are passed withouth that prefix to the backend. 	r104788
----------------------------
Since OpenLDAP doesn't validate the certificate until it tries to use it, at lease make sure that the file path is good during configuration. 	r104776
----------------------------
Fix configure option for ldap (--enable-authnz-ldap) Submitted by: Joshua Slive 	r104747
----------------------------
Move charset.conv configuration file out of experimental and into docs/conf.  This file holds the character set conversion table used by the authn_ldap provider. See Attic in experimental directory for previous change history. 	r104722
----------------------------
Prevent / beeing accepted wrongly by the proxy when having for example: <Location /examples/> </Location> 	r104714
----------------------------
Both the r->user and r->ap_auth_type were set previously when the username and password were extracted from the request.  Resetting them at the end of the handler will overwrite any changes made by the authn provider.  For example, the ldap authn provider can be configured to change the user name to a full user dn. 	r104712
----------------------------
suexec: Pass the SERVER_SIGNATURE envvar through to CGIs. Submitted by: Zvi Har'El <rl math.technion.ac.il> Reviewed by:  Jeff Trawick 	r104703
----------------------------
* modules/ssl/ssl_engine_vars.c (ssl_var_lookup_ssl_cert_remain): New function.  (ssl_var_lookup_ssl_cert): Support _V_REMAIN suffix for SSL_{SERVER,CLIENT} as number of days until certificate expires. * modules/ssl_engine_kernel.c: Export SSL_CLIENT_V_REMAIN if +StdEnvVars is configured. 	r104700
----------------------------
* modules/mappers/mod_userdir.c (register_hooks): Move suexec_identity hook to APR_HOOK_FIRST to ensure it runs before the mod_suexec hook. PR: 18156 Submitted by: Joshua Slive 	r104699
----------------------------
Implement -t -DDUMP_MODULES using generic test_config hook rather than hooking into mod_so from main.c: * include/http_config.h, server/config.c: Declare test_config hook. * server/main.c: Drop hooks into mod_so; run test_config hooks. * modules/mappers/mod_so.h: Drop ap_dump_loaded_modules optional function. * modules/mappers/mod_so.c (dump_loaded_modules): Renamed from ap_dump_loaded_modules; only run if -DDUMP_MODULES is defined. (register_hooks): Register test_config hook instead of optional function. Reviewed by: Justin Erenkrantz, Paul Querna 	r104685
----------------------------
* configure.in: Ensure that apr and apr-util exported include directories are later than local source directories in INCLUDES. PR: 18959 	r104647
----------------------------
* configure.in: Define AP_HAVE_DESIGNATED_INITIALIZER via ap_config.h so third-party modules don't have to pick up NOTEST_CPPFLAGS to avoid gcc warnings from http_config.h. 	r104642
----------------------------
* configure.in, acinclude.m4: Substitute AP[RU]_CONFIG with location of installed ap[ru]-config scripts so third-party modules can use `apxs -q APR_CONFIG`. * support/apxs.in: Use new AP[RU]_CONFIG variables; use apr-config --apr-libtool. 	r104641
----------------------------
Add route and redirect to worker so they can be set trough configuration. Add worker status flag definitions. Submitted by: mturk 	r104611
----------------------------
Add proxy_balancer to proxy module, including config and capturing -I ../generators for the mod_status.h Submitted by: mturk 	r104608
----------------------------
Remove setting module config. Submitted by: mturk 	r104607
----------------------------
Fix some config checking params. Added route and route redirect to the runtime worker. Submitted by: mturk 	r104606
----------------------------
Bounding to client connection is not needed(?). Since AJP can serve multiple request trough the same backend connection, no need to create separate conn_rec. For now comment out all the set/get module config. Submitted by: mturk 	r104605
----------------------------
Added KeepAlive worker option. The scheme handler will override this setting if required, depending on the protocol itself and keepalive_set flag. Submitted by: mturk 	r104596
----------------------------
Added iobuffersize and receivebuffersize to be worker specific. As for timeout their default value is from proxy_conf. Submitted by: mturk 	r104594
----------------------------
Added timeout_set for worker. Each worker can have a different timeout the ProxyTimout sets. Also changed proxy_conf's timeout_set to int. Use timeout_set for worker inherited from ProxyTimeout but overridable using timout=xxx Submitted by: mturk 	r104592
----------------------------
Added acquire timeout for obtaining resources from reslist. The timeout is in milliseconds to enable quick return in case the Submitted by: mturk 	reslist
----------------------------
Add worker timeout inherited from ProxyTimeout. Submitted by: mturk 	r104588
----------------------------
Use RAW_ARGS instead ITERATE. Add options for connection pool when using ProxyPass Submitted by: mturk 	r104571
----------------------------
Move worker params parsing to a separate function. The same will be used for creating ProxyPass connection pools. Added ttl param to worker for maintaining reslist. Submitted by: mturk 	r104570
----------------------------
Use API instead directly obtaining worker and balancer. Add BalancerStickySession and BalanceMember directives. Add workers and balancers to create and merge config. Submitted by: mturk 	r104567
----------------------------
Introduce proxy_ajp.c : use --enable-proxy-ajp with configuring Apache. To load it: +++ LoadModule proxy_ajp_module modules/mod_proxy_ajp.so +++ And to use it something like: +++ <Location /examples/> ProxyPass ajp://backend.example.net:8009/examples/ </Location> +++ proxy_ajp will not be enabled by default due to ./ajp dependencies Build magic improvements: mturk, wrowe Submitted by:  jfclere 	r104556
----------------------------
Ignore config.* scripts copied from APR. 	r104543
----------------------------
Remove cache hooks and custom vtable format in favor of the ap_provider_* API. Cache-related configuration directives remain the same. 	r104510
----------------------------
mod_disk_cache: Produce slightly more informative log messages and at more appropriate levels.  (LogLevel info will now only inform you when you are storing a cache item.  debug is required to show what is being served from cache.) 	r104497
----------------------------
Remove duplicate AddCharsets (both old and new:-) 	r104445
----------------------------
Teach apxs how to find ap{ru}-$AP{RU}_MAJOR_VERSION-config (httpd-2.1+ will be APR 1.0 or higher which uses this convention.) 	r104443
----------------------------
Workaround RHEL 3 'cuteness' for OpenSSL by calling pkg-config openssl. For more info, see: http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=82369 	r104329
----------------------------
NWSSLUpgradeable directive 	r104308
----------------------------
Added 'AllowOverride Options=Indexes,MultiViews' to give an admin better control over what options can be used in .htaccess files. PR: 29310 Submitted by: Tom Alsberg <alsbergt-apache cs.huji.ac.il> 	r104283
----------------------------
Add the new directive NWSSLUpgradeable to mod_nw_ssl to allow a non-secure connection to be upgraded to secure connections 	r104278
----------------------------
* build/config.guess, build/config.sub: Remove since buildconf copies these files from APR. 	r104269
----------------------------
Add ShowForbidden to IndexOptions to list files that are not shown because the subrequest returned 401 or 403. PR: 10575 	r104212
----------------------------
document the brand new DirectorySlash directive 	r104159
----------------------------
make trailing-slash-behaviour configurable 	r104154
----------------------------
"*** Patch for EBCDIC-host and HTTP/0.9 responses only *** In dealing with a HTTP/0.9 response to a proxy request, we have pre-read data that is not an HTTP header. At this point of processing, we don't know yet whether the data is going to be interpreted an binary or not. (In fact, we may never find out because HTTP/0.9 lacks the Content-Type headers; only by configuring mod_charset_lite can we control the conversion). But mod_charset_lite will get control only later, so it cannot decide on the conversion of the current buffer full of data. => This is an extreme and rare situation normally. So, for catching the most obvious problem (talking not to a HTTP server but to some other protocol), the best guess here is to treat the buffer as ""text/*"" (to make error messages readable). "	r104081
----------------------------
Fix for multiple proxy bugs - review please: #10722  Reverse proxying cookies #15207  Proxy passing canonicalised URIs to backend #16812  Case-insensitivity of proxypassreverse #19317  Canonicalised URI causing infinite loop #20372  AllowEncodedSlashes May also fix 13577 (untested) This is really two fixes: 10722 and 15207; the others are trivial consequences. To make review easier, the simpler fix (#15207) is entirely contained in #ifdef FIX_15207 (new code) and #ifndef FIX_15207 (removed code) 	r104070
----------------------------
"mod_log_config: Fix a bug which prevented request completion time from being logged for I_INSIST_ON_EXTRA_CYCLES_FOR_CLF_COMPLIANCE processing. PR:             29696 Submitted by:   Alois Treindl <alois astro.ch> Reviewed by:	Jeff Trawick "	r103991
----------------------------
<VirtualHost myhost> now applies to all IP addresses for myhost instead of just the first one reported by the resolver.  This corrects a regression since 1.3. 	r103897
----------------------------
Slightly augment the example for SSIStartTag 	r103883
----------------------------
Allow relative paths for LDAPTrustedCA to be resolved against ServerRoot PR#26602 	r103877
----------------------------
Nobody objected: <IfModule> now takes the module identifier in addition to the filename. CAUTION: this commit breaks the build on netware. It still needs to be adjusted. (but I don't have any netware knowledge...) Also, developers need to re-run buildconf on unices. PR: 29003 Submitted by: Edward Rudd <eddie omegaware.com>, Andr Malo 	r103849
----------------------------
Document SSLCryptoDevice and fix some example titles. 	r103838
----------------------------
Document SSLHonorCipherOrder. 	r103837
----------------------------
Document SSLUserName directive. Submitted by: Martin v. Loewis 	r103835
----------------------------
"Add ""SSLUserName"" directive to set r->user based on a chosen SSL environment variable name. * modules/ssl/ssl_private.h (struct SSLDirConfigRec): Add szUserName field. * modules/ssl/ssl_engine_config.c (ssl_config_perdir_create, ssl_config_perdir_merge): Initialize and merge szUserName field. (ssl_cmd_SSLUserName): New function. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Fixup): Set r->user to the value of the chosen SSL environment variable. * modules/ssl/mod_ssl.c: Add SSLUserName config directive. PR: 20957 Submitted by: Martin v. Loewis <martin v.loewis.de> "	r103834
----------------------------
"Add ""SSLHonorCipherOrder"" directive to enable the OpenSSL 0.9.7 flag which uses the server's cipher preference order rather than the client's. * modules/ssl/ssl_private.h (struct SSLSrvConfigRec): Add cipher_server_pref field. * modules/ssl/ssl_engine_config.c (ssl_config_server_create, ssl_config_server_merge): Initialize and merge cipher_server_pref field. (ssl_cmd_SSLHonorCipherOrder): New function. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_protocol): Set the context option SSL_OP_CIPHER_SERVER_PREFERENCE when required. PR: 28665 Submitted by: Jim Shneider <jschneid netilla.com> "	r103832
----------------------------
"Drop support for the ""CompatEnvVars"" argument to SSLOptions, which was never implemented in 2.0 and never needed to be. * docs/ssl/ssl-std.conf.in: Remove CompatEnvVars examples. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLOptions): Don't allow the CompatEnvVars argument. * modules/ssl/ssl_private.h: Remove SSL_OPT_COMPATENVVARS macro. "	r103829
----------------------------
Enable the option to support anonymous shared memory in mod_ldap. This makes the cache work on Linux again. PR: Obtained from: Submitted by: Reviewed by: 	r103772
----------------------------
allow LimitRequestBody to be reset to unlimited PR: 29106 	r103751
----------------------------
use new apr_strtoff function to parse limitrequestbody 	r103750
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_config_global_create): Fix gcc strict-aliasing warning. 	r103688
----------------------------
* modules/experimental/util_ldap.c (util_ldap_cache_compare): Fix uninitialized variable warning from gcc -Wall. (util_ldap_set_cache_bytes, util_ldap_post_config): Use correct APR printf format string macros. (util_ldap_set_cert_type): Make static to fix gcc warning. (util_ldap_cleanup_module): Fix unused variable warning. * modules/experimental/mod_auth_ldap.c (derive_codepage_from_lang): Remove unused variable. 	r103664
----------------------------
* modules/loggers/mod_log_config.c, server/log.c (open_error_log, ap_replace_stderr_log): Use APR_LARGEFILE when opening log files, to allow log files to exceed the 2Gb limit if necessary. PR: 13511 	r103627
----------------------------
changed the following APIs to return an error instead of hard exiting: ap_add_module, ap_add_loaded_module, ap_setup_prelinked_modules, and ap_process_resource_config 	r103517
----------------------------
note that forbidden directives in htaccess files result in a 500. (PR 28535) Additionally note that AllowOverride doesn't work in regex-<directory> containers. 	r103512
----------------------------
Include directives no longer refuse to process symlinks on directories. Instead there's now a maximum nesting level of included directories (128 as distributed). This is configurable at compile time using the -DAP_MAX_INCLUDE_DIR_DEPTH switch. PR: 28492 	r103472
----------------------------
Recursive Include directives no longer crash. The server stops including configuration files after a certain nesting level (128 as distributed). This is configurable at compile time using the -DAP_MAX_INCLUDE_DEPTH switch. PR: 28370 	r103466
----------------------------
simplifications There's no need for different server and dir configs. 	r103441
----------------------------
"Implement the ""CGI bucket"" in mod_cgi to handle stderr output during script execution, preventing deadlock if stderr output fills the pipe buffer: * modules/generators/mod_cgi.c (log_script_err): Return a read error. (cgi_bucket_create, cgi_bucket_dup, cgi_read_stdout, cgi_bucket_read): New functions. (cgi_handler): Use new CGI bucket rather than a pipe bucket if APR_FILES_AS_SOCKETS; use zero read timeout from stdout/stderr during script execution. PR: 22030 Submitted by: Joe Orton, Jeff Trawick "	r103437
----------------------------
the up-to-date checker currently depends on a properly configured cvs in path that's totally uncool. Let make cvs the work on the fly: - start adding $Revision$ keyword to english files 	r103421
----------------------------
* server/vhost.c (remove_unused_name_vhosts): Remove redundant check; catch all port-based NameVirtualHosts without defined VirtualHosts, preventing segfaults later in some misconfigurations. PR: 27731 	r103400
----------------------------
"add ""ErrorDocument 404 default"" description "	r103363
----------------------------
accept URLs as ServerAdmin contact. If it's not recognized as an URL, assume an email address and prepend it with mailto: in server outputs. PR: 28174 	r103339
----------------------------
"""ErrorDocument default"" changes broke inheritance. consider: <Directory /foo> ErrorDocument 404 blah </Directory> <DIrectory /foo/bar> ErrorDocument 500 boo # 404 is now fallen back to default </Directory> This patch solves the problem. "	r103333
----------------------------
Fix a bunch of cases where the return code of the regex compiler was not checked properly. This affects: mod_setenvif, mod_usertrack, mod_proxy, mod_proxy_ftp and core. PR: 28218 	r103328
----------------------------
Enable special ErrorDocument value 'default' which restores the canned server response for the scope of the directive. 	r103310
----------------------------
Don't allocation large buffers on the stack to avoid over-running a fixed length stack when ap_build_cont_config() is called recursively (ie. nested <IfDefine> blocks). 	r103290
----------------------------
document new RequestHeader behaviour PR: 27951 Submitted by: vincent gryzor.com (Vincent Deffontaines) 	r103270
----------------------------
allow RequestHeader to be conditional PR: 27951 Basically submitted by: vincent gryzor.com (Vincent Deffontaines) 	r103269
----------------------------
mod_cgid: Don't allow Scriptsock to be specified inside VirtualHost; Don't place script socket inside default server root instead of actual server root. The sock name was being stored in the server config, though it was not specific to a server. ap_server_root_relative() was being used prior to config processing, so it was always picking up the default server root. PR:            27886 	r103184
----------------------------
Intergrate Kess' configure docs in the docs tree and, in particular, integrate them into install.xml by removing large chunks of that document and making it a summary with pointers into configure.xml. (I also snuck in the odd fix to both install.xml and configure.xml.  Sorry for the mix.) 	r103154
----------------------------
`build metafiles` 	r103130
----------------------------
Fix memory corruption problem with ap_custom_response() function. The core per-dir config would later point to request pool data that would be reused for different purposes on different requests. This is based on an old 1.3 patch submitted by Will Lowe. It needs a minor tweak before committing to 1.3, but he had it pretty darn close. 	r103120
----------------------------
Reference the config file syntax in the htaccess tutorial. PR: 17236 	r103100
----------------------------
Mention that mod_userdir is required for suexec to work in user directories. PR: 25477 	r103092
----------------------------
Fix description of Indexignore argument. PR: 25870 	r103090
----------------------------
Document the ability to look at original of final subrequest. I'd appreciate a review from someone more familiar with mod_log_config! PR: 27319 	r103086
----------------------------
"Caching content from sources where Content-Length is not specified (these were passed through uncached until now): This needed additional checks for CacheMinFileSize and CacheMaxFileSize after the response has completed. That means that we are checking at two places now: -> when the C-L is known, we check before we cache -> when it is unknown we check ""on-the-way"" for CacheMaxFileSize, and We now compare the actual size of the cached copy against the C-L header, and discard it if the two don't match. "	r103026
----------------------------
Adapt the mpm_netware version of the ThreadStackSize directive to the common version 	r103013
----------------------------
"Change ""new"" WorkerStackSize directive to ThreadStackSize Move existing Netware docs and links on ThreadStackSize to mpm_common "	r102976
----------------------------
use existing directive name ThreadStackSize instead of WorkerStackSize as made obvious by: Brad Nicholes 	r102975
----------------------------
German translation of EnableExceptionHook Reviewed by: Kess 	r102970
----------------------------
clarify the enableexceptionhook description 	r102969
----------------------------
add initial documentation for EnableExceptionHook. Please review. 	r102965
----------------------------
Forward-port from mod_dav 1.0: * server/util_xml.c (ap_xml_parse_input): Give a 413 (Request Entity Too Large) not a 400 if the client exceeds the configured XML request body limit. 	r102959
----------------------------
Satisfy directives now can be influenced by a surrounding <Limit> container. PR: 14726. 	r102954
----------------------------
emit the config filename when warning about overlapping aliases Submitted by: Guenter Knauf <eflash gmx.net> Reviewed by: Dirk-Willem van Gulik 	r102949
----------------------------
"* modules/proxy/proxy_http.c (ap_proxy_http_process_response): Consistently check whether r->status is ""successful"" or not; fix screwy handling of 2xx-but-not-200 responses when ProxyErrorOverride is used. PR: 20183 Submitted by: Marcus Janson <marcus.janson@tre.se>, Joe Orton "	r102935
----------------------------
Win32: Tweak worker thread accounting to fix hang when number of Listen directives is >= ThreadsPerChild 	r102922
----------------------------
"Fix bug in mod_usertrack when no CookieName is set. PR: 24483 Submitted by:	Manni Wood <manniwood planet-save.com> Reviewed by:	Cliff Woolley, Jim Jagielski "	r102890
----------------------------
Fix use of mod_ssl as a DSO linked against static SSL libraries; also stop linking all of support/* against the SSL libraries: * acinclude.m4 (APACHE_MODULE): Define MOD_FOO_LDADD which each module .la library will be linked against. (APACHE_MODPATH_ADD): Link static modules against the provided libraries. (APACHE_CHECK_SSL_TOOLKIT): Put SSL libraries in SSL_LIBS and export that to config_vars.mk. * support/Makefile.in: Link ab against SSL_LIBS. * modules/ssl/config.m4: Add SSL_LIBS and distcache libraries to MOD_SSL_LDADD. PR: 17217 	r102870
----------------------------
Add maxmemfree as a default for the netware mpm 	r102866
----------------------------
Allow the enabled flag to be set to more than just TRUE or FALSE so that the OPTIONAL flag can be correctly merged within the ssl_config_server_merge() function. 	r102860
----------------------------
Allow the enabled flag to be set to more that just TRUE or FALSE so that the OPTIONAL flag is correctly merged within the ssl_config_server_merge() function. 	r102859
----------------------------
Add 's' format tag to mod_headers to allow access to mod_ssl variables without the overhead of SSLOptions +StdEnvVars/+ExportCertData; also ensure that any multi-line envvars are unwrapped onto a single line. * modules/metadata/mod_headers.c (header_request_ssl_var, unwrap_header, header_post_config): New functions. (header_pre_config): Register the 's' tag type. (register_hooks): Add the post_config hook. PR: 23223 	r102809
----------------------------
Move mod_ssl-internal interfaces into ssl_private.h; allow mod_ssl.h to be included even when mod_ssl is not enabled. * Makefile.in (install-include): Only install mod_ssl.h. * modules/ssl/ssl_private.h: New file. * modules/ssl/mod_ssl.h: Move everything apart from than the optional hook definitions into ssl_private.h. * modules/ssl/*.c: Include ssl_private.h not mod_ssl.h * modules/ssl/config.m4: Always add the mod_ssl directory to the include path so other modules can find mod_ssl.h. * modules/proxy/mod_proxy.c: Include mod_ssl.h to pick up the optional hook definitions rather than copy'n'pasting them. 	r102803
----------------------------
"fix an old misfeature: ""BufferedLogs Off"" would sort-of turn buffered logging on as it set the log writer to the buffered log writer, though it would leave the are-logs-buffered flag off this misfeature combined with recent mutex logic for buffered logs led to a segfault with ""BufferedLogs Off"" "	r102783
----------------------------
* modules/ssl/ssl_scache_shmcb.c (ssl_scache_shmcb_init): Use an anonymous shm segment by default or fall back on name-based shm. 	r102746
----------------------------
allow log pipes to be relative to serverroot as well 	r102727
----------------------------
Add a new directive EnableExceptionHook that must be specified for exception hooks to be called (in addition to the build time The 2.1-dev feature is now more aligned with the 1.3.30-dev feature, in that there is a build-time requirement as well as a configuration 	requirement.
----------------------------
Added doc for LDAPSharedCacheFile directive in mod_ldap 	r102639
----------------------------
* configure.in: Remove long since unnecessary endianness checks. 	r102530
----------------------------
* support/Makefile.in (suexec): Don't link against libapr etc; suexec is self-contained. 	r102491
----------------------------
* configure.in: Remove unnecessary $builddir/server/mpm/$mpm and $srcdir from INCLUDES.  Remove unused USE_VPATH variable. 	r102406
----------------------------
EOLs sent by external rewritemaps are now consumed as whole. That way, on systems with more than one EOL character mode. PR: 25635 	rewritemap
----------------------------
Introduce the RewriteCond -x check, which returns true if the pattern is a file with execution permissions. 	r102398
----------------------------
add commented LoadModule directive for mod_deflate 	r102369
----------------------------
mod_log_config: Fix corruption of buffered logs with threaded MPMs. PR:               25520 	r102355
----------------------------
allow proxying of directoryindex'd resources 	r102332
----------------------------
If the proxy was enabled, and UseCanonicalHostname was off, then the Via: header would report not the proxy hosts's ServerName (or any of its configured VHosts's names) as it should, but the *origin hosts*'s name. Now it reports its ServerName. 	r102320
----------------------------
use the UNSAFE designation for unescaped errorlogs Submitted by: Geoffrey Young, Joe Orton 	r102306
----------------------------
allow unescaped errorlogs via compile time switch Submitted by: Geoffrey Young <geoff modperlcookbook.org> 	r102302
----------------------------
update worker doc to mention that . a potentially large number of child processes can be in termination state . ServerLimit/ThreadLimit should be coded before other worker MPM directives which control processes/threads 	r102295
----------------------------
Fix typo and add reference to Anonymous directive. 	r102260
----------------------------
* modules/loggers/config.m4: Fix --enable-mods-shared=all case where $enable_log_forensic gets set to the empty string. 	r102241
----------------------------
mod_proxy hangs when both KeepAlive and ProxyErrorOverride are enabled, and a non-200 response without a body is generated by the backend server. Submitted by: Graham Wiseman, Richard Reiner Reviewed by: Richard Reiner, Bill Stoddard 	r102239
----------------------------
Use -export-dynamic only when linking an httpd which includes mod_so, not when linking modules or support programs. * modules/aaa/config.m4, modules/arch/win32/config.m4, modules/cache/config.m4, modules/echo/config.m4, modules/filters/config.m4, modules/generators/config5.m4, modules/metadata/config.m4: Don't add -export-dynamic to LT_LDFLAGS. * modules/mappers/config9.m4: Add -export-dynamic to HTTPD_LDFLAGS when mod_so is enabled. 	r102235
----------------------------
Add support to mod_ssl for a distributed session cache using distcache. * LAYOUT: Update for removal of scache_shmht and addition of scache_dc. * modules/ssl/config.m4: Check for libdistcache; build ssl_scache_dc.lo. * modules/ssl/mod_ssl.dsp: Build ssl_scache_dc (with luck). * modules/ssl/mod_ssl.h: Add SSL_SCMODE_DC and scache_dc_* prototypes. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Allow use of dc: argument. * modules/ssl/ssl_scache_dc.c: New file. * modules/ssl/ssl_scache.c (ssl_scache_init, ssl_scache_kill, ssl_scache_store, ssl_scache_retrieve, ssl_scache_remove, ssl_ext_status_hook): Hook into scache_dc. Submitted by: Geoff Thorpe <geoff@geoffthorpe.net> 	r102227
----------------------------
Correct SSLProxyMachineCertificatePath and SSLProxyMachineCertificateFile - the previous description looked like it was copied from SSLProxyCA* Also add a warning about not using encrypted keys in those two. 	r102191
----------------------------
Move SSLRandomSeed out of the <IfDefine SSL> container to support starting without SSL on platforms with no /dev/random equivalent but a statically compiled-in mod_ssl. See PR: 25867 Submitted by: Rob Meyer <rob bigdis.com> 	r102179
----------------------------
* modules/filters/config.m4: Fix typo which wiped INCLUDES if zlib detection failed. 	r102176
----------------------------
* modules/loggers/config.m4: Add 'server' directory to include path if mod_log_forensic is enabled. 	r102167
----------------------------
* configure.in: Check for sqrt in libm (needed by ab). 	r102146
----------------------------
prevent module from segfaulting when not configured. 	r102145
----------------------------
"mod_proxy with ProxyErrorOverride On in a reverse-proxy configuration attaches a body to the 302 response and a wrong Content-Length header. PR: 22951 Submitted by:	Ermanno Scaglione <scaglione ..at.. starnetone.de> Reviewed by:	Blaise Tarr <blaise.tarr .. at .. cnet.com> "	r102069
----------------------------
Win32: Tweak MaxMemFree patch. Allocate ptrans specifying pchild as the parent pool as we did prior to the MaxMemFree patch. 	r102025
----------------------------
"Fix <Limit> and <LimitExcept> parsing to require a closing '>' in the initial container. PR:                25414 Submitted by:	   Geoffrey Young <geoff apache.org>] Reviewed by:	   Jeff Trawick "	r102021
----------------------------
"update the misconfigured INCLUDES skipping code to remove itself, so it'd complain only once PR: Obtained from: Submitted by: Reviewed by:	Jeff Trawick, Bill Rowe "	r102005
----------------------------
Regenerate metafiles. 	r101932
----------------------------
Add fatal exception hook for use by debug modules.  The hook is only available if the --enable-exception-hook configure parm is used. Sample users at http://httpd.apache.org/~trawick/exception_hook.html 	r101899
----------------------------
"Extend mod_status output to include SSL session cache status information: * modules/ssl/mod_ssl.c (ssl_hook_pre_config): Call ssl_scache_status_register. * modules/ssl/ssl_scache.c (ssl_scache_status): Removed function. (ssl_ext_status_hook): Renamed from ssl_ext_ms_display: switch to 2.1's mod_status ""status_hook"" API. (ssl_scache_status_register): Register optional hook. * modules/ssl/ssl_scache_dbm.c (ssl_scache_dbm_status): Adjust to use new API. * modules/ssl/ssl_scache_shmcb.c (ssl_scache_shmcb_status): Adjust to use new API. "	r101889
----------------------------
Remove shmht session cache in favour of shmcb; shmht has had data corruption bugs since being apr_rmm'ified. * config.m4, mod_ssl.dsp: Don't build ssl_util_table and ssl_scache_shmht. * ssl_util_table.h, ssl_util_table.c, ssl_scache_shmht.c: Removed files. * mod_ssl.h (SSLModConfigRec): Use a void * pointer for storing the scache-specific data. * ssl_engine_config.c (ssl_cmd_SSLSessionCache): Treat shmht: as shmcb:. * ssl_scache.c: Remove shmht hooks throughout. * ssl_scache_shmcb.c: Remove casts to use the table_t * pointer as a void *. 	r101888
----------------------------
* modules/ssl/ssl_engine_init.c (ssl_init_proxy_certs): Fail early (rather than segfault later) if a client cert is configured which is missing either the certificate or private key. PR: 24030 	r101878
----------------------------
SECURITY [CAN-2003-0020]: escape arbitrary data before writing into the errorlog. Reviewed by: Mark J Cox 	r101873
----------------------------
"A better solution than my previous commit as pointed out by Andre Malo. mod_expires: Initialize ExpiresDefault to NULL instead of """" to avoid reporting an Internal Server error if it is used without having been set in the httpd.conf file. PR: 23748, 24459 Submitted: Andre Malo, Liam Quinn  <liam htmlhelp.com> Reviewed: Andre Malo, Paul J. Reder "	r101846
----------------------------
mod_expires: Don't report an Internal Server error if ExpiresDefault is used and has not been set in the httpd.conf file. PR: 23748, 24459 Submitted: Liam Quinn  <liam htmlhelp.com> Reviewed: Paul J. Reder 	r101839
----------------------------
"Fix a problem with the display of empty variables (""SetEnv foo"") in mod_include.  Now it works like 1.3 (see PR for details).  Setting of envvars for scripts was/is consistent with 1.3 for empty variables. PR:           24734 Submitted by: Markus Julen <mj zermatt.net> Reviewed by:  Jeff Trawick "	r101830
----------------------------
Win32: MaxMemFree works with mpm_winnt 	r101820
----------------------------
Win32: Make Win32 MPM transaction pools honor MaxMemFree PR: Obtained from: Submitted by: Reviewed by: 	r101817
----------------------------
mod_autoindex: new directive IndexStyleSheet PR: Obtained from: Submitted by: Tyler Riddle <triddle_1999 yahoo.com> and Paul Querna <chip force-elite.com> Reviewed by: 	r101809
----------------------------
allow any user id when configured with 'anonymous *' PR: 11428 	r101728
----------------------------
Fix a long delay with CGI requests and keepalive connections on AIX. On AIX, for processes like mod_cgid's script children where SIGCHLD is ignored, kill(pid,0) returns success for up to one second after the script child exits, based on when a daemon runs to clean up unnecessary process table entries. getpgid() can report the proper info (-1/ESRCH) immediately. One user had a page with a lot of embedded images created by CGIs, and the browser fetched them on a keepalive connection, and the cumulative delays were very noticeable by the clients. 	r101716
----------------------------
* modules/loggers/mod_log_config.c (log_request_time): Log the minutes component of the timezone correctly. PR: 23642 Submitted by: Hong-Gunn Chew <hgbug@gunnet.org> 	r101703
----------------------------
- add XHTML doctypes to httpd.h - fix the (x)html output of mod_autoindex to be consistent and make it configurable to emit either HTML or XHTML PR: 23747 	r101683
----------------------------
provide a workaround for buggy mod_setenvif 	r101668
----------------------------
* include/http_config.h (cmd_func): Fix prototype, eliminate warning. 	r101630
----------------------------
Fix missing human-readable error information in SSL log messages: * mod_ssl.c (ssl_cleanup_pre_config): Don't free the error strings, since they can't be loaded again once. 	r101624
----------------------------
When UseCanonicalName is set to OFF, allow ap_get_server_port to check ap_default_port(). 	r->connection->local_addr->port
----------------------------
"fix the config parser to support <Foo>..</Foo> containers (no arguments in the opening tag) supported by httpd 1.3. Without this change mod_perl 2.0's <Perl> sections are broken. PR: Obtained from: Submitted by:	""Philippe M. Chiasson"" <gozer@cpan.org> Reviewed by:	stas "	r101415
----------------------------
Fix mod_info to use the real config file name, not the default config file name. Submitted by:   Aryeh Katz <aryeh@secured-services.com> Reviewed by:    Gnter Knauf, Jeff Trawick 	r101297
----------------------------
Fix a misleading message from the some of the threaded MPMs when MaxClients has to be lowered due to the setting of ServerLimit. 	r101160
----------------------------
"allow the undefined echo string to be configured via <!--#config echomsg=""..."" --> "	r101130
----------------------------
allow SSIUndefinedEcho per directory 	r101129
----------------------------
cleanup regex stuff. regexps are now handled more graceful (give warnings on out of range or undefined captures). 	r101073
----------------------------
don't waste memory, if someone configures another error message or timeformat during runtime. The common case doesn't need max_string_len at all and won't be configured more than one or two times. 	r101071
----------------------------
cleanup handle_config function 	r101055
----------------------------
- clean up configuration routines - give bndm a neater interface - naming style improvements 	r101052
----------------------------
Catch an edge case, where strange subsequent RewriteRules could lead to a 400 (Bad Request) response. Example: <Directory /path> </Directory> 	r101012
----------------------------
Make mod_ssl consistent with itself when you have a halfass install of openssl-engine (ie, you're missing the headers).  ssl_cmd_SSLCryptoDevice() is thrown away by the preprocessor if you're missing the header, so the call to it should have the same condition applied.  otherwise, mod_ssl will fail to link. 	r100970
----------------------------
split ap_process_resource_config into two functions (since we don't wanna change the api). Only the first one (the ap_ entry point) now checks for fnmatch and the second one will be called for every file/directory included. This, however, avoids infinite recursions, if a filename contains wildcard characters. PR: 22194 	r100931
----------------------------
hook mimetype-forcing into fixup/LAST. This leads to consistent behaviour (server context vs. directory context), overrides all statically configured mime types and doesn't clobber multiviews any longer. 	r100913
----------------------------
Although we initialize mc->pid in the child init phase, we haven't initialized it before initially performing our ssl_rand_seed() in the parent/postconfig phase. 	r100912
----------------------------
cleanup RewriteCond evaluation. - avoid unnecessary memory operations - parse non-regex patterns at configuration time, which - gives the ability to throw a useful warning, where [NC] is not supported - and speeds up processing at runtime - allow [NC] for simple comparison pattern (=) - improve readability 	r100862
----------------------------
Rewritemap improvement: - map designations are now case insensitive (txt: rNd: PRG: INt:) - maps may be relative to serverroot, which appears to be _very_ helpful 	r100860
----------------------------
"REALLY discourage people from using <Limit>. (Because people don't necessarily know all the methods that their server deals with, and because crummy cgi scripts may take ""post"" and treat it like ""POST"" or other similar bad behavior.) "	r100839
----------------------------
"I knew I would get in trouble mucking with the build system. Use topbuilddir rather than topsrcdir to find config.nice. Submitted by:	Justin Erenkrantz "	r100835
----------------------------
minor optimizations in lookup_map_program function. - make it compile time configurable, how long a response from a rewrite map prg may be. - avoid unnecessary memory operations 	r100832
----------------------------
Mention the limitations of ProxyPassReverse, and reference Nick Kew's mod_proxy_html. 	r100822
----------------------------
Install config.nice into the build/ directory to make minor version upgrades easier. 	r100819
----------------------------
allow piped rewrite logs to be relative to serverroot 	r100818
----------------------------
Enhance some bits of the suEXEC docco to be a bit more precise in regard to suEXEC's docroot handling and it's preconditions; see PR#21873 and #21874. 	r100787
----------------------------
optimization/cleanup. The generic flagparser (read: lexer) for RewriteRules and RewriteConds does the same except for one function call. Collapse these to functions to one and make the result more 	readable.
----------------------------
don't reverse the filter order in AddOutputFilterByType 	r100760
----------------------------
Refresh parts of the proxy docs, with special attention to clarifying the security issues in forward and reverse proxy situations. - Remove the historical narrative in the top section and simply state the facts. - Remove the table of contents, since we already generate one for the sidebar. - Rewrite the forward vs reverse section to be clear on the purpose of the two types of proxy. - Add some basic examples of each type of proxy to replace the example removed from the default config file. - Add a note to the access control section on forward versus reverse proxys, and also add a reference to mod_access that got removed at some point. - Add a warning to the ProxyPass docs that ProxyRequests should be off. - Shorten some section titles. I did not add the ProxyBlock :25 because I don't have a proxy server to test it on at the moment. 	r100759
----------------------------
- In 2.0 it is possible for LanguagePriority to have an effect, even for a properly configured HTTP/1.1 client. - Reference MultiViewsMatch. PR: 21726, 21830 	r100753
----------------------------
Hit a couple files that hadn't been adapted to account for the move from <Directory proxy:> to <proxy> 	r100748
----------------------------
Add optional hook to extend mod_status output. * configure.in: Add modules/generators to include path. * Makefile.in: Install mod_status.h. * modules/generators/mod_status.h: New file. * modules/generators/mod_status.c: Implement ap_run_status_hook. (status_handler): Run status hooks. 	r100724
----------------------------
cleanup addlanguage/comments and languagepriority PR: 21743 	r100722
----------------------------
Oops. Replace * with *:80 in the <VirtualHost> example also. 	r100657
----------------------------
Replace NameVirtualHost * with NameVirtualHost *:80 in the example config. 	r100654
----------------------------
"Ignore RewriteRules in .htaccess files if the directory containing the .htaccess file is requested without a trailing slash. PR:	20195 "	r100632
----------------------------
"If a directory contains a file listed in the DirectoryIndex directive, the folder icon is no longer replaced by the icon of that file. PR:	9587 Submitted by:	David Shane Holden <dpejesh@yahoo.com> "	r100628
----------------------------
not valid to modify string pointed to by szCryptoDevice...  it points to a static string or something parsed from the config 	r100603
----------------------------
When the top-level directory section for / was added for the sake of performance and to allow automount symlinks to be followed, we mistakenly opened access to the entire directory system by default. I noticed this because all of the /~user directories are available by default without any restrictions, which is a bad idea for anything other than one server within a department of shared users.  However, it also makes it easier to serve files anywhere on disk by mistake, and makes other URI-handling bugs more severe than they would be otherwise.  Therefore, this patch reinstates access control to deny access to all files other than under DocumentRoot, icons, and manual, until additional directory/locations are explicitly allowed by the admin. 	r100593
----------------------------
let mod_speling use the current AcceptPathInfo setting. Default is: reject PR: 21059 	r100566
----------------------------
Use three-argument form of AC_DEFINE everywhere; remove acconfig.h and the warning message from autoconf 2.5x. 	r100540
----------------------------
Try to be clearer in describing the connection between AddType and AddEncoding for defining the meaning of compressed file extensions. 	r100538
----------------------------
do not put active IfModule directives around config lines that are commented out -- that is just a waste of processing. 	r100520
----------------------------
Forward port patch for CAN-2003-0192 from 2.0. SECURITY [CAN-2003-0192]: Fixed a bug whereby certain sequences of per-directory renegotiations and the SSLCipherSuite directive being used to upgrade from a weak ciphersuite to a strong one could result in the weak ciphersuite being used in place of the strong one.  [Ben Laurie] 	r100518
----------------------------
simplify type-map config 	r100456
----------------------------
limitinternalrecursion goes 2.0.47 	r100443
----------------------------
Oops. This feature seems to be rarely used. Fix SSIStartTag-description. 	r100406
----------------------------
ScriptInterpreterSource Registry also uses the ExecCGI subkey 	r100392
----------------------------
ScriptInterpreterSource has been on my mind for a long time but forgotten until Jushua's changes. It's done now. 	r100390
----------------------------
explain ScriptInterpreterSource a little bit more 	r100388
----------------------------
The decision on the FAQ is basically made: we'll slowly build a new one for 2.0. With regard to more colaborative docs, I'm still open to discussion. Also: remind about the crappy ScriptInterpreterSource doc.  As someone who rarely runs apache under windows, I don't know enough about it to fix it myself. 	r100385
----------------------------
- mention that DocumentRoot is interpreted relativ to ServerRoot if it is not absolute - remove description of absolute pathes (beginning with a slash) because this is valid only for some OS 	r100323
----------------------------
DocumentRoot always used to be interpreted relative to ServerRoot. Make it server_root_relative like in Apache-1.3 	r100315
----------------------------
Reaction to Jeff Trawick's observations that we are double-initializing dynalinked OpenSSL Engines and Configs.  Move the library teardown code so that it is torn down in the proper order, corresponding to when the library itself was initialized.  And leave a little reminder that some memory diagnostics would be good if OpenSSL is built for malloc debugging. Suggested by: Geoff Thorpe 	r100288
----------------------------
"core_output_filter: don't split the brigade after a FLUSH bucket if it's the last bucket.  This prevents creating unneccessary empty brigades which may not be destroyed until the end of a keepalive connection. Submitted by:	Juan Rivera <Juan.Rivera@NO_SPAM.citrix.com> "	r100210
----------------------------
adjust config to work with typemaps. argh. Forget to mention all the time (sorry): The typmap stuff was Reviewed by: Erik Abele, Astrid Keler 	r100197
----------------------------
ltconfig gets copied to build/ with old libtool, so tell cvs to ignore it 	r100185
----------------------------
Don't respect the Server header field as set by modules and CGIs. As with 1.3, for proxy requests any such field is from the origin server; otherwise it will have our server info as controlled by the ServerTokens directive. 	r100182
----------------------------
steal some code from APR intended to allow you to properly switch between libtool 1.3 and 1.4+...  newer libtool doesn't have ltconfig, so having a stray ltconfig around will confuse some of our config logic This also fixes cp failure on FreeBSD since ltconfig and ltmain.sh are installed with 0400 perms, and when buildconf is run a second time the cp of those files would fail. 	r100178
----------------------------
Win32: Whack the fully qualified names that appear in the log when loglevel debug is being used. 	r100153
----------------------------
Allow for an unclean shutdown of SSL ports to avoid timeout conditions between the client and the server. 	r100138
----------------------------
The right patch (thanks to Eric for identifying the wrong patch) to move SSL_library_init() into the register hooks phase.  OpenSSL_add_ssl_algorithms devolves to SSL_library_init, which is the same for most toolkits (and would be accomodated in ssl_toolkit_config.h if not.) 	r100136
----------------------------
"""Comment out .gz etc. AddEncoding lines in our default configuration. Current browsers have a tendency to decompress the data when no one really wants it to do that.  If you want the old behavior that leads to transparent decompression by modern browsers, uncomment these lines.  But, this shouldn't be our default."" (see httpd-std.conf.in r1.32, jerenkrantz) Reviewed by: wrowe, slive, nd, erik Also removed the corresponding entry from STATUS. "	r100131
----------------------------
"Allow ExpiresByType to accept and understand minor-type wildcards (e.g., text/*).  They'll be used if an exact type match isn't found; if there's no wildcard match, the expiry falls back to any ExpiresDefault setting as usual. PR:		7991 "	r100126
----------------------------
Provide a far more useful explanation when SSLCryptoDevice fails to find a device.  Still would be nice to implement dynamic:{options} but this gets us to display the usual, builtin devices. We now load builtin engines up front, in the pre_config phase, because this and any other config cmd processor must have an already valid library config.  So loading builtin engines becomes redundant in this cmd handler. 	r100108
----------------------------
Solve a pretty horrific bug in SSLCryptoDevice and other places where the config cmd processors should be examining the SSL context.  We must initialize the SSL library before we can actually obtain any useful information from the SSL library. 	r100107
----------------------------
- add simplified chinese welcome page - add .zh-cn extension for zh-CN language code to default config. Submitted by: kajaa <kajaa@eastday.com> Reviewed by: <yinglichina@sina.com> 	r100075
----------------------------
As Geoff Thorpe <geoff@geoffthorpe.net> points out, we must perform our compilation tests for the SSL_has_foo functions while we have completely populated the config with 'standard' libraries from our apr configuration. This allows us to compile more complex dependencies such as the test for ENGINE_init(), which also requires -lsockets etc on Solaris for any static build of OpenSSL.  If this fails, we will have to research using the pkgconfig/openssl.pc configuration to perform these precompile tests. This restores the various HAVE_SSL_{FOO} macros for SSL-C and introduced the proper test for HAVE_ENGINE_INIT. 	r100038
----------------------------
translate new directive LimitInternalRecursion and update the rest 	r100030
----------------------------
The patch below reverts the prior commit to eliminate SSL_set_state(). Some additional work or research is required in order to pass the perl-framework regressions, but I don't have the cycles and don't care to leave the broken code in cvs HEAD. REVERTING: wrowe 2003/05/19 08:13:19 Modified:    modules/ssl config.m4 ssl_engine_io.c ssl_engine_kernel.c Log: Revision  Changes    Path 1.15      +0 -1      httpd-2.0/modules/ssl/config.m4 1.108     +1 -1      httpd-2.0/modules/ssl/ssl_engine_io.c 1.93      +1 -1      httpd-2.0/modules/ssl/ssl_engine_kernel.c 1.34      +0 -6      httpd-2.0/modules/ssl/ssl_toolkit_compat.h 	r100004
----------------------------
ad-hoc translation of AllowEncodedSlashes to German to get something into the release. (no reference in the german docs otherwise) Further review is desired! 	r99991
----------------------------
no objections so far. add initial documentation of AllowEncodedSlashes, so that it will hopefully go into the next release. 	r99962
----------------------------
Roll away the SSL_EXPERIMENTAL_ENGINE test in favor of testing for the ENGINE_init() function in config.m4, and rely on HAVE_ENGINE_INIT instead. Reviewed by: Ben Laurie (concept) 	r99919
----------------------------
Document the LimitInternalRecursion directive. Reviewed by: Jeff Trawick 	r99913
----------------------------
Prevent the server from crashing when entering infinite loops. The new LimitInternalRecursion directive configures limits of subsequent internal redirects and nested subrequests, after which the request will be aborted. [William Rowe, Jeff Trawick, Andr Malo] PR: 19753 (and probably others) 	r99911
----------------------------
update metafiles Submitted by: Jeongho Jeon <maczniak@operamail.com> 	r99883
----------------------------
make ExpiresByType work on dynamic documents 	r99850
----------------------------
mod_so can only be built statically. If the user wants modules to be built as DSOs by default (eg. ./configure --enable-mods-shared=most) then we must override the default, otherwise none of the modules will end up being installed (even though they'll get built). 	r99844
----------------------------
if there are any ExpiresByType directives for the current scope, defer the setting of the expiration header fields to an output filter, which can then apply any ExpiresByType or ExpiresDefault settings -- including to dynamic documents. 	r99827
----------------------------
update metafiles Submitted by: Jeongho Jeon <maczniak@operamail.com> 	r99803
----------------------------
update metafiles. 	r99756
----------------------------
general mod_proxy docs cleanup: - add documentation for ProxyIOBufferSize (review desired) - fix context lists of ProxyPass and ProxyPassReverse - add more notes about the accompanying modules (_http, _ftp, _connect) - markup & reformatting (sorry for the big diff) -> update transformation 	r99725
----------------------------
Ensure that ssl-std.conf is generated at configure time, and switch to using the expanded config variables to work the same as httpd-std.conf PR: 19611 	r99719
----------------------------
Throw a warning if AllowOverride is used inside of <Location> or <Files>. Unfortunately there's no clean way to detect <DirectoryMatch>. It would not be sufficient, because <Directory ~> should be checked then, too. Hmm. PR: 19512 	r99695
----------------------------
introduce cross-language links. The links to all available languages of a document will show up on the top and the bottom of a page. Additionally, change the default config to deliver the desired results. 	r99684
----------------------------
add fresh suexec manpage 	r99639
----------------------------
first run of `build modulelists` (automatically called from `build metafiles`) 	r99509
----------------------------
Be a little more consistent with the pathnames, and move some DavLockDB details to its directive docs. 	r99485
----------------------------
"Some serious updates to the top section of the mod_dav docs.  Many of the ideas are stolen from Greg's mod_dav site.  Some specifics: - Change recommendations about where to place the dav lockfile and be specific about required permissions. - Remote the HEAD from the <Limit> block, since it is implied by GET. - Add a security section discussing file permissions, auth issues, denial of service, etc. - Add a ""complex config"" section discussing the dynamic content issue. Review requested.  Unfortunately, I can't check in the html because of transformation problems in my setup. "	r99469
----------------------------
Add note about when to use <location>.  This dupes what is already discussed in sections.html, but it is important enough to repeat. 	r99467
----------------------------
mod_log_config: Add the ability to log the id of the thread processing the request (%I). 	r99439
----------------------------
"Fixed a segfault when multiple ProxyBlock directives were used. PR:		19023 Obtained from: Submitted by:	Sami Tikka <sami.tikka@f-secure.com> Reviewed by: "	r99363
----------------------------
add metafiles. These files contain information that is relevant for one document but all variants of it (i.e. one basename), such as avail. languages, formats etc. (Note, that it's still a noop for the output.) 	r99330
----------------------------
Note that changes in the default httpd.conf do not violate our backward-compatibility policy.  We assume that people preserve their own config files, rather than going back to the default each time. 	r99314
----------------------------
Move the dropped '--enable-layout' subdir logic into APR_SUBDIR_CONFIG macro as a third parameter rather than manually computing it ourselves. Add the ' prefix'd --enable-layout so that this can work with an autoconf-2.54+ generated configure.  (Previously, the option would not be dropped with 2.54 or 2.57 since it unconditionally adds single-quotes which our case statement would not catch.) Try to shorten long invocations of APR_SUBDIR_CONFIG where possible. 	r99257
----------------------------
If an errordocument-cgi responds a location header it should really add a status header. PR: 18332 	r99216
----------------------------
Document the ProxyBadHeader directive. (and update transformation) PR: 18623 Reviewed by: Joshua Slive 	r99214
----------------------------
- openssl won't compile unless perl Configure is called. - update the openssl version number to 0.9.7 	r99105
----------------------------
Fix a serious bug where the 'next' generation of the server would open a brand new mutex.  This patch creates a single mutex in the first config phase that survives for the life of the server (server->process->pool). Now one server generation to the next will respect the same mutex between one another, while the previous generation is still mopping up. 	r99095
----------------------------
Need to report a select() error vs a timeout.  Also avoid hogging the CPU on an error. 	r99065
----------------------------
Fix a couple typos: explicitly, substitute. Grammar: add missing comma, -> a hyperlink. 	r99044
----------------------------
Fix chinese default page. Netware config still needs to be sync'd (whereever it is). - the encoding was wrong (iso-8859-1 instead fo big5, so (re-)added the appropriate extension(s)) - Fixed AddLanguage directives in default configs - Fixed type map file. PR: 18025 	r99040
----------------------------
uh, I forgot to add the transformated mod_nw_ssl.html ;-) additionally RewriteOptions was now introduced in 2.0.45. 	r99023
----------------------------
Added documentation for the directives SecureListen and NWSSLTrustedCerts that are provided through mod_nw_ssl for NetWare 	r99007
----------------------------
Added the optional ssl_enable functions to allow mod_proxy to hook into mod_nw_ssl on NetWare.  This allows a unsecure connection to be upgraded to a secure connection when required by mod_proxy.  Also added the directive NWSSLTrustedCerts to allow an administrator to provide a list of certificates used to upgrade the secure connections. 	r99006
----------------------------
"change directive from compressionlevel to deflatecompressionlevel PR: Obtained from: Submitted by:	Ian Holsman, Andre Malo Reviewed by: "	reflect
----------------------------
Fixed <default> to AuthDigestProvider. 	r98950
----------------------------
* include/http_config.h (ap_get_module_config, ap_set_module_config): Use the macro Noticed by: Jeff Trawick 	r98921
----------------------------
*gna* get/set_module_config are now defined in util_debug.c. We have to link against it. 	r98914
----------------------------
Minor MMN bump: Forward port: Escape special characters (especially control characters) in mod_log_config to make a clear distinction between client-supplied strings (with special characters) and server-side strings. This was already introduced in version 1.3.25. Obtained from: Patch in 1.3.25-dev by Martin 	r98912
----------------------------
* include/http_config.h (ap_get_module_config, ap_set_module_config): Always declare. * include/httpd.h (ap_strchr, ap_strchr_c, ap_strrchr, ap_strrchr_c, ap_strstr, ap_strstr_c): * server/util_debug.c (ap_get_module_config, ap_set_module_config, ap_strchr, ap_strchr_c, 	r98903
----------------------------
add documentation of RewriteOptions MaxRedirects 	r98864
----------------------------
Prevent endless loops of internal redirects in mod_rewrite by aborting after exceeding a limit of internal redirects. The limit defaults to 10 and can be changed using the RewriteOptions directive with the new MaxRedirects=n argument. (The latter required some restructuring of the RewriteOptions evaluation code). (Documentation patch follows asap) PR: 17462 	r98863
----------------------------
Mention that ProxyPassReverse takes the hostname in respect to the UseCanonicalName setting PR: 8625 	r98861
----------------------------
be consistent with 1.3 and use .sv extension for Swedish documents The index file itself didn't change (only renamed) The netware config still needs to be changed. PR: 12877 	r98854
----------------------------
mod_rewrite: Fix some problems reporting errors with mapping programs (RewriteMap prg:/something). the wrong field was specified when trying to log the name of the program that couldn't be started on systems where apr_proc_create() uses fork() 	recent
----------------------------
When using Redirect in directory context, append requested query string if there's no one supplied by configuration. PR: 10961 	r98796
----------------------------
document new features of setenvif and mod_negotiation. 	r98768
----------------------------
insert LoadModule directives only outside of sections. PR: 9012 	r98721
----------------------------
Allow restart of httpd to occur even with syntax errors in the config file.  (Out-of-date DSOs with bad MMNs will still be fatal unfortunately.) Add return parameter to ap_process_config_tree - OK on success, !OK on syntax error.  We will no longer call exit() from ap_process_config_tree. The caller must exit if there is an error (makes sense anyway).  This allows the initial start-up code to delay the exit until trying to let the signal_server optional function execute first. (The chances are that the syntax error isn't in the PidFile directive.  If that happens, we'll try the default one.  Oh, well.) PR: 16813 	r98693
----------------------------
Use APR_LAYOUT instead of APACHE_LAYOUT in configure. (We need a bug fix in this code, so let's merge the macro first.) PR: 15679 	r98685
----------------------------
Use correct quoting mechanism for APR_SUBDIR_CONFIG. 	r98675
----------------------------
"clarify the meaning of ""SetHandler None"" "	r98663
----------------------------
Extend the SetEnvIf directive to capture subexpressions of the matched value. 	r98659
----------------------------
extend the check for Alias overlappings. Now test also previous (Script)AliasMatch commands. 	r98657
----------------------------
Replace the section on IPv6 with new text that accounts for --[enable|disable]-v4-mapped configure option and the varying default for it. PR:            16739 	r98650
----------------------------
mod_log_config optional hook change PR: Obtained from: Submitted by: Reviewed by: 	r98649
----------------------------
drop the guess_domain function. Our docs say about AuthDigestDomain: This directive should always be specified and contain at least the (set of) the Authorization header for every request sent to this server. guessing the parameter is somewhat bogus. guess_domain() also resulted sometimes in relative URIs, non-URI strings or empty strings, which caused a lot of problems. According to the docs, the domain parameter will be omitted now, if not specified. This is exactly, what one would expect. 	root
----------------------------
Fix suexec compile error under SUNOS4, where strerror() doesn't exist. PR: 5913, 9977 Submitted by: Jonathan W Miner <Jonathan.W.Miner@lmco.com> 	r98618
----------------------------
Let suexec send a message to stderr, if it failed or its policy was violated. This message appears in the error log and allows for easier debugging. PR: 10773 Proposed again by: Joshua Slive 	r98603
----------------------------
Fix up load dependancies to avoid LoadModule ordering 	r98585
----------------------------
Fix mod_cern_meta to not create empty metafiles when the metafile searched for does not exist. PR:             12353 Submitted by:   Owen Rees <owen_rees@hp.com> 	r98561
----------------------------
"Introduce ""prefer-language"" environment variable, which allows to influence the negotiation process on request basis to prefer a certain language, e.g.: SetEnvIf Request_URI ^/manual/foo/ prefer-language=foo "	r98512
----------------------------
Fix a problem whereby multiple MMapFile directives would cause a segfault on startup. mod_file_cache keeps a hash table in the cmd->pool and puts an entry in that hash table for each of its files and mmaps, all of which are opened into cmd->pool.  But it registered a cleanup on cmd->pool that would walk the hash table and close each file and delete each mmap, even though by the time that happened those things would have been done already anyway by the files' and mmaps' own cleanups on cmd->pool.  So it was deleting mmaps that were already cleaned up and closing files that were already cleaned up in all cases.  This has never been valid... amazed it ever worked.  But apparently the true bogosity wasn't revealed until the new mmap cleanup code went into APR. PR: 16313 	r98463
----------------------------
Comment out .gz etc. AddEncoding lines in our default configuration. Current browsers have a tendency to decompress the data when no one really wants it to do that.  If you want the old behavior that leads to transparent decompression by modern browsers, uncomment these lines.  But, this shouldn't be our default. 	r98436
----------------------------
The correct syntax is <ProxyMatch> not <Proxy>. 	r98358
----------------------------
- specify some mistakables discussed while reviewing the german translation - set a link from AccessFileName to AllowOverride - <Files> and <Location> sections and .htaccess files may be used for more then access control - state an example more precisely Thanks to Michael Schroepl <Michael.Schroepl@telekurs.de> and nd for their suggestions. 	r98336
----------------------------
"move rfc1413 code to a new module ""metadata:mod_ident"". The rfc1413 code itself is mostly c&p, but can still bear some rework ... This patch removes the global ap_rfc1413 function and the ap_rfc1413_timeout variable. It also introduces a new config directive IdentityCheckTimeout (default 30 sec). Reviewed by: Justin Erenkrantz "	r98320
----------------------------
With the latest patch to config.c wildcards now work. 	r98265
----------------------------
"Once again, allow <Directory ""C:\Users\*\html_files""> or other wildcard patterns in Directory blocks.  Note a similar problem with Includes *.conf "	r98260
----------------------------
Add IndexOptions IgnoreCase description. 	r98184
----------------------------
"Bring forward the IndexOptions IgnoreCase option to mod_autoindex from Apache 1.3 for both 2.0 and 2.1 (since the patch/feature was previously accepted for 1.3, I'm committing without the usual vote specific to 2.0.)  Only small modification of David's patch to avoid future reformatting of the options list and better handle the strnatcmp side effects. PR: 14276 Obtained from: Submitted by:	David Shane Holden <dpejesh@yahoo.com> Reviewed by: "	r98181
----------------------------
well, it's a backstopper. So stop also misconfigured Digest authentication requests. e.g.: AuthType Digest AuthName foo require user nd with no mod_auth_digest present; or consider a TP digest module with Authoritative funcionality etc. It's still a question whether we should throw a 500 instead of 401 in that case... 	r98167
----------------------------
Add a generic locking provider to DAV - mod_dav_lock.  Other DAV providers can use the dav_hooks_locks_generic structure to implement locking in a non-optimal, but compliant fashion.  (Use 'dav-lock', 'generic', '0' to ap_lookup_provider to retrieve it.) Use the DavGenericLockDB directive to configure the location of the lock database (may be server-relative or absolute). This allows all DAV providers to use a baseline locking API rather than roll their own. This code is based mainly off the mod_dav_fs locking code (which uses the on-disk storage for locking), but removing components that aren't needed in a non-file-backed repository (such as recording inodes). 	r98161
----------------------------
document DeflateFilterNote changes 	r98151
----------------------------
"The patch allows the user to log the accurate filter input and output byte count, instead of only the rounded compression ratio. The DeflateFilterNote directive will be extended as follows: DeflateFilterNote [type] name type can be one of ""input"", ""output"" or ""ratio"". ""ratio"" is assumed if the type is omitted (backwards compatible). "	r98149
----------------------------
provide better error messages for the multiviewsmatch directive. 	r98145
----------------------------
"Use saner default config values for suexec. OtherBill and Brad have confirmed that including ap_config_layout.h isn't a problem on non-Unix platforms as they don't use suexec. PR: 15713 Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Justin Erenkrantz "	r98134
----------------------------
allow RewriteEngine Off even if Options -FollowSymlinks is set. PR: 12395 Reviewed by: Justin Erenkrantz 	r98122
----------------------------
- mpm_common: * fixed the <modulelist>s in mpm_common * moved AcceptMutex to mpm_common; * added BS2000Account to mpm_common * fixed several default values * moved MaxThreadsPerChild and NumServers out to perchild * rearranged some stuff and added several comments, that I found useful - mpm_netware: * MaxThreads 2048 (as maximum and default) - perchild: * extended the explanations about using different user ids. Hope, that's * extended and adjusted the directive descriptions - prefork: * moved AcceptMutex to mpm_common (as stated already above) - mpm_winnt: * added reference to ScoreBoardFile - worker: * added reference to AcceptMutex - general: markup & formatting 	r98075
----------------------------
- some markup improvement - normalize notation of directive arguments - document ScriptInterpreterSource registry-strict - some odds and ends 	r98046
----------------------------
- Add MKDEP to config_vars.mk file - Do not print out the commands used when doing 'make depend' 	r98036
----------------------------
Rename CacheMaxStreamingBuffer to MCacheMaxStreamingBuffer. Move implementation of MCacheMaxStreamingBuffer from mod_cache to mod_mem_cache. MCacheMaxStreamingBuffer now defaults to the lesser of 100,000 bytes or MCacheMaxCacheObjectSize. This should eliminate the need for explicitly coding MCacheMaxStreamingBuffer in most configurations. [Bill Stoddard] 	r98007
----------------------------
Document the AuthLDAPCharsetConfig directive 	r98000
----------------------------
- markup, reformatting - remove outdated info, that mod_mime_magic has to be placed before mod_mime in the config - kept the <pre>d examples, but squeezed them to cause less problems - reformatted the copyright notes from <pre> to <note>s 	r97926
----------------------------
After some productive feedback and no negative feedback, introduce SSLEngine upgrade so that we can begin and continue to support these facilities.  This makes it simpler to keep this effort (while we have no known clients that support Connection: upgrade at this time), and begin refactoring more of SSL into smaller and tighter (and then optional) components. 	r97913
----------------------------
After some productive feedback and no negative feedback, introduce SSLEngine upgrade so that we can begin and continue to support these facilities.  This makes it simpler to keep this effort (while we have no known clients that support Connection: upgrade at this time), and begin refactoring more of SSL into smaller and tighter (and then optional) components. Submitted by: Ryan Bloom Reviewed by: William Rowe, Joe Orton 	r97912
----------------------------
Added character set support to mod_auth_LDAP to allow it to convert extended characters used in the user ID to UTF-8 before authenticating against the LDAP directory. The new directive AuthLDAPCharsetConfig is used to specify the config file that contains the character set conversion table. 	r97910
----------------------------
ap_get_mime_headers:  whoops - need to insure that we use a configured field size limit if there is one 	r97875
----------------------------
- some reformatting - markup & <em> -> <var> - modify the argument list of MultiViewsMatch in order to better reflect the possibilities - add several <override>s and some <seealso>s 	r97833
----------------------------
- markup & reformatting - some rearranging of the content - fix conextlists. with the current code it doesn't make sense to put any directive into an virtual host (the config pointer is static...) (blame me, if I'm wrong) 	r97827
----------------------------
core_output_filter: re-instate the deferred_write pool patch so we don't leak fd's until the end of a keepalive connection. Thanks to: Jeff Trawick for the original concept Sander Striker for the mmap ring idea Cliff Woolley for implementing the above change 	r97824
----------------------------
full clean-up of the auth-docs; feel free to shake out any nits, if there are (probably there *are* :) main changes: - introduce docs for mod_authn_default, mod_authz_default and mod_authz_user - fix argument lists of the provider directives - fix the examples (intended to be better :) - introduce the AuthDigestShmemSize directive - remove AuthDigestUser/GroupFile - mention htdigest in AuthUserFile docs - mod_authn_anon is now an authn provider - markup Reviewed by: Astrid Keler <kess@kess-net.de> 	r97823
----------------------------
"If an httpd.conf has commented out AddModule directives, apxs -i -a will add an un-commented AddModule directive for the new module, which breaks the config. PR: 11212 Obtained from: Submitted by:	Joe Orton Reviewed by:	Bill Stoddard, Thom May "	r97820
----------------------------
clarify the no-proxy explanation of Addoutputfilterbytype. Thanks to Rich for pointing out. 	r97816
----------------------------
mod_authn_anon should be a provider This drops the Anonymous_Authoritative directive Submitted by: Andre Malo <nd@perlig.de> 	r97805
----------------------------
"outch. there are some possible NULL pointer references. Have you ever tried AuthDigestProvider dbm? This results in a great kaboom. The patch makes apache throw an error, if someone tries a provider, that doesn't support the particular auth scheme. Submitted by:	Andre Malo <nd@perlig.de> "	r97802
----------------------------
"when asking the providers for authentication, the main loop should not only  break, if access is granted. It should also break, if access was *denied*  by one provider. To be safe, it has to break also, if an error occured. So  the patch turns the condition around and continues only, if the user was  not found. I find it also weird, that if auth was denied (by password usually), the  AuthBasicAuthoritative behaviour can override that by ""passing to lower  modules"". The patch changes that behaviour, too. Justin notes: I'm kind of on the fence about that.  I was originally thinking optimistically, but yeah, it might make sense to do it pessimistically.  If there's any error, bug out. Submitted by:	Andre Malo <nd@perlig.de> "	r97801
----------------------------
Take apr include dir from beginning, not end of list given by apu-config. Submitted by: Brian Havard 	r97793
----------------------------
Listing the URLs which are not cachable is useful for building the CacheDecline URL list for the config file. 	r97772
----------------------------
Add a commented LoadModule entry to the .conf file for mod_ext_filter 	r97742
----------------------------
update to include mod_setenvif fix 	r97706
----------------------------
"Fix for BrowserMatchNoCase, which was incorrectly treating non-regex patterns as case-sensitive Submitted by:	Andr Malo Reviewed by:	Brian Pane "	r97705
----------------------------
If apr and apr-util are not in-tree, we need to be able to find the include directory for each in order to generate the server/exports.c and server/export_vars.h files. configure.in: server/Makefile.in: 	r97673
----------------------------
If apr and apr-util are not in-tree, we need to be able to find the include directory for each in order to generate the server/exports.c and server/export_vars.h files. configure.in: - Provide APR_INCLUDEDIR, APU_INCLUDEDIR. server/Makefile.in: - Use $APR_INCLUDEDIR $APU_INCLUDEDIR vars. - Add export_files target to generate a list of headers with symbols to export, use that list to generate exports.c and export_vars.h. 	r97672
----------------------------
Changes to reduce dependency on in-tree apr and apr-util. Change AC_CONFIG_AUX_DIR in configure to build from srclib/apr/build. Have buildconf copy the needed files (config.guess, config.sub, PrintPath) from srclib/apr/build to build. Change binbuild.sh to stop using srclib/apr. This gets to to where ./configure --with-apr --with-apr-util actually works without an in-tree apr and apr-util, though we still need them in-tree to run buildconf. 	r97671
----------------------------
Accept '%%' in CustomLog format strings to produce a literal '%'. Submitted by: Andr Malo <nd@perlig.de> 	r97644
----------------------------
Add <IfModule> conditionals around non-core directives. Submitted by: Tim Wilde <twilde@dyndns.org> 	r97642
----------------------------
Reorder the definitions for mod_ldap and mod_auth_ldap within config.m4 to make sure the parent mod_ldap is defined first. This ensures that mod_ldap comes before mod_auth_ldap in the httpd.conf file, which is necessary for mod_auth_ldap to load. PR: Obtained from: Submitted by: Reviewed by: 	r97596
----------------------------
"Fix critical bug in new --enable-v4-mapped configure option implementation which broke IPv4 listening sockets on systems with IPV6_V6ONLY socket option. That option should only be done on IPv6 listening sockets. Submitted by:	hiroyuki hanai <hanai@imgsrc.co.jp>] Reviewed by:	Jeff Trawick "	r97595
----------------------------
mod_autoindex: AddDescription directives for directories now work as in Apache 1.3, where no trailing '/' is specified on the directory name.  Previously, the trailing '/' *had* to be specified, which was incompatible with Apache 1.3. PR:       7990 	r97590
----------------------------
"Correct the title of the <note> about the scope of AllowOverride, and also remove the comment about the context being incorrect. The ""help"" link for ""Context"" tells you to consult sections.xml for exceptions, and this is documented there. "	r97582
----------------------------
Opened <Directory> but closed </DirectoryMatch> 	r97576
----------------------------
fix the sample worker configuration...  it didn't make any sense previously, and you'd see something like this when starting Apache with it: WARNING: MaxClients (8) must be at least as large large as ThreadsPerChild (25). Automatically increasing MaxClients to 25. PR:              10430 	r97573
----------------------------
- add <seealso> to mod_log_config - use same log format table style as mod_log_config -> update transformation 	r97561
----------------------------
PR: Debian Bug report #169431 -- Documentation of AllowOverride strongly (and wrongly) implies it is valid within a <Location> directive. This patch corrects that, as you really can't use AllowOverride in Files or Location sections. 	r97551
----------------------------
core_output_filter: back out changes to clean up resources before the end of a keepalive connection until we can figure out how to do it safely for mmap buckets 	r97539
----------------------------
- <em> -> <var> - add markup - fix contextlist of ISAPIReadAheadBuffer -> update transformation 	r97538
----------------------------
"more formal changes: - moved path_info section below the ""enabling"" section - dropped ""Using Server Side Includes for ErrorDocuments"" section and added a simple seealso instead. I don't see, that we need a separate section to set a link. - created an own subsection for every SSI element and put an overview table on top of it, this resolves also the mozilla problem with nested <dl>s, that was still present (sometimes) - fixed some typos - markup. content changes: - added a note about the behaviour of fsize/flastmod virtual - removed apache 1.2 compatibility notes (this is a 2.x documentation) - added a compat note in the module overview table - added description for QUERY_STRING_UNESCAPED - splitted flow control descriptions (=, != vs. <, <=, >, >=; the former allow regexps, the latter don't) - added a sentence and an example about regexp capturing - mentioned the literal comparison (vs. numerical) - includesNOEXEC allows only text/* ressources to be included. mentioned that. "	r97535
----------------------------
"- adding markup - reformatting a bit - <em> -> <var> - add seealso to UseCanonicalName - add explicit XHTML example - "" inside quoted text is not impossible, it can be written as &quot; "	r97520
----------------------------
Add --[enable|disable]-v4-mapped configure option to control whether or not Apache expects to handle IPv4 connections on IPv6 listening sockets.  Either setting will work on systems with the IPV6_V6ONLY socket option.  --enable-v4-mapped must be used on systems that always allow IPv4 connections on IPv6 listening sockets. Note: As the ssl config file is not automatically generated and PR:   PR 14037 (Bugzilla), PR 7492 (Gnats), various dups of these PRs 	r97516
----------------------------
- <em> -> <var> - reformatting + adding markup - add optional env=[!]variable to formal syntax definition - fix processing order (<Location> after <Files>) - turn bogus <ul>s to <dl> - add table border - nothing else ;-) 	r97513
----------------------------
A couple long-overdue changes to configuring: - Remove the over-detailed and out-of-date description of Include directories. - Link Rich's .htaccess tutorial. 	r97504
----------------------------
"core_output_filter: use the current input brigade's pool for the ""more"" brigade when we defer network writes due to small data + keepalives.  This prevents leaking resources in the ""more"" brigade until the end of the connection. "	r97503
----------------------------
add change to mod_setenvif, and update .ja.jis files 	r97495
----------------------------
Tighten up the writing a little and add an even simpler configuration example. 	r97483
----------------------------
A couple core docs fixes: 1. Document the fnmatch wildcards in Include. 2. Add a couple ServerSignature/ServerTokens <directive> markups. 	r97478
----------------------------
Fix a couple problems with the EnableSendFile docs: 1. Add a <compatibility> line. 2. Mention SMB in addition to NFS. 3. Fix a couple small gramatical things. 4. <example> is not a <pre> environment. 	r97475
----------------------------
Improves the user friendliness of the CacheRoot processing over my last pass. This version avoids the pool allocations but doesn't avoid all of the runtime checks. It no longer terminates during post-config processing. An error is logged once per worker, indicating that the CacheRoot needs to be set. [Paul J. Reder] 	r97466
----------------------------
use a subpool of c->pool for resources which are set aside, then clear it after writing the data to the network.  This closes files sooner with keepalive connections. 	r97462
----------------------------
Turn DOWN the volume of these errors... they are low enough level notes to land at loglevel INFO 	r97439
----------------------------
- <em> -> <var> (hey, that was easy :)) - add some <module>s - add <seealso>s to suexec.html - add explicit <seealso> from mod_cgid to mod_cgi - add short description of the ScriptSock directive -> update transformation 	r97436
----------------------------
"Since the directives CacheIgnoreCacheControl and CacheIgnoreNoLastMod are AP_INIT_FLAG one should be able to set them explicitely to ""Off"". Submitted by: Andre Malo Reviewed by: Paul J. Reder "	r97428
----------------------------
- <em> -> <var> - add <seealso>s to AcceptPathInfo and the CGI spec - little markup improvements - whitespace reformatting -> update transformations 	r97421
----------------------------
formal: - <em> -> <var> - markup changes - some whitespace reformatting content: - fix directive contexts - clarify the flag directives and add default values - add short description for CacheDefaultExpire 	r97418
----------------------------
"The value emitted by ServerSignature now mimics the Server HTTP header as controlled by ServerTokens. Submitted by:	Francis Daly <deva@daoine.org> Reviewed by:	Justin Erenkrantz "	r97416
----------------------------
formal changes: - <em> -> <var> - markup improvements - allow class attribute for <li> content changes: - remove the references to apache 1.3 in IndexOptions descriptions - clarify (prior non-existing) incremental index options example... 	r97412
----------------------------
SSIUndefinedEcho never defaulted to <!-- undef --> btw: could someone fix the directive description in 	r97395
----------------------------
Mr. Trawick was dead on, and this revealed a much bigger bug. Factor out the opts/override merging (since we do it three times) and eliminate all the nasty goto's.  This bug likely caused all sorts of dir_walk configuration issues including htaccess issues. Also add a few more docs where things aren't so obvious. PR: 14147 	r97380
----------------------------
Add examples of using ErrorLog, particularly logging to syslog. 	r97318
----------------------------
Change the CacheRoot processing to check for a required value at config time. This saves a lot of wasted processing if the mod_disk_cache module is loaded but no CacheRoot was provided. This fix also adds code to log an error and avoid useless pallocs and procesing when the computed cache file name cannot be opened. This also updates the docs accordingly.  [Paul J. Reder] 	r97291
----------------------------
Change the CacheRoot processing to check for a required value at config time. This saves a lot of wasted processing if the mod_disk_cache module is loaded but no CacheRoot was provided. This fix also adds code to log an error and avoid useless pallocs and procesing when the computed cache file name cannot be opened. This also updates the docs accordingly.  [Paul J. Reder] 	r97290
----------------------------
Fix an error in the <default> for MaxSpareThreads. 	r97266
----------------------------
Fix breakage in mod_mem_cache caused by the EnableSendFile patch. Specifically, we need to save the file open flags from the file opened by the default handler. Retrive those flags when building the apr_file_t on a cache hit. 	r97265
----------------------------
- fix context info of ModMimeUsePathInfo (ACCESS_CONF) - improve markup - fix some typos - update the transformation (in that order ;-) 	r97257
----------------------------
For the new EnableSendfile directive... 	r97222
----------------------------
A happy outcome is worth waiting for... add docs for AddOutputFilterByType sorry for the long delay. 	r97221
----------------------------
Document EnableSendfile.  I'm presuming that directives.html* and quick_reference.html* are now autogenerated.  Could someone run the xml builder and commit the compiled results? 	r97208
----------------------------
Introduce an EnableSendfile directive (defaulted to ON) to allow users to disable sendfile mechanics for NFS volume mounts and other kernel objects that don't support sendfile.  And EnableSendfile off can be used to help narrow bugs down to the sendfile mechanics or eliminate the possiblity that sendfile is a factor on any given platform. 	r97205
----------------------------
"If the server is configured with an accept mutex type that isn't comaptible with perchild, then force it to be FCNTL. PR:	13311 "	r97180
----------------------------
"Remove an unwise encoding=""none"" when dealing with the REDIRECT_REQUEST_METHOD because of what it might contain if the server is configured to handle unknown methods. "	r97161
----------------------------
"context list information are now taken from $lang.xml file. the module file holds the *untranslated* ""server config"", ""virtual host"" etc. "	r97139
----------------------------
"add a BrowserMatch directive to enable redirect-carefully for the Gnome VFS so that WebDAV works correctly with Nautilus and other code using the Gnome VFS PR:               12901 Submitted by:	  Rusty Conover <rconover@infogears.com> Reviewed by:      Jeff Trawick "	r97111
----------------------------
- add mod_logio entry to sitemap - add mod_logio transformation - add lacking section id to mod_log_config.xml (and update transformation) 	r97003
----------------------------
"Allow the UserDir directive to accept a list of directories. This matches what Apache 1.3 does.  Also add documentation for this feature. PR:	9299 Submitted by:	Jay Ball <jay@veggiespam.com> "	r97001
----------------------------
Re-order header files in suexec.c.  This adds apr.h, which is required to get the apr macros.  Other than that, it is just for clarity. 	r96995
----------------------------
SuExec should use /usr/local/apache2 not /usr/local/apache as the default directory. PR:     8789, 13104 Submitted by:   SangBeom han <sbhan@os.korea.ac.kr> 	r96994
----------------------------
"Fix the per-server config merge function in mod_cache to properly inherit CacheMaxStreamingBuffer PR: Obtained from:  Matthieu Estrade <estrade-m@ifrance.com> Reviewed by:	Brian Pane "	r96972
----------------------------
I just spent a few minutes helping someone on the users list figure out how to use <IfModule> with php4 and Apache2 (solution <IfModule sapi_apache2.c>).  Document the technique for posterity. Also, try to discourage people from adding random <IfModule> sections just for the heck of it. 	r96958
----------------------------
Removed an extra apr_atomic_init() call from the mem_cache post-config code (the APR init takes care of this at httpd startup) 	r96949
----------------------------
Remove mention of AuthDBMAuthoritative and AuthUserFileAuthoritative directives. 	r96923
----------------------------
Fix broken link to rewritemap in rewritelock description of the quickreference. Relative anchors to directives may only be set, if we're actually transforming the particular <modulesynopsis> document. 	r96922
----------------------------
add a note, that mod_alias and mod_userdir are forced to be run before mod_vhost_alias Reviewed by: Joshua Slive 	r96917
----------------------------
Rework the apxs -cp command to work when the source dir isn't available by querying apr-config and apu-config at link-time instead. (Note that the $apr_config value in configure.in isn't sufficient as we need to know where apr-config will be when we execute apxs later on - hence the --bindir option to apr-config and apu-config.) 	r96905
----------------------------
add missing unit `days' for CookieExpires 	r96880
----------------------------
Add ability to use multiple providers for basic and digest authentication. The syntax is: AuthBasicProvider file dbm AuthUserFile conf/basic-user AuthDBMUserFile conf/basic-user-dbm 	r96869
----------------------------
fix context of CacheNegotiatedDocs 	r96851
----------------------------
Consistify the configuration files for the .41 release.  This brings all three flavors back into sync. With luck, I won't be doing this again, but I need some time to play with awk magic first.  {The nested <IfModule> directives don't make this all that simple.} 	r96841
----------------------------
Obtained from: docs@httpd Submitted by: Thom May Reviewed by: Rich Bowen Hi, this chunk of the install page is no longer accurate; you can do ./configure --enable-layout=Debian --prefix=/blah and that works fine, with all options being respected. Cheers, -Thom 	r96837
----------------------------
Allow AddOutputFilterByType to take in multiple filters. 	r96819
----------------------------
Revert the examples to use AuthGroupFile 	r96798
----------------------------
- fix a typo - mention the Allowoverride FileInfo in RewriteOptions' synopsis - mention also, that pcre is used now (RewriteCond, RewriteRule) and set a link to perldoc.com (`perldoc perlre`) - add compatibility note for the cookie-flag (RewriteRule) - add RewriteMap dbm type choice compatibility note 	r96796
----------------------------
mention default value of IndexOrderDefault transform update: directives.html.en 	r96784
----------------------------
Add English doc for MaxMemFree Obtained from: Sander Striker 	r96782
----------------------------
fix links to the options directive. (hope to) clarify, when parameters have to be quoted for the AddAlt* directives (please correct my English if neccessary :) 	r96778
----------------------------
"Add support for using fnmatch patterns in the final path segment of an Include statement (eg.. include /foo/bar/*.conf). and remove the noise on stderr during config dir processing. Submitted by:	Joe Orton <jorton@redhat.com> Reviewed by:	Ian Holsman, Brian Pane "	r96776
----------------------------
Stage #2 of aaa rewrite: Add provider support so that mod_authn_* modules do not have to re-implement basic auth and to allow mod_auth_digest (and other modules) to leverage the authn backends. Adds AuthBasicProvider and AuthDigestProvider directives. This also moves a lot of the basic auth handling code inside of mod_auth_basic (but does not remove the code in server/protocol.c - that will have to wait for a version bump so that we don't totally bust old modules). This patch incorporates code review comments by Greg Stein. 	r96739
----------------------------
Change ModMimeUsePathInfo example from .html to .shtml Suggested by: Joshua Slive 	r96725
----------------------------
Add documentation of ModMimeUsePathInfo directive. (When I did a rebuild, it wanted to regenerate every file, so I'm not exactly sure what else is going to be checked in.  Did someone change a master file without re-running the transformations?) 	r96724
----------------------------
A couple small tweaks to the public_html tutorial. 1. Add a <seealso> to urlmapping.html. 2. Take some markup out of a <title>.  It is technically allowed, but probably not a good idea. 3. Replace <DirectoryMatch /home/*/cgi-bin> with <Directory /home/*/cgi-bin> since that is a shell-style wildcard and not a regular expression.  Also off non-CGI Options in a cgi-bin directory. 	replace
----------------------------
"Simplify mod_dav's handler. The old mechanism would jam a handler name in whenever DAV was configured for a directory. i.e. there weren't really any tests other than ""is DAV handling this directory?"" The name was just a marker which was tested later. The new mechanism simplies performs the test right in the handler. This is now possible since all handlers are called (before, you *had* to set your own name so that your handler would be called). Since the test is actually quite straightforward, we actually gain overall: no more fixups hook, and a couple integer comparisons (rather than a string compare). And hoo... the code is simpler, too. This code has been verified with ""litmus 0.8"", my own little continues to work, and it doesn't appear that the changes interfered with other operation. "	regression
----------------------------
Add ModMimeUsePathInfo directive. This directive allows mod_mime to lookup extension information for content served via Location blocks so that content-type, filters, etc can be applied to non-file content. (I wouldn't be shocked if we end up changing the directive name.) 	r96644
----------------------------
Added optional support for caching streamed responses in mod_cache. Notes: * I've created a new config directive CacheMaxStreamingBuffer, * A big block of code in cache_in_filter() got wrapped in an 	r96631
----------------------------
A little fine-tuning of the new sections doc. This doc could still use some help from an apache configuration-merging expert. 	r96618
----------------------------
Add reference to RemoveInputFilter and RemoveOutputFilter. 	r96614
----------------------------
"Fix FileETag None directive. - Fix segfault on strlen computation on the empty string in vlv case - If the etag is """", don't set the ETag header to be """" - leave the header NULL instead. Andrew's patch would change ap_meets_condition to accept """", but Justin thinks it would be better just to sidestep it all together and not set ETag when it would be """". PR: 12207 Submitted by:	Andrew Ho <andrew@tellme.com> "	r96609
----------------------------
update README.ldap and config.m4 to reflect new location of httpd ldap code 	r96595
----------------------------
Update the defaults on ThreadsPerChild and ThreadLimit and not that ThreadLimit is now part of mpm_winnt as well as update a few transformations. 	r96591
----------------------------
config.log and config.status are created by configure and need to be removed by make distclean 	r96576
----------------------------
suexec is sometimes built by make so it needs to be removed by make clean 	r96575
----------------------------
envvars-std is build by configure so it needs to be removed by make distclean or make extraclean 	r96570
----------------------------
Win32: Add ThreadLimit directive to the windows MPM 	r96555
----------------------------
Remove CacheOn config directive since it is set but never checked. No sense wasting cycles on unused code. Besides, the only truly bug free code is deleted code. :)   [Paul J. Reder] 	r96548
----------------------------
introduce 2 new callback oppurtunities to allow a 3rd party module to do the actual writing of the log file. also change buffered writing to make it runtime configurable instead of compile time configurable. i'm not 100% on the buffered output, mainly because I'm not sure it worked in a thread safe way *before* this change 	r96538
----------------------------
Corrected misspelled ISPAIFileChache/ISAPIFileCache directive into ISAPICacheFile 	r96536
----------------------------
Corrected the context and added the corresponding override information. Corrected default values. Corrected the ISPAIFileChache/ISAPIFileCache directive. The correct name is ISAPICacheFile. Added description for the ISAPIFakeAsync directive. 	r96535
----------------------------
The documentation says: ISAPIReadAheadBuffer defaults to 49152 bytes, which is exactly 48 kb. But the module actually uses a default of 48192 bytes. This seems to be a typo. Instead of changing the documentation I attached a patch for mod_isapi.c to set the default value of ISAPIReadAheadBuffer to 49152. Submitted by: Astrid Keler <kess@kess-net.de> 	r96534
----------------------------
Add a little documentation on how to select DBMs during build and update the RerwiteMap and AuthDBMType directives to point to it. The build docs could still use a great deal of work.  There are tons of things that aren't documented at all. 	r96526
----------------------------
Updated the supported list of error-doc languages (LanguagePriority). 	r96525
----------------------------
Fix a null pointer dereference in the merge_env_dir_configs function of the mod_env module. PR 11791     [Paul J. Reder] 	r96523
----------------------------
Convert to xml and do a MAJOR revision and expansion of the sections (<directory>, <location>, etc) docs. Further review by config-merging experts would be appreciated. Reviewed by: Rich Bowen, Andre Malo 	r96522
----------------------------
"new option to ServerTokens. ""Maj[or]"" which displays a server response similar to Apache/2.0 Also surfaced the directive in the standard config, defaulting to FULL "	r96500
----------------------------
MaxSpareServers and MinSpareServers are native to prefork, not mpm_common. Submitted by: David Shane Holden <dpejesh@yahoo.com> 	r96492
----------------------------
which broke the build on Win32 mod_rewrite.h didn't spit out the decl of lookup_map_dbmfile if NO_DBM_REWRITEMAP was still defined, and mod_rewrite.dsp continued to define NO_DBM_REWRITEMAP Reported by:          Jerry Baker <jerrybaker@attbi.com> 	remove
----------------------------
Fix a problem whereby RewriteMap prg:'s would get out of sync due to the inappropriate use of nonblocking reads.  Also get rid of the stderr altogether since mod_rewrite never uses it. PR: 9534 	r96475
----------------------------
Zero-copy output for small files delivered over keepalive connections (previously, the setaside code in the core output filter would copy file buckets <8KB into the heap, resulting in poor keepalive performance) 	r96431
----------------------------
Add a ServerSignature <-> ServerTokens cross-reference and update a few transformations. 	r96424
----------------------------
Make it even more clear that EVERY host must have a <virtualhost> section with name-virtual-hosts. This is already clearly documented a few paragraphs below, but judging by questions on the newsgroup/mailing list, people don't read past the example. 	r96416
----------------------------
fix weird things that happen with canned error messages due to using two different request_recs after an ErrorDocument internal redirect failure. examples: wrong Content-Type, garbled output from ebcdic servers due to double charset translation 	r96364
----------------------------
"mod-deflate now checks to make sure gzip-only-text-html is set to 1, not anything. This will allow things like... SetEnv gzip-only-text/html 1 BrowserMatch ""GECKO"" gzip-only-text/html=0 Obtained from: Andr Schild <A.Schild@aarboard.ch> Reviewed by:   Ian Holsman "	r96318
----------------------------
This was never a 'vulnerability'... the APR_FILEPATH_SECUREROOT flag passed to apr_filepath_merge refused to merge any rooted 'addpath'. However, that isn't the traditional 1.3 behavior, so fly past any leading '/'s on the way to merging the uri to the DocumentRoot. PR: 10946 	r96314
----------------------------
DeflateMemLevel specifies level (1-9), not bytes. 	r96259
----------------------------
support non-threaded configurations PR:             10920 	r96244
----------------------------
Hold the Apache screen open on NetWare if exit() is called for any reason during initialization and configuration of the main Apache process. 	r96172
----------------------------
"Introduce changes necessary to bring the remainder of the manual into xml. 1. Add a <relative-path href=""whatever""/> element to the manualpage DTD.  This should give the path from the location of the page to the root of the manual directory.  It is necessary for proper linking to directives, etc. 2. Add the stuff to common.xsl necessary to transform a <manualpage>. This is basically the minimum.  It creates something VERY similar to what we had before (with the exception of a little css here and there).  I very much hope that this will be improved soon to look nicer. 3. Add configuring.xml, which was written by Astrid Kessler.  I made only a very few small changes to bring it in line with the current DTD. I have not yet committed the corresponding configuring.html.en, since I want to give people a little opporunity to comment on this stuff. My appologies, but I am committing a few style changes to common.xsl along with the substantial changes.  That file is really hard to work with, and should probably be broken up. "	r96158
----------------------------
After an install, the default config files are useful.  After an upgrade they aren't. If the config directive's syntax changed, Apache will tell you which one changed, and the docs are a better place to go for details then the default config files.  BTW, the syntax of a directive hasn't changed for a VERY long time. If the semantics changed, then nobody will ever know that they need to look in the default config files to determine that they semantics changed, because there is no error message. The argument that you want to be able to get the defaults back doesn't hold water, because 99.9% of all admins backup their files before modifying them.  If you aren't backing them up, then that is your problem. The argument that you may not have a full config directory also doesn't hold water, because the assumption is that the conf/ directory is coming from a working server. 	r96157
----------------------------
vote on generating default config files. Abstaining for now on where they should live.  It would be work to move them. Is it worth it?  dunno 	r96154
----------------------------
I'm VERY reluctant to get into this argument, but... I do consider it useful to have an updated httpd-std.conf with a new version. Some docs-project people would like to have a directory to dump all sorts of sample configurations. 	r96153
----------------------------
Make a little effort to update the suexec docs to the 2.0 world. This still needs considerable attention. Submitted by: Chris Herbst <chris@herbst.com>, Joshua Slive 	r96146
----------------------------
Remove a paragraph from the UseCanonicalName defition that is not relevant now that Port is gone. PR: 11041 	r96145
----------------------------
Fix some hook ordering problems.  mod_vhost_alias should, perhaps, be HOOK_LAST. It redefines the document root, so it should only be used if no other mapper wants the request.  I haven't made that change here; I've simply put explict ordering to make sure we get mod_alias -> mod_userdir -> mod_vhost_alias I can't compile apache at the moment for other reasons, so this is untested, but it looks right to me. PR: 8853 	r96137
----------------------------
Do some sanity checking on the cache config directives. 	r96109
----------------------------
Revert the change in the previous commit, which broke the setting of @APACHECTL_ULIMIT@ during configuration 	r96081
----------------------------
Add Swedish language to error documents LanguagePriority 	r96065
----------------------------
Timeout/time fixes 	r96055
----------------------------
Fix a [very few] config changes.  Yes - needs to be awk-ized, but not at this moment. 	r96022
----------------------------
Add missing argument in CustomLog example. Submitted by: Thomas =?iso-8859-1?q?Sj=F6gren?= <thomas@northernsecurity.net> Reviewed by: Joshua Slive 	r96015
----------------------------
Documentation for the NetWare CGIMapExtension directive for mapping CGI script file extensions to the script interpreter NLM 	r95988
----------------------------
Correct path to the ScoreBoardFile directive. 	r95984
----------------------------
Submitted by: Owen Boyle, on users@ mailing list Additional clarification on UseCanonicalName directive. 	r95962
----------------------------
Re-use the same temp brigade to read all lines of a request header, to avoid the overhead of brigade creation and deletion.  (This produced a 5% reduction in the total CPU usage of a minimalist httpd configuration: <JHEPKCEMGPKFFDHHDDKDMELFEKAA.bill@wstoddard.com>) 	r95956
----------------------------
Add a new directive: MaxMemFree.  MaxMemFree makes it possible to configure the maximum amount of memory the allocators will hold on to for reuse.  Anything over the MaxMemFree threshold will be free()d.  This directive is usefull when uncommon large peaks occur in memory usage.  It should _not_ be used to mask defective modules' memory use. 	r95954
----------------------------
Make the mime types configuration file path relative to {sysconfdir}, just like the other config files. 	r95953
----------------------------
Preserve existing installation directories.  We copy over binaries, the build directory, the headers, and the man pages.  Everything else, the config, htdocs, manual, error, icons, and cgi directories are not installed if the directories already exist.  I got sick of having to re-edit printenv for my tests, and this is the same logic 1.3 used. 	r95911
----------------------------
"Add a filter_init function to the filters so that a filter can execute arbitrary code before the handlers are invoked. This resolves an issue with incorrect 304s on If-Modified-Since mod_include xbithack full is on, of course).  When mod_include runs as a filter, it is too late to set any flag since the handler is responsible for calling ap_meets_conditions(), which it should do before generating any data. If a module doesn't need to run such arbitrary code, it can just pass NULL as the argument and all is well. PR:	9673 Reviewed by:	Ryan Bloom and others "	request
----------------------------
Fix a long-standing bug in 2.0, CGI scripts were being called with relative paths instead of absolute paths.  Apache 1.3 used absolute paths for everything except for SuExec, this brings back that standard. 	r95899
----------------------------
- Fix segfault in core_output_filter when we are passed an empty brigade. - Stash the remainder of the brigade in more when we see a flush bucket. Previous to this commit, we would only process the buckets before the flush on a HTTP/1.0 request and then return. We are proably only finding this now since we now correctly check for keepalive connection status. 	r95896
----------------------------
"Change conn_rec->keepalive to an enumerated value of AP_CONN_UNKNOWN AP_CONN_CLOSE AP_CONN_KEEPALIVE This also fixes a problem where ap_discard_request_body would not discard the body when keepalive was 0.  This actually meant the keepalive status was unknown *not* closed, but no one ever remembered that. This problem was seen with mod_dav sending error responses (as reported by Karl Fogel). Suggested by:	Greg ""this isn't the '80s"" Stein Reviewed by:	Greg Ames "	r95891
----------------------------
ap_discard_request_body: exit without reading the body if connection->keepalive is false.  This works in conjunction with ap_die which resets connection->keepalive any time ap_status_drops_connection is true.  The latter is explicity tested here in case ap_die isn't involved. Submitted by:   Justin Erenkrantz, Greg Ames 	r95882
----------------------------
Include apr_lib.h for the definition of apr_toupper() to get rid of undefined symbol link failures (apr_toupper is a macro, at least on Unix). Reported by:  Trawick's regression build 	r95878
----------------------------
"new configuration option for mod_rewrite to set cookies. configuration is like the following RewriteRule (.*) - [CO=<cookiename>:$1:<domain>:<expiry in minutes>] Submitted by:	Brian Degenhardt <bmd@mp3.com> Reviewed by:	Ian Holsman "	r95840
----------------------------
Add a timeout option to wintty.  This allows the user to specify a number of seconds to wait after the program terminates before closing the window. Previously, the windows would remain open indefinately.  This option is not currently being used by Apache. 	r95836
----------------------------
prevent infinite recursion if an ErrorDocument gets an error Reported by: Colm MacCrthaigh <colmmacc@Redbrick.DCU.IE> 	r95825
----------------------------
I've been threatening to do this for a few days, but I wanted to wait for other dust to clear. Comment-out the internationalized error responses in the default configs. I think these error docs are great, and anyone who understands the server should be using them, but because of their complexity, they are a danger to people who blindly install apache and forget it. Developers especially should continue to use them, because they are great at finding obscure bugs in mod_include, mod_negotiation, and sub-request processing. 	r95819
----------------------------
These emits occur mainline, outside of the pphrase_callback, so we never opened readtty or writetty.  But they are absolute failures, nothing the user could do to deal with them.  They are logged in the ssl vhost's error log. In this case, I forgot my SSLCertificateKeyFile, so the server never tried the callback.  writetty wasn't initialized, so we segfaulted. This segfault is due to misconfig, not to the dialog with the user. This is the easiest fix (easier to read, too), but we shouldn't need to worry too much that the release is tagged.  If we retag, fine, then grab it, but it only addresses a config problem. 	r95734
----------------------------
Fix the build on BSDi machines. The bsd_makefile trick didn't completely work as autoconf may run config.status and remove the fixes we've just applied, so this allows us to workaround that problem. Initailly suggested by Cliff, this is a modified version. 	r95708
----------------------------
Added configuration example, code example, and a little explanation, to facilitate logging all of your virtual hosts to a single file, and then splitting them back up after. Note that if Apache has problems with this many file handles, Perl might also. I'm not sure. 	r95701
----------------------------
"We must set the MIME-type for .shtml files to text/html if we want them to be parsed for SSI tags.  Add the config for that to the default config file so that it is easier to enable .shtml parsing. PR:	9787 Submitted by:	Dave Dyer <ddyer@real-me.net> "	r95693
----------------------------
"Fixed a problem with 'make install' on one of the tarballs (which have the CVS dirs removed already) with ReliantUnix's rm: Installing configuration files Installing HTML documents Usage: rm [-firR] file ... make[1]: *** [install-htdocs] Error 2 make[1]: Leaving directory `/home1/apache20/httpd-2.0.37' make: *** [install-recursive] Error 1 Submitted by:	Jean-frederic Clere <jfrederic.clere@fujitsu-siemens.com> "	r95691
----------------------------
"Make the default_handler catch all requests that aren't served by another handler.  This also gets us to return a 404 if a directory is requested, there is no DirectoryIndex, and mod_autoindex isn't loaded. PR:	8045 Submitted by:	Justin Erenkrantz "	r95690
----------------------------
"Allow 'make install DESTDIR=/path'.  This allows packagers to install into a directory different from the one that was configured.  This also mirrors the root= feature from 1.3.  We cannot use prefix=, because both APR and APR-util resolve their installation paths at configuration time.  This means that there is no variable prefix to replace. PR:	7803 Submitted by:	Andreas Hasenack <andreas@netbank.com.br> "	r95686
----------------------------
Added example for SuexecUserGroup directive 	r95684
----------------------------
Cleanup proxy timeouts a bit to remove emits and make consistent to vhost timeout. 	r95674
----------------------------
Added <seealso> for AddHandler to the SetHandler doc 	r95671
----------------------------
Added (slightly redundant) pointer from SetEnvIf directive docs to ../env.html for more examples. 	r95670
----------------------------
ScriptSock example 	r95662
----------------------------
Add missing description for AddDescription directive. Fix typo. 	r95635
----------------------------
Example for ServerRoot directive 	r95632
----------------------------
Example for ScriptLog 	r95631
----------------------------
Example for ScoreBoardFile 	r95630
----------------------------
Examples for HeaderName, ReadmeName 	r95629
----------------------------
Example of PidFile directive 	r95627
----------------------------
Added example of Using * as argument to NameVirtualHost. Added note that arg to NameVirtualHost is supposed to match the arg to VirtualHost, as this seems to come up several times a week on #apache 	r95626
----------------------------
Example for MimeMagicFile. 	r95624
----------------------------
"Solve the 80/20 by initializing and storing server_rec->timeout and server_rec->keep_alive_timeout in apr_time_interval_t format (in apr units, whatever they be), as both values exist to pass into APR, and all APR timeouts are in apr_time_t. Reviewed by:	Cliff Woolley "	r95623
----------------------------
Slightly overkill, but added example to MetaSuffix 	r95622
----------------------------
Example of MetaDir directive 	r95621
----------------------------
PR: Obtained from: Submitted by: Reviewed by: allow POST method over SSL when per-directory client cert authentication is used with 'SSLOptions +OptRenegotiate' enabled and a client cert was found in the ssl session cache. 	r95602
----------------------------
"PR: Obtained from: Submitted by: Reviewed by: 'SSLOptions +OptRengotiate' will use client cert in from the ssl session cache when there is no cert chain in the cache.  prior to the fix this situation would result in a FORBIDDEN response and error message ""Cannot find peer certificate chain"" "	r95601
----------------------------
Fix the display of the default name for the mime types config file. PR:           9729 Submitted by: Matthew Brecknell <mbrecknell@orchestream.com> Reviewed by:  Jeff Trawick 	r95591
----------------------------
Modified the CGIMapExtension directive to take an optional parameter that specifies how the CGI NLM should be launched. 	r95590
----------------------------
make some small steps towards getting the post config hook to return an error rather than exiting directly 	r95567
----------------------------
Add missing description in ReadmeName directive, mostly taken from HeaderName. 	r95566
----------------------------
Document that ProxyPass can't take a query string, but that RewriteRule can be used for reverse proxying with much more flexibility. 	r95559
----------------------------
"Fix apxs to allow ""apxs -q installbuilddir"" and to allow querying certain other variables from config_vars.mk. PR:    9316 "	r95549
----------------------------
Fix segfault at startup when the startup fails before running the post config hook. We were setting the hash table cleanup in the create_per_server_config hook and allocating the hash table in the post config hook. Move the register_cleanup to the post_config hook 	r95532
----------------------------
"Fix the binary build install script so that the build logic created by ""apxs -g"" will work when the user has a binary build. We didn't copy enough of the build directory and we edited the wrong version of config_vars.mk. "	r95489
----------------------------
Updated the section on OS configuration to cover some 2.0 issues 	r95462
----------------------------
Added a reference to the EnableMMAP documentation for the performance tuning details 	r95461
----------------------------
Close the <proxy> container properly. 	r95459
----------------------------
"add 2 new enviornment variables to deal with misbehaving backends ""proxy-nokeepalive"" which removes the Connection: line completely ""force-proxy-request-1.0"" which forces the request to be HTTP/1.0 this allows apache to reverse proxy misbehaving appservers "	r95456
----------------------------
"Enable SSL negotation in ab.c.  It is that, or remove all the entirely BOGUS ssl config options from ab.c.  If it works, nifty, if not, we now have directives that have some effect, rather than no effect, for SSL. Submitted by:	Madhu Mathihalli <madhusudan_mathihalli@hp.com> "	r95451
----------------------------
Fix the case where if there is no ErrorDocument specified for an error, the error would be sent to the client *twice* because both the filter and the core would trigger error responses. The problem is that the filters have already handled some errors (say 413) and due to the ap_get_client_block API, the error was morphed into 400. Therefore, ap_discard_request_body must use brigades directly rather than the ap_get_client_block API so that any potential errors are not dropped. The special value AP_FILTER_ERROR indicates that the lower level has already dealt with this problem (ap_die() will realize this).  Otherwise, we'll error with HTTP_BAD_REQUEST and ap_die() will take it from there. This also prevents needless memory copies when we are just going to discard it anyway. Thanks to Cliff Woolley who found this wacky problem. 	r95424
----------------------------
Thanks Ryan for cleaning up after my laziness.  :)  Here are just a few last little changes.  ->datafile should be initialized... but doing so brings up the fact that the check in run_rewritemap_programs() was expecting ->datafile to have a string attached to it.  For clarity, let's just use argv[0] there.  And since we've reinstated the use of ->checkfile, we no longer need that extra apr_stat() I hacked in, so let's get rid of it. 	r95375
----------------------------
Tokenize the arguments for rewrite programs during config parsing, and just use that information later.  I was having a problem with prg directives with arguments failing the configuration.  The problem was a call to stat, which was being passed the program name and the arguments. Obviously, the arguments were messing up the call to stat.  This gets the test suite working for me again. 	r95372
----------------------------
"A couple small corrections to the content negotiation docs: - The ""parent language"" matchine is available always, not just with ForceLanguagePriority - ForceLanguagePriority defaults to Prefer, not None. "	r95354
----------------------------
Error out a bit more nicely if the RewriteMap prg: is not found.  We can't just apr_stat in the first init round because we haven't run apr_tokenize_to_argv() yet, and it would be a relatively ugly hack to run it twice just for that.  Well, I suppose we could store the argv in the opposed to the old exit(1) method) if we go to execute a rewritemap and discover it doesn't exist, and log a nice descriptive message at the end of the error_log. 	rewritemap
----------------------------
Fix RewriteMap prg:'s that have command-line args. PR: 8464 Submitted by: James Tait <JTait@wyrddreams.demon.co.uk> 	r95334
----------------------------
Correctly return 413 when an invalid chunk size is given on input. - If get_chunk_size() returns a negative number, that probably implies an overflow.  So, create a 413 error and pass it to the output filters. - Modify ap_discard_request_body() to return OK quickly if we're a subreq or our status code implies that we will be dropping the connection. - Modify ap_die() so that if the new status implies that we will drop the connection, that we correctly indicate that we can not keepalive this connection.  (Without this, the error is returned, but the connection is not closed.) 	r95331
----------------------------
Fix http redirecting for UserDir.  Before this patch, the directive: UserDir http://www.foo.com/~*/ The code would ignore the http:// and instead use the user's home directory 	r95329
----------------------------
Document the --with-suexec-bin configure flag. PR: 9038 	r95304
----------------------------
Reorder these directives to match the output from ./configure --help 	r95303
----------------------------
A little refactoring of the mod_setenvif docs.  In particular, consolidate the details in the SetEnvIf directive and let the others simply reference that one. 	r95296
----------------------------
Updated the release showstoppers section to reflect the completion of the critical suexec fixes 	r95293
----------------------------
"Fix for suexec invocation of CGIs under user dirs when using cgid PR: 7810 Submitted by:	Colm MacCarthaigh <colmmacc@redbrick.dcu.ie> Reviewed by:	Brian Pane "	r95292
----------------------------
"Fix for suexec execution of CGI scripts from mod_include (including security patch to ensure that <!--#include file=""name.cgi""--> is run as the suexec user rather than the httpd user) PR: 7791, 8291 Submitted by: Colm MacCarthaigh <colmmacc@redbrick.dcu.ie> Reviewed by:	Brian Pane "	r95290
----------------------------
Fix the rest of the apr_pool_userdata_setn() bogosity w.r.t. DSO modules. It's totally unsafe to use apr_pool_userdata_setn() in the post_config phase of a module, since on some platforms when the DSO gets reloaded between phases, the data segment will be at a different address on the second phase and the userdata_get() call will fail. PR: 9413 Submitted by: Tsuyoshi Sasamoto <nazonazo@super.win.ne.jp> 	r95287
----------------------------
Added EnableMMAP to performance tuning guide 	r95279
----------------------------
Rename mod_suexex.ja.xml to mod_suexec.xml.ja. This is a simple add and remove operation because there was no change to old file and preserving history is not important. 	r95230
----------------------------
"John Von Essen <john at essenz.com> contributes the diskimg.gif icon: > Hopefully this is the right place to send this comment. I have alot of > disk images (.img) on my server. By default, there is no icon for a disk > image. > > So I made one... > >      AddIcon /icons/diskimg.gif .img > > The diskimg.gif can be found at: > > http://www.essenz.com/icons/diskimg.gif > > Could this be added into future releases? Disk images are fairly popular. > Especially when making boot floppies or driver disks for linux. Submitted by:	john at essenz.com "	r95203
----------------------------
./configure --enable-http --enable-mods-shared=most would cause mod_http to get built as a DSO, which it can't be.  This forces it to be static only. PR:  9244 Submitted by:  Cliff Woolley, and simultaneously by 	r95194
----------------------------
1. Bring us back down into 80 character lines again. 2. Change the incredibly misleading comment for .htaccess. 3. Shorten the comment for IndexOptions. 	r95192
----------------------------
"Shorten the comment for EnableMMap, and limit it just to the NFS issue. The most we could say about preformance is ""it's usually better to leave this on, but sometimes it's better to turn it off"", which is not really helpful to anyone. "	r95191
----------------------------
Clean up isapi_load, removing the request_rec arg [which we never need], and using the given server and request rather than deref'ing r->server [which segfaulted ISAPILoadModule in the 1.73 rev.] Reported by: Sebastian Hantsch 	r95187
----------------------------
As the prior commit message indicated, pass the accept thread a listen rec as opposed to simply the listen socket. However, the prior commit (which I crossed up with this patch) really closed a segfault where we attempted to log messages to ap_server_conf, after the server conf was destroyed, and prior to setting the new value in the next go-around of post_config. 	r95173
----------------------------
Resolve the EXEC_ON_READ bit for ServerRoot and other modules that test the directive context.  Should eliminate the segfault. 	r95171
----------------------------
Although it appears reasonable to immediately gather the Error log and level from the config; these are per-vhost entities that can't be processed as we preload the config tree.  There is more work to do, as Cliff Woolley guesses, before we can make this change. In the meantime, -e and -E should provide the admin sufficient options to work around problematic configs.  So I'm reverting those changes, for now. ServerRoot is global only, and it MUST be read immediately, so that part of the last patch stays. 	r95170
----------------------------
We need to grab ServerRoot, LogLevel, and ErrorLog right off the bat as we are reading the config. This closes a bug where ServerRoot /foo + LoadModule relative/mod_foo.so won't load mod_foo.so. Reported by: Ron Leung <rleung@covalent.net> 	r95160
----------------------------
Fix the links for the PidFile directive in stopping.html and add mpm_common and mod_cache to index-bytype.html (which, by the way, is clearly the abused stepsister of index.xml/index.html... we should find some automated way to generate the index-bytype as we have with the PR:  9187 Reported by:  Max Dittrich <amax@cs.tu-berlin.de> 	regular
----------------------------
prevent possible segv in ssl_init_CheckServers if s->addrs is NULL. for example: <VirtualHost *:>, for which the core only spits out a warning: Name or service not known: Cannot resolve host name *: --- ignoring! 	r95158
----------------------------
get binbuild working again, and zap the BinaryDistribution layout at the same time a few days ago the configure syntax for specifying a layout was fixed in binbuild.sh, but the layout was broken...  it turns out that we don't need the layout with Apache 1.3, a separate layout for binary builds was necessary in order to install under any prefix specified by the user with Apache 2.0, that works without any special tricks so the BinaryDistribution layout is no longer necessary 	r95152
----------------------------
Added EnableMMAP (commented out) to the standard config 	r95144
----------------------------
Remove SSLLog and SSLLogLevel directives in favor of having mod_ssl use the standard ErrorLog directives. 	r95129
----------------------------
Change mod_ssl from using ssl_log() to ap_log_error(). The issue is that ssl_log doesn't handle apr_status_t result codes.  This leads to a number of places (esp. with mutexes) where the error codes get lost.  Rather than extending ssl_log further, since mod_ssl is part of our core, migrate to ap_log_error.  This means that mod_ssl no longer does its own logging. Most uses of SSL_ADD_ERRNO are now mapped correctly to apr_status_t values (mainly because the APIs that used to return errnos are now APRized and have apr_status_t codes available). SSL_LOG_TRACE and SSL_LOG_DEBUG were mapped to the APLOG_DEBUG values. mod_ssl prints out a LOT of debugging information, so mod_ssl with LogLevel Debug may not be a good idea - perhaps mod_ssl should be less chatty. Numerous printf type collisions were also resolved. (The ssl logging code itself will be removed in a subsequent commit.) This has been discussed on dev@httpd, but the fact that there isn't much to review besides the mindless changes, I'm going to commit now and rely on CTR if I screwed up anything on the translation. 	r95127
----------------------------
Short of final troubleshooting and diagnostics, this patch introduces Async support via the ISAPIFakeAsync directive [default - still off.] 	r95123
----------------------------
Added documentation for the new EnableMMAP directive 	r95100
----------------------------
"fix a comment in config.layout which told the unsuspecting user to use --with-layout instead of --enable-layout PR:		9061 Submitted by:   Max Dittrich Reviewed by:    Jeff Trawick "	r95088
----------------------------
Part 3 of the ISAPI overhaul.  Reframe the 'server conf' into 'dir conf' options, creating one single cache of loaded modules [heck, that's what it was before.]  This allows finer grained control of specific modules that must be 'configured' around to deal with their peculiarities. This actually saves much code when we can use global config accessors. Grant the module cache it's own pool, and straighen up some other nits. No other substantial changes in this pass. 	r95073
----------------------------
Instead of using the hardcoded libtool path of srclib/apr, use the output of apr-config --apr-libtool. 	r95072
----------------------------
Instead of hardcoding srclib/apr{-util} in the INCLUDES, get the information from ap{ru}-config --includes which knows how to deal with VPATH builds itself. 	r95071
----------------------------
Part one of a several-fold overhaul to isapi.  This part simply normalizes the module to the usual order of config-cmds/helpers/ handlers/setup. 	r95069
----------------------------
First pass at trying to standardize httpd-2.0's usage of APR and APR-util so that they can be separated - use an installed APR and APR-util with httpd-2.0.  This is not expected to achieve full separation, but is merely the first step in the process.  The tree should still be buildable in the source-only case. This commit does the following things: - Use the standard find_apr.m4 and find_apu.m4 m4 macro files that flood and Subversion already use for locating APR and APR-util.  This adds the --with-apr and --with-apr-util configure options. - Stop using APRVARS and export_vars.sh. - Use apr-config and apu-config to determine dependencies. - Add AP_BUILD_SRCLIB_DIRS and AP_CLEAN_SRCLIB_DIRS values (names stink) to dynamically figure out what subdirs in srclib we will build. (What we really want to do is set one value - go L->R on build and - If we are using APR and APR-util that are already installed, don't specify them in srclib.  (This still needs some work I bet.) 	r95061
----------------------------
The suexec arguments now start with --with. Note that there are also two arguments missing, according to ./configure --help. Specifically, --with-suexec-bin and --with-suexec-umask. Can I can add those in, if desired, but if someone more familiar with it could do so, perhaps it would be a little more descriptive. Obtained from: #apache on openprojects.net 	r95050
----------------------------
Optimization: skip cache setup in location_walk() if the vhost config contains no <Location> blocks 	r95044
----------------------------
Added EnableMMAP directive to allow the server administrator to prevent mmap of file buckets upon read. 	r95040
----------------------------
mod_setenvif optimizations 	r95028
----------------------------
Performance fix: When a BrowserMatch or SetEnvIf pattern doesn't actually require regular expression parsing, use a fast string search instead. 	r95027
----------------------------
The default for DefaultType is text/plain, not text/html. PR: 8927 	r95019
----------------------------
Add transformation of mod_suexec.ja.xml. 	r95008
----------------------------
Use the ap_get_server_xxx() calls to return the info rather than short cutting it with the server_rec.  This avoids port showing up as 0 and also respects the UseCanonicalName setting in the .conf file. 	r95006
----------------------------
Changing *any* default behavior is a bad idea without _very_ careful consideration, IMO, as it can silently break existing configs.  Principle of least astonishment applies.  Besides, the security argument is bubkus. Security through obscurity at best, and hardly even that. 	r95004
----------------------------
vote:change default config so that we only report our version instead of everything PR: Obtained from: Submitted by: Reviewed by: 	r95001
----------------------------
Add DeflateBufferSize directive to replace hardcoded FILTER_BUFSIZE definition.  Also speeds up ctx init since it takes the buffer and does a malloc rather than a calloc on it. 	r94987
----------------------------
"Reverse the hook ordering for mod_userdir and mod_alias so that Alias/ScriptAlias will override Userdir. PR: 8841 Reviewed by:	Justin Erenkrantz "	r94985
----------------------------
"Added an optional function (ap_register_rewrite_mapfunc) which allows third-party modules to extend mod_rewrite's ""int:"" internal RewriteMap functionality. Concept by:  Tahiry Ramanamampanoharana <nomentsoa@hotmail.com> "	r94939
----------------------------
"Fix generated httpd.conf to respect layout for LoadModule lines. PR:	8170 Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Justin Erenkrantz "	r94921
----------------------------
Fix the link to the description of the CoredumpDirectory directive in the server-wide document. PR:          8643 	r94879
----------------------------
Enable mod_mem_cache to be configured to cache open file handle using new directive option: CacheEnable fd / will enable caching fds. If for some CacheEnable mem / 	reason
----------------------------
Name space protect mod_mem_cache config directives 	r94866
----------------------------
"Short-circuit out of mod_userdir's translation handler faster on non ""/~*"" requests "	r94855
----------------------------
Because mod_imap's handler runs on every request in the default configuration, rearrange the code to keep it from allocating a few pages worth of local variables on the stack on requests that don't use imagemaps 	r94849
----------------------------
Don't install *.in config files. 	r94847
----------------------------
"get closer to having apxs work from a binary distribution we need to copy libtool and instdso.sh verbatim, and we need to edit config_vars.mk and apxs still broken: ""httpd -l"" as invoked by apxs can fail since support libraries (apr, aprutil, etc.) are probably not findable "	r94817
----------------------------
"Fix suexec invocations from userdir - the ~ was not being prepended to the uid per our convention.  Therefore, bad things would happen (like we wouldn't cd to the right directory). Add a flag to the ap_unix_identity_t structure to indicate if we are in a userdir - if so, prefix the ~. (Modified by Justin, but Colm's patch pointed me in the right direction.) PR: 7810 Submitted by:	Colm <colmmacc@redbrick.dcu.ie> Reviewed by:	Justin Erenkrantz "	r94791
----------------------------
"Since UserDir is a raw argument, our config system allows it to be blank. To save us all the hassle, just flat out reject this silliness.  We could treat blank as ""."", but let the user shoot themselves in the foot explicitly (and don't give them any ideas on how to do it). PR: 8472 "	r94790
----------------------------
Add a configuration block for the OS/2 MPM. 	r94780
----------------------------
Fix perchild MPM so that it can be configured with the move to the experimental directory.  Fix perchild MPM so that it uses ap_gname2id for groups instead of ap_uname2id. Submitted by: Scott Lamb <slamb@slamb.org> 	r94760
----------------------------
AcceptPathInfo was totally backwards... it would reject when set to on and by default and accept when set to off for the default handler, and would PR: 8234 	reject
----------------------------
Moved the call to apr_mmap_dup outside the error branch so that it would actually get called. This fixes a core dump at init everytime you use the MMapFile directive. [Paul J. Reder] 	r94721
----------------------------
Trigger an error when a LoadModule directive attempts to load a module which is built-in.  This is a common error when switching from a DSO build to a static build. 	r94719
----------------------------
"Allow VPATH builds to succeed when configured from an empty directory. (Justin removed some unneeded changes in Makefile.in.) Submitted by:	Thom May <thom@planetarytramp.net> Reviewed by:	Justin Erenkrantz "	r94697
----------------------------
Fix subreqs with non-defined Content-Types being served improperly. If we do not know a C-T for a subreq, we *must* propogate that non-knowledge upwards to the main request. Previously, if you used a DirectoryIndex with a file without a C-T (say .shtml without AddType), the r->content_type will be kept as httpd/unix-directory when we promoted the subreq in mod_dir.  Since there would be no handler on this file, ap_invoke_handler (config.c:355) would set the handler to be httpd/unix-directory (which was the old C-T of the dir).  This would then trigger the handler to become httpd/unix-directory. mod_autoindex would then try to serve the request.  But, the filename was propogated upwards by mod_dir's DirectoryIndex via internal_fast_redirect - it would then return a 403 trying to generate a mod_autoindex page for a file. Now, we will use ap_default_type() which is correct. 	r94676