----------------------------
Merge r1652929, r1652931 from trunk: Fix --enable-v4-mapped configuration on *BSD. PR 53824. Submitted by: olli hauer <ohauer gmx.de> Committed by: ylavic Submitted by: ylavic Reviewed/backported by: jim 	r1653962
----------------------------
sslprotocol fix 	r1653917
----------------------------
too much DirectoryMatch matching and is not critical to have in. Discussion on dev@ on trunk rev commit msg for r1635428 Also, I don't think the addition in the middle of the core_dir_config given that the core_dir_config is exposed to modules as kind of a special case. 	revert
----------------------------
Merge r1648394 from trunk: Configuration files with long lines and continuation characters are not read properly. PR 55910. Submitted By: Manuel Mausz <manuel-as mausz.at> Committed By: covener 	r1651653
----------------------------
Insert htaccess/RewriteRule examples, illustrating how RewriteRule syntax is weird in .htaccess files. 	r1651482
----------------------------
Merge r1648433 from trunk: PR 56603:  Inappropiate ProxyPassReverse match when interpolated URL is empty string Submitted By: <ajprout hotmail.com> Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1651094
----------------------------
Merge r1626978 from trunk: mod_cgi: log cgi script stderr to ScriptLog, use APLOGNO for log_scripterror errors. Submitted by: jkaluza Reviewed/backported by: jim 	r1651086
----------------------------
Merge r1626978 from trunk: mod_cgi: log cgi script stderr to ScriptLog, use APLOGNO for log_scripterror errors. Submitted by: jkaluza Reviewed/backported by: jim 	r1651085
----------------------------
Merge r1601184, r1601274, r1601185 from trunk: mod_ssl: Ensure that the SSL close notify alert is flushed to the client. Submitted By: Tim Kosse <tim.kosse filezilla-project.org>, ylavic Committed By: ylavic mod_ssl: SSL_smart_shutdown(): follow up to r1601184. Use SSL_get_wbio() to comply with OPENSSL_NO_SSL_INTERN. Stop SSL shutdown loop when flush fails. mpm_event[opt]: Send the SSL close notify alert when the KeepAliveTimeout Submitted by: ylavic Reviewed/backported by: jim 	r1651077
----------------------------
propose proxypassreverse fix 	r1648434
----------------------------
Merge r1647229 from trunk: some tweaks for no ServerName from PR57384 	r1647230
----------------------------
Propose ap_errorlog_provider and mod_journald. 	r1646425
----------------------------
Propose r1644031, comment on ScriptLog patch (r1626978). 	r1645877
----------------------------
Merge r1641414 from trunk: steal the sethandler example from mod_proxy.html and mention worker issue 	r1641416
----------------------------
Merge r1635762 from trunk: Support custom ErrorDocuments for HTTP 501 and 414 status codes. PR 57167 [Edward Lu <Chaosed0 gmail.com>] Submitted By: Edward Lu <Chaosed0 gmail.com> Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1638071
----------------------------
Merge r1637768 from trunk: fix copy/paste error for CacheSocacheMinTime, rest of content is correct. http://httpd.apache.org/docs/trunk/mod/mod_cache_socache.html#comment_3247 	r1637769
----------------------------
Merge r1634425 from trunk: When using EBCDIC encoding, HTTPS through ProxyPass and ProxyRemote doesn't work correctly. PR 57092 Submitted By: Edward Lu Reviewed By: covener, jim, ylavic 	r1636002
----------------------------
Merge r1631983 from trunk: mod_substitute: no real functional change, but: - define default for maximum line length - Clarify line length check with a comment - add supported 'b' suffix to directive Submitted by: rjung Reviewed by: jim, ylavic 	r1634948
----------------------------
Merge r1634736 from trunk: Remove commented-out SSLStaplingForceURL at global scope. Global or not, its use is specialized and those that need it won't need a sample, and others may be confused. 	r1634737
----------------------------
Merge r1628924 from trunk: mod_substitute: Restrict configuration in .htaccess to FileInfo as documented. Submitted by: rjung Reviewed/backported by: jim 	r1634524
----------------------------
Merge r1628919, r1628950 from trunk: mod_substitute: Make maximum line length configurable. Add docs for new directive SubstituteMaxLineLength in mod_substitute. Submitted by: rjung Reviewed/backported by: jim 	r1634523
----------------------------
"Merge r1628104, r1628918 from trunk: mod_substitute: Fix memory limitation in case of The maxlen argument of ap_varbuf_regsub() is unsigned. Passing in ""AP_SUBST_MAX_LINE_LENGTH - vb.strlen"" in case vb.strlen got to big didn't result in the expected error but instead was handled as a very big maxlen. Add CHANGES for r1628104. (mod_substitue: Fix memory limitation in case of Submitted by: rjung Reviewed/backported by: jim "	regexp
----------------------------
Merge r1633730 from trunk: add OCSP Stapling configuration, disabled by default Submitted by: trawick Reviewed/backported by: jim 	r1634521
----------------------------
Merge r1621367, r1621372, r1625952 from trunk: PR53218 Allow for longer worker names and make truncation a non-fatal error... Correct loglevel. oops... prepend 0 Reviewed/backported by: jim 	r1634520
----------------------------
Propose trivial mod_substitute changes due to review of backport proposal by Christophe. 	r1631985
----------------------------
Merge r1631516 from trunk: the hard-coded limit on LimitRequestLine has been gone since 2.1.x, see r819480 and r102840. PR57009 Submitted By: Ed Lu 	r1631517
----------------------------
Merge r1613682 from trunk: In 2.4.10, AuthLDAPBindDN might not be used for some LDAP searches, causing LDAP authz failures if AuthLDAPBindDN was able to search through more of LDAP than web users. 	r1631119
----------------------------
mod_substitute proposals. 	r1628951
----------------------------
Merge r1618851 from trunk: mod_authz_core: Allow <AuthzProviderAlias>'es to be seen from auth stanzas under virtual hosts. PR 56870. Submitted by: covener Reviewed/backported by: jkaluza 	r1626207
----------------------------
Merge r1618851 from trunk: mod_authz_core: Allow <AuthzProviderAlias>'es to be seen from auth stanzas under virtual hosts. PR 56870. [Eric Covener] 	r1626203
----------------------------
Merge r1618541 from trunk: Avoid useless warning message when parsing a section guarded by <IfDefine foo> if $(foo) is used within the section. PR 56503 Submitted by: jailletc36 Reviewed/backported by: jim 	r1621603
----------------------------
"Merge r1615289, r1620324 from trunk: PR53420: Proxy responses with error status and ""ProxyErrorOverride On"" hang until proxy timeout. Regression from 2.2. It was introduced by r912063 in order to fix PR41646. Switch preference for headers, Transfer-Encoding first, Content-Length second. Addition to r1615289. Submitted by: rjung Reviewed/backported by: jim "	r1621601
----------------------------
mention weird looking ^xx formats in mod_log_config backported as part of the trailers fix 	r1621552
----------------------------
Merge r1613318 from trunk: two commenters were confused authnprovideralias providing special config to authz providers 	r1613319
----------------------------
Merge r1610652 from trunk: SECURITY (CVE-2014-3523): Fix a memory consumption denial of service in the WinNT MPM used in all Windows installations. Workaround: AcceptFilter <protocol> {none|connect} Submitted by: trawick Reviewed by: jorton, covener, jim 	r1610653
----------------------------
clarify new use of Timeout for scripts 	r1610641
----------------------------
"""CGIDScriptTimeout"", not ""CGIDRequestTimeout"" "	r1610517
----------------------------
add CGIDRequestTimeout to CHANGES 	r1610514
----------------------------
Merge 1610311 from trunk: Extend the scope of SSLSessionCacheTimeout to sessions Submitted by: rjung Reviewed by: rjung, ylavic, jorton 	resumed
----------------------------
"Merge r1452551, r1607960 from trunk: PR54587: LDAP connections used for authn were not respecting LDAPConnectionPoolTimeout due to confusion over what ""bound"" means. Added some LDAP trace at TRACE5 to track how LDAP connections are make LDAPConnectionPoolTTL more conservative, use r->request_time rather than end-of-request time, and only update it after a round-trip with the LDAP server rather than every time we check back into the pool. Submitted by: covener Reviewed/backported by: jim "	reused
----------------------------
Merge r1609936 from trunk: mod_ssl: Set an error note for requests rejected due to SSLStrictSNIVHostCheck Submitted by: trawick Reviewed by: minfrin, rjung 	r1610327
----------------------------
Merge r1588519 from trunk: mod_proxy: When ping/pong is configured for a worker, don't send or forward Submitted by: ylavic Reviewed/backported by: jim 	r1608762
----------------------------
"Merge r1537535 from trunk: For better compatibility with mod_nss: * modules/ssl/ssl_engine_config.c (ssl_config_server_new): Default sc->enabled to UNSET. * modules/ssl/ssl_engine_init.c (ssl_init_Module): Only override sc->enabled based on the protocol iff sc->enabled is UNSET; allows ""SSLEngine off"" to override the Listen-based default. Submitted by: jorton Reviewed/backported by: jim "	r1608759
----------------------------
propose a pair of fixes to make LDAPConnectionPoolTTL more conservative. 	r1607962
----------------------------
mod_lua backport: Make httpd find lua 5.2 headers/lib during configure if present on the system (mod_lua is fully compatible with 5.2). 	r1605276
----------------------------
mod_lua: Backport disabling of early/late in LuaHookCheckUserID 	r1604340
----------------------------
Example of loading an MPM with LoadModule, and what error you get when you do it wrong. 	r1602766
----------------------------
merge r1591508 from trunk: mod_proxy_fcgi: Support iobuffersize parameter. Submitted by: trawick Reviewed by: jim, ylavic 	r1601749
----------------------------
"Merge r1546730, r1583008, r1571369, r1552130, r1578760, r1592615, r1592632, r1595321, r1550302, r1550307, r1585435 from trunk: fix whitespace in a debug message s/comment/self-documenting/ normalize an ugly construct which somehow manages to return the correct value This is annoying to see in a casual ""LogLevel debug foo:traceX ..."" Use 'apr_table_setn' instead of 'apr_table_set' when possible in order to save memory. Follow-up to r1592529: Define default port for ""scgi"" schemes (as chosen by mod_proxy_scgi) in a common location. Suggested by: jailletc36 fix Doxygen markup error Submitted by: jailletc36 Tweak a AP_DEBUG_ASSERT condition. Valid index to use 'req_header_var_names' are 0...6 mod_auth_form: Add a debug message when the fields on a form are not mod_auth_form: Make the trace logging consistent through the notes, session and form authentication steps. mod_auth_form: update empty log tags. Submitted by: trawick, covener, jailletc36, trawick, trawick, jailletc36, minfrin, minfrin, ylavic Reviewed/backported by: jim "	recognised.
----------------------------
AcceptFilter has two parameters + syntax highlight See r1397602 on trunk 	r1599011
----------------------------
"Merge r1591328, r1594643, r1594648 from trunk: mod_cache: Preserve non-cacheable headers forwarded from an origin 304 When mod_cache asks for a revalidation of a stale entry and the origin responds with a 304 (not that stale), the module strips the non-cacheable headers from the origin response and merges the stale headers to update the cache. The problem is that mod_cache won't forward the non-cacheable headers to the client, for example if the 304 response contains both Set-Cookie and 'Cache-Control: no-cache=""Set-Cookie""' headers, or CacheIgnoreHeaders is used. mod_cache: follow up to r1591328. Define the cache_merge_headers_out() function to merge r->err_headers_out into Use it in ap_cache_cacheable_headers_out() where the same is done and in cache_save_filter() where this has to be done before updating the entry. mod_cache: follow up to r1594643. Avoid table lookup if not necessary (fast path first). Submitted by: ylavic Reviewed/backported by: jim "	r->headers_out
----------------------------
Merge r1560683 and r1581011 from trunk: (mod/mod_proxy_express.xml) It does more than just a ProxyPass, but also looks at the HOST header, so this gives somewhat deeper insight into what the end result looks like. (mod/mod_proxy_connect.xml) a comma leaked onto the page 	r1598284
----------------------------
comment #2562 -- copy/paste error in CacheSocache.  Already correct on trunk. 	r1598123
----------------------------
iobuffersize for mod_proxy_fcgi? 	r1595471
----------------------------
Merge r1583175 and r1593745 from trunk: mod_alias: Stop setting CONTEXT_PREFIX and CONTEXT_DOCUMENT environment variables as a result of AliasMatch. Submitted by: covener Reviewed by: jim, ylavic 	r1594539
----------------------------
Based on report from Ken Zalewski, on online doc. Add missing Server-Variables useable in RewriteCond directive. Introduced in r1132494 Introduced in r737973 Missing for ages! I have added where I found it logical, feel free to adjust. I have also reordered this table to ease reading. Finally, I have beautified some tables at the end. 	r1594088
----------------------------
propose aliasmatch removal 	r1593746
----------------------------
- Add missing links - Fix extra ] spotted in online doc by emigas. - Remove another ] introduced in Hearder syntax in r1588244 - s/variable/varname/ to match the text below it. - Turn the syntax of both Header and RequestHeader to be: in order to match the code. This removes the ambiguity of expr=<something> which can now be used in 2 different places in the syntax. - Also remove the space in 'expr= value' in compatibility note, to help distinguish between the two 	r1593664
----------------------------
Merge r1588704 from trunk: Fix errors with CacheLock on Windows: cache_util.c(757): (OS 80)The file exists.  : [client 127.0.0.1:63889] AH00784: Attempt to obtain a cache lock for stale cached URL failed, Submitted by: covener Reviewed/backported by: jim 	revalidating
----------------------------
Vote for SSLPassPhraseDialog proposal 	r1592680
----------------------------
2.4-only: remove 2.3.9/2.3.10 trivia Merge r1588747 from trunk: expr=value updates: update RequestHeader syntax, add compat to Header and RequestHeader 	r1588748
----------------------------
propose CacheLock APR_EEXIST/APR_STATUS_IS_EEXIST() bug 	r1588705
----------------------------
Merge r1587036, r1587040, r1587053, r1587654 from trunk: *) mod_proxy_wstunnel: Don't pool backend websockets connections, actually remove mod_reqtimeout, since the util_filter functions involved only manipulate c->input_filters no matter what we pass. We need to make copies of c->input_filters after, not before, it skips over reqtimeout. Note: reqtimeout doesn't really interfere today with normal operation, but this is misleading/confusing when dealing with other wstunnel issues. cleanup wstunnel error handling Submitted By: covener, ylavic, Edward Lu Commited By: covener followup to r1587036. if backend->close is set too early, proxy_util.c will close it right away and then blow away the field. Submitted by: covener Reviewed/backported by: jim 	r1588495
----------------------------
Merge r1514255, r1514267 from trunk: follow-up to r813376: finish reverting r808965 (ServerTokens set foo) tweak syntax strings for ServerTokens Submitted by: trawick Reviewed/backported by: jim 	r1588492
----------------------------
propose mod_ssl SSLCertificateFile workaround for OpenSSL < 0.9.8h 	r1588430
----------------------------
Merge r1531672 from trunk: mod_auth_form: Make sure the optional functions are loaded even when the AuthFormProvider isn't specified. Submitted by: minfrin Reviewed/backported by: jim 	r1588247
----------------------------
Merge r1585919 from trunk: Reverse the order when merging global and vhost-level config arrays. Putting the vhost-level elements last allows overriding global settings (for the deprecated SSLRequire directive, the order is irrelevant, all of them must be met, cf. ssl_engine_kernel.c:ssl_hook_Access). Submitted by: kbrand Reviewed/backported by: jim 	r1588245
----------------------------
merge r1588213 from trunk: Add hint about RequestHeader 	r1588220
----------------------------
Merge r1580568 from trunk: mod_reqtimeout: Resolve unexpected timeouts on keepalive requests under the Event MPM. PR56216. Submitted By: Frank Meier <frank meier ergon ch> Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1587697
----------------------------
Merge r1572630, r1572611, r1572967, r1573229 from trunk: Redo what was reverted in r1572627. Don't reuse a SSL backend connection whose SNI differs. PR 55782. This may happen when ProxyPreserveHost is on and the proxy-worker handles connections to different Hosts. Follows up r1572606. MMN minor bump required by proxy_conn_rec change. mod_proxy: follows up r1572630. Don't reuse a SSL backend connection with no SNI for a request requiring SNI. mod_proxy: Add comment and avoid ternary operator as condition (no functional change). Submitted by: ylavic Reviewed/backported by: jim 	r1587201
----------------------------
Add <compatibility> notes for changes made in version 2.4.4 + fix default value for FallbackResource 	r1586470
----------------------------
"Update SSLPassPhraseDialog directive docs to correctly describe the current behavior for ""exec""-type programs in 2.4.x, at least. The new argument structure is a consequence of r1573360 (backport to 2.4.8 [unreleased]). "	r1585902
----------------------------
Follup to r1584684: AcceptFilter was wrongly turned into a Windows specific feature. 	r1584704
----------------------------
vote for reqtimeout i proposed add a -1 for aliasmatch thing 	r1584415
----------------------------
Merge r1583005 and 1583027 from trunk: Report OpenSSL directories in configuration summary Describe issue with multiple OpenSSL installs 	r1583028
----------------------------
propose reqtimeout patch from PR56216 	r1580571
----------------------------
mod_lua: Add a fixups hook that checks if the original request is intended for LuaMapHandler. This fixes a bug where FallbackResource invalidates the LuaMapHandler directive in certain cases by changing the URI before the map handler code executes [Daniel Gruno]. 	r1577145
----------------------------
copy/paste errors in new directive DirectoryCheckHandler 	r1575774
----------------------------
Promote DirectoryCheckHandler. 	r1573575
----------------------------
Vote for DirectoryCheckHandler. 	r1573574
----------------------------
"Merge r1546804, r1553824, r1554192, r1555463, r1555467, r1563417, r1564760, r1565081 from trunk: Throw away the myCtxVar{Set,Get} abomination and introduce a pphrase_cb_arg_t struct instead, for passing stuff between ssl_pphrase_Handle and ssl_pphrase_Handle_CB. Prefer struct members instead of using additional local variables, to make the data flow more transparent. (Doesn't ""vastly simplify"" the code yet, but hopefully we'll get there when further stripping down ssl_pphrase_Handle.) Remove the hardcoded algorithm-type dependency for the SSLCertificateFile and SSLCertificateKeyFile directives, and deprecate SSLCertificateChainFile Splitting the patch into smaller pieces turned out to be infeasible, unfortunately, due to the heavily intertwined code in ssl_engine_config.c, ssl_engine_init.c and ssl_engine_pphrase.c, which all depends on the modssl_pk_server_t data structure. For better comprehensibility, a detailed listing of the changes follows: ssl_private.h - drop the X509 certs and EVP_PKEY keys arrays from modssl_pk_server_t - use apr_array_header_t for cert_files and key_files - drop tPublicCert from SSLModConfigRec - drop the ssl_algo_t struct and the SSL_ALGO_* and SSL_AIDX_* constants ssl_engine_config.c - change to apr_array_header_t for SSLCertificate[Key]File - drop ssl_cmd_check_aidx_max, i.e. allow an arbitrary number of certs and keys (in theory; currently OpenSSL does not support more than one cert/key per algorithm type) - add deprecation warning for SSLCertificateChainFile ssl_engine_init.c - configure server certs/keys in ssl_init_server_certs (no longer via ssl_pphrase_Handle in ssl_init_Module) - in ssl_init_server_certs, read in certificates and keys with standard OpenSSL API functions (SSL_CTX_use_*_file), and only fall back to ssl_load_encrypted_pkey when encountering an encrypted private key - drop ssl_server_import_cert, ssl_server_import_key, ssl_init_server_check, and ssl_init_ctx_cleanup_server - move the ""problematic re-initialization"" check to ssl_init_server_ctx ssl_engine_pphrase.c - use servername:port:index as the key identifier, instead of the previously used servername:port:algorithm - ssl_pphrase_Handle overhaul: remove all cert/public-key handling, make it only load a single (encrypted) private key, and rename to ssl_load_encrypted_pkey - in the passphrase prompt message, show the private key file name instead of the vhost id and the algorithm name - do no longer supply the algorithm name as an argument to ""exec""-type passphrase prompting programs ssl_util.c - drop ssl_util_algotypeof, ssl_util_algotypestr, ssl_asn1_keystr, and ssl_asn1_table_keyfmt ssl_util_ssl.{c,h} - drop SSL_read_X509 - constify the filename arg for SSL_read_PrivateKey CodeWarrior compiler doesnt allow vars as struct inits. Remove per-certificate chain handling code (obsoleted by https://git.openssl.org/gitweb/?p=openssl.git;a=commitdiff;h=b9fa413a08d436d6b522749b5e808fcd931fd943) make the ppcb_arg initialization a bit more uniform and easier to read Followup fix for r1553824: also pass the file name to ssl_load_encrypted_pkey, to make sure that we With OpenSSL 1.0.2 or later, enable OCSP stapling in a loop based on SSL_CTX_set_current_cert(), near the end of ssl_init_server_ctx. update APLOGNO for r1564760 Submitted by: kbrand, fuankg, kbrand, kbrand, kbrand, kbrand, kbrand Reviewed/backported by: jim "	retry
----------------------------
Merge r1570288 from trunk: *) mod_rewrite: Add RewriteOptions InheritDown, InheritDownBefore, Submitted By: Edward Lu Committed By: covener Submitted by: covener Reviewed/backported by: jim 	r1570684
----------------------------
Remove configurations referring to browsers from the dim and distant past. 	r1567955
----------------------------
"Drop stalled RFC 5878 backport proposals (reverted in trunk with r1468131), as they have been obsoleted through ""SSLOpenSSLConfCmd ServerInfoFile"" meanwhile (r1555683, and CT is no longer using SSL_CTX_use_authz_file either). "	r1563425
----------------------------
propose SSLCertificate[Key]File/SSLCertificateChainFile overhaul for mod_ssl 	r1562500
----------------------------
propose mod_dir option to step out of the way with another handler is configured 	r1561354
----------------------------
Merge r1559828 from trunk: mod_session: Fix problems interpreting the SessionInclude and SessionExclude configuration. PR: 56038 Submitted by: Erik Pearson <erik adaptations.com> Reviewed by: trawick Submitted by: trawick Reviewed/backported by: jim 	r1560698
----------------------------
Merge r1557641, r1559394, r1559398 from trunk: don't search for directory indexes/directoryslashes if a URL is in the middle of being rewritten [in per-dir context]. PR53929 followups to r1557641 suggested by nd -- add prefix to both the macro and the handler name itself. no make depend in sandbox, fix bld break from r1559394 Submitted by: covener Reviewed/backported by: jim 	r1560697
----------------------------
Merge r1451633, r1451905, r1451921, r1452259, r1453981, r1501913, r1513508, r1531340, r1531370, r1531962, r1533065, r1540052 from trunk: Add in rough uds support (Bugx 54101) from Blaise Tarr <blaise.tarr@gmail.com> Make AF_UNIX aware... fix Windows/Netware?? Follow-up to r1451905 to fix NetWare/Windows compilation. apr trunk-able message tag for dom sock Note about new UDS support UDS subsequent request on a connection fix Reformat the UDS support inline with a new naming structure. Use a flag for speed for testing. syntax sugar... if the worker is associated w/ a UDS, then make sure the log reporting has a visual clue. Ensure that userland format of UDS is the same as how it is configured, no matter how we store and use it internally. Eclipse code analysis warning UDS urls need to be desockified when configuring... Submitted by: jim, fuankg, jim, jim, druggeri, druggeri, jim, jim, jim, jim, jim Reviewed/backported by: jim 	r1560081
----------------------------
Merge r1517406 from trunk: PR55352: mention in the <Proxy> manual that the matching is a prefix only, not the same context-root / segment-aware matching done by <Location>. 	r1559612
----------------------------
propose ssl_die improvement for config (re)init 	r1558461
----------------------------
Merge r1554995 from trunk: Providers defined in <AuthnProviderAlias have not been usable under in virtual hosts since migrating from mod_authn_alias to mod_authn_core. PR 55622. Submitted by: covener Reviewed/backported by: jim 	r1556818
----------------------------
Merge r1524368, r1524388 from trunk: Use apr_socket_timeout_get instead of hard-coded 30 seconds timeout. Use apr_socket_timeout_get instead of hard-coded 30 seconds timeout. Document r1524368 in CHANGES. Submitted by: jkaluza Reviewed/backported by: jim 	r1556815
----------------------------
Backport r1544784 from trunk: Remove SSLPKCS7CertificateFile support: - was never documented, so very unlikely that it was ever used - adds complexity without apparent benefit; PKCS#7 files can be trivially converted to a file for use with SSLCertificateChainFile (concatenated X509 CERTIFICATE chunks, openssl pkcs7 -print_certs...) - only supports PKCS7 files with PEM encoding, i.e. relies on a non-standardized PEM header (cf. RFC 2315 and draft-josefsson-pkix-textual) - issues pointed out in http://mail-archives.apache.org/mod_mbox/httpd-dev/200607.mbox/%3C20060723093125.GA19423@redhat.com%3E were never fully addressed (cf. r424707 and r424735) - has never worked in vhost context due to a cfgMergeString call missing from modssl_ctx_cfg_merge Proposed by: kbrand Reviewed by: covener, druggeri 	r1556290
----------------------------
Merge r1556102 from trunk: add some information about setenvif vs. subrequests for PR55957 	r1556104
----------------------------
merge r1555424 from trunk: document on/off parameter in the usual manner and show defaults for SSLHonorCipherOrder, SSLOCSPEnable, SSLOCSPOverrideResponder, and SSLInsecureRenegotiation 	r1555876
----------------------------
"Merge r1542615 from trunk: Explicitly list in which directories to look for config*.m4 files. If some distributor patches a config*.m4 file with quilt, that will place a copy of the original file in .pc/ . Doing a naive ""find ."" will then cause both the original and the patched m4 file to be included, causing havoc later on. PR: 55787 Submitted by: sf Reviewed by: trawick, covener "	r1555792
----------------------------
update transformations for SSLOpenSSLConfCmd 	r1555688
----------------------------
Backport r1421323, r1534754, r1546693, r1555464 from trunk: Add support for OpenSSL configuration commands by introducing the SSLOpenSSLConfCmd directive. Proposed by: kbrand Reviewed by: drh, trawick 	r1555683
----------------------------
Merge r1552227 from trunk: Remove <Proxy ~ wildcard-url> syntax which: Submitted by: jailletc36 Reviewed/backported by: jim 	r1555552
----------------------------
[2.4][doc] mod_dir.xml r1553503 backport - Document 3xx DirectoryIndexRedirect codes 	r1553505
----------------------------
[2.4][doc] mod_dir.xml r1553502 backport - Document 3xx DirectoryIndexRedirect codes 	r1553503
----------------------------
Merge r1546534 from trunk: compat note for AuthLDAPBindPassword exec: 	r1546535
----------------------------
Merge r1543907 from trunk: doc behavior change in r821333, CacheEnable foo / does not apply to forward proxy. 	r1543909
----------------------------
Potential rejection of valid MaxMemFree and ThreadStackSize directives trunk patch: https://svn.apache.org/r1542338 Submitted by: Mike Rumph <mike.rumph oracle.com> Reviewed by: trawick, covener, sf 	r1542549
----------------------------
Merge r1523281, r1524368, r1525276, r1525280, r1525281 from trunk: Switch from private FastCGI protocol handling to util_fcgi API. Use apr_socket_timeout_get instead of hard-coded 30 seconds timeout. Bring some envvar flexibility from mod_authnz_fcgi to mod_proxy_fcgi: mod_proxy_fcgi: Remove 64K limit on encoded length of all envvars. An individual envvar with an encoded length of more than 16K will be omitted. Borrow a fix from mod_authnz_fcgi: mod_proxy_fcgi: Handle reading protocol data that is split between packets. Use ap_log_rdata() to dump the FastCGI header, axing a bunch of custom data dumping code. Submitted by: trawick, jkaluza, trawick, trawick, trawick Reviewed/backported by: jim 	r1542330
----------------------------
"Merge r1526168, r1527291, r1527294, r1527295, r1527926 from trunk: Streamline ephemeral key handling: - drop support for ephemeral RSA keys (only allowed/needed for export ciphers) - drop pTmpKeys from the per-process SSLModConfigRec, and remove the temp key generation at startup (unnecessary for DHE/ECDHE) - unconditionally disable null and export-grade ciphers by always prepending ""!aNULL:!eNULL:!EXP:"" to any cipher suite string - do not configure per-connection SSL_tmp_*_callbacks, as it is sufficient to set them for the SSL_CTX - set default curve for ECDHE at startup, obviating the need for a per-handshake callback, for the time being (and also configure SSL_OP_SINGLE_ECDH_USE, previously left out) For additional background, see https://mail-archives.apache.org/mod_mbox/httpd-dev/201309.mbox/%3C52358ED1.2070704@velox.ch%3E Follow-up fixes for r1526168: - drop SSL_TMP_KEY_* constants from ssl_private.h, too - make sure we also disable aNULL, eNULL and EXP ciphers for per-directory SSLCipherSuite directives - apply the same treatment to SSLProxyCipherSuite Increase minimum required OpenSSL version to 0.9.8a (in preparation for the next mod_ssl commit, which will rely on the get_rfcX_prime_Y functions added in that release): - remove obsolete #defines / macros - in ssl_private.h, regroup definitions based on whether they depend on TLS extension support or not - for ECC and SRP support, set HAVE_X and change the rather awkward #ifndef OPENSSL_NO_X lines accordingly For the discussion prior to taking this step, see https://mail-archives.apache.org/mod_mbox/httpd-dev/201309.mbox/%3C524275C7.9060408%40velox.ch%3E Improve ephemeral key handling (companion to r1526168): - allow to configure custom DHE or ECDHE parameters via the SSLCertificateFile directive, and adapt its documentation accordingly (addresses PR 49559) - add standardized DH parameters from RFCs 2409 and 3526, use them based on the length of the certificate's RSA/DSA key, and add a FAQ entry for clients which limit DH support to 1024 bits (such as Java 7 and earlier) - move ssl_dh_GetParamFromFile() from ssl_engine_dh.c to ssl_util_ssl.c, and add ssl_ec_GetParamFromFile() - drop ssl_engine_dh.c from mod_ssl For the standardized DH parameters, OpenSSL version 0.9.8a or later is required, which was therefore made a new minimum PR 55616 (add missing APLOGNO), part 2 Submitted by: kbrand Reviewed/backported by: jim "	requirement
----------------------------
Merge r1538490 from trunk: c->sbh can be unexpectedly NULL when the thread that pulls the ready keepalive connection out of the queue laps the thread that put it on the queue. Submitted by: covener Reviewed/backported by: jim 	r1541207
----------------------------
axe the discussion on the possibility of backporting the remaining DefaultRuntimeDir functionality to the 2.4.x branch in a way that doesn't break existing configs; the most recent info is on the dev list anyway 	r1541195
----------------------------
Merge 1536310 from trunk: * docs/manual/upgrading.xml: Note 2.4 backwards-compat break for some piped logging configurations. 	r1536367
----------------------------
Merge r1531679 from trunk: mod_session: After parsing the value of the header specified by the SessionHeader directive, remove the value from the response. PR 55279. Submitted by: minfrin Reviewed/backported by: jim 	r1536320
----------------------------
Merge r1532816 from trunk: Interpolation worked within the scheme portion of URLs for ProxyPass and ProxyPassReverse until a fix to apr_uri_parse() in APR-Util 1.5.2 closed the hole that had previously allowed the necessary {} characters within the scheme. Lack of support for interpolation within the scheme will be a permanent limitation. The mod_proxy documentation is updated to provide an alternate configuration solution. PR: 55315 Submitted by: Mike Rumph <mike.rumph oracle.com> Tweaked by: trawick 	r1532824
----------------------------
Add AuthBasicUseDigestAlgorithm directive to allow migration of passwords from digest to basic authentication. Proposed by: chrisd Reviewed by: jim, rjung Backport of r1514064 from trunk. 	r1528957
----------------------------
Merge r1525931 from trunk: APLOG_STARTUP messages shouldn't have custom ErrorLogFormat applied. Reviewed by: jim, covener 	r1526442
----------------------------
Propose AuthBasicUseDigestAlgorithm directive. 	r1524159
----------------------------
Propose note about BalancerPersist in balancer manager 	r1524104
----------------------------
mod_ldap: retry on an LDAP timeout during authn. trunk patch: http://svn.apache.org/r1510084 Submitted by: covener Reviewed by: jim, humbedooh 	r1523264
----------------------------
"mod_ldap:  ""LDAPReferrals off"" does not disable LDAPReferrals feature. Make ""off"" really ""off"" and add ""unset"" to take SDK defaults trunk patch: http://svn.apache.org/r1517388 Submitted by: covener Reviewed by: jim, humbedooh "	r1523263
----------------------------
Add ProxyExpressEnable directive to example 	r1521336
----------------------------
merge r1514039 from trunk: Mention the DumpIOLogLevel change 	r1514044
----------------------------
Merge r1511093 from trunk: mention the change of default value for AllowOverride 	r1511095
----------------------------
Merge r1510098 from trunk: Fix logging of SSL session cache timeout value (at TRACE2 level). Inadvertent side effect of r907918, where the timeout calculation in ssl_callback_NewSessionCacheEntry was slightly modified. Submitted by: kbrand Reviewed/backported by: jim 	r1510527
----------------------------
vote for timeout logging fix 	r1510465
----------------------------
Merge r1389339, r1498880 from trunk: add pre_htaccess hook; in conjunction with earlier dirwalk_stat and post_perdir_config hooks, this should allow mpm-itk to be used without patches to httpd core Replace pre_htaccess hook with more flexible open_htaccess hook Submitted by: trawick, sf Reviewed/backported by: jim 	r1507680
----------------------------
Merge r1507320 from trunk: 1-arg SetEnv is valid http://httpd.apache.org/docs/2.2/mod/mod_proxy_http.html#comment_1528 	r1507321
----------------------------
compat note for AuthBasicFake 	r1504152
----------------------------
Merge r1406068, r1425777, r1427546, r1462643, r1487530, r1493330 from trunk: Replace duplicate log tags Check that AsyncRequestWorkerFactor is not negative PR :54254 Submitted by: Jackie Zhang <jackie qq zhang gmail com> Name pool + concat string at compile time when possible * modules/filters/mod_ratelimit.c (rate_limit_filter): Log the error code. Correct typo in error message Submitted by: sf, jailletc36, jorton, jailletc36 Reviewed/backported by: jim 	remove
----------------------------
Merge r1457471, r1457504, r1462266, r1468581 from trunk: mod_auth_basic: Add a generic mechanism to fake basic authentication using the ap_expr parser. This allows the administrator to construct their own username and password for basic authentication based on their needs. Alternative fix for PR52616. Remove the Authorization header should either the username or the password * Inherit providers during merging mod_auth_basic: Allow AuthBasicFake to be switched off for an URL space. Submitted by: minfrin, rpluem, minfrin Reviewed/backported by: jim 	resolve
----------------------------
Merge r1500042 from trunk: address comment http://httpd.apache.org/docs/2.4/vhosts/examples.html#comment_1441 by explicitly mentioning that ServerName may be calculated and inherited. 	r1500043
----------------------------
add compatibility info for SSLProxyCheckPeerName 	r1499880
----------------------------
add the directive name to the changes entry for SSLProxyCheckPeerName 	r1499879
----------------------------
Merge r1492663 from trunk: mod_cache_socache: Make sure the CacheSocacheMaxSize directive is merged correctly. Submitted by: minfrin Reviewed/backported by: jim 	r1496144
----------------------------
mention addoutputfilterbytype moving to mod_filter 	r1495845
----------------------------
"Merge r1452911, r1452949, r1452954, r1453022, r1453574, r1453875, r1453876, r1453963, r1454386, r1454414, r1454415, r1458285, r1458447 from trunk: Rough start for simple, tunneling websocket proxy support. Compiles at this stage and that's all I know :) force correct scheme info We need to ensure a conn_rec Work around blocking issues... And now pass the initial request to the backend... I dislike this duplication of code from mod_proxy_http() but maybe it's inevitable. I may create ap_proxy_create_headerb() to create a header brigade that both modules can use. Pull out duplicated code to proxy_util... log nums ""final"" rename :) don't strip these, ensure that they exist. streamline bypass reqtimeout for websockets Keep mod_req clear. Simply scan thru input filters and mod_req untouched (for now ;) ) Reviewed/backported by: jim "	remove
----------------------------
core: Add post_perdir_config hook. trunk patch: http://svn.apache.org/r1368121 Submitted by: minfrin Reviewed by: jim, sf 	r1491472
----------------------------
Merge r1490446 from trunk: PR55069 include line number in 'AH00113: cannot use a full URL in a 401 ErrorDocument' 	r1491315
----------------------------
mod_lua: Sync 2.4 branch with trunk. This includes (but is not limited to) Server pools, new apr functions for the request_rec table, input/output filters, LuaCodeCache, LuaMapHandler and multipart form data handling. This is long overdue, and has become too spaghetti-ish to propose in chunks :| trunk patch: http://svn.apache.org/r1366890 Submitted by: humbedooh Reviewed by: jim, covener, fuankg 	r1490599
----------------------------
"core: make the ""default"" parameter of the ""ErrorDocument"" option case insensitive. PR 54419 trunk patch: http://svn.apache.org/r1465190 Submitted by: Tianyin Xu <tixu cs ucsd edu> Reviewed by: jailletc36, fuankg, minfrin "	r1490594
----------------------------
"mod_proxy_html: make the ""ProxyHTMLFixups"" options case insensitive. PR 54420 trunk patch: http://svn.apache.org/r1464762 Submitted by: Tianyin Xu <tixu cs ucsd edu> Reviewed by: jailletc36, fuankg, minfrin "	r1490589
----------------------------
"mod_cache: Make option ""CacheDisable"" in mod_cache case insensitive PR 54462 trunk patch: http://svn.apache.org/r1464721 Submitted by: Tianyin Xu <tixu cs ucsd edu> Reviewed by: jailletc36, fuankg, minfrin "	r1490581
----------------------------
Rebuild html, metafiles. 	r1490414
----------------------------
Backport r1488022 Add missing LoadModule line for mod_auth_form 	r1488023
----------------------------
mod_cache: Ignore response headers specified by no-cache=header and private=header as specified by RFC2616 14.9.1 What is Cacheable. Ensure that these headers are still processed when multiple Cache-Control headers are present in the response. PR 54706 trunk patch: http://svn.apache.org/r1478382 2.4.x patch: http://people.apache.org/~minfrin/httpd-mod_cache-nocacheheader2.4.patch Submitted by: minfrin Reviewed by: jim, wrowe 	r1487103
----------------------------
mod_dav: Sending a MERGE request against a URI handled by mod_dav_svn with the source href (sent as part of the request body as XML) pointing to a URI that is not configured for DAV will trigger a segfault. trunk patch: http://svn.apache.org/r1485668 Submitted by: Ben Reser <ben reser.org> Reviewed by: minfrin, covener, jorton 	r1486461
----------------------------
mention RewriteLog/RewriteLogLevel going away in 2.4 upgrading doc. Submitted by: Sean Timmins Committed by: covener 	r1485752
----------------------------
"mod_authn_file, mod_authz_groupfile: remove an unused and undocumented ""standard"" optional parameter for 'AuthGroupFile' and 'AuthUserFile' trunk patch: http://svn.apache.org/r1484398 Submitted by: jailletc36 Reviewed by: covener, minfrin "	r1485737
----------------------------
core: speed up (for common cases) and reduce memory usage of ap_escape_logitem This should save 70-100 bytes in the request pool for a default config. trunk patch: http://svn.apache.org/r1485409 Submitted by: jailletc36 Reviewed by: jim, covener 	r1485723
----------------------------
Merge r1425874, r1426850 from trunk: mod_ssl: add support for subjectAltName-based host name checking in proxy mode (PR 54030) factor out code from ssl_engine_init.c:ssl_check_public_cert() to ssl_util_ssl.c:SSL_X509_match_name() introduce new SSLProxyCheckPeerName directive, which should eventually obsolete SSLProxyCheckPeerCN ssl_engine_io.c:ssl_io_filter_handshake(): avoid code duplication when aborting with HTTP_BAD_GATEWAY Fix warning about discarding 'const' qualifier from pointer Submitted by: kbrand, sf Reviewed/backported by: jim 	r1485667
----------------------------
event MPM: Provide error handling for ThreadStackSize. PR 54311 trunk patch: http://svn.apache.org/r1433682 Submitted by: Tianyin Xu <tixu cs.ucsd.edu> Reviewed by: minfrin, jailletc36, sf 	r1481515
----------------------------
core: Improve error message where client's request-line exceeds LimitRequestLine PR 54384 trunk patch: http://svn.apache.org/r1433613 Submitted by: jailletc36 Reviewed by: minfrin, jim 	r1481512
----------------------------
Merge r1476680 from trunk: mod_proxy: Clarify the usage suggestion for BalancerInherit and ProxyPassInherit. Submitted by: minfrin Reviewed/backported by: jim 	r1477650
----------------------------
Merge r1387603, r1388029, r1420124, r1421288, r1421912, r1422943, r1422980, r1430575, r1439404 from trunk: wtf are we doing merging in these from the parent?? These are server specific! OK, enable/allow previous broken, bad behavior iff the user in those cases. inherit inherit Use inherit_set to let the global server set the default for all vhosts. Otherwise inherit would need to be disabled Redfine - we are just worried about balancers and workers, so have the directive clear about that. Naming ProxyPassInherit directive Submitted by: jim, rjung, jim, jim, jim, jim Reviewed/backported by: jim 	restrict
----------------------------
mod_authnz_ldap: Allow using exec: callouts like SSLPassphraseDialog for AuthLDAPBindPassword. trunk patch: http://svn.apache.org/viewvc?view=revision&revision=1433478 2.4.x patch: http://people.apache.org/~druggeri/patches/AuthLDAPBindPasswordExec-2.4.patch Submitted by: druggeri Reviewed by: jim, minfrin 	r1476694
----------------------------
mod_proxy_balancer: Add failontimeout parameter. Timeout will put worker in error state if an IO timeout is detected. trunk patch: http://svn.apache.org/viewvc?view=revision&revision=1465839 2.4.x patch: http://people.apache.org/~druggeri/patches/httpd-2.4.x-failontimeout.patch Submitted by: druggeri Reviewed by: jim, minfrin 	r1476689
----------------------------
mod_ssl: Catch missing, mismatched or encrypted client cert/key pairs with SSLProxyMachineCertificateFile/Path directives. PR 52212, PR 54698. (check at startup, to prevent segfaults at proxy request time) trunk patches: https://svn.apache.org/r1374214 2.4.x patch: https://people.apache.org/~kbrand/PR52212_54698_2.4.x.patch Submitted by: kbrand Reviewed by: jorton, minfrin 	r1476685
----------------------------
Merge r1471449 from trunk: * Fix null pointer dereference in case SetEnvif and SetEnvIfExpr are used together. PR: 54881 Submitted by: rpluem Reviewed by: rpluem, covener, humbedooh 	r1476143
----------------------------
DirectoryIndex and mod_autoindex 	r1476015
----------------------------
Note that ProxyPass[Match] doesn't work within a <Directory> context. 	r1475706
----------------------------
Merge r1467765 from trunk: Fix crash in mod_log_config when logging (LogFormat contains %{end}t). The request_config for mod_log_config might not be initialized. PR 54828. Submitted by: rjung Reviewed/backported by: jim 	request
----------------------------
"LoadModule is no longer a ""new"" directive in 2.4 "	r1463186
----------------------------
Merge r1456061 from trunk: PR54687:  note that REQUEST_FILENAME is influenced by AcceptPathInfo 	r1456062
----------------------------
Merge r1364695 from trunk: mod_lbmethod_heartbeat, mod_heartmonitor: Respect DefaultRuntimeDir/ DEFAULT_REL_RUNTIMEDIR for the heartbeat storage file. Submitted by: trawick Reviewed/backported by: jim 	r1455218
----------------------------
"Merge r1435811 from trunk: Add ""mod_macro"" as a standard module, compiled in with ""most"". This module was created in 1998 and has been distributed independently ever since. It is hereby donated to the Apache Software Foundation. There are quite a few comments in the source code to explain how it works, as well as extensive non regression tests. Some utilities about array processing could be moved to ""core.c"". However, I finally decided against for now so that it stays as an external and independent module, and thus may be backported with minimal impact on the source tree. Details of the addition: * modules/core/mod_macro.c: module source code * modules/core/test: non regression tests modules/core/test/conf/: configuration files modules/core/test/ref/: expected results * docs/manual/mod/mod_macro.xml: English documentation * docs/manual/mod/mod_macro.xml.fr: French documentation Submitted by: fabien Reviewed/backported by: jim "	r1455215
----------------------------
Use define for serverroot with NetWare conf files. (Backport r1451155) 	r1451928
----------------------------
let heartmonitor storage file respect DefaultRuntimeDir? 	r1449960
----------------------------
fix DefaultRuntimeDir revision list (including mod_slotmem_plain that jim asked about) don't forget tweaks to API migration docs, which can be migrated independently 	r1449930
----------------------------
Hard coded ThreadLimit for event is 100,000. 	r1448589
----------------------------
Contributed By: Evgeny Barsukov Reviewed By: covener, humbedooh, rjung Merge r1447426 from trunk: Unbreak default case of RewriteBase not being set after r1410681 Contributed By: Evgeny Barsukov Reviewed By: covener 	r1447448
----------------------------
Merge r1442412 from trunk: Fix  incomplete filename in ErrorLog when trying to access files in non existing directories PR39944 Submitted by: jailletc36 Reviewed/backported by: jim 	r1443076
----------------------------
Merge r1442320 from trunk: Don't keepalive the connection to the client if the backend closes the connection. PR: 54474 Submitted by: Pavel Mateja <pavel netsafe cz> Submitted by: sf Reviewed/backported by: jim 	r1443075
----------------------------
"Merge r1428184, r1429228 from trunk: Improve pkg-config usage for mod_ssl/ab: also use pkg-config for determining the -l flags (and fall back to a hardcoded default of ""-lssl -lcrypto"") add --static to pkg-config invocations, so that libraries for static linking are also taken into account (PR 54252 - note that the additional flags will only appear in modules/ssl/modules.mk and ab_LDFLAGS, so potential side effects are limited) separate --libs-only-L and --libs-only-other into two invocations (can't be used concurrently, only the first takes effect) use --silence-errors where applicable mod_ssl/ab: only use ""--static"" for pkg-config when explicity requested (by adding an ""--enable-ssl-staticlib-deps"" option to configure) Submitted by: kbrand Reviewed/backported by: jim "	r1440507
----------------------------
Backport r1439106: Clarify more clearly in the examples which configurations are limited to CacheQuickHandler off and which support both. 	r1439108
----------------------------
Merge r1438838 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: try to emphasize that ErrorDocument nnn /foo doesn't send a HTTP redirect. 	r1438839
----------------------------
"Merge r1438833 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: http://httpd.apache.org/docs/2.4/platform/windows.html#comment_760 Get rid of ""SystemRoot"" used where ServerRoot was meant, by dropping this whole part of the sentence. (use drive letters, unless they're network drives and you're running as a service ...) "	r1438835
----------------------------
Merge r1392120, r1392122, r1392150 from trunk: Fix shell errors when trying to AC_MSG_RESULT() for --with-module. (The change to IFS hosed any AC_MSG_foo() invocations.) It is easy enough to reorder the reset of IFS and the AC_MSG_RESULT() invocation, but there's a big stretch of shell code where AC_MSG_foo() might be useful someday, so get rid of the commas at the start and leave IFS alone and AC_MSG_foo() at will. fix bug in r1392120: replace ALL commas --with-module: Fix failure to integrate them into some existing module directories. modules/config?.m4 needs to run after the modules/*/config?.m4. Otherwise, modules.mk as created for --with-module gets wiped out first. PR: 40097 Submitted by: trawick Reviewed/backported by: jim 	r1436908
----------------------------
Vote for BalancerInherit 	r1436542
----------------------------
Merge r1433988 from trunk: * A limit of zero means unlimited for LimitRequestBody. PR: 54435 Submitted by: Pavel Mateja <pavel netsafe.cz> Reviewed by: rpluem Submitted by: rpluem Reviewed by: rpluem, jim, jorton 	r1436443
----------------------------
ErrorLogFormat has different defaults on different MPMs 	r1435365
----------------------------
Adds examples to the <!--#config SSI function 	r1433791
----------------------------
Merge r1397687 from trunk: configure: Fix processing of --disable-FEATURE for various features. Submitted by: trawick Reviewed/backported by: jim 	r1430949
----------------------------
Show an example of using a Define'ed variable in a configuration. 	r1430665
----------------------------
BalancerInherit proposal 	r1430590
----------------------------
Merge r1422937 from trunk: ab: add the possibility to define a socket timeout (-s timeout) [Guido Serra <zeph fsfe org>] Also some changes In usage(): - reword -t option to be more clear with the new -s - add missing -q - add the new -s option - reword some options to better match online documentation ab.xml claimed that -s was already there, but nothing in the code looks like that. So, I guess it only landed on the online doc... Submitted by: jailletc36 Reviewed/backported by: jim 	r1430300
----------------------------
Widen strip pattern in config_vars.sh to also match MOD_XML2ENC_LDADD. This was the first module with digits in its name. Submitted by: rjung Backported by: rjung Reviewed by: rjung, covener, fuankg Backport of r1426975 from trunk. 	r1427067
----------------------------
LuaMapHandler isn't in 2.4 yet, so let's not refer to it. 	r1425749
----------------------------
Merge r1425345 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: caution about merging Location settings on top of directory/files authz config 	r1425346
----------------------------
Merge r1406493, r1406495 from trunk: Make <If> sections in virtual host context fill in cmd->path so that other directive notice that they are in a config section. This fixes LogLevel not working in <If> sections that are not in Location/Directory/File sections. Make ap_check_cmd_context() treat <If> sections like <File> sections. This is necessary to properly disallow directives that don't work in <If>. A separate NOT_IN_IF flag may be nicer, but would create much more hassle when being backported to 2.4. Submitted by: sf Reviewed/backported by: jim 	r1422877
----------------------------
Merge r1422375 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: PR54308: aliasmatch ^/foo matches requests for ////foo 	r1422376
----------------------------
- Add missing documentation for ProxyHTMLMeta directive. - Tidy up mod_proxy_html docs PR 54269 - Fix validation error. Backports of r1311468, r1420120 and r1420685 from trunk. 	r1420728
----------------------------
Merge r1407459, r1407460, r1419781, r1418524, r1401448, r1405407, r1405973, r1419726, r1418769, r1417197 from trunk: mod_remoteip.c:404:38: warning: data argument not used by format string [-Wformat-extra-args] It's a hack, but maintain the orig hack ;) Remove warnings mod_speling.c:400:41: warning: data argument not used by format string [-Wformat-extra-args] Use 'apr_is_empty_table()' instead of testing against 'apr_table_elts(...)->nelts' Use ap_rputs instead of ap_rvputs where applicable. No need to apr_pstrdup things here, 'apr_socket_accept_filter' already makes it own copy. Not compiled nor tested as on my system APR_HAS_SO_ACCEPTFILTER is set to 0. of args passed to apr_socket_accept_filter() cppCheck: kill two warnings about incorrect printf parameters. 'worker_thread_count' is unsigned cppCheck: same expression on both side of '|'. Fix it the same way other messages are managed in the function. Fix a few 'too many arguments for format' warnings cppCheck: kill a unread variable warning Submitted by: jim, jailletc36, jailletc36, jailletc36, trawick, jailletc36, jailletc36, sf, jailletc36 Reviewed/backported by: jim 	revert
----------------------------
mod_auth_form: Support the expr parser in the AuthFormLoginRequiredLocation, AuthFormLoginSuccessLocation and AuthFormLogoutLocation directives. mod_auth_form: Make sure 500 Internal Server Error is Submitted by: minfrin Backported by: minfrin Reviewed by: minfrin, sf, rjung Backports of r1388648 and r1418721 from trunk. 	returned
----------------------------
Merge r1415023 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: PR54223: 2.4 generates AH00554 when Include points to a directory with no wildcard. directories, but also changed a path non-fnmatch directories are passed through to call ap_process_resource_config(). 	r931435
----------------------------
Merge r1415008, r1416150 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: PR54222: catch invalid ServerTokens args Submitted by: Jackie Zhang  <jackie.qq.zhang gmail.com> Reviewed/modified by: covener Sort error message for ServerTokens by increasing verbosity. Add missing 'OS' variant. Remove some trailing whitespace. 	r1416746
----------------------------
Merge r1398066 from trunk: FallbackResource : Support for the 'disabled' argument Submitted by: gryzor Reviewed/backported by: jim 	r1416585
----------------------------
"Merge r1337344, r1378178, r1397636, r1398025, r1398040, r1398481, r1407004, r1407006, r1407088, r1407528 from trunk: * support/suexec.c: Add gcc format-string attributes to logging functions. (main): Always print uid/gid as unsigned long, and cast to avoid warnings (which somewhat defeats the point of the format string attrs, but is necessary since the size of gid/uid varies). s/;;/;/ No need to test for NULL before calling apr_pstrdup. No need it apr_pcalloc here, the memory is fully initialized the line just after cppCheck: unreadVariable - 'serviceFlag' is not used in the function, so remove it Remove unused code. ""Next week"" hasn't happened in the last 10 years or so. log client error at level debug, log broken Host header value Submitted by: jorton, pqf, jailletc36, jailletc36, jailletc36, jailletc36, sf, sf, sf, sf Reviewed/backported by: jim "	remove
----------------------------
add rewritebase proposal 	r1410683
----------------------------
update list of DefaultRuntimeDir revisions in trunk that need adjusting for 2.4.x 	r1407463
----------------------------
s/Options/AllowOverride/ in comment describing AllowOverride 	r1406904
----------------------------
Adding .fr translation for rewritemap doc 	r1403422
----------------------------
Merge r1400700 from trunk: Change default for SSLCompression to off, as compression causes security issues in most setups Submitted by: sf Reviewed/backported by: jim 	r1400962
----------------------------
"Merge r1370763 from trunk: mod_slotmem_plain: make the ""filename"" key relative to DefaultRuntimeDir if not absolute mod_slotmem_plain does not externalize or check the full path in any way, so this change is just for consistency with other modules which build paths to run-time artifacts. Submitted by: trawick Reviewed/backported by: jim "	r1400945
----------------------------
Adding documentation patch link for 'FallbackResource disabled' backport 	r1400768
----------------------------
Suggest FallbackResource 'disabled' patch into 2.4 	r1398074
----------------------------
Documenting the new 'disabled' argument accepted by FallbackResource 	r1398065
----------------------------
Adding support for the 'disabled' keyword to FallbackResource 	r1398064
----------------------------
Backport r1394984: Note that AllowOverride changed its default value to None in 2.3.9 As per comment #264 on site. 	r1394988
----------------------------
Merge r1392347 from trunk: core: ErrorDocument now works for requests without a Host header. PR: 48357 Submitted by: trawick Reviewed/backported by: jim 	r1394035
----------------------------
"mod_proxy: Avoid double slash with ""ProxyPassReverse / ..."" cases trunk patch: http://svn.apache.org/viewvc?view=revision&revision=1386576 2.4.x patch: trunk patch works +1: jim, druggeri, minfrin "	r1393199
----------------------------
The LuaCodeCache patch seems stalled to me :) 	r1390523
----------------------------
"backport r1385216, r1387610 from trunk: Spin off module-specific build options into separate build vars. [second try, supersedes r1385214] Add MOD_CFLAGS, MOD_LDFLAGS variables etc. to the build commands, which are available to modules for customization on a per-subdir basis (by adding definitions to modules.mk). Reduces the risk of side-effects when a module needs to add CFLAGS, LDFLAGS etc. and these would be added to the global settings (ALL_CFLAGS etc.). Adapt build settings for mod_ssl, mod_socache_dc, mod_deflate, mod_xml2enc, mod_proxy_html, and mod_lua to use the new MOD_xxx build variables. Change PICFLAGS, SHLTCFLAGS and LTCFLAGS into config vars, instead of AC_SUBSTing them in build/rules.mk.in. For support/ab, introduce ab_CFLAGS and ab_LDFLAGS, and define explicit make targets where they appear at the proper position in the build commands. Consistently use ""--with-xxx=PATH"" in configure help strings which are used to specify a path to the installation directory of an auxiliary package. "	r1390518
----------------------------
Merge r1373898 from trunk: Fix crash in packet dump code of mod_proxy_ajp when logging with LogLevel trace7 or trace8. PR 53730 Submitted by: rjung Reviewed/backported by: jim 	r1390510
----------------------------
"Merge r1386913, r1388825 from trunk: Revert r1371878 --  default configuration changes that drop the DNT header from IE10. See: Message-ID: <CALK=YjMGPNHBqNiad-ghzcEzxDovQgYOpjpSSyXmN=r74v43qg@mail.gmail.com> PR 53845 Keep this in, but commented out: also provide a little more background/rationale. This, hopefully, satisfies both ends of the debate: we don't ""assume"" that everyone who uses this browser didn't make the specific choice, but we allow for admins who care about DNT and want to either 1. Make a statement 2. Force adherence to the standard to easily do so. Submitted by: covener, jim Reviewed/backported by: jim "	r1389261
----------------------------
propose DefaultRuntimeDir for mod_slotmem_plain... the discussion item doesn't apply. 	r1387330
----------------------------
Windows: Fix output of -M, -L, and similar command-line options which display information about the server configuration (backport r1374428). Submitted by: trawick Reviewed/backported by: gsmith, fuankg 	r1386956
----------------------------
backport r1379031: Note that AuthDBDUserRealmQuery is for Digest auth requests, not Basic auth. 	r1379699
----------------------------
backport r1379335: Add Redirect* to the list of directives that are controlled by AllowOverride FileInfo 	r1379696
----------------------------
Comment out LuaMapHandler, as it's not implemented in 2.4.x yet. 	r1375925
----------------------------
Add default value of PrivilegesMode to docs. Backport of r1375011 from trunk. 	r1375044
----------------------------
merge r1374569 from trunk: add links to AcceptFilter and Windows platform documentation add some notes on key configuration issues 	r1374572
----------------------------
Merge r1351020, r1370466 from trunk: Add new directive LuaAuthzProvider to allow implementing an authorization provider in lua There is only one global provider name space, therefore allow LuaAuthzProvider only in global scope. Remove unnecessary server config field. Submitted by: sf Reviewed/backported by: jim 	r1374252
----------------------------
Revert r1373105, the merging of incompatible DefaultRuntimeDir changes. The trunk patches for these all have some configuration breakage as 2.4.x interprets the individual directive or API parameter as 	relative
----------------------------
Merge r1371801 from trunk: Windows: Fix SSL failures on windows with AcceptFilter https none. The now-stray apr_socket_opt_set(APR_SO_NONBLOCK=On) call was originally added with r327872.  The call was harmless on Unix due to APR's use of non-blocking sockets when implementing timeouts on that platform, but harmful on Windows since it collided with APR's different implementation of timeouts on that platform. PR: 52476 Submitted by: trawick Reviewed/backported by: jim 	r1373108
----------------------------
"Merge r1364695, r1369477, r1369808, r1370288, r1370225, r1370763, r1371684 from trunk: mod_lbmethod_heartbeat, mod_heartmonitor: Respect DefaultRuntimeDir/ DEFAULT_REL_RUNTIMEDIR for the heartbeat storage file. core: Respect DefaultRuntimeDir/DEFAULT_REL_RUNTIMEDIR for the scoreboard (ScoreBoardFile). The Pidfile directive and ap_log_pid()/ap_remove_pid()/ap_read_pid() now respect DefaultRuntimeDir Mutex directive: finish support of DefaultRuntimeDir a partial conversion was made in r1299718, but I'm not sure when that change is effective mod_socache_shmcb and mod_socache_dbm: finish support of DefaultRuntimeDir a partial conversion was made in r1299718, affecting cases where no filename was specified mod_slotmem_plain: make the ""filename"" key relative to DefaultRuntimeDir if not absolute mod_slotmem_plain does not externalize or check the full path in any way, so this change is just for consistency with other modules which build paths to run-time artifacts. make LDAPSharedCacheFile relative to DefaultRuntimeDir Submitted by: trawick Reviewed/backported by: jim "	r1373105
----------------------------
Merge r1371387 from trunk: mod_auth_digest now respects DefaultRuntimeDir Submitted by: trawick Reviewed/backported by: jim 	r1373081
----------------------------
Add a round of very easy to review backport proposals. Also add the revision numbers related to DefaultRuntimeDir. 	r1371947
----------------------------
(SSL failures on Windows with AcceptFilter https none)? 	r1371802
----------------------------
Merge r1369995, r1369999, r1370001 from trunk: Use apr_pcalloc for rewritemap_entry struct, to avoid uninitialized entries. PR: 53663 Submitted by: Mikhail T. <mi apache aldan algebra com> Add changes entry for r1369995, r1369999 Submitted by: sf Reviewed/backported by: jim 	remove
----------------------------
clarify that the 2.4 pidfile APIs process paths relative to ServerRoot 	r1369810
----------------------------
merge r1364709 from trunk: doc fixes for r1299718: The value of ScriptSock is relative to DefaultRuntimeDir. 	r1369607
----------------------------
mod_ssl: Add new directive SSLCompression to disable TLS-level compression. PR 53219. Backport of r1345319 and r1348656 from trunk. Submitted by: Bjoern Jacke <bjoern j3e de>, sf Reviewed by: rjung, trawick Backported by: rjung 	r1369585
----------------------------
SSLCompression directive approved 	r1369507
----------------------------
grab r1369435 from trunk: fix documented default value of ScoreBoardFile 	r1369436
----------------------------
Merge r1361766 from trunk: Simplify handling of MaxConnectionsPerChild If we decrement the counter at accept time and not at close time, we only need to access the counter in the listener thread and the code gets much simpler. Submitted by: sf Reviewed/backported by: jim 	r1368452
----------------------------
Add a docs link to a configuration example. Backport of r1368053 from trunk. 	r1368054
----------------------------
Dropping the LuaCodeCache proposal until we get the rest of the backports sorted out (tba). 	r1367977
----------------------------
Remove [max|min max] from the LuaScope syntax, since the 'server' scope is not implemented yet. Add the 'thread' value to the list of possible scopes 	r1367592
----------------------------
LuaQuickHandler had no syntax, which made the reference sheet look wrong. 	r1366863
----------------------------
Comment out LuaCodeCache, which hasn't been implemented yet. 	r1366860
----------------------------
mod_setenvif: Compile the regex used by is_header_regex() only once during startup This should save some memory, especially with .htaccess Backport of r1343099. Submitted by: sf Reviewed by: rjung, jim Backported by: rjung 	r1365774
----------------------------
Fixes for proxyblock patch - thanks to rjung. 	r1365603
----------------------------
Remove reference to the 'server' value in LuaScope, since it doesn't exist. 	r1365289
----------------------------
Nominate ProxyBlock fixes.# 	r1365066
----------------------------
Honor DefaultRuntimeDir for mutexes, socache and CGID socket. Move away from DEFAULT_REL_RUNTIMEDIR and use ap_runtime_dir_relative() API. Backport of r1299718 from trunk. Submitted by: jim Reviwed by: rjung, trawick Backported by: rjung 	r1364709
----------------------------
Merge r1341906, r1341913 from trunk: * acinclude.m4: Use AC_MSG_NOTICE. * configure.in: Use AC_MSG_NOTICE so passing --silent works as advertised. Reviewed by: rjung, humbedooh, jorton 	r1364675
----------------------------
vote/promote support for DefaultRuntimeDir for a handful of modules 	r1364617
----------------------------
Merge r1332378 from trunk: If a filename without slashes is specified for LoadFile or LoadModule and the file cannot be found in the server root directory, try to use the standard dlopen() search path. Submitted by: sf Reviewed/backported by: jim 	r1364603
----------------------------
Merge r1306426, r1306841 from trunk: Update worker mpm defaults to match documentation and built-in defaults. As per https://issues.apache.org/bugzilla/show_bug.cgi?id=52102 Updated event mpm configuration to match the defaults in documentation and header definitions. Updated prefork defaults to better match documentation and header definition. Submitted by: humbedooh Reviewed/backported by: jim 	r1364600
----------------------------
Merge r1306350 from trunk: Adapt Timeout to be the same as DEFAULT_TIMEOUT. After all it's localted in a file called extra/httpd-default.conf Submitted by: igalic Reviewed/backported by: jim 	r1364599
----------------------------
Fix MaxConnectionsPerChild This was broken when the handling of lingering close was moved into the listener thread. - Make the connection counting thread safe. - Do the counting in the connection pool cleanup to ensure that it gets also executed if the listener thread closes the connection. - Add a trace log message when a process is recycled. - Rename requests_this_child to conns_this_child, which is more accurate Backport of r1343085 and r1343087. Submitted by: sf Reviewed by: humbedooh, rjung Backported by: rjung 	r1364268
----------------------------
Always log if LimitRequestFieldSize triggers. Backport of r1352911 from trunk. Submitted by: sf Reviewed by: rjung, trawick Backported by: rjung 	r1364263
----------------------------
2.4.x ab busted on IPv6-enabled Windows, needs existing fix (presumably busted for a lot more configurations) 	r1363766
----------------------------
"Remove .* from the equation in the ""<Directory ~ ..."" example. Submitted by: Daniel (comment #143 on site) "	r1363516
----------------------------
Fixing the links to ProxyPass* into the note added in r1362933 	r1362936
----------------------------
Adding a note about proxy performance being bad when using rewrite's [P]. Advise the use of ProxyPass* instead 	r1362933
----------------------------
Add information about the possible values of ProxyExpressDBMType 	r1361949
----------------------------
"Merge r1359881 from https://svn.apache.org/repos/asf/httpd/httpd/trunk/: but inadvertently made ""AllowOverride Options"" behave like ""AllowOverride Options=FollowSymLinks"". PR53444 "	r1052419
----------------------------
Merge r1309602 from trunk: mod_rewrite: Fix RewriteCond integer checks to be parsed correctly. PR: 53023 Submitted by: Axel Reinhold <apache freakout.de> Reviewed/Updated by: nd Submitted by: nd Reviewed/backported by: jim 	r1361281
----------------------------
"propose a simple fix for PR53444 (""AllowOverride Options"" doesn't allow most ""Options Indexes"") "	r1359987
----------------------------
Merge r1311183 from trunk: Fix parsing of Require arguments in <AuthzProviderAlias>. Add some logging and an assert for a case that should not happen. PR: 53048 Submitted by: sf Reviewed/backported by: jim 	r1359691
----------------------------
Merge r1347998 from trunk: * configure.in: Enforce 1.4.0 as minimum APR version requirement. PR: 52748 Submitted by: jorton Reviewed/backported by: jim 	r1359688
----------------------------
Add LuaAuthzProvider as a valid Directive. 	r1355925
----------------------------
Merge r1352084 from trunk: add a warning in the LDAP AuthnProviderAlias and expecting to have a configured LDAP authorization provider. 	r1352088
----------------------------
Backport from trunk: Add a note that VirtualDocumentRoot will override DocumentRoot in the current scope (and thus also in all virtual hosts if defined in the global server scope) 	r1349158
----------------------------
Merge r1344675 from trunk: PR5334, leave a hint about VirtualHost args acting like serveralias for people who don't read details.html 	r1344676
----------------------------
Merge r1343935: be more verbose about what -DDUMP_CONFIG does not 	r1343937
----------------------------
Merge r1309585 from trunk: static scope for rewritemap_mutex_type. Submitted by: nd Reviewed by: sf, jorton, trawick 	r1333493
----------------------------
Merge 1328345, add CHANGES entry: * server/main.c (main): Bail out *before* signalling the server if the config is bad. (as per the claim in the docs!) Submitted by: jorton Reviewed by: jorton, jim, sf 	r1331847
----------------------------
Merge r1311174 from trunk: Fix error handling in ap_scan_script_header_err_brigade() if there is no EOS bucket in the brigade: Also don't loop if there is a timeout when discarding the script output. Thanks to Edgar Frank for the analysis. PR: 48272 (partial fix) Submitted by: sf Reviewed/backported by: jim 	r1331414
----------------------------
Merge r1299783 from trunk: some more trace logging for AddOutputFilterByType Submitted by: sf Reviewed/backported by: jim 	r1331412
----------------------------
Merge r1311086 from trunk: Describe DBDInitSQL 	r1311090
----------------------------
Merge r1309193 from trunk: PR50662: reword the hint about sslrequire expressions being parsed in htaccess so it doesn't apply non-perdir config. 	r1309194
----------------------------
Merge r1298433, r1305166 from trunk: Use new ap_runtime_dir_relative() API Document use of the DefaultRuntimeDir directive. Submitted by: jim, minfrin Reviewed/backported by: jim 	r1308897
----------------------------
Merge r1302444, r1302483: * Correctly save the reverse proxy worker in all virtual host proxy configs. PR: 52935 Obtained from: Petter Berntsen <petterb gmail.com> Committed by: rpluem Reviewed by: covener, minfrin, sf 	r1307825
----------------------------
Correct SSLCipherSuite + documentation (move rather than add) 	r1307699
----------------------------
Backport: mod_sed: Don't define PATH_MAX to a potentially undefined value, causing compile problems on GNU hurd. Submitted by: sf Reviewed by: minfrin, fuankg 	r1305822
----------------------------
Backport: core: Add ap_runtime_dir_relative() and DefaultRuntimeDir. Submitted by: trawick Reviewed by: jim, minfrin 	r1305164
----------------------------
Backport: core: Fix breakage of Listen directives with MPMs that use a per-directory config. PR 52904. Submitted by: sf Reviewed by: covener, minfrin 	r1305145
----------------------------
Backport: core: Disallow directives in AllowOverrideList which are only allowed in VirtualHost or server context. These are usually not prepared to be called in .htaccess files. Submitted by: sf Reviewed by: covener, druggeri 	r1305137
----------------------------
Backport: core: In AllowOverrideList, do not allow 'None' together with other directives. PR 52823. 	r1305132
----------------------------
Submitted by: sf Reviewed by: sf, trawick, covener Merge r1304852 from trunk: Fix merging of AllowOverrideList and ContentDigest. Remove some useless code. Pointed out by covener 	r1305014
----------------------------
Submitted by: covener Reviewed by: covener, igalic, sf Merge r1304641 from trunk: PR52981: mod_request: fix check for bad KeptBodySize argument 	r1305012
----------------------------
Rebuild core (removed reference to DefaultRuntimeDir) 	r1304732
----------------------------
Merge r1301398, r1301399 from trunk: fix a misleading example that implies ServerName has precedence over a ServerAlias. We stop when a vhost matches for any reason (not 2.4 specific).  Mention this explicitly. xforms 	r1301400
----------------------------
"Merge r1297958 from trunk: PR52845: ""DirectoryIndex disabled"" should blow away the DirectoryIndex settings in the current config section, not just override previous config sections. Submitted by: covener Reviewed/backported by: jim "	r1300089
----------------------------
Merge r1299883 from trunk: document LDAPRetries and LDAPRetryDelay knobs 	r1299886
----------------------------
Merge r1299497 from trunk: PR52877, MaxMemFree text no longer matches 2.4.x+ default of 2048. 	r1299498
----------------------------
"propose PR52845 change to ""DirectoryIndex disabled"" to clobber current dirconfig, not just parent. "	r1297969
----------------------------
Merge r1243651 from trunk: Check during config test that directories for access logs exist PR 29941 Submitted by: sf Reviewed/backported by: jim 	r1294600
----------------------------
Merge r1293708: Enable per-module loglevel for mod_xml2enc and mod_proxy_html 	r1294159
----------------------------
Merge r1293405: Fix AddOutputFilterByType brown paper bag crash bug Initialize pointers, fix off-by-one. PR: 52755 	r1294157
----------------------------
Example in configuration comment should use a path consistent with the default configuration. PR 52715. Backport from trunk of r1241069 and 1241071. 	r1293800
----------------------------
Switch documentation links nconfiguration templates from trunk to 2.4. 	r1291307
----------------------------
Merge r1290823, r1290835: Mention AllowOverrideList, Define, EC keys, rotatelogs improvements. Syntax fixes. Reordering: Put related changes next to each other Put modules that only provide services for other modules last Try to put important changes first 	r1290837
----------------------------
Merge r1245717 : Mention mod_heartmonitor/mod_lbmethod_heartbeat, mod_sed, mod_auth_form, mod_session. Remove mod_reqtimeout (already in 2.2), mark mod_lua as experimental. Mention more mod_rewrite improvements. 	r1245721
----------------------------
backport r1243404 missing modules/ folders in lbmethod modules Loadfile section 	r1243405
----------------------------
Add cleanup for SSLProxyMachineCertificateChainFile during init 	r1242097
----------------------------
Backport: Add a configuration layout for the AIX platform. Submitted by: Michael Felt <mamfelt gmail com> 	r1239567
----------------------------
Merge r1239174 from trunk: Document AllowOverride Nonfatal option Submitted by: niq Reviewed/backported by: jim 	r1239274
----------------------------
Improve Lua 5.2.0 compatibility. This is not yet complete. Building should still work with Lua 5.1.4, but needs -DLUA_COMPAT_ALL in CPPFLAGS when compiled against 5.2.0. Automatically handling this in configure is still a TODO. Backport from trunk of the following revisions: MOdified patch submitted by NormW (nornw gknw net). It is gone in Lua 5.2.0 and was replaced by luaL_Reg which already existed in 5.1.4. So use that one. and simplify lua_load compatibility macro. 	r1239030:
----------------------------
Make apachectl -h aware of status, fullstatus, and configtest. 	r1238926
----------------------------
Fix handling of piped, syslog, or inherited ErrorLog entries Backport of r1225223 from trunk. 	r1238833
----------------------------
Merge r1225199: Check during configtest that the directories for error logs exist PR: 29941 	r1238824
----------------------------
Backports from trunk: - r1200955: Patch from Luke Meyer, clarifies usage of ProxyPassReverseCookiePath directive. As per bug #51126 - r1200968: A little clarification about variable interpolation, as requested in bug #51125 - r1202453: Fix xml 	r1238730
----------------------------
Document configure change Backport of r1200496 from trunk. 	r1238719
----------------------------
Merge r1229021 from trunk: Core configuration: add AllowOverride option to treat syntax errors in .htaccess as non-fatal. PR 52439 Submitted by: niq Reviewed/backported by: jim 	r1238698
----------------------------
configure: Move the --with-included-apr check so that srcdir!=builddir builds aren't broken by it. Backport of r1232838 from trunk. 	r1238400
----------------------------
"SECURITY: CVE-2012-0053 (cve.mitre.org) Fix an issue in error responses that could expose ""httpOnly"" cookies when no custom ErrorDocument is specified for status code 400. "	r1234838
----------------------------
Merge r1234643: Fix docs for Include, add docs for IncludeOptional 	r1234646
----------------------------
Merge r1234180, r1234297, r1234565: Make APACHE_MODULE() accept an optional prerequisite module for configure. Introduce the following configure time dependencies: mod_proxy_* (except proxy_html) require mod_proxy mod_dav_* require mod_dav mod_session_* require mod_session mod_cache_disk requires mod_cache mod_heartbeat requires mod_watchdog PR: 52487 	r1234570
----------------------------
Backport: configure: Improve the error message when --with-included-apr is specified but either APR or APR-Util is not included. 	r1232576
----------------------------
add compat info to CacheQuickHandler 	r1230287
----------------------------
connect some the dots to 'CacheQuickHandler' in the CHANGES entry. 	r1230283
----------------------------
Merge r1227637, r1227642 from trunk: The guts of mod_proxy is not really ready for the addr and host on a proxy_conn_rec to change over time and differ from the 1 cached in the worker. * proxy_worker->cp->addr needs to know what host/port it cached * conn->addr and conn->hostname need to be allocated from their own subpool so they can be cleared as they change * ap_proxy_determine_connection needs to be more careful about which addr is the TCP endpoint and what we have in either cache. * may need to avoid updating the proxy_worker addr cache if we know the value is flipping. Update the comment and checks around address/connection reusability in mod_proxy. The checks and comment are a vestige of 2.0.x mod_proxy_http where the backend proxy conn was stored in the frontend r->conn_config, but ap_proxy_determine_connection() doesn't associate the frontend and backend conns like this. 	restore
----------------------------
Merge r1226477 from trunk: add/enhance some hints about configuration section merging (or lack of it in the case of mod_access_compat) PR52406 	r1226481
----------------------------
Merge r1225476: Don't use #ifdef inside macro calls The behavior is undefined according to C99 6.10.3.11 and it breaks with xlc on AIX PR: 52394 	r1225477
----------------------------
Merge r1225197: Adapt loglevel of config errors during second pass Don't use APLOG_STARTUP since at that point, the error log is already available. This gives us timestamps if these errors happen during graceful Use level 'emerg' as these errors are fatal. 	restart.
----------------------------
merge r1222921 from trunk: SSLProtocol: allow explicit control of TLSv1.1 and TLSv1.2 flavors when compiled against OpenSSL 1.0.1 or later. Update documentation. 	r1222922
----------------------------
Backport: mod_mime: Don't arbitrarily bypass AddOutputFilter during a ProxyPass, but then allow AddOutputFilter during a RewriteRule [P]. Make mod_mime behave identically in both cases. PR52342. 	r1222643
----------------------------
Backport: RPM: Remove fiddling with installbuilddir, this is correct by default through the use of config.layout. 	r1220848
----------------------------
"Merge r1210261 from trunk: mod_slotmem_shm: Remove the colon syntax to indicate a relative path, and make the relative path default behaviour. Remove the word ""anonymous"" as a filename for special treatment, what used to be ""anonymous"" is now ""none"". Submitted by: minfrin Reviewed/backported by: jim "	r1213401
----------------------------
backport r1213399 from trunk: logging adjustments: - consistently call ssl_log_ssl_error after ap_log_error etc. - ssl_init_ConfigureServer: add vhost_id to log message 	r1213400
----------------------------
backport r1213380 from trunk: Streamline TLS session ticket key handling (added in r1200040): - drop the SSLTicketKeyDefault directive, and only support a single ticket key per server/vhost - rename the SSLTicketKeyFile directive to SSLSessionTicketKeyFile, remove the keyname parameter - move ticket key parameters from SSLSrvConfigRec to modssl_ctx_t - configure the tlsext_ticket_key_cb only when in server mode - add documentation for SSLSessionTicketKeyFile 	r1213395
----------------------------
backport r1211352 from trunk: Adjust the OpenSSL session id context for SNI configurations, so that sessions are tied to the proper vhost (subset of a patch I originally proposed in November 2009, cf. message with ID <4AF85A18.1000205@velox.ch>). 	r1211353
----------------------------
Merge r1210080: Point to mod_socache_* in the SSLSessionCache error message 	r1210083
----------------------------
Merge r1209741: Fix apr_status_t being passed as loglevel 	r1209742
----------------------------
Backport: mod_session_crypto: Fix a pool lifetime problem when reading from SessionCryptoPassphraseFile. 	r1209466
----------------------------
Merge r1209417 from trunk: * server/listen.c (open_listeners): Fix logic error caught by Coverity; possible NULL pointer deref at startup with a particular (and unlikely) listener/system config. 	r1209439
----------------------------
"Merge r1209432 from trunk: Fix for additional cases of URL rewriting with ProxyPassMatch or RewriteRule, where particular request-URIs could result in undesired backend network exposure in some configurations. (CVE-2011-4317) Thanks to Prutha Parikh from Qualys for reporting this issue. * modules/proxy/mod_proxy.c (proxy_trans): Decline to handle the ""*"" request-URI.  Fail for cases where r->uri does not begin with a ""/"". * modules/mappers/mod_rewrite.c (hook_uri2file): Likewise. "	r1209436
----------------------------
Backport: mod_rewrite: Add the AllowNoSlash RewriteOption, which makes it possible for RewriteRules to be placed in .htaccess files that match the directory with no trailing slash. PR 48304. 	r1209057
----------------------------
Wish came true: CacheEnable works within LocationMatch, giving us mod_cache 	regexes
----------------------------
Backport: mod_session_crypto: Add a SessionCryptoPassphraseFile directive so that the administrator can hide the keys from the configuration. 	r1208518
----------------------------
RPM backport: - Build shared mpms instead of static, reduce the RPM to a simple one pass build of the server into a single binary and modules. - Create a dedicated generic RPM layout, ensuring that all example config files have the correct paths embedded within them. 	r1208124
----------------------------
Merge r1206680, r1206681, r1206682 from trunk: Replace unusable/fringe absolute path example for AddDescription and list some weird AddDescription semantics related to directories. mention IndexIgnore limitation in DirectoryMatch and friends as currently documented only in bugzilla (PR51471) 	r1206683
----------------------------
Merge r1206286 from trunk: Move useful and shared balancer stuff to the shm slot... Provide hooks for post-config/runtime addition of balancers. Reviewed/backported by: jim 	r1206287
----------------------------
Merge r1203634, r1204614, r1205564: Pass ap_errorlog_info to error_log hook 	r1205573
----------------------------
Merge r1205468 from trunk: specify limited context list for ModemStandard 	r1205469
----------------------------
Merge r1204341 from trunk: PR51471: IndexIgnore doesn't work in DirectoryMatch. 	r1204342
----------------------------
Merge r1204317 from trunk: upgrading/compat notes on some unexpected AddDescription behavior also: mention in CHANGES 	r1204319
----------------------------
"Merge r1204307 from trunk: PR39923: Allow AddDescription to work with absolute filesystem paths, by not adding ""*/"" to their prefix (intended for relative paths) "	r1204309
----------------------------
"Backport: mod_include: The SSIAccessEnable directive existed to ensure the addition of the ""-A"" syntax would not break existing configurations in v2.2. Remove the directive for v2.4, defaulting the behaviour to enabled. "	r1204200
----------------------------
"Backport r1203859: great proxy logging cleanup: * remove ""proxy:"", ""FCGI"", etc. prefixes and pid which are now * propagate frontend request's logconfig to backend request * use ap_log_rerror where possible * remove obsolete APLOG_NOERRNO "	r1203861
----------------------------
merge r1203752 from trunk: Change the SSLCipherSuite default to a shorter, whitelist oriented definition, and add an example for a speed-optimized configuration (commented out by default). In the SSL How-To, streamline the SSLCipherSuite examples where applicable (explicitly banning EXP and NULL is not needed when only HIGH is specified). 	r1203753
----------------------------
Added another module load statement to NetWare config. 	r1201995
----------------------------
Added some module load statements to NetWare config. 	r1201990
----------------------------
Merge r1201571 from trunk: PR52175: RewriteBase is what applies to relative substitutions, not the stripping of the per-directory prefix. Reviewed by: covener 	r1201572
----------------------------
Merge r1201443 from trunk: add per-dir config merging to mod_lua so LuaHook* in multiple per-dir sections behaves as expected instead of discarding previous sections. Reviewed by: covener 	r1201445
----------------------------
Folloup on r1201161: New MaxMemFree was meant to be 2048, not 4096. Backport of r1201202 from trunk. 	r1201203
----------------------------
Pre GA removal ob components that will not be included: Part 1: mod_noloris was superseded by mod_reqtimeout. 	r1201164
----------------------------
Merge r1201158 from trunk: Set MaxMemFree 2048 by default 	r1201161
----------------------------
Merge r1201146 from trunk: Fix assertion failure during very high load by preventing race condition between appending to the timeout queues and adding to the pollset. We don't add additional locking calls but only extend the present calls to include the apr_pollset_add. Therefore this hopefully should not cause too much performance Add some comments Replace two AP_DEBUG_ASSERTS with better error handling 	regression.
----------------------------
"Change module sets and default activation status: 1) Promoted from ""most"" to ""yes/few"" - mod_headers 2) Demoted from ""yes/few"" to ""most"" - mod_actions - mod_allowmethods - mod_auth_form - mod_buffer - mod_cgi(d) - mod_include - mod_negotiation - mod_ratelimit - mod_request - mod_userdir Remember: default module set is ""most"", but only the LoadModule lines of all modules except ""yes/few"" are commented out by default. The following modules will now be loaded by default: - mod_access_compat - mod_alias - mod_auth_basic - mod_authn_core - mod_authn_file - mod_authz_core - mod_authz_groupfile - mod_authz_host - mod_authz_user - mod_autoindex - mod_dir - mod_env - mod_filter - mod_headers - mod_log_config - mod_mime - mod_mpm_event - mod_reqtimeout - mod_setenvif - mod_status - mod_unixd - mod_version Backport of r1201111 from trunk. "	r1201118
----------------------------
Merge r1200475, r1200478, r1200482, r1200491, r1200513, r1200550, r1200580, r1200605, r1200612, r1200614, r1200639, r1200646, r1200656, r1200667, r1200679, r1200699, r1200957, r1200961, r1200963 from trunk: fix issue with incorrect munging of the lua package path -- LuaPackagePath directives were not working Default to not allowing htaccess in /, instead of just the documentroot, which gets a nice 10% performance boost by default for me. * modules/ssl/ssl_private.h, modules/ssl/ssl_engine_kernel.c (ssl_callback_tlsext_tickets): Use unsigned char * to fix gcc -Wpointer-sign warnings. Only load the really imporant modules (i.e. those enabled by the 'few' selection) by default. Don't handle modules enabled with --enable-foo specially. This fixes problems with module dependencies until someone implements a mechanism for resolving module dependencies. * modules/proxy/mod_proxy_html.c (comp_urlmap): Fix const-ness warning. * modules/lua/mod_lua.c (ap_lua_ssl_is_https): New function. (lua_post_config): Pick up ssl_is_https optional function. * modules/lua/lua_request.c (req_ssl_is_https_field): New function. (ap_lua_load_request): Map is_https field to above. use a sub-pool for scope_once Fix installation of conf/extra/proxy-html.conf. Otherwise httpd does no longer start, because it is the only extra file required in the main config at the moment. Rebuild xdoc transform Clarify docs for LimitRequestLine, as per bug #51665. Rebuild doc transforms. Submitted by: brianm, pquerna, jorton, sf, brianm, jorton, jorton, sf, pquerna, brianm, brianm, brianm, brianm, brianm, jorton, rjung, rbowen, rbowen, rbowen Reviewed/backported by: jim 	replace
----------------------------
Merge r1200699 from trunk: Fix installation of conf/extra/proxy-html.conf. Otherwise httpd does no longer start, because it is the only extra file required in the main config at the moment. Submitted by: rjung Reviewed/backported by: jim 	r1200973
----------------------------
config generation # (reported by ap_state_query(AP_SQ_CONFIG_GEN): * start at 0 instead of 1 * don't increment until after pconf cleanups run, in case a cleanup needs to check the related config generation 	r1200147
----------------------------
mod_proxy_html: Add ProxyHTMLURLMap conditions to docs. Seems they got lost in the initial docs drop! 	r1200063
----------------------------
Update docs for default TimeOut value for other languages. 	r1199511
----------------------------
Change def timeout from a nasty 5 mins to a more reasonable 1min 	r1199485
----------------------------
"Add ""reallyall"" and --enable-load-all-modules to docs. Clarify LoadModule activation status. "	r1199481
----------------------------
Load all modules in the generated default configuration when using --enable-load-all-modules with configure. 	r1199467
----------------------------
mod_reqtimeout: Change the default to set some reasonable timeout values if loaded 	r1199447
----------------------------
Don't send a 500 if there is a timeout 	r1199444
----------------------------
"Change default FileETag to be ""size mtime"", i.e. remove the inode. Adjust the etag generation in mod_dav_fs to the new default. PR 49623. "	r1199086
----------------------------
By default, only load those modules that are either required or explicitly selected by a configure --enable-foo argument. The LoadModule statements for modules enabled by --enable-mods-shared=most and friends will be commented out. 	r1199027
----------------------------
Remove ProxyHTMLLogVerbose in favor of trace loglevels 	r1198995
----------------------------
Fix integer overflow in ap_pregsub. This can be triggered e.g. with mod_setenvif via a malicious .htaccess CVE-2011-3607 http://www.halfdog.net/Security/2011/ApacheModSetEnvIfIntegerOverflow/ 	r1198940
----------------------------
Unify syntax of config directives taking an expression as optional contition argument 	r1197413
----------------------------
Improve handling of maxlen = APR_SIZE_MAX, noticed by Jim. Use apr_pregsub_ex() and maxlen = 0 for unlimited in mod_substitute. 	r1189985
----------------------------
Adds border, zebra striping, to IndexStyleSheet table. 	r1188475
----------------------------
Mention mod_reqtimeout in the DoS mitigation section 	r1188200
----------------------------
Unbreak AddOutputFilterByType for content types of the form text/html;charset=..., broken by r1171268. Add some trace logging 	r1187992
----------------------------
Clarify how ErrorDocument interprets argument PR: 42430 	r1187986
----------------------------
Fix 3xx responses with local URLs as ErrorDocument 	r1187985
----------------------------
Fix configuration of internal proxies PR: 49272 Submitted by: Jim Riggs <jim riggs me> 	r1185828
----------------------------
There is absolutely no reason to have two 4k-sized constant strmatch patterns in each per-dir config. 	r1183475
----------------------------
Resolve server and remote IP's in the AcceptFilter 'none' path. Lower the volume on a number of debug messages (and omit errno where we have no errno). 	r1181140
----------------------------
Remove OID match which was never in a GA releas and is obsoleted by SetEnvIfExpr with PeerExtList() 	r1180828
----------------------------
mod_mime_magic: Add signatures for PNG and SWF to the example config. PR: 48352 Submitted by: Jeremy Wagner-Kaiser <jwagner-kaiser adknowledge com> 	r1180725
----------------------------
Consistently use base 10 for numbers when parsing config options. It may be confusing to the user if some directives treat a number with leading zero as octal while most don't. 	r1180687
----------------------------
Add -D DUMP_RUN_CFG option to dump some configuration items from the parsed (or default) config. This is useful for init scripts that need to setup temporary directories and permissions, for example if those temporary directories are located on a ram disk. 	r1180681
----------------------------
Consistenly use apr_file_* API instead of libc when dumping config because mixing the two can give strange results due to buffering. 	r1180671
----------------------------
Note that hostname lookups will be performed for 'require from hostname' directives, regardless of the setting of HostnameLookups. refs https://issues.apache.org/bugzilla/show_bug.cgi?id=51967 	r1180502
----------------------------
mod_authn_socache: fix it to enable initialisation to work if configured only in .htaccess context, and provide a toggle for that. PR 51991 	r1180384
----------------------------
Downgrade error log messages which accompany a 404 request status from loglevel error to info. List thread at http://mail-archives.apache.org/mod_mbox/httpd-dev/201110.mbox/%3Calpine.DEB.2.00.1110041948280.664@eru.sfritsch.de%3E PR: 35768 	r1180328
----------------------------
Sort hooks twice, once before pre_config, once after ap_process_config_tree. This fixes a regression with perl modules introduced by r1032002 PR: 45076 Submitted by: Torsten Foertsch <torsten foertsch gmx net> 	r1180325
----------------------------
SECURITY (CVE-2011-3368): Prevent unintended pattern expansion in some * server/protocol.c (read_request_line): Send a 400 response if the request-URI does not match the grammar from RFC 2616.  This ensures the input string for RewriteRule et al really is an absolute path. Reviewed by: rpluem, wrowe, covener, fielding 	reverse
----------------------------
Add SSLCARevocationCheck directive to default mod_ssl config 	r1178695
----------------------------
Enforce LimitRequestFieldSize after multiple headers with the same name have been merged. 	r1178566
----------------------------
TODO note regarding the LimitInternalRecursion error message. 	r1178523
----------------------------
grammar fix point to SSLRequire docs 	r1178088
----------------------------
If MaxMemFree is set, set SSL_MODE_RELEASE_BUFFERS in mod_ssl. Always set SSL_MODE_RELEASE_BUFFERS in ab. PR: 51618 Submitted by: Cristian Rodríguez <crrodriguez opensuse org>, Stefan Fritsch 	r1178079
----------------------------
Clarify configuration comment. 	r1177210
----------------------------
In ssl_check_public_cert(), also take dNSNames in the subjectAltName extension into account when checking the cert against the configured ServerName. PR 32652, PR 47051. Replace SSL_X509_getCN() by SSL_X509_getIDs(), which returns an array of a cert's DNS-IDs and CN-IDs (terms as coined by RFC 6125). 	r1176752
----------------------------
Make mod_substitute more efficient: - Use varbuf resizable buffer instead of constantly allocating pool memory and copying data around. This changes the memory requirement from quadratic in ((number of substitutions in line) * (length of line)) to linear in (length of line). - Instead of copying buckets just to append a \0, use new ap_regexec_len() function PR: 50559 	r1176019
----------------------------
Final update to SSLProxyMachineCertificateChainFile 	r1175946
----------------------------
mod_ssl: - document the SSLStapling* directives (code committed in r829619 for 2.2.3, see PR 43822) - add SSLCARevocationCheck to the list of configuration changes in the 2.4 upgrade notes. 	r1173755
----------------------------
Adds some examples of using the ErrorLogFormat token handlers. Standardizes the spelling of behavio(u)r to be consistent throughout the file. 	r1173086
----------------------------
Give a slightly more direct hint when no global ServerName is set. I still think this buries the lead, but it's hard to rewrite to change the emphasis yet maintain googleability. 	r1172410
----------------------------
Rebuild mod_log_config grammar changes. 	r1172409
----------------------------
Fix cut'n'paste error: ErrorLog -> ErrorLogFormat 	r1172208
----------------------------
Log better information and prevent leak of an X509 structure for SSLProxyMachineCertificateChainFile 	r1172010
----------------------------
* Correctly obey ServerName / ServerAlias if the Host header from the request matches the VirtualHost address. PR: 51709 Submitted by: Micha Lenk <micha lenk.info> Reviewed by: rpluem 	r1172002
----------------------------
Un-deprecate AddOutputFilterByType and update docs. Its limitations have been fixed by the move to mod_filter. 	r1171273
----------------------------
Implement AddOutputFilterByType by doing strcmp()s instead of creating lots of ap_expr's. This is more efficient and fixes string escaping issues in the old code. 	r1171268
----------------------------
Modify SSLProxyMachineCertificateChainFile to use X509 instead of X509_INFO and use openssl to construct the chain 	r1170833
----------------------------
Add in MaxRangeOverlaps and MaxRangeReversals to accomodate more control over acceptable Range headers: 	r1169756
----------------------------
Fixed MaxRanges config block. 	r1169599
----------------------------
The default timeout value of 10s lives in two places, the per-server config and in this initialization. Drop the latter and check to see if a timeout is requested in the per-server config. 	r1166662
----------------------------
"take care of some MaxRanges feedback: * allow ""none"" to be expressed in config * send Accept-Ranges: none with MaxRanges none * stop accepting confusing/ambiguous ""0"", start accepting ""unlimited"". "	r1166282
----------------------------
Added MaxRanges to httpd.conf. 	r1164861
----------------------------
simple doc for MaxRanges. 	r1162587
----------------------------
add MaxRanges directive institute a default limit of 200 (post-merge where applicable) Ranges before returning the complete resource. (minor mmn bump for core_dir_config addition) 	r1162584
----------------------------
Fix the default OCSP responder timeout for client cert validation - 10 µsec is a tad too aggressive. 	r1162552
----------------------------
* Don't SEGFAULT if SSLProxyMachineCertificateChainFile is not set. Just skip the additional lookups in this case. 	r1162103
----------------------------
Add SSLProxyMachineCertificateChainFile directive and documentation for bug 50812 	r1160863
----------------------------
Adds reference to --prefix argument in ServerRoot documentation, possibly addressing some confusion for bug ID 51352 	r1160342
----------------------------
mod_cache: Ensure that CacheDisable can correctly appear within a LocationMatch. 	r1158022
----------------------------
mod_cache: Fix the moving of the CACHE filter, which erroneously stood down if the original filter was not added by configuration. 	r1157976
----------------------------
Add ap_varbuf API for resizable buffers. Increase length limit of lines in the configuration file to 16MB. Increase length limit of lines in the group file to 16MB. PR: 45888, 50824, 43084 Windows and Netware build changes are untested. 	r1157354
----------------------------
Accept LDAP_OPT_CONNECT_TIMEOUT as an alternative to LDAP_OPT_NETWORK_TIMEOUT. An alternative on at least some IBM client libraries: http://publib.boulder.ibm.com/infocenter/tivihelp/v2r1/topic/com.ibm.IBMDS.doc/progref281.htm#opttimeout 	r1157111
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLCryptoDevice): Fix double-free (and segfault) with bad arg to SSLCryptoDevice. 	r1157105
----------------------------
"* modules/proxy/config.m4: Avoid sh syntax error with autoconf 2.63, where an empty ""else"" clause gets generated from the args if present with only whitespace. "	r1157094
----------------------------
mod_ldap: remove hard-coded loops of 10 retries w/o delay with a configurable number of retries (LDAPRetries, default 3) and configurable delay between The LDAP connection is re-initted every other retry, instead of on the fifth retry -- this was a much more recent addition then the basic looping behavior. 	retries
----------------------------
"document implicit limitation in AllowOverride Option=Foo -- this doesn't let you ""lock in"" any value since the non +/- syntax can zap whatever it wants. "	r1154940
----------------------------
Prevent a crash if a non-existent internal RewriteMap is specified in a server context with RewiteEngine off, then later referenced. Submitted By: Ben Noordhuis Reviewed By: covener 	r1154808
----------------------------
Enforce OpenSSL 0.9.7 as a minimum requirement in configure, and 	remove
----------------------------
Drop support for the RSA BSAFE SSL-C toolkit from configure, and remove #ifdef'ed code from mod_ssl and ab where applicable. Consensus for dropping support for SSL/TLS toolkits other than OpenSSL was reached on dev@httpd in June 2010 (message with ID <20100602162310.GA11156@redhat.com> and follow-ups). 	r1154683
----------------------------
TRACEN loglevels are implemented in lua scripts. 	r1154354
----------------------------
change the example to work with just AddHandler/SetHandler, and mention in a comment where the non-default function name can be specified. 	r1154265
----------------------------
Forbid some directives in .htaccess because of AllowOverrideList: core:          AllowOverride, AllowOverrideList mod_authn_dbd: AuthDBDUserPWQuery, AuthDBDUserRealmQuery mod_authz_dbd: AuthzDBDQuery, AuthzDBDRedirectQuery mod_proxy:     BalancerMember, ProxySet Adjust for use in .htaccess: mod_actions:   Script 	r1153687
----------------------------
cleanups related to new AllowOverrideList functionality: - add new NOT_IN_HTACCESS flag for ap_check_cmd_context() - describe the need for this in new_api_2_4.xml - forbid Define and UnDefine in .htaccess 	r1153676
----------------------------
Restore seealso enries for AllowOverride 	r1153500
----------------------------
"mod_proxy: enable absolute URLs to be rewritten with ProxyPassReverse, e.g. to reverse proxy ""Location: https://other-internal-server/login"" with ProxyPassReverse https://public-address/ https://other-internal-server/ "	r1152273
----------------------------
Add AllowOverrideList directive and documentation 	r1151654
----------------------------
document ProxySourceAddress 	r1151484
----------------------------
"Docs for mod_allowmethods: Clarify GET and HEAD are synonymous, switch example to ""Location"". "	r1151151
----------------------------
Clarify docs for mod_allowmethods: you still need to use TraceEnable to forbid TRACE. 	r1151149
----------------------------
"mod_allowmethods: Correct Merging of ""reset"" and do not allow an empty parameter list for the AllowMethods directive. Furthermore switch from AP_MODULE_DECLARE_DATA to AP_DECLARE_MODULE (the module was brought in after the big logging refactoring). "	r1151143
----------------------------
improve (but preserve searchable parts of) the error message when Options -Indexes is about to trigger a 403 in mod_autoindex, with a pointer to mod_dir about how the DirectoryIndex might have been the real culprit. 	r1147339
----------------------------
doc for DirectoryIndexRedirect 	r1147328
----------------------------
Add a mod_dir option to allow the used DirectoryIndex to be externally redirected. 	r1147327
----------------------------
Add some environment variables to the whitelist in suexec PR: 51499 Submitted by: Graham Laverty <graham reg ca>, Stefan Fritsch 	r1146244
----------------------------
Fix regexp RewriteCond with NoCase, 	reported
----------------------------
"Allow to specify module specific custom linker flags via the MOD_XXX_LDADD variables. Use APR_ADDTO instead of APR_SETVAR or direct variable assignment. This is especially useful when building mod_lua or mod_deflate against a lua resp. libz which are installed in non-standard locations. One can add ""-R ..."" to MOD_LUA_LDADD and MOD_DEFLATE_LDADD before configure to fix the RPATH/RUNPATH of those modules. "	r1142938
----------------------------
Move PCRE_LIBS from HTTPD_LDFLAGS to PROGRAM_LDADD. Otherwise -lpcre comes before libmain which leads to undefined recences during linking of httpd. Followup to r1142739. 	r1142893
----------------------------
Tolerate dependency checking failures in configure for modules that have been enabled only implicitely. 	r1142892
----------------------------
1) Add --with-distcache to configure for choosing the distcache installation directory. 2) Use correct build variable MOD_SOCACHE_DC_LDADD instead of MOD_SOCACHE_LDADD in build macro. Also made the macro a bit more consistent with the SSL checking macro. 	r1142648
----------------------------
Support reallyall option to configure also for --enable-mods-static. 	r1142623
----------------------------
Add some docs for AsyncRequestWorkerFactor 	r1142490
----------------------------
make example config match the description; improve wording 	r1142459
----------------------------
Add support to ErrorLogFormat for logging the system unique thread id under Linux 	r1138616
----------------------------
New AsyncRequestWorkerFactor directive to influence how many connections will be accepted per process 	r1137755
----------------------------
Rename MaxClients to MaxRequestWorkers which describes more accurately what it does. 	r1137744
----------------------------
* support/rotatelogs.c (post_rotate): New function. (usage, dumpConfig): Update. (doRotate): Save old filename before rotate; call post_rotate after successful rotation. (main): Add -p argument. * docs/manual/programs/rotatelogs.xml: Document -p. PR: 51285 Submitted by: <sveniu ifi.uio.no>, jorton 	rotation.
----------------------------
Avoid unnecessary renegotiations with SSLVerifyDepth 0. PR: 48215 Submitted by: Kaspar Brand <asfbugz velox ch> 	r1137394
----------------------------
Some improvements for handling of many connections for MPM event: - Process lingering close asynchronously instead of tying up worker threads (based on patch by Jeff Trawick). - If the number of connections of a process is above (WORKER_OVERCOMMIT is fixed at 2, at the moment), or if all workers are busy, don't accept new connections in that process. Such a dynamic connection limit is necessary because we may have both async and non-async (ssl) connections. WORKER_OVERCOMMIT should be a config option. - Don't count idle workers of not-accepting processes against MinSpareThreads, so that the parent will spawn new processes when necessary. - If we receive a keep-alive request while all workers are busy, don't block but close the connection immediately so that the client will re-connect to a different process. Related changes: - Log what is going on at trace loglevels. - Remove the bypass_push poll type flag, this code cannot be hit anymore (if it ever could?). - Add some macro helpers for dealing with timeout queues. 	r1137358
----------------------------
If MaxMemFree is set, limit the number of recycled pools that is kept 	r1137262
----------------------------
Disable AECDH ciphers in example config by using !aNULL (which includes all ciphers without authentication. PR: 51363 Submitted by: Rob Stradling <rob comodo com> 	r1135234
----------------------------
Don't return an undefined value if opening of a read-only database fails. 	r1133152
----------------------------
The example configuration looks good enough to me 	r1132801
----------------------------
Make the MSIE BrowserMatch regexp fit for MSIE 10. Remove useless '.*' 	r1132793
----------------------------
Introduce ap_(get|set)_core_module_config() functions/macros and use them everywhere. We know that the core module has module_index 0. Therefore we can save some pointer operations in ap_get_module_config(cv, &core_module) and ap_set_module_config(cv, &core_module, val). As these are called rather often, this may actually have some (small) measurable effect. 	r1132781
----------------------------
TraceEnable is per-virtualhost, not just per-server. 	r1132676
----------------------------
- Introduce concept of context prefix (which is an URL prefix) and context document root (which is the file system directory that this URL prefix is mapped to). This generalization of the document root makes it easier for scripts to create self-referential URLs and to find their files. - Expose CONTEXT_DOCUMENT_ROOT and CONTEXT_PREFIX as envvars, in mod_rewrite, and in ap_expr. - Make mod_alias and mod_userdir set the context information. - Allow to override the document root on a per-request basis. This allows mass vhosting modules to set DOCUMENT_ROOT correctly. - Make mod_vhost_alias set the per-request document root PR: 26052, 46198, 49705 Remaining tasks: - Use the context document root & prefix in mod_rewrite to make RewriteBase unneccessary in many cases. Do this without breaking compatibility. - Write docs. 	r1132494
----------------------------
- Add <ElseIf> and <Else> to complement <If> sections. These are both easier to use and more efficient than using several <If> sections. - Update <If> documentation a bit. 	r1132469
----------------------------
Reorder members in core_dir_config to be more logical and efficient. MMN bump was already in r1131465 	r1131468
----------------------------
mod_ext_filter: Remove DebugLevel option in favor of per-module loglevel 	r1128732
----------------------------
"Use the new ""ap_expr"" expression parser. The old parser can still be used by setting the new directive SSILegacyExprParser "	r1128614
----------------------------
Fix config setting after r1128430 has changed some elements from int to char 	r1128557
----------------------------
properly merge directory configs in mod_include 	r1128430
----------------------------
Mention that the error log format is now configurable. 	r1127905
----------------------------
mod_charset_lite: Remove DebugLevel option in favour of per-module loglevel 	r1125843
----------------------------
Add in BalancerGrowth and its functionality... this lays the framework for adding additional Balancers: post-config by allowing for shm growth. 	r1125451
----------------------------
Correct Win64 Servername Identification PR: 47418 Submitted by: [Jorge Schrauwen <jorge.schrauwen gmail.com>] 	r1104624
----------------------------
Fix memory leak in mod_deflate.c when SetOutputFilter is enabled and DEFLATE is the first filter in the chain - this is seen with mod_dav + mod_deflate when the client can not do gzip and we constantly do the filter checks. * modules/filters/mod_deflate.c (deflate_ctx): Add a flag as to whether we are successfully initialized. (deflate_out_filter): Always create filter ctx and set filter_init flag only after we are successfully initialized. 	r1103315
----------------------------
Fix a timed out connection going into the keep-alive state after a timeout when discarding a request body. PR: 51103 	r1103213
----------------------------
"Add in new mod_proxy ""extension"" module: mod_proxy_express. This is a module developed by myself to support the RedHat OpenShift Express project, to allow for dynamic and fast reverse-proxy switching. The idea is to easily map Host: header entries to backend servers, with the mapping done in a DBM file (think of mod_vhost_alias, kinda, for mod_proxy). Yeah, mod_rewrite and RewriteMap could kinda do it but (1) that is slow and (2) no support for ProxyPassReverse capability. Donated to the ASF. "	r1102733
----------------------------
"Fix configure error when configuring module set ""reallyall"". "	r1102328
----------------------------
Silence autoconf 2.68 warnings. Add AC_LANG_SOURCE to the two occurences of AC_COMPILE_IFELSE in configure.in. 	r1101216
----------------------------
Follow on to 1057048: In the map of active workers, don't print spaces for scoreboard slots which aren't used due to ThreadsPerChild < ThreadLimit or MaxClients/ThreadsPerChild < ServerLimit; simply omit those slots from the display.  Workers in those slots which are gracefully exiting (from a previous generation with a different MPM config) will be displayed, and the map will shrink as those workers exit. 	r1097070
----------------------------
mod_ldap: Make LDAPSharedCacheSize 0 create a non-shared-memory cache per process as opposed to disabling caching completely. This allows to use the non-shared-memory cache as a workaround for the shared memory cache not being available during graceful restarts PR: 48958 	r1096577
----------------------------
Report filename and line number in config warning 	r1096551
----------------------------
The pre_config hook should return int, not apr_status_t. 	r1095213
----------------------------
Whether it's intentional or not, the hostname/domainname argument to the RewriteRule CO flag is in fact required. Cookies are not set without it. (via Matthew Sporleder) 	r1092797
----------------------------
AP_ENABLE_V4_MAPPED with WinNT MPM mpm_winnt.c: Fail to compile if enabled, and add a hint about the configure.in: Move the --enable-v4-mapped check to below the 	r1091467
----------------------------
core: Support module names with colons in loglevel configuration. Submitted by: Torsten Förtsch <torsten foertsch gmx net> 	r1090369
----------------------------
Remove unnecessary .* from regex, as noted in http://stackoverflow.com/questions/5587148/regex-patterns-in-apache-rewritecond-and-friends-full-or-partial-match 	r1090255
----------------------------
*) mod_proxy_ajp: Add support for 'ProxyErrorOverride on'. PR 50945. 	r1087864
----------------------------
*) mod_proxy_fcgi: Add support for 'ProxyErrorOverride on' PR 50913. 	r1087863
----------------------------
"If we change the LB method, or we take add in a new balancermember (""enable"" her), then we need to have the LBmethod reset its params as required... "	r1087371
----------------------------
Add in a configuration generation... this is independent of MPM gen, just in case we ever switch MPMs at a graceful ;) 	r1087331
----------------------------
Add PR reference and docs for -DDUMP_CONFIG 	r1086771
----------------------------
Change the ap_cfg_getline() and ap_cfg_getc() to return an error code. Also: - Make ap_cfg_getline() return APR_ENOSPC if a config line is too long. - Add ap_pcfg_strerror() function to convert ap_cfg_getline's return value into a nice message. - Adjust definition of ap_configfile_t accordingly. Not bumping MMN because it has already been bumped today. 	r1086756
----------------------------
mod_info: Dump config to stdout during startup if -DDUMP_CONFIG is specified. This functionality should probably be moved into core, but for now it's a lot better than nothing. And it may even help me debug some other config related code. 	r1086441
----------------------------
add event MPM to the module list where necessary (most directives documented here) add mpmt_os2 to the list for ThreadStackSize 	remove
----------------------------
"match docs for case of ""ScoreBoardFile"" "	r1086297
----------------------------
mpm_common.c implements a handful of config directives; the at pre-config time, but that was handled inconsistently by the MPMs, resulting in unexpected behavior when some of the directives were removed across restart move that necessary initialization from the MPMs to common code run from core's pre-config; MPMs that need to override defaults can do so by running after core's pre-config (the NetWare MPM now does that) the DEFAULT_MAX_REQUESTS_PER_CHILD compile setting wasn't useful enough to keep the simple MPM wasn't consistent in which of these directives were respected and which weren't, and that hasn't changed (see procmgr.max_requests_per_child vs. ap_max_requests_per_child) 	related
----------------------------
ap_max_requests_per_child is a global (otherwise, this local one doesn't match the one used by the OS/2 child code or the MaxConnectionsPerChild directive) 	r1086246
----------------------------
consolidate logic to remove the pidfile in a new API, ap_remove_pid(), related to existing ap_log_pid() and ap_read_pid() presumably this is useful to third-party MPMs as well 	r1086224
----------------------------
Added copy rule for creating include/ap_config_layout.h. 	r1086122
----------------------------
enable DEFAULT_REL_RUNTIMEDIR on NetWare and Windows this commit is missing the Windows and NetWare build logic to copy the appropriate file to include/ap_config_layout.h 	r1086073
----------------------------
Add the WebP and webfont media types (that have not been registered by the same WHATWG idiots who regularly complain about servers not being configured correctly for mime types). PR: 50624 	r1085522
----------------------------
Add the WebM media types (that have not been registered by the same WHATWG idiots who regularly complain about servers not being configured correctly for mime types). PR: 50624 	r1085507
----------------------------
"core: AllowEncodedSlashes new option NoDecode to allow encoded slashes in request URL path info but not decode them. Change behavior of option ""On"" to decode the encoded slashes as 2.0 and 2.2 do.  PR 35256, PR 46830. "	r1082196
----------------------------
More professional phrasing of DirectorySlash description. 	r1081659
----------------------------
doc for r1081007, LDAPConnectionPoolTTL 	r1081008
----------------------------
*) mod_ldap: Add LDAPConnectionPoolTTL to give control over lifetime 	r1081007
----------------------------
mod_cache: Make CacheEnable and CacheDisable configurable per directory in addition to per server, making them work from within a LocationMatch. 	r1080834
----------------------------
Moves the DocumentRoot declaration down to immediately above the <Directory $document_root> block, so that they are clearly related to one another, rather than having to have the comment referring back up 20 lines. 	r1080291
----------------------------
igalic reminded me that AllowOverride now defaults to none, and Options now defaults to FollowSymlinks, so simplify this entire section and thus 	reduce
----------------------------
Warn the server admin not to relax the security of <Directory /> 	r1080111
----------------------------
Adds the simplified chinese translation to the default manual configuration file. 	r1080109
----------------------------
worker, event, prefork: Correct several issues when built as DSOs; most notably, the scoreboard was reinitialized during graceful observable. Other noticeable ones: * the generation number did not increment properly * worker's check-config hook didn't detect startup properly, so messages about inconsistent directives could have been sent to the wrong place max_daemons_limit wasn't tracked across restart, but as the scoreboard was always cleared this was a non-issue. Reinitialization of idle_spawn_rate, hold_off_on_exponential_spawning, and maxclients-message-reported may or may not have been features, but the big picture is that the behaviour shouldn't have differed. These changes should have been part of r758185. 	restart,
----------------------------
Actually check for APU_HAVE_CRYPTO at configure time.  This fixes a compile error with apr 2 if crypto is disabled. 	r1072155
----------------------------
Use ap_state_query() to fix many modules that were not correctly initializing if they were not active during server startup but got enabled later during a graceful restart (in which case they need to do all work during a single config run). 	r1070153
----------------------------
Create new ap_state_query() function that allows modules to determine if the current configuration run is the initial one at server startup, and if the server is started for testing/config dumping only. 	r1070151
----------------------------
"Log something nicer than ""Internal error: pcfg_openfile() called with NULL filename"" if no password file is configured "	r1070096
----------------------------
"* modules/ssl/ssl_engine_pphrase.c (ssl_pphrase_Handle): Fix possible startup failure in cases where multiple vhosts share the same ""vhost-id"" and private key file.  The cached-key case would previously cause an abrupt return from the function, which could prevent processing of configured keypairs for other vhosts.  There is no apparent reason to check for a ""cache hit"" against cached keys using *any* algorithm types; instead only check against a key with the matching type. Submitted by: Masahiro Matsuya <matsuya redhat.com>, jorton "	r1069772
----------------------------
Expose this as part of the API. That way, other code/modules which want to overload mod_proxy's trans phase can use it to handle ProxyPass as well, without requiring monkeying with conf->aliases... 	r1068400
----------------------------
Optimize memory access pattern of ap_merge_per_dir_configs() According to Linux perf, this is twice as fast as the old loop. 	r1066869
----------------------------
We can now change lbmethod at runtime. Provide a stub for other balancer-related params to be adjusted as well, like timeout, sticky, etc... 	r1066076
----------------------------
the comparison string has been decoded for rewriterule comparison.  PR50653 	r1063587
----------------------------
Mark some modules/directives non-experimental: - BufferedLogs and mod_substitute have been around a long time - mod_reqtimeout has stabilized as well 	r1062989
----------------------------
* Only unset if we have a table. This can happen if undefine occurs before define. 	r1061669
----------------------------
Add support to set variables with the 'Define' directive. Change ap_resolve_env() to look for variables defined in this way. This allows to use the variables in the config using the ${VAR} syntax known from envvar interpolation 	r1061465
----------------------------
Add a patch from Vincent Deffontaines to make the adding of X-forwarded-* headers configurable: ProxyAddHeaders, defaulting to 'On'. http://www.mail-archive.com/dev@httpd.apache.org/msg49971.html 	r1060795
----------------------------
Initialize the core_dir_config->sec_files and ->sec_if only if needed. This saves some memory and two apr_array_append()s per directory merge. 	r1060283
----------------------------
Check for s->module_config before using it, as the faked server_rec from mod_cgid does not have it. 	r1060245
----------------------------
Fix segfault for loglevel >= trace2 	r1060072
----------------------------
* modules/ssl/ssl_engine_config.c, modules/ssl/ssl_private.h: Add config hooks for OCSP response time skew, maximum age, timeout. * modules/ssl/ssl_engine_ocsp.c (verify_ocsp_status): Respect config settings for above. * docs/: Update accordingly. Submitted by: Kaspar Brand <httpd-dev.2011 velox.ch> 	r1059917
----------------------------
Merge the <If> sections in a separate step ap_if_walk, after ap_location_walk. This makes <If> apply to all requests, not only to file base requests and it allows to use <If> inside <Directory>, <Location>, and <Files> sections. The merging of <If> sections always happens after the merging of <Location> sections, even if the <If> section is embedded inside a <Directory> or <Files> section. 	r1059867
----------------------------
Provide the IndexIgnore example that's in the httpd-autoindex config file in extras. 	r1059562
----------------------------
config: report error and exit cleanly if getaddrinfo fails at startup PR: 50592 	r1059472
----------------------------
Provides an example of using expr in a RewriteCond for a commonly-requested recipe. 	r1059058
----------------------------
Remove NameVirtualHost, as it causes a startup warning. 	r1059054
----------------------------
warn about FAQ of trying to decrease thread stack size with ThreadStackSize on Linux. 	r1057049
----------------------------
Fix ap_mpm_query results: AP_MPMQ_MAX_THREADS: Single threaded means one thread per child, not zero AP_MPMQ_MAX_DAEMONS: Max # daemons by config is determined by MaxClients, not 	r1057045
----------------------------
Don't log AuthMerging XXX as <RequireXXX> 	r1056717
----------------------------
clarify RewriteBase as action for closed PR50546 	r1055710
----------------------------
Add some weasel language, and a warning about Windows + TransmitFile, to the SendBufferSize doc. 	r1055701
----------------------------
PR#44838: be more up front with how the per-dir RewriteRule comparison is the filesystem path minus the Directory the rules were listed in. 	r1055671
----------------------------
"Change AuthnCacheProvider --> AuthnCacheProvideFor to deal with overloading of ""provider"" and likely confusion with AuthnCacheSOCache. "	r1055447
----------------------------
Change the format of the SSL_{CLIENT,SERVER}_{I,S}_DN variables to be RFC 2253 compatible, convert non-ASCII characters to UTF8, and escape other special characters with backslashes. The old format can still be used with the LegacyDNStringFormat argument to SSLOptions. 	r1054323
----------------------------
fix short description for usecanonicalphysicalport directive 	r1054295
----------------------------
Allow to use arbitrary boolean expressions (ap_expr) in RewriteCond. 	r1053750
----------------------------
Doc for r1053230, NameVirtualHost is now unnecessary and other general NVH-vs-VH improvements. 	r1053231
----------------------------
Remove need for NameVirtualHost directive by implicitly configuring any duplicated VH addresses as name-based virtual hosts.  This also combines _default_ and * into a single type of wildcard since these presented a false dichotomy between address specs. These are post-config only changes and do not change the runtime lookups. The biggest loss here is that an unintended duplication of virtual host addresses can no longer be reported as directly in the past, but should still be debuggabl via apachectl -S (unintended NVH).  These problems are a drop in the bucket compared to the difficulty users have with using NameVirtualHost. 	r1053230
----------------------------
provide a mod_substitute example that uses backreferences for matching as well as for substitution. 	r1053212
----------------------------
Remove unnecessary trailing / on <Directory /home> example. tid50421 	r1053149
----------------------------
The alias_set variable is set when a parent location contains a ProxyPass, so this check catches valid ProxyPasses. Remove the check. 	r1051628
----------------------------
add security warning about the new AuthzSendForbiddenOnFailure directive. 	r1050700
----------------------------
Add new AuthzSendForbiddenOnFailure directive to allow sending '403 FORBIDDEN' instead of '401 UNAUTHORIZED' if authorization fails for an authenticated user PR: 40721 	r1050677
----------------------------
"Removes the "":80"" from the sole ServerName example of the documentation, as it is a dumb ""default"". "	r1049240
----------------------------
fix compatibility info for ChrootDir 	r1045321
----------------------------
update metafiles 	r1044537
----------------------------
PR50349: Honor 'AcceptPathInfo OFF' during internal redirects, such as per-directory mod_rewrite substitutions.   This would be left floating around in the request_rec with a pcalloc'ed value, so the core fixup hook thought some module had overridden it. 	r1043023
----------------------------
Use example domains, rather than real ones. Replace use of TransferLog with recommended CustomLog directive. 	r1043011
----------------------------
PR 39313: allow the user to configure which rules come first when RewriteRules are merged with RewriteOptions Inherit. Submitted By: Jérôme Grandjanny <jerome.grandjanny cea.fr> Reviewed By: covener 	r1042255
----------------------------
add compatability to IndexIgnoreReset 	r1042242
----------------------------
PR#24243: allow some control over how IndexIgnore'd files are merged. 	r1042209
----------------------------
simplify ServerName check with apr_fnmatch_test() 	r1042157
----------------------------
core: Fail startup when the argument to ServerName looks like a glob or a regular expression instead of a hostname (*?[]).  PR 39863 Submitted By: Rahul Nair <rahul.g.nair gmail.com> Reviewed By: covener 	r1042098
----------------------------
"PR44076: allow ""userdir disabled"" or ""userdir public_html"" in global scope to be merged with lists of enabled users in virtual host context as one would expect. "	r1042090
----------------------------
mention FallbackResource in URL mapping 	r1041851
----------------------------
PR50375: <Location> has bad example in sections.xml and never actually explains what's matched in core.xml. 	r1040808
----------------------------
Missing directives in various translations of the mod_setenvif documentation. 	r1040498
----------------------------
PR50376 clarify that <Directory> applies to the files under the Directory, not just the directories themselves. 	r1040494
----------------------------
PR50350: When no -k option is provided on the httpd command line, the server was starting without checking for an existing pidfile. 	r1039989
----------------------------
Fix SetEnvIfExpr to work with expressions that do not set the regexp Add some trace logging. 	reference
----------------------------
Add missing directive to Korean translation of mod_log_config documentation. 	r1039612
----------------------------
Adds missing IndexHeadInsert directive to Korean documentation. 	r1039510
----------------------------
Clarifying sub-URI behaviour of FallbackResource 	r1039209
----------------------------
"suExec not allowing scripts to run as root is permanent, removing ""Presently"". Porting this to the .fr doc. "	r1038591
----------------------------
More ap_expr updates: - minor bump for ap_expr_exec_re() introduced in r1037504 - actually commit the changes to allow using backreferences in SetEnvIfExpr - automatically add the correct entries to the Vary-header if the result of an expression evaluation depends on a request header (can be turned off by setting the AP_EXPR_FLAGS_DONT_VARY flag) - set AP_EXPR_FLAGS_DONT_VARY in mod_log_config's conditional logging - fix various off-by-one errors in req_table_func 	r1037540
----------------------------
ap_expr related fixes/enhancements: - implement regex backreferences and make them available for setting envvars in SetEnvIfExpr - implement nested function calls in %-syntax: %{func1:%{func2:arg}} - actually implement evaluation of concatenation operator (oops...) - Fix <If ... > treating an internal error as success 	r1037504
----------------------------
Adding SetEnvIfExpr documentation, and more references to expr.html 	r1037339
----------------------------
Add SetEnvIfExpr directive to set env var depending on expression. 	r1037137
----------------------------
mod_proxy: Fix ProxyPassInterpolateEnv directive. PR: 50292 	r1036602
----------------------------
Add ProxyPassReverse to the examples in the mod_proxy_balancer docs. 	r1033621
----------------------------
When restarting, reset ap_server_config_defines to what was set on the command line. This makes the result more predictable for the user and resolves some string lifetime issues in the implementation of set_define/unset_define. 	r1033619
----------------------------
suEXEC: Add Suexec directive to disable suEXEC without renaming the binary (Suexec Off), or force startup failure if suEXEC is required but not supported (Suexec On).  Change SuexecUserGroup to fail startup instead of just printing a warning if suEXEC is disabled. Additionally, ap_unixd_config.suexec_disabled_reason has a message, suitable for logging/messaging, explaining why the feature isn't available. 	r1033519
----------------------------
* Fix parameter name as new is a reserved word in C++ which makes compiling of http_config.h with C++ impossible. PR: 50243 	r1033427
----------------------------
Remove out-of-date details about which modules are enabled by default from the documentation, in favor of suggesting getting the up-to-date information by running ./configure -h. The special cases previously documented here (such as, this module depends on this other module, or you probably don't want this module unless you're a developer), have had that information added to the output of configure -h in r1029814. 	r1033032
----------------------------
follow up to r1031659: fix a remaining reference to the old non-zero default for MaxConnectionsPerChild for most MPMs 	r1032706
----------------------------
Note that CRL-querying browsers can have problems with low header timeouts. Add another expamle config. 	r1032695
----------------------------
mod_rewrite: Fix the RewriteEngine directive to work within a location. Previously, once RewriteEngine was switched on globally, it was impossible to switch off. 	r1032431
----------------------------
add support for trace loglevels in mod_lua 	r1032084
----------------------------
Fix hook sorting for the pre_config hook. Move modules/http/config2.m4 back to modules/http/config.m4, since this was only done as work-around in r88887 for the broken hook-sorting. 	r1032002
----------------------------
correction to r1031776, retain OR_UNSET with default AllowOverride None 	r1031794
----------------------------
PR49823: Make the hardcoded default for AllowOverride match the default config -- None. 	r1031776
----------------------------
PR47765: leave a hint about ProxyPass and ProxyPassReverse not working in Directory and Files sections. 	r1031762
----------------------------
PR47765: ProxyPass and ProxyPassReverse should not be accepted in Directory or Files sections. 	r1031758
----------------------------
PR#48720: SSLProxyVerify is not per-directory, only per-server. 	r1031742
----------------------------
PR47782: On trunk, the default conf and the hard-coded default are zero for MaxConnectionsPerChild 	r1031659
----------------------------
PR#47782: compiled-in default for MaxConnectionsPerChild is 10,000 vs the Principle of least astonishment says to use a baked-in value of zero until an admin asks for processes to exit this way. 	recommendations
----------------------------
PR#29538: ErrorLog syslog facility can't be changed per-virtualhost. 	r1031579
----------------------------
PR#44758: document LimitRequestBody vs. proxy 	r1031564
----------------------------
"PR#47348: missing ""response"" the ProxyBadHeader description, and drive home with  ...from the origin server. "	r1031428
----------------------------
PR#40831: empty-valued keys behave like missing keys in a RewriteMap lookup. 	r1031338
----------------------------
Add some more cross-references related to the protocol argument for Listen and AcceptFilter, as suggested by Otmar Lendl.  PR45286 	r1031215
----------------------------
"Clarify that the ""www.example.com"" is in the ServerName directive in the first example.  Reported by Charles Merriam.  PR49611 "	r1031197
----------------------------
Explain that Options [+-]?Multiviews doesn't make any sense anywhere outside <Directory> 	r1031111
----------------------------
"PR#50174: don't offer 120ms as a ""typical"" TCP keepalive frequency.  Initial keepalive timers can be as high as 2 hours (windows/linux/solars defaults via google). Drive home the idea that users need to figure out their OS and Firewall timers and make the former smaller than th elatter. "	r1031062
----------------------------
Be more forceful in talking about where SSLEngine On should go. 	r1031061
----------------------------
PR45017: document obscure GprofDir directive 	r1031055
----------------------------
Note that RewriteOptions inherit causes parent rules to be applied AFTER child scope rules. PR46399 	r1031046
----------------------------
PR#47935 some people think s/except/unless makes this somewhat contrived RewriteCond example clearer. 	r1031038
----------------------------
Porting previous commit on 2.2 doc, with a not about why .htaccess is bad when you have access to main server config. 	r1030041
----------------------------
Warning in configure -h that mod_dumpio was only for developers and testing was erroneous. 	r1029931
----------------------------
Add to modules' help text (displayed by ./configure -h) more information that will be useful in deciding whether to enable them or not. 	r1029814
----------------------------
Fix regex in AliasMatch example.  Thanks to Felix Schaefer for report and fix.  PR47722. 	r1029715
----------------------------
LogLevel should specify a global log level as well as the per-module loglevel. 	r1029689
----------------------------
"Clarify - say ""suEXEC wrapper"" instead of ""this program"". Reported by James Tanit.  PR48632. "	r1029136
----------------------------
Add an END flag to RewriteRule that acts like L=LAST but also prevents further rounds of rewrite processing due to per-directory substitutions. 	r1028778
----------------------------
Add link to mod_log_config and BufferedLogs, as per https://issues.apache.org/bugzilla/show_bug.cgi?id=50110 	r1028766
----------------------------
Did the mod_usertrack docs. Would like to do a howto style writeup of the multi-daemon secure mod_dav configuration. 	r1027131
----------------------------
Consistently use loglevel emerg before ssl_die() 	r1026903
----------------------------
mod_disk_cache: Make sure we step down cleanly when we've ben configured to cache but haven't set a CacheRoot. 	r1026612
----------------------------
mod_proxy: Optimise ProxyPass within a Location so that it is stored per-directory, and chosen during the location walk. Make ProxyPass work correctly from within a LocationMatch. 	r1026184
----------------------------
Update a per-dir example that's meant to show looping and the L flag. * add a RewriteBase * REQUEST_URI doesn't have the RewriteBase stripped from it, so fix the test comparison. * rewrite to absolute URI and use PT flag so the rule is somewhat applicable to per-vh context 	r1025748
----------------------------
Be extra careful to only pass the main server config to ap_find_loaded_module_symbol. Fixes a segfault when using per-module LogLevel on virtual host scope. PR: 50117 	r1025702
----------------------------
mod_proxy: Move the ProxyErrorOverride directive to have per directory scope. 	r1025666
----------------------------
Set the LogLevel of a newly initialized virtual hosts to UNSET. Otherwise it will not be correctly merged in ap_fixup_virtual_hosts(). 	r1024427
----------------------------
Add teensy clarification to the introductory paragraph for the ServerName directive. 	r1023846
----------------------------
AllowCONNECT has been moved from mod_proxy to mod_proxy_connect. Remove obsolete and broken link. Directive is already documented on this page. 	r1023789
----------------------------
Optimise the configuration structures for mod_disk_cache. 	r1023528
----------------------------
Optimise the configuration structures for mod_cache. 	r1023526
----------------------------
new features list: - add mod_allowmethods to new features - remove mpm_simple, it won't be ready in time for 2.4 	r1023238
----------------------------
Build mod_allowmethods (windows and netware stuff needs to be tested). Change method bit vector to 64 bits 	r1023232
----------------------------
core: Log a warning if <Limit> or <LimitExcept> are used. They are deprecated and may go away in 2.4. 	r1023227
----------------------------
Rename MaxRequestsPerChild to MaxConnectionsPerChild, which describes more accurately what the directive does. The old name still works but logs a warning. 	r1021924
----------------------------
improve docs for ap_errorlog_handler and ap_errorlog_info 	r1021902
----------------------------
mod_cache: Optionally serve stale data when a revalidation returns a 5xx response, controlled by the CacheStaleOnError directive. 	r1021546
----------------------------
Fix the lookup of the per-directory cache config, we were looking up the per-server config instead. 	r1021543
----------------------------
Caution against using non-regex ProxyPass inside of a <LocationMatch> container. PR#50048 Submitted By: Luke Meyer Reviewed By: Eric Covener 	r1021468
----------------------------
Mention that the required ThreadStackSize depends on the modules loaded. Instead of recommending a value, recommend not to reduce it unless necessary. 	r1005973
----------------------------
Document that a ThreadStackSize of 128K or lower will crash on Linux and 	recommend
----------------------------
add %v and %V to ErrorLogFormat 	r1005208
----------------------------
First undefine before define; Watcom does not redefine. 	r1004518
----------------------------
mod_cache: Allow control over the base URL of reverse proxied requests using the CacheKeyBaseURL directive, so that the cache key can be calculated from the endpoint URL instead of the server URL. 	r1003963
----------------------------
mod_cache: CacheLastModifiedFactor, CacheStoreNoStore, CacheStorePrivate, CacheStoreExpired, CacheIgnoreNoLastMod, CacheDefaultExpire, CacheMinExpire and CacheMaxExpire can be set per directory/location. 	r1003882
----------------------------
mod_disk_cache: CacheMaxFileSize, CacheMinFileSize, CacheReadSize and CacheReadTime can be set per directory/location. 	r1003839
----------------------------
Use ptemp in some places to save some memory when parsing included config files 	r1003809
----------------------------
core: Speed up config parsing if using a very large number of config files PR: 50002 Submitted by: andrew cloudaccess net 	r1003808
----------------------------
Fix CVE-2010-1623 in mod_reqtimeout, too. It includes a non-blocking variant of apr_brigade_split_line(). 	r1003626
----------------------------
Add authz providers for use with mod_authz_core and its RequireAny/RequireAll containers: 'ssl' (equivalent to SSLRequireSSL) 'ssl-verify-client' (for use with 'SSLVerifyClient optional') 'ssl-require' (expressions with same syntax as SSLRequire) We may decide to axe 'ssl-require' again in favor of the generic 'expr' provider, depending on the development of the ap_expr parser. 	r1002837
----------------------------
"Add ""IN"" operator to expression parser, to evaluate membership of a list of tokens.  Couldn't resist after sf's comment on r1002363! This means expressions like <If %{REQUEST_METHOD} IN GET,HEAD,OPTIONS,...> will work as a drop-in substitute for <Limit> Also fix off-by-one bug in variable evaluation "	r1002415
----------------------------
A few minor nitpicks. Removal of a double negative. Alteration of example using AllowOverride All in <Directory /> to use something less awful. 	r1002119
----------------------------
In ErrorLogFormat, make it possible to log an item only if the loglevel of the message is higher than a specified value. This allows to achive the old behaviour for the source file name/line number of being only logged for debug and higher. 	r1001381
----------------------------
Add 'local' authz provider that matches connections originating on the local host.  PR 19938. Also remove some cruft from mod_authz_host (we don't need a per-dir config) 	r1001207
----------------------------
Fix crash accessing pollset on worker thread when child process is exiting. The timeout mutex and pollset were allocated from the listener thread pool.  During child process shutdown, the listener thread exits first while any outstanding requests finish.  These objects need to be allocated from pchild since the lifetime extends until the last worker thread has finished. Switch to pchild, and move init of these objects to the same place as other thread-independent objects. 	r1000814
----------------------------
"- add blocker for GA: review example config - remove old votes: * ""what to do if parent dies"" went nowhere after many years * we now have event MPM as default "	r1000144
----------------------------
Revert breakage in 2.2.4 introduced in r450055, by offering a CacheStoreExpired directive to allow the user to override this questionable change. 	r1000106
----------------------------
Add descriptions of the new RewriteCond test flags, -L, -h, and the new >= and <= syntax, added by wrowe in r997553. 	r999383
----------------------------
* LimitRequestBody does not affect Proxy requests (Should it?). Let it take effect if we decide to store the body in a temporary file on disk. 	r999288
----------------------------
Allow authz providers to check args while reading the config and allow them to cache parsed args. Use this to check that argument to 'all' provider is 'granted' or 'denied'. 	r998706
----------------------------
Explanation on how to prioritize mime-types on the serverside with AddType. 	r998553
----------------------------
Introduce integer comparison support in RewriteCond The operators -gt, -ge, -eq, -le, -lt and -ne follow the bash test' semantics for comparing the integer values of the lhs and rhs expressions, as opposed to the string evaluations performed by > >= = <= and <. Note that -lt and -le overlap the existing -l test, and could be confused in expresions such as -ltestfile - to avoid this conflict use -L or -h in place of the legacy -l file symlink test operator. 	r997878
----------------------------
"mod_cache: Change the signature of the store_body() provider function within the mod_cache provider interface to support an ""in"" brigade and an ""out"" brigade instead of just a single input brigade. This gives a cache provider the option to consume only part of the brigade passed to it, rather than the whole brigade as was required before. This fixes an out of memory and a request timeout condition that would occur when the original document was a large file. Update the mod_disk_cache provider implementation to take into account the new API. Introduce CacheReadSize and CacheReadTime directives to mod_disk_cache to control the amount of data to attempt to cache before sending the data on to the client in the ""out"" brigade. "	r996395
----------------------------
add errorlog formats for request notes and env vars 	r996307
----------------------------
Further clarification of SuppressHTMLPreamble + ReadmeName behavior. 	r995838
----------------------------
- Add another check during ErrorLogFormat parsing - Simplify code (including Ruediger's suggestions) 	r993120
----------------------------
Add ErrorLogFormat directive for configuring the error log format, including additional information that is logged once per connection or request. Add error log IDs for connections and request to allow correlating error log lines and the corresponding access log entry. 	r992806
----------------------------
mod_cache: Use a proper filter context to hold filter data instead of misusing the per-request configuration. Fixes a segfault on trunk when the normal handler is used. 	r992614
----------------------------
mod_cgid: Log a warning if the ScriptSock path is truncated because it is too long. PR 49388 	r992583
----------------------------
Fail startup for vhost configuration problems, rather than 	running
----------------------------
Support large log files in suexec PR: 45856 	r987861
----------------------------
"Change behaviour of worker sharing. A proxy worker is shared, if its URL is a leading substring of the URL of another worker defined later in the configuration. Before this change this - triggered the ""worker ... already used by another worker"" message - resulted in a hard to understand configuration for this worker - Attributes explicitely given in the later worker overwrote - General proxy attributes (e.g. ProxyTimeout ) overwrote New behaviour: - Talk about ""sharing"" of workers and log both worker URLs in the info log message instead of the ""already used"" message - Do not overwrite attributes. If attributes were explicitely given in the later worker, log a warning that those are ignored because of sharing. "	r987854
----------------------------
For NameVirtualHost, specify which vhost is the default if no match is found. For ServerName, copy information about how multiple occurrences are handled from the vhost doc. 	r987251
----------------------------
[PT] is implied in per-dir context. (Also, FallbackResource is backported in 2.2.16) 	r983728
----------------------------
With -S, show ServerAlias values that go with the virtual hosts 	r982629
----------------------------
Add mod_proxy_scgi to default configuration for installation on Windows (comented). 	r981059
----------------------------
"Adding sub second timestamps and request end time to mod_log_config. Add special format tokens to %{...}t. The extended syntax allows the form: ""WHICH:WHAT"". WHICH is either: - ""begin"": use the time when the request started - ""end"": take ""now"" as the time You can omit WHICH, default is ""begin"". If you omit WHICH, the separating column is not allowed. WHAT is either: - ""sec"": timestamp in Unix seconds - ""msec"": timestamp in Unix milliseconds - ""msec_frac"": millisecond fraction of the Unix timestamp, - ""usec"": timestamp in Unix microseconds - ""usec_frac"": microsecond fraction of the Unix timestamp - anything different from those tokens: use strftime() You can omit WHAT, default is the formatted timestamp as used by the Common Log Format. The implementation uses a new request_config for mod_log_config to pass the request end time around between different calls to log formatters, but the end time is only generated if needed. "	r979120
----------------------------
Update documentation for AddOutputFilterByType move 	r966890
----------------------------
Support multiple names in reimplemented AddOutputFilterByType 	r966881
----------------------------
Move AddOutputFilterByType implementation from core to mod_filter. 	r966869
----------------------------
Fixes a non-working example in the int RewriteMap section. 	r966346
----------------------------
Update SSL cipher suite and add example for SSLHonorCipherOrder. 	r966160
----------------------------
Fix up some SSL configuration, per issue #49484. IE6 had a hotfix released for this problem quite a while back (see kb 921090), so restrict the modified behavior to the old/unsupported browsers. * docs/conf/extra/http-ssl.conf.in: (): tighten up the regex to only select old MSIE browsers for the 	r966055
----------------------------
Enable SetEnv to set PATH PR 43906 	r965679
----------------------------
Added http_config.h to make APLOG_USE_MODULE macro visible. 	r965325
----------------------------
authn_socache: if loaded but not configured to do anything, don't go to the trouble of setting up the cache and mutex. 	r959460
----------------------------
OS/2: Add support for ThreadStackSize. 	r956863
----------------------------
- Add reallyall option to configure to build everything that can be built with the available libs. - Remove redundant --with-distcache option. Simply enable distcache if mod_socache_dc is selected. - Enable serf support by default if serf is available in /usr. 	r956221
----------------------------
Add a configuration block for Event MPM. Event is now the default MPM for many platforms, so we should provide an explicit configuration. Discussion for good values to follow. 	r955033
----------------------------
Change log_error_core to prefer s over c->base_server for loglevel configuration. 	r954976
----------------------------
"Update comment about required modules in extra configuration files. Mostly adding the information to the vhost and ssl files, and adding mod_authz_core and mod_authz_host (for ""Require all denied"" and ""Require all granted"") where needed. "	r954816
----------------------------
"Fix IfModule in default configuration according the to new mod_unixd. ""User"" and ""Group"" are no longer implemented in the MPMs. "	r954808
----------------------------
"The directives ""User"", ""Group"" and ""ChrootDir"" have been moved into mod_unixd. The old macro UNIX_DAEMON_COMMANDS is no longer in use. "	r954783
----------------------------
Use the correct loglevel checks in the wrappers for ap_log_cerror/ap_log_rerror. This fixes per-dir loglevel configuration for loglevels > notice. 	r954188
----------------------------
"Run filter ""init"" functions exactly once per request.  No longer run init functions for connection filters (doing an ""init"" once per handler invocation makes no sense for a connection filter).  No longer * include/util_filter.h (ap_filter_rec_t): Clarify use of the init function pointer. * server/config.c (invoke_filter_init): Drop ap_ prefix for private function; take a request_rec pointer and only invoke filters with matching request. (ap_invoke_handler): Adjust accordingly. PR: 49328 Reviewed by: rpluem "	run
----------------------------
Fix ap_log_perror macro in case of C99 compilation with APLOG_MAX_LOGLEVEL defined. 	r953248
----------------------------
It causes build problems on Windows and the ap_log* calls in main.c don't profit from it anyway, because there is no server_rec yet where they could look up core_module's loglevel. 	remove
----------------------------
Replace LogLevelDebugDump with TRACE log levels 	r951904
----------------------------
Replace RewriteLog/RewriteLogLevel with trace log levels 	r951903
----------------------------
Replace DumpIOLogLevel with trace log levels 	r951902
----------------------------
Update LogLevel docs 	r951901
----------------------------
- Add loglevels to request_rec and conn_rec - Introduce per-directory loglevel configuration 	r951897
----------------------------
Use new loglevel accessor macros to simplify code 	r951896
----------------------------
Use the new APLOG_USE_MODULE/AP_DECLARE_MODULE macros everywhere to take advantage of per-module loglevels 	r951895
----------------------------
Fix some modules to make them compile with per-module loglevels. 	r951894
----------------------------
- Introduce log levels trace1/.../trace8 - Add macro wrappers for ap_log_*error. On C99, this will save argument preparation and function call overhead when a message is not logged because of the configured loglevel. - Introduce per-module loglevel configuration. 	r951893
----------------------------
Fix lookup of apu-config for VPATH builds For included APU, apu-config is not in the srcdir but instead in the builddir. That only matters for VPATH builds, ie. when you build outside of the source tree. Similar to r951769 (apr-config). 	r951865
----------------------------
For included APR, apr-config is not in the srcdir but instead in the builddir. That only matters for VPATH builds, ie. when you build outside of the source tree. 	r951769
----------------------------
when we actually get a per-server config in a vhost, the shared memory cache was not in the merged config. 	r951235
----------------------------
Remove loglevel entry in core_dir_config, which has been unused for at least some years. 	r951191
----------------------------
mod_authnz_ldap: Search or Comparison during authorization phase can use the credentials from the authentication phase (AuthLDAPSearchAsUSer,AuthLDAPCompareAsUser). PR 48340 Submitted by: Domenico Rotiroti, Eric Covener Reviewed by: Eric Covener 	r950248
----------------------------
Allow mod_authnz_ldap to set environment variables when it only performs authorization. AuthLDAPAuthorizePrefix can be used to force this to overlap with the prefix used for authentication. PR 45584 	r949336
----------------------------
Completes the rewrite of the RewriteMap documentation. Examples for all the various map types, and an overhaul from a grammar perspective. Still want to do some tweaks on the ref doc side. 	r946438
----------------------------
- amalgamate the sections describing the env vars available - update the docs for PeerExtList - fix the markup of the SSLRequire example 	r946243
----------------------------
* modules/metadata/mod_headers.c: Add a function pointer type for the tag handler callback to regain some type-safety. (register_format_tag_handler, header_pre_config): Adjusted. 	r946173
----------------------------
Minor tweak: Rename links to 'Using RewriteMap' rather than 'RewriteMap'. 	r945974
----------------------------
Better explanation of example for rnd: type RewriteMap 	r945971
----------------------------
Link to the new RewriteMap doc. 	r945967
----------------------------
Adds a useful and complete example for using RewriteMap txt: 	r945966
----------------------------
Rephrasing of RewriteMap intro. 	r945944
----------------------------
Add the rewritemap doc to the seealso navigation. 	r945934
----------------------------
Moves most of the rewritemap stuff out into its own document where we can give it the exhaustive treatment it deserves without making the 	reference
----------------------------
Fix the following: $> grep -e autoindex_ -e cgi_ httpd.conf LoadModule autoindex_module libexec/apache22/mod_autoindex.so LoadModule cgi_module libexec/apache22/mod_cgi.so fire up the following commands $> apxs -e -a -n autoindex mod_autoindex.so [activating module `autoindex' in /usr/local/etc/apache22/httpd.conf] $> apxs -e -a -n cgi mod_cgi.so [activating module `cgi' in /usr/local/etc/apache22/httpd.conf] This will result into the following httpd.conf $> grep -e autoindex_ -e cgi_ httpd.conf LoadModule autoindex_module libexec/apache22/mod_autoindex.so LoadModule cgi_module libexec/apache22/mod_cgi.so LoadModule autoindex_module libexec/apache22/mod_autoindex.so LoadModule cgi_module libexec/apache22/mod_cgi.so As you notice the modules are now loaded twice Now try to deactivate for the loaded ssl module $> grep ssl_ httpd.conf LoadModule ssl_module libexec/apache22/mod_ssl.so $> apxs -e -A -n ssl mod_ssl.so [preparing module `ssl' in /usr/local/etc/apache22/httpd.conf] $> grep ssl_ httpd.conf LoadModule ssl_module libexec/apache22/mod_ssl.so #LoadModule ssl_module libexec/apache22/mod_ssl.so As reported in FreeBSD ports PR: http://www.freebsd.org/cgi/query-pr.cgi?pr=ports/133704 Previously discussed with: wrowe@ This b/c '$lmd' expects the amount of space to be a fixed amount.  Use \s+ to make any valid httpd.conf syntax work (i.e. at least 1 space) 	r942209
----------------------------
ab was sending wrong number of requests when keepalive enabled. Thanks to Bryn Dole for the patch. PR: 48497 	r940526
----------------------------
Add some documentation for the request record, apache2 module, some default configuration values.  Indicate that mod_lua is available in 2.3. 	r940007
----------------------------
Use the more specific 408 (timed out) instead of a generic 400 during a timeout 	reading
----------------------------
PR49167, unexpected 413 and double-errordoc during a timeout reading a chunk-size. 	r937858
----------------------------
Various metafiles rebuilt. 	r937064
----------------------------
Added working config to mod_ratelimit 	r937056
----------------------------
Working example configuration, thanks to Paul. 	r937055
----------------------------
Move back to a post_config hook... 	r936880
----------------------------
Various metafiles that now contain mention of mod_ratelimit. 	r936814
----------------------------
Adds docs for mod_ratelimit. Need more information in usage and configuration. 	r936813
----------------------------
Build all associated metafiles for mod_dialup. 	r936797
----------------------------
Update metafiles for .fr translation. 	r935902
----------------------------
Adding skeleton documentation for mod_lua, and all of the associated metafiles pertaining thereto. While this is better than nothing, it's not *much* better than nothing, and is very probably inaccurate. But it's a starting point. 	r935894
----------------------------
Replace apr_wait_for_io_or_timeout with apr_poll, to (hopefully) allow mod_reqtimeout to work under windows with apr 1.x 	r935339
----------------------------
"Expand the ""NameVirtualHost has no VirtualHosts"" error message, since it seems that we have to explain a dozen times a day what it really means. "	r934984
----------------------------
Example for using mod_substitute a la mod_proxy_html, in proxy context, to fix hard-coded URLs in HTML. 	r933559
----------------------------
Remove usage of the APR private function apr_wait_for_io_or_timeout(), 	replacing
----------------------------
mod_proxy_connect: Support port ranges in AllowConnect PR: 23673 	r932927
----------------------------
Rebuilding various metafiles. 	r932390
----------------------------
Rebuild various metafiles and translations. 	r931525
----------------------------
First order simplification; Add IncludeOptional for introducing wildcard pattern matches or specific includes which may be omitted. Refactors ap_process_resource_config() to deal efficiently with a single file, and renames the new _ex() flavor per list discussion to  ap_process_fnmatch_configs() for wildcard processing. 	r931435
----------------------------
Remove a TODO item: Turns out mod_vhost_alias does not set DocumentRoot per request. Also several of the 'Apache' -> 'Apache HTTP Server' conversions. 	r931133
----------------------------
I'm reluctant to keep telling people about the ServerPath directive, much less encouraging them to use it in a document on name-based vhosts. It causes confusion, and hasn't been necessary for years. 	r930608
----------------------------
Disable body timeout for CONNECT requests 	r928881
----------------------------
Reverts earlier patch. The --enable-MODULE=shared syntax is valid. Need to fix ./configure --help output instead. 	r927377
----------------------------
My mistake. --enaable-rewrite=shared is in fact valid syntax, even though ./configure --help doesn't mention it. 	r927376
----------------------------
Invalid syntax for the configure script. 	r927365
----------------------------
Introduce SSLFIPS directive to support OpenSSL FIPS_mode; permits all builds of mod_ssl to use 'SSLFIPS off' for portability, but the proper build of openssl is required for 'SSLFIPS on'. PR: 46270 Submitted by: Dr Stephen Henson <steve openssl.org>, wrowe 	r925980
----------------------------
Fixing SSLStrictSNIVHostCheck description, which made my head hurt. 	r924843
----------------------------
Update compatibility note for ProxyPreserveHost 	r923952
----------------------------
note that CacheLock is available in 2.2.15 or later 	r923735
----------------------------
get the socket with ap_get_module_config instead of walking the filter chain 	r923429
----------------------------
"core: shorten the wait time in ap_lingering_close() if the ""short-lingering-close"" connection note is set. mod_reqtimeout: Instead of setting c->aborted, use the ""short-lingering-close"" connection note to shut down the connection quickly while still giving the client a chance to receive the error message. "	r923418
----------------------------
Also extend the timeout if have_lf_or_eos() returned APR_SUCCESS. Spotted by Ruediger Pluem 	r922407
----------------------------
- Enforce request timeout even for AP_MODE_GETLINE. - Abort connection when timeout occurs. Otherwise the thread may be blocked another 30s doing a lingering close. The downside is that the client will not receive the error message. 	r921526
----------------------------
add defaults for AuthLDAPGroupAttribute to the synopsis 	r920407
----------------------------
* Only log a 408 if it is no keepalive timeout. PR: 39785 Submitted by: Mark Montague <markmont umich.edu>, rpluem Reviewed by: rpluem 	r919323
----------------------------
Tell them how to increase ThreadLimit 	r918033
----------------------------
Reference Min/MaxSpareServers/Threads when talking about dynamically configuring the side of the server pool. 	r918024
----------------------------
Make sure we request the APR_FINFO_TYPE on the apr_dir_read() for wildcard configuration. 	r917759
----------------------------
Add mod_reqtimeout line to Windows default configuration. Submitted by: Gregg L. Smith <lists glewis com> 	r917151
----------------------------
Create the pidfile world readable by adding APR_FPROT_WREAD. Use non-deprecated versions of the APR constants. 	r917005
----------------------------
build mod_reqtimeout on Windows 	r916866
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLInsecureRenegotiation): Tweak wording as suggested by trawick. 	r916817
----------------------------
mod_ldap: Eliminate a potential crash with multiple LDAPTrustedClientCert when some are not password-protected. 	r915295
----------------------------
Fix startup segfault when the Mutex directive is used but no loaded modules use httpd mutexes. Add an init call from core's pre-config hook to ensure init is performed before the config is parsed. PR: 48787 	r912666
----------------------------
mod_proxy_http: get the headers right in a HEAD request with ProxyErrorOverride.PR 41646 Analysis by Stuart Children; patch by niq 	r912063
----------------------------
Document that ExpiresActive defaults to off. 	r911498
----------------------------
Make sure the pidfile is deleted on close. 	r910756
----------------------------
mod_proxy_http: Make sure that when an ErrorDocument is served from a reverse proxied URL, that the subrequest respects the status of the original request. This brings the behaviour of proxy_handler in line with default_handler. PR 47106. 	r909899
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLInsecureRenegotiation): Tweak error wording for when the directive is not supported. 	r908015
----------------------------
distcache already demonstrates sub-second resolutions, but much more importantly, let us not introduce more Y2k38 bugs? Changes the ->store method to take expiry as an apr_time_t, and introduce a placeholder to implement provider-specific iterators of the current elements of an socache store. Cleans up confusion where expiry might be confused with a timeout-period. Finally clean up some hUngarian noteAtion.  Someones' hands need to be slapped. 	r907917
----------------------------
Be specific about which environment variables can be used in expansions in the server configuration file. 	r906779
----------------------------
worker: don't report server has reached MaxClients until it does. Add warning when within MinSpareThreads. PR: 46996 	r906535
----------------------------
* docs/manual/mod/mod_ssl.xml: Warn more clearly about the security impact of SSLInsecureRenegotiation. 	r906454
----------------------------
* mod_ssl.xml: Document the SSL_SECURE_RENEG envvar, and SSLInsecureRenegotiation. 	r906067
----------------------------
"New releases of OpenSSL will only allow secure renegotiation by default.  Add an ""SSLInsecureRenegotiation"" directive to enable * modules/ssl/ssl_private.h (struct SSLSrvConfigRec): Add insecure_reneg field. * modules/ssl/ssl_engine_config.c (ssl_config_server_new, ssl_config_server_merge): Handle the insecure_reneg flag. (ssl_cmd_SSLInsecureRenegotiation): New function. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_protocol): Set the SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION option if insecure_reneg is enabled. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Log level of support for secure reneg. * modules/ssl/mod_ssl.c: Add the directive definition. "	renegotiation
----------------------------
* Use loglevel value for parsing 	r905546
----------------------------
mod_log_config: Add the R option to log the handler used within the Submitted by: Christian Folini <christian.folini netnea com> 	request.
----------------------------
Replace the Define !FOO syntax by a new UnDefine directive. 	r904853
----------------------------
Allow the Define directive to undefine a variable by prefixing the argument with a '!'. PR: 35350 	r904768
----------------------------
Make ap_pregsub(), used by AliasMatch and friends, use the same syntax for regex backreferences as mod_rewrite and mod_include: Remove the use of '&' as an alias for '$0' and allow to escape any character with a backslash. Document the use of $0. PR: 48351 	r904765
----------------------------
* We need to return an int as result of the pre_config hook. 	r903607
----------------------------
Adds documentation for the new AddAltClass IndexOption, and for the new CSS classes provided by IndexStyleSheet 	r903055
----------------------------
Refactor mod_status out of the ExtendedStatus toggle picture, as other modules can and should be able to use this scoreboard information. Rename suggestions for such a directive are welcomed. Note that mod_status toggles the default, to present the ExtendedStatus for server operators, whenever it is loaded.  Docs changes to follow. 	r903020
----------------------------
mod_authnz_ldap: If AuthLDAPCharsetConfig is set, also convert the password to UTF-8. PR: 45318 Adapted patch from Johannes Müller 	r902654
----------------------------
Note that a firewall silently dropping packets is a mis-configuration. 	r902605
----------------------------
Move the ldap_simple_bind() + ldap_result() code implementing a timeout into a utility function and use it to replace the other occurence of ldap_simple_bind_s(). 	r902604
----------------------------
fix LDAPConnectionTimeout, take a stab at newly added LDAPTimeout 	r902445
----------------------------
Rename RequestTimeout into RequestReadTimeout and change the configuration syntax again. Hopefully this makes it easier to understand. 	r902434
----------------------------
Introduce new config option LDAPTimeout to set the timeout for operations like bind and search. For operations other than search, the support of the timeout depends on the LDAP SDK supporting LDAP_OPT_TIMEOUT (e.g. OpenLDAP >= 2.4.4). An exception is the ldap_simple_bind() in uldap_connection_open(): Here we put some extra effort into detecting a timeout in a portable way, to catch an idle connection having been dropped by a firewall. 	r898102
----------------------------
Allow several of the configured session identifiers to be found and removed in a single request. 	r897705
----------------------------
clarify LDAPConnectionTimeout behavior/availability which is really just passed along to the SDK when applicable. 	r896897
----------------------------
clarify that FileETag is for static files only, and explicitly mention that ETags aren't generated for files parsed by mod_include. 	r896299
----------------------------
Similar to r893874, fix the ProxyPass example accoding to the trailing slash rule. PR: 48459 	r896073
----------------------------
Rewriterule syntax with new phrasing. 	r895077
----------------------------
Replace rewriterule/rewritecond flow diagram with a easier-to-read version donated by Joseph Pecoraro. 	r895068
----------------------------
Removes duplication of the RewriteRule flags documentation. The module doc contains a table of definitions. The rewrite flag doc contains detailed explanations and examples. 	r895060
----------------------------
Makes each flag a top-level section in this doc, thereby giving it a navigation link in the right navigation box. I think that makes this page much more useful, particularly when it becomes the primary resource for rewriterule flags and their use. Also adds some detail on several of the flags. 	r894539
----------------------------
Move ProxyFtpDirCharset from mod_proxy to mod_proxy_ftp. 	r894526
----------------------------
Move AllowCONNECT from mod_proxy to mod_proxy_connect. 	r894425
----------------------------
Adds a [QSD] flag to RewriteRule to discard unwanted query strings without the old kludge of sticking a ? on the end of the target URI. 	r894383
----------------------------
Adds a clarification to the AddDescription docs, to address the confusion indicated in https://issues.apache.org/bugzilla/show_bug.cgi?id=17210 The problem described there is fixed by a reordering of the AddDescription directives. 	r894306
----------------------------
The ReadmeName directive was putting its value in the wrong place, and overwriting the HeaderName value. 	r894113
----------------------------
mod_filter: enable filters to be configured on non-200 responses PR 48377 	r894041
----------------------------
Fix the ProxyPass example accoding to the trailing slash rule. Submitted by: inoue <inoue ariel-networks.com> PR: 48444 	r893874
----------------------------
Proxy: fix ProxyPassReverse with relative URL PR 38864 	r893871
----------------------------
mod_autoindex: support XHTML as equivalent to HTML in IndexOptions, ScanHTMLTitles, ReadmeName, HeaderName PR 48416 [Dmitry Bakshaev <dab18 izhnet.ru>, Nick Kew] 	r893035
----------------------------
(re)-introduce -T commandline option to suppress documentroot check at startup PR 41887 Patch by Jan van den Berg 	r893027
----------------------------
* Do an exact match of the keys defined by CacheIgnoreURLSessionIdentifiers against the querystring instead of a partial match. PR: 48401 Submitted by: Dodou Wang <wangdong.08 gmail.com> Reviewed by: rpluem 	r892289
----------------------------
Document the ability to use shell environment variables in the configuration file. PR: 46333 Patch submitted by: Nathan Stratton Treadway 	r892280
----------------------------
apache_probes.h is generated by configure 	r892250
----------------------------
Further mitigation for the TLS renegotation attack, CVE-2009-3555: * modules/ssl/ssl_engine_kernel.c (has_buffered_data): New function. (ssl_hook_Access): Forcibly disable keepalive for the connection if there is any buffered data readable from the input filter stack. * modules/ssl/ssl_engine_io.c (ssl_io_filter_input): Ensure that the BIO uses blocking operations when invoked outside direct control of the httpd filter stack. Thanks to Hartmut Keil <Hartmut.Keil adnovum.ch> for proposing this technique. 	r891282
----------------------------
Patch from Mark Watts. Mention ProxyErrorOverride. 	r890378
----------------------------
Don't keepalive when we send a non-100 response while Client is expecting 100 and may be feeding us continuation data. PR 47087 	r888310
----------------------------
Rpm package: pass the HTTPD_LANG variable to the httpd process in line with Fedora. Remove the use of the apachectl script, as a script calling another script makes no sense. Test for the pidfile specifically, so that Redhat's scripts don't fall back to using pidof and returning the status of other httpd processes running on the same box. 	r885606
----------------------------
Updates for french translations and small typos for manual/mod/mod_reqtimeout.xml. 	r885121
----------------------------
Replaces the two-step process with a single rule using the RewriteCond backreference. This technique is far simpler, and far easier to explain to beginners than the unnecessarily complicated technique used. 	r884943
----------------------------
update the session cache description to indicate that the ssl cache mutex is used to serialize access, and that the mutex can be configured using the Mutex directive 	remove
----------------------------
move a couple of special warnings for SysV sems and Posix sems out of the performance tuning guide and into the common Mutex documentation; remove the other (duplicate) information from that guide and instead point to the Mutex directive mpm_common: axe docs for old accept mutex directives worker and prefork: axe links to old accept mutex directives, mention the use of the accept mutex and how it can be configured event: axe links to old mutex directives where were already N/A mod_rewrite: axe old RewriteLock directive, mention use of the rewrite map mutex for RewriteMap programs and how it can be configured fix other miscellaneous LockFile or AcceptMutex references 	r883878
----------------------------
"fix Win32 compile failure in r883540, reported by Gregg Smith DEFAULT_REL_RUNTIMEDIR defined only in mpm_default.h for NetWare and dsp-based Win32 builds mpm_default.h not in normal include path on Unix thus, hardcode ""logs"" directory when DEFAULT_REL_RUNTIMEDIR isn't defined (file-based mutexes aren't configurable for those platforms anyway) "	r883828
----------------------------
Replace AcceptMutex, LockFile, RewriteLock, SSLMutex, SSLStaplingMutex, and WatchdogMutexPath with a single Mutex directive.  Add APIs to simplify setup and user customization of APR proc and global mutexes. (See util_mutex.h.)  Build-time setting DEFAULT_LOCKFILE is no longer Some existing modules, such as mod_ldap and mod_auth_digest gain configurability for their mutexes. 	respected;
----------------------------
KeepAlive no longer accepts other than On|Off. 	r883082
----------------------------
continue clarification of RewriteBase, lots of users who install little PHP apps with an Alias a) leave off RewriteBase then b) add the filesystem path instead of the URL-path then c) spend hours trying to debug the RewriteRules themselves. 	r883030
----------------------------
fix config context tokens 	r882997
----------------------------
fix typo in AcceptFilter-related comment 	r882944
----------------------------
doc for AuthLDAPBindAuthoritative 	r881812
----------------------------
Add AuthLDAPBindAuthoritative to allow other authentication providers a chance to run when mod_authnz_ldap finds a user but can't verify their password. Submitted By: Justin Erenkrantz, Joe Schaefer, Tony Stevenson 	r881808
----------------------------
"Improve hack to ""determine"" if APR supports thread-safe pollsets by hiding the presence of kqueue() on Leopard, matching APR's configuration. Event and Simple no longer report that they are supported on Leopard, resolving a broken default config file with --enable-mpms-shared=all on that platform. (Event was loaded by default in httpd.conf, and it failed at startup when it failed to obtain a thread-safe pollset.) "	r836165
----------------------------
Removes another bogus example. Use <Proxy> blocks instead, and standard access control methods. Also, the note about loading mod_rewrite before mod_proxy isn't actually relevant any more. 	r835827
----------------------------
Removes an inscrutable recipe - I don't know what problem it's trying to solve, and the solution appears to be a completely useless use of RewriteMap to solve a trivial problem that could be better done with Alias. Am I missing something? 	r835824
----------------------------
Removes a lengthy and unnecessary discussion of the various methods of load balancing. Removes a RewriteMap prg load balancing script, and admonition to use mod_proxy_balancer instead. 	replaces
----------------------------
Fix broken config check for *max timeouts Fix floating point exception for *minrate == 0 	r834499
----------------------------
mod_log_config: Make ${cookie}C correctly match whole cookie names instead of substrings. PR: 28037 Submitted by: Dan Franklin <dan dan-franklin.com>, Stefan Fritsch 	r833738
----------------------------
SECURITY: Partial fix for CVE-2009-3555: Reject client-initiated renegotiations; this is sufficient to prevent the attack for any configuration which does not require renegotiation due to per-directory/per-location access control configuration. Configuration with per-directory/per-location access control to CVE-2009-3555 with this patch applied (if using OpenSSL <= 0.9.8k). * modules/ssl/ssl_private.h (SSLConnRec): Add reneg_state field. (ssl_callback_Info): Renamed from ssl_callback_LogTracingState. * modules/ssl/ssl_engine_init.c (ssl_init_ctx_callbacks): Install the (renamed) info callback unconditionally. * modules/ssl/ssl_engine_io.c (ssl_filter_ctx_t): Add config pointer to SSLConnRec. (bio_filter_out_write, bio_filter_in_read): Fail with APR_ECONNABORTED if the reneg state is set to RENEG_ABORT. * modules/ssl/ssl_engine_kernel.c (log_tracing_state): Factored out of ssl_callback_LogTracingState. (ssl_callback_Info): New function. 	requirements
----------------------------
Removing a ruleset that not only doesn't have a description, but also can't possibly work, since it contains a fully-qualified URL in the RewriteRule. Feel free to revert iff you can provide a description and a functional rule. 	r832976
----------------------------
add an early note about the Pattern in a rewriterule behaving counterintuitively in per-directory context. (lots of mysterious no-op Tweak QSA text. 	rulesets
----------------------------
tweak MPM configure to avoid having to grep for MPM names in lists of MPMs of some type (threaded or share-able or enabled), as suggested by jorton 	rename
----------------------------
Add a LoadModule directive for the default MPM to the conf file when building MPMs as shared modules. 	r832778
----------------------------
ServerAlias and Listen accumulate, not supercede.  The latter of course is n/a to vhosts! Additional rewording of vhost details. PR48125 	r832759
----------------------------
Split RewriteCond into two sections, brought TestString section up to date. 	r832627
----------------------------
added back HAVE_OCSP define hack for non-configure platforms, but only use if HAVE_OCSP is not yet defined as suggested by rpluem. 	r832572
----------------------------
We now check for OCSP support in configure, so we can lose an OpenSSL version number check.  Use a type safe STACK. 	r832496
----------------------------
Change the configure-based MPM build mechanism to support building an MPM as a shared shared or dynamic module, primarily using the APACHE_MPM_MODULE() function. --enable-mpms-shared now builds/installs the MPMs as dynamic modules. (But no LoadModule directives are added.) 	r832434
----------------------------
"more configure-time support for dynamically loadable MPMs: . axe --with-mpm=""shared"" hack, replace with --enable-mpms-shared={all|list} . replace singular MPM_NAME with access to the list of enabled MPMs . replace singular MPM_SUBDIR with list MPM_SUBDIRS . enable OS/2 MPM in same manner as others with configure support instead of hard-coding in configure.in Current state: MPMs are built as static archives (but not linked to httpd) with --enable-mpms-shared, so they still have to be built with apxs to load dynamically. "	r832228
----------------------------
address FAQ of SetEnv environment variables not being available to early directives such as RewriteRule. 	r831695
----------------------------
add LDAPLibraryDebug directive to mod_ldap to turn on tracing in underlying LDAP SDK, where all the interesting tidbits about all kinds of LDAP errors are hidden. Unfortunately windows doesn't implement this LDAP_OPT. 	r831183
----------------------------
define HAVE_OCSP dependent on OpenSSL version to make things easier for non-configure platforms (NetWare, Win32). 	r830765
----------------------------
Document that there's a limit on the length of lines in the configuration file. PR: 45888 	r830237
----------------------------
CharsetOptions NoImplicitAdd wasn't referenced during insert_filter callback. Doc: Correct defaults, charset_lite inserts itself by as soon as you tell it about input and output character sets. 	r829664
----------------------------
"CharsetOptions NoImplicitAdd makes us fall through to the ""unknown option"" clause due to breaking ""else if"", making NoImplicitAdd unconfigurable. "	r829657
----------------------------
"Add support for OCSP ""stapling"": * modules/ssl/ssl_util_stapling.c: New file. * modules/ssl/config.m4, modules/ssl/mod_ssl.dsp: Build it. * modules/ssl/ssl_toolkit_compat.h: Define HAVE_OCSP_STAPLING if OpenSSL is of suitable version (>= 0.9.8g) and capability (TLS extension support enabled). * modules/ssl/mod_ssl.c: Add config directives. * modules/ssl/ssl_private.h: Add prototypes for new functions. (SSLModConfigRec): Add fields for stapling socache instance and associated mutex. (modssl_ctx_t): Add config fields for stapling. * modules/ssl/ssl_engine_init.c (ssl_init_Module, ssl_init_Child): Call the stapling initialization functions. * modules/ssl/ssl_engine_config.c: Add config hooks. * modules/ssl/ssl_scache.c: Create, initialize and destroy the socache instance for OCSP responses. Submitted by: Dr Stephen Henson <shenson oss-institute.org> "	r829619
----------------------------
Only parse cache size in parens at the end of the string. Fixes SSLSessionCache directive mis-parsing parens in pathname. PR: 47945 	r829185
----------------------------
Rename ReqTimeout into RequestTimeout, to be more in line with other directives. 	r825177
----------------------------
* With SSLProxyCheckPeerCN and SSLProxyCheckPeerExpire available and turned on by default this warning is no longer true. 	r824830
----------------------------
Allow ProxyPreserveHost to work in <Proxy> sections PR: 34901 	r824072
----------------------------
configure: Fix THREADED_MPMS so that mod_cgid is enabled again for worker MPM. 	r823794
----------------------------
Add some docs for mod_reqtimeout. 	r822509
----------------------------
Work around broken cache management in mod_ldap: If LDAPSharedCacheSize is too small, try to free some memory by purging the cache and log a warning. Also increase the default LDAPSharedCacheSize to 500000. This is a more LdapOpCacheEntries. PR: 46749 	realistic
----------------------------
mod_cache: Teach CacheEnable and CacheDisable to work from within a Location section, in line with how ProxyPass works. 	r821993
----------------------------
No need to constantly compute these; do so once at config time and use as needed :) 	r821990
----------------------------
Refactor mod_reqtimeout a bit to use just 1 directives with multiple params... 	r821792
----------------------------
added mod_reqtimeout to NetWare build; fixed some NWGNU* properties. 	r821595
----------------------------
Add mod_reqtimeout: New module to set timeouts and minimum data rates for 	receiving
----------------------------
mod_cache: Fix uri_meets_conditions() so that CacheEnable will match by scheme, or by a wildcarded hostname. PR: 40169 Submitted by: Peter Grandi <pg_asf asf.for.sabi.co.uk> Reviewed by: Graham Leggett 	r821333
----------------------------
suexec: Allow to log an error if exec fails by setting FD_CLOEXEC on the log file instead of closing it. PR: 10744 Submitted by: Nicolas Rachinsky Reviewed by: Stefan Fritsch 	r821321
----------------------------
Make RemoveType override the info from TypesConfig 	r821298
----------------------------
core: Treat timeout reading request as 408 error, not 400. Log 408 errors in access log as was done in Apache 1.3.x. PR: 39785 Submitted by: Nobutaka Mantani, Stefan Fritsch Reviewed and added to by: Dan Poirier 	r820760
----------------------------
* include/httpd.h: Fix comment implying that LimitRequestLine and LimitRequestFieldsize cannot raise limits -- no longer the case. 	r819480
----------------------------
Just a little additional verbiage for the FallbackResource directive. 	r815782
----------------------------
* modules/ssl/ssl_util_ocsp.c, modules/ssl/ssl_engine_ocsp.c: Move comment on I/O timeout to appropriate place, thanks to Steve Henson. 	r815741
----------------------------
* modules/ssl/ssl_util_ocsp.c (send_request, modssl_dispatch_ocsp_request): Take timeout as argument, as pass through. * modules/ssl/ssl_engine_ocsp.c (verify_ocsp_status): Pass server timeout to modssl_dispatch_ocsp_request. Submitted by: Dr Stephen Henson <shenson oss-institute.org> 	r815719
----------------------------
Change Fallback to FallbackResource after extensive discussion with wrowe and DrBacchus. 	r815502
----------------------------
mod_mime: detect invalid use of MultiviewsMatch inside Location and LocationMatch sections.  Document that such usage is not valid. PR47754. 	r814728
----------------------------
Bring the LDAPCacheEntries and LDAPOpCacheEntries usage() in synch with the manual and the implementation (0 and -1 both disable the cache). PR 40948 	r814441
----------------------------
mod_request: Make sure the KeptBodySize directive rejects values that aren't valid numbers. 	r814337
----------------------------
mod_session.c: Prevent a segfault when session is added but not configured. 	r814327
----------------------------
Add an RPM init.d script to start the htcacheclean daemon, controlled by the optional /etc/sysconfig/htcacheclean configuration. 	r814079
----------------------------
Fail server startup when mod_auth_digest is unable to provide the security checks configured. 	r813396
----------------------------
mod_ssl: The error message when SSLCertificateFile is missing should at least give the name or position of the problematic virtual host definition. [Stefan Fritsch sf sfritsch.de] 	r813105
----------------------------
Fix up doc note on ProxyPassMatch quirks - this wording seems to have got accepted in 2.2.x. 	r809241
----------------------------
"Document ServerTokens Set ""One Big Happy Family Server"" "	r808966
----------------------------
And additional ServerTokens improvement... 	r808965
----------------------------
OK, might as well finish this... Allow ServerTokens Off 	r808895
----------------------------
Document limitation to ProxyPassMatch directive. This is a valid bug report PR 46665, which I'm marking as WONTFIX but which needs documenting for what it is. 	r808321
----------------------------
added vars for Metrowerks directories to make it easier configureable. 	r795433
----------------------------
Add use slotmem. Directive HeartbeatMaxServers > 10 to activate the logic. Otherwise it uses the file logic to store the heartbeats. 	r791617
----------------------------
"Fix incorrect ""Userdir enabled"" usage cases in the docs. The actual documentation of the directive is accurate, but the examples were incorrect, as noted in PR 42910. "	r791344
----------------------------
Correctly set suexec_enabled when httpd is run by non-root PR 42175 	r791337
----------------------------
Complete previous commit, by marking the second invalid configuration example as such. 	r788933
----------------------------
"The first configuration example in the file is misconfiguration. Mark it so ""quick"" reader won't copy/paste it to their config. "	r788932
----------------------------
"ErrorDocument may be used in .htaccess if AllowOverride is set ""to Fileinfo"" "	rather
----------------------------
Fix hung SSL handshake if a particularly long CA list is configured: * modules/ssl/ssl_engine_io.c (bio_filter_in_read): Flush pending output unconditionally since OpenSSL is known to not flush correctly at all times, and it should be cheap even in cases where it is unnecessary. PR: 46952 	r788715
----------------------------
Fix bug in r785425 (dereference null pointer when not configured) and add a couple of comments. 	r785457
----------------------------
no-cache envvar: copy the compatability note from 2.2.x for env.xml, add compat note inline for refereneces in CacheEnable/CacheDisable. 	r782860
----------------------------
* Correctly detect if CacheIgnoreURLSessionIdentifiers is set. 	r778439
----------------------------
* Improve documentation for CacheIgnoreURLSessionIdentifiers Submitted by: Dan Poirier <poirier pobox.com> 	r777091
----------------------------
* Add CacheIgnoreURLSessionIdentifiers directive to ignore defined session identifiers encoded in the URL when caching. 	r777042
----------------------------
"Fix the error string returned by RewriteRule. RewriteRule returned ""RewriteCond: bad flag delimiters"" when the 3rd argument of RewriteRule was not started with ""["" or not ended with ""]"". PR: 45082 Submitted by: Vitaly Polonetsky <m_vitaly topixoft.com> "	r776325
----------------------------
"Revert the default resource abuse introduced in r104019, which can mask child logger process failures, by migrating back to 2.0.49 and prior when Provides two new piped syntaxes for ErrorLog; ""||program"" or ""|$shellcmd"", where the existing 2.2 behavior may be preserved or the new 2.4 behavior explicitly elected.  The default should discourage users from ""|$"" syntax except as required, in the future. "	rotated
----------------------------
Allow relative pathnames for piped loggers in ErrorLog. 	r774755
----------------------------
Address Win32 AcceptFilter documentation replacing DisableWin32AcceptEx 	r773774
----------------------------
* server/core.c (merge_core_dir_configs): Tweak logic and comment wording in the special-case for Includes merging such that the code and comment read the same.  No functional change (intended!). 	r773342
----------------------------
* Fix for the following configuration where the exec command was disabled in /subdir. All CVE-2009-1195 tests still pass with this patch. # only two containers in the config <Directory /> Options Includes AllowOverride None </Directory> <Directory /subdir> # with this container, mod_cgi/mod_cgid complains about exec being off # without it, exec cmd= works as expected SetEnv foo bar </Directory> 	r773322
----------------------------
Security fix for CVE-2009-1195: fix Options handling such that 'AllowOverride Options=IncludesNoExec' does not permit Includes with exec= enabled to be configured in an .htaccess file: * include/http_core.h: Change semantics of Includes/IncludeNoExec options bits to be additive; OPT_INCLUDES now means SSI is enabled without exec=.  OPT_INCLUDES|OPT_INC_WITH_EXEC means SSI is enabled with exec=. * server/core.c (create_core_dir_config): Remove defunct OPT_INCNOEXEC from default override_opts; no functional change. (merge_core_dir_configs): Update logic to ensure that exec= is disabled in a context where IncludesNoexec is configured, even if Includes-with-exec is permitted in the inherited options set. (set_allow_opts, set_options): Update to reflect new semantics of OPT_INCLUDES, OPT_INC_WITH_EXEC. * server/config.c: Update to remove OPT_INCNOEXEC from default override_opts; no functional change. * modules/filters/mod_include.c (includes_filter): Update to reflect new options semantics - disable exec= support if the OPT_INC_WITH_EXEC bit is not set. Submitted by: Jonathan Peatfield <j.s.peatfield damtp.cam.ac.uk>, Thanks to: Vincent Danon <vdanon redhat.com> 	r772997
----------------------------
Add . 'default' test first before searching paths, to determine if the lua.h, liblua5.1, liblua-5.1 or liblua can be resolved.  This avoids adding strange paths on fedora/redhat, and choosing the wrong /lib[64] flavor. Also ensure -lm is always added to the actual linked libraries, avoiding a LoadModule failure on fedora/redhat.  Still should first try to search for pkg-config lua settings, but note this would break fedora until that build hackery is corrected, c.f. the bug https://bugzilla.redhat.com/show_bug.cgi?id=499238 	r772864
----------------------------
"Fix usage message on the Windows platform. - do not include graceful commands and duplicate start|restart|stop - add ServerRoot to the parameters encapsulated by ""-n"" "	r772356
----------------------------
Reorder so and watchdog to configure before cluster modules 	r771998
----------------------------
Ensure all mpm's configure at config3 	r771997
----------------------------
As mentioned inline in comments, correctly handle more sophisticated transformations which currently fail for balancer://foo targets, but work just fine with other ProxyReverse targets. The balancer comparison is a bit trickier.  Given the context translate url http://example.com/foo/bar/that to /bash/that E.g. there may be several different url-suffixes (1st order) of any particular BalancerMember set e.g. /app1, /app1 and /appbeta while there may be additional suffixes associated with the actual ProxyPassReverse directive.  Neither were properly reversed, now both should be properly handled. One *critical* assumption; should be documented as a meaningless construct, since one cannot have two members, balancer://alias/foo and balancer://alias/bar, and the balancer member structures discard this path. Note one more existing error case as an XXX comment due to invalid uri comparisons. 	r771587
----------------------------
MPM's are now dynamically loadable; so must mod_watchdog be. The only module with an excuse now is mod_so which implements LoadModule itself. 	r771579
----------------------------
mod_privileges: introduce PrivilegesMode: fast mode as before vs secure mode to fork an unprivileged child per-request in the manner of MPM-ITK anwhere there's a risk of running malicious code. Documentation to follow. 	r771144
----------------------------
* As proposed by wrowe on list always define SSLStrictSNIVHostCheck, but error out if we are not compiled against an SNI capable OpenSSL. 	r770907
----------------------------
Adds clarifying comment to example configuration. (Redirect) 	r770506
----------------------------
Arrange BalancerMember explainations. 	r770328
----------------------------
* Set SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN to on by default. 	r769815
----------------------------
* Improve and simplify the implementation of SSLProxyCheckPeerExpire by directly using X509_get_notBefore(), X509_get_notAfter() and X509_cmp_current_time(). Thanks to jorton for the pointer. 	r769809
----------------------------
* Add SSLStrictSNIVHostCheck to allow / disallow non SNI clients to connect to name based virtual hosts. 	r768596
----------------------------
* r->connection->aborted signals that the client aborted the connection, but in this case *we* decide to close the connection so use r->connection->keepalive = AP_CONN_CLOSE 	r768500
----------------------------
less confusing and match the conventional wisdom of the various support fora. Provide a longer example that demonstrates the 1:n nature, Avoid phrasing that makes NVH look like Listen. Remove the over-complicated hints about NVH impact on _default_ and base server configs, which boils down to the basic ip-based vhost mapping algorithm. 	relation
----------------------------
mod_dbd: add DBDInitSQL command.  PR 46827 Patch by Marko Kevac. 	r766938
----------------------------
More unregistered media types in common use on the Internet. *sigh* http://msdn.microsoft.com/en-us/library/aa338205.aspx http://technet.microsoft.com/ja-jp/library/cc179224.aspx http://www.adobe.com/support/config.html http://www.adobe.com/go/tn_16509http://www.adobe.com/support/documentation/en/air/1_5_1/releasenotes_developers.html#tips http://livedocs.adobe.com/coldfusion/8/htmldocs/vspider_17.html http://help.adobe.com/en_US/AdobeMediaPlayer/1.5/CDK/WSb04c7610c343283941c82cdf11cc3cc68f8-8000.html http://www.idpf.org/specs.htm http://rivviepop.wordpress.com/2006/01/27/configuring-apache-for-mobile-browsing/ 	r766211
----------------------------
Move logic to decide if an MPM is supported, and whether the MPM is threaded, down to the MPM itself. (server/mpm/FOO/config.m4, which runs before the actual MPM selection) server/mpm/config.m4 makes some general platform checks that can be used for MPM decisions, and contains some functions related to MPMs. XXX The check here for whether APR_POLLSET_THREADSAFE is available Replace the limited per-platform hard-coded MPM selection and the current defaulting to event (whether or not it works) with a selection based on which MPMs work on the platform, as reported by the MPMs themselves. (config2.m4, which runs after the MPMs record whether they are supported) Order of preference: WinNT (mingw32 only) 	r766082
----------------------------
mod_cgid: Improve handling of long AF_UNIX socket names (ScriptSock). Dynamically allocate the AF_UNIX sockaddr based on the required filename size. For some platforms (e.g., Solaris, OS X, FreeBSD), this allows longer socket filenames to be used. When the name is too long, the failure reporting is more consistent and a socket with truncated pathname is not left stranded.  The user still needs to use ScriptSock to specify a shorter name. An extra unlink() failure message may be generated when attempting to clean up the socket after a daemon initialization error; the message is surpressed for ENOTENT, but not for ENAMETOOLONG. PR: 47037 	r765725
----------------------------
* Fix comment and optimize retrieval of loglevel. 	r761181
----------------------------
* Add SSLProxyCheckPeerExpire and SSLProxyCheckPeerCN directives to enable stricter checking of remote server certificates. (docs/manual/mod/mod_ssl.xml) (modules/proxy/mod_proxy_http.c) (modules/ssl/ssl_private.h) (modules/ssl/ssl_engine_config.c) (modules/ssl/ssl_engine_io.c) (modules/ssl/mod_ssl.c) 	r760866
----------------------------
stop exporting APACHE_MPM_DIR to modules -- unclear why this was ever necessary, and it makes no sense with loadable MPMs axe the unnecessary MPM_DIR build variable move the stray APACHE_SUBST(MPM_LIB) from configure.in to server/mpm/config.m4, where the other MPM_foos are handled 	r760403
----------------------------
Clarify when CoreDumpDirectory can be moot based on OS configuration, and mention SIGQUIT/3 not being processed by the signal handler. SIGQUIT may unfortunately be a go-to signal for java users. 	r759957
----------------------------
* Make LDAP working with APR 2.0 again by using apr-config instead of apu-config which is gone in APR 2.0. 	r759594
----------------------------
Add static cluster backend, for very simple configurations. 	r759476
----------------------------
Work in Progress. Add Clustered proxying support to mod_serf, by using the heartbeats system. No preconfiguration of cluster members is needed. Just a config like this: The location of all possible destination servers is provided by a new providers interface, that includes configuration checking of the arguments to the SerfCluster command, solving one of the worst problems with the mod_proxy load balancer subsystem. 	r759386
----------------------------
Add mod_proxy_ftp directives ProxyFtpListOnWildcard and ProxyFtpEscapeWildcards to allow filenames with globbing characters to be retrieved instead of presented in a directory listing. Submitted by: Dan Poirier <poirier pobox.com> Reviewed by: covener 	r758626
----------------------------
prefork, worker, and event MPMs: use retained-data API to maintain information across reconfigs, to allow these MPMs to work as DSOs 	r758185
----------------------------
* configure.in: Allow configure to be built without find_apu.m4, at least temporarily to allow buildconf against apr trunk. 	r758177
----------------------------
Allow building httpd without a built-in MPM by specifying --with-mpm=shared on configure.  When built thusly, an MPM should be loaded via LoadModule. (Currently you need to build the MPM with apxs.) 	r757999
----------------------------
* build/config_vars.sh.in: Fix error if APU_CONFIG is not defined. 	r757819
----------------------------
* configure.in: If APR version is 2, APR-util does not exist. 	r757817
----------------------------
* Store the correct server_rec in the connection record configuration and adjust the remaining part of mod_ssl to use this server_rec instead of c->base_server. modules/ssl/ssl_private.h: - server_rec member to SSLConnRec struct - Add macros to extract data from connection_rec modules/ssl/ssl_engine_io.c modules/ssl/ssl_util_ocsp.c modules/ssl/ssl_engine_kernel.c modules/ssl/mod_ssl.c modules/ssl/ssl_engine_log.c - Use the new macros to extract data fron connection_rec 	r757463
----------------------------
Remove code to support per-dir-CA configuration which relies on a function which was never included in OpenSSL: * acinclude.m4: Remove test for fictional function. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Remove code. * modules/ssl/ssl_engine_config.c (MODSSL_SET_CA): Remove unused macro.  (ssl_cmd_SSLCACertificatePath, ssl_cmd_SSLCACertificateFile): Fail if per-dir-CA is configured. 	r757380
----------------------------
"It's a pet peeve of mine when docs do something, and then say ""don't do that."" Remove the hostname from the <VirtualHost> line, and use an IP address instead. "	r752951
----------------------------
Add an example of using a wildcard with ServerAlias Change <VirtualHost *> to <VirtualHost *:80> 	r752894
----------------------------
Until APR is actually fixed between apr_os_sock_make and the logic within apr_socket_timeout_set, let's presume that vendor differences of socket stack drivers can vary this behavior, and the assumptions were unsafe for both accept() and AcceptEx(). 	r750569
----------------------------
Use a single event for the lifetime of the 'AcceptFilter none' variety sockets; it appears that resetting the accept event while another was waiting would break the pending connection, causing host socket resets. 	r750567
----------------------------
Accelerate mod_dumpio processing; * drop a frequent query for the mod configuration (pass as f->ctx) * drop one copy, at least for ASCII and ensure larger buffers are logged in their entirety.  Some clarity in output can be added by designating continuations vs first lines. 	r750126
----------------------------
fix mod_disk_cache to support EnableSendfile. 	r746541
----------------------------
Document the disabling of DefaultType and update terminology 	regarding
----------------------------
Remove DefaultType config.  I could have sworn I did this four years ago, but apparently that was just AddDefaultCharset. PR: 13986 	r740144
----------------------------
Correct logic with non-seq lbsets config'ed 	r739854
----------------------------
Correct logic with non-seq lbsets config'ed 	r739853
----------------------------
Correct logic with non-seq lbsets config'ed 	r739852
----------------------------
Disabled DefaultType directive and removed ap_default_type() from core.  We now exclude Content-Type from responses for which a media type has not been configured via mime.types, AddType, ForceType, or some other mechanism.  MMN major bump to NZ time. PR: 13986 	r739382
----------------------------
Introduce Win32 AcceptFilter handling. Divided into 3 classes, this implements the first two; * AcceptFilter 'data' - much as on Unix, accept will not complete * AcceptFilter 'connect' - just as in Apache 2.2, accept will not * AcceptFilter 'none' [not yet implemented] - will be the traditional 	r735093
----------------------------
tweak verbage describing new KeepAliveTimeout feature 	r733709
----------------------------
* docs/manual/mod/mod_ssl.xml: Flesh out SSLRenegBufferSize docs a little - thanks rpluem! 	r733695
----------------------------
Enhance KeepAliveTimeout to support a value in milliseconds. PR: 46275 	r733557
----------------------------
"Allow to trigger rotatelogs log file rotation from using HUP and INT signals to the rotatelogs process. This is helpful, when log activity is low, but you want SIGHUP triggers checking the rules given during startup, SIGINT forces rotate independently form those rules. When the signal triggers a rotation, the open file is closed immediately. The new file is opened when new log data arrives, or in case ""-f"" was given it is opened immediately. Based on my patch in BZ 44427. Note on Windows: The new functionality is undefined when SIGHUP or SIGINT are not available. Does the use case make sense on Windows? If so, which signals should we use? "	rotatelogs
----------------------------
Refactor rotatelogs to allow easier implementation of signal triggered log rotation. - move code into new functions checkRotate() and doRotate() - bundle config data and runtime data in two structs to allow easier passing to functions - Simplify bypass_io logic as a first use case for doRotate and rename flag to force_open to reflect the new logic 	r733476
----------------------------
* Add a stub documentation for SSLRenegBufferSize. 	r733467
----------------------------
* Correctly merge SSLRenegBufferSize directive. PR: 46508 Submitted by: <tlhackque yahoo.com> Reviewed by: rpluem 	r733465
----------------------------
prefork: Fix child process hang during graceful restart/stop in configurations with multiple listening sockets. PR: 42829 Submitted by: Joe Orton, with some tweaking and testing from me 	r732451
----------------------------
mod_session_crypto: Ensure that SessionCryptoDriver can only be set in the global scope. 	r731377
----------------------------
Fix mod_ext_filter to detect failure to start the external program, and add configuration option to abort or continue. PR 41120 	r731358
----------------------------
Silence compiler warning about unused variable cfg. dtrace_enabled is static, so no need for using the configuration at the moment. 	r731251
----------------------------
pcre-config --cflags actually emits include paths not cflags, so add it to correct variable.  Also, reuse APR_INCLUDES/APU_INCLUDES variables so as to save an extra invocation of config files. * configure.in: Add PCRE_CONFIG --cflags to INCLUDES; reuse AP{RU}_INCLUDES variables. 	r731058
----------------------------
* modules/proxy/config.m4: Remove spurious notices from configure. 	r730928
----------------------------
Make OpenSSL pkg-config usage consistent so that we don't run the early configure checks against a /usr installed OpenSSL and then link against a different pkg-config installed OpenSSL. (Hint: Try with Mac OS X with MacPorts's OpenSSL or FreeBSD w/OpenSSL ports.) * acinclude.m4 (APACHE_CHECK_SSL_TOOLKIT): Load in pkg-config variables first before doing any OpenSSL checks so that we don't clobber things later. 	r730926
----------------------------
Fix up SSL autoconf-fu so as not to emit bogus lines. * acinclude.m4 (APACHE_CHECK_SSL_TOOLKIT): Move CHECKING line to match; convert a warning to AC_MSG_WARN; remove a spurious SSL-C checking; redirect stderr from the pkgconfig so as not to spew on errors. 	r730914
----------------------------
Silence ulimit warnings on platforms/configs that don't support setting the soft limit to the hard limit (aka default Mac OS X). * support/config.m4: Redirect output to /dev/null. 	r730911
----------------------------
Remove LockFile in default config for all MPMs that do not support it (AP_MPM_WANT_SET_LOCKFILE undefined). 	r730875
----------------------------
"Clean up thread and process number defaults for simple mpm. - Before, simple wouldn't start without explicit config, because default numbers were 0 - log messages ""more"" and ""less"" were misleading "	r730873
----------------------------
Clean up fugly initialization of AcceptFilter mappings 	r730835
----------------------------
"Add a declaration check for CMSG_DATA to mod_proxy_fdpass. Also move '#error' after the includes, because it seems CMSG_DATA is commonly defined in sys/socket.h. The check also overwrites _apmod_error_fatal in case CMSG_DATA is not defined to allow building when configure was called with ""--enable-proxy"". Otherwise one would need to explicitly disable mod_proxy_fdpass. We might want to remove the #error completely, because the new feature test prevents the building of the module when the symbol is not defined. "	r730803
----------------------------
Use APACHE_HELP_STRING() for --enable-luajit in configure to allow automatic indentation in configure help output. 	r730686
----------------------------
CGI: return 504 (Gateway timeout) rather than 500 when a script times out before returning status line/headers. PR 42190 	r729586
----------------------------
"Make ""HeaderName"" and ""ReadmeName"" be stored in simple entries ""header"" and ""readme"" respectively. Side effect: In the case that multiple ""HeaderName""s or multiple ""ReadmeName""s exist in one directory section. Before this change, the first directive is effective. After this change, the last directive is effective. "	r729314
----------------------------
Change apl_get_lua_state to take a apl_vm_spec instead of a filename, and to load the bytecode if it is present, rather than the file, as this gets the inline config file blocks hooks working again. 	r728531
----------------------------
Fixup lua_config.c with prefix rename, and make mod_lua.c so it compiles again. 	r728509
----------------------------
Rename all files in mod_lua to have a lua_ prefix, as things like 'config.h' are way to generic and will often conflict with other include files. 	r728508
----------------------------
mod_ssl: Make the size of the per-dir-reneg request-body buffer configurable, by popular demand: * modules/ssl/ssl_private.h: Define DEFAULT_RENEG_BUFFER_SIZE. (SSLDirConfigRec): Add nRenegBufferSize field. * modules/ssl/ssl_engine_config.c (ssl_cmd_SSLRenegBufferSize): New function. (ssl_config_perdir_create, ssl_config_perdir_merge): Handle nRenegBufferSize. * modules/ssl/ssl_engine_io.c (ssl_io_buffer_fill): Take max buffer size as an argument rather than compile-time constant. * modules/ssl/ssl_engine_kernel.c (ssl_hook_Access): Pass nRenegBufferSize to ssl_io_buffer_fill. * modules/ssl/mod_ssl.c (ssl_config_cmds): Add SSLRenegBufferSize. PR: 39243 	r726109
----------------------------
Per suggestions by Roy T. Fielding: - remove Match directive, allow Require to be negated - rename <Match*> directives to <Require*> - rename <RequireNotAny> to <RequireNone> - disable <RequireNotAll> - rename MergeAuthz to AuthMerging and change its arguments to Off|And|Or Also convert text formatting macros into functions, and revise authz_core_check_section() so that check for non-negative directives follows De Morgan optimization. 	r726082
----------------------------
"* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Allow using socache provider config defaults by omitting the arguments, so e.g.  ""SSLSessionCache shmcb"" or even ""SSLSessionCache default"" should now DTRT. "	r726034
----------------------------
Add configuration of the Flush provider for mod_proxy_fdpass. 	r725946
----------------------------
* modules/ssl/ssl_private.h: Add a big fat warning about the SSLModConfigRec lifetime. 	r724802
----------------------------
* modules/ssl/ssl_engine_config.c (ssl_cmd_SSLSessionCache): Don't fix the socache instance for the lifetime of the process since it is allocated out of pconf. 	r724789
----------------------------
* include/ap_socache.h: Define AP_SOCACHE_DEFAULT_PROVIDER as a default provider name, to allow consumers to use a default provider if not configured otherwise. * modules/cache/mod_socache_shmcb.c (register_hooks): Register shmcb as the default provider. 	r724723
----------------------------
Reduce config overhead for use of socache interface by allowing default paths to be used if none are configured: * include/ap_socache.h (ap_socache_provider_t::create): Allow arg to be NULL to force use of defaults. (ap_socache_provider_t::init): Rename 'namespace' parameter to 'cname' and restrict to allow use in filesystem paths. * modules/cache/mod_socache_dbm.c (socache_dbm_create, socache_dbm_init), modules/cache/mod_socache_shmcb.c (socache_shmcb_create, socache_shmcb_init): Default to use of runtimedir-relative paths if no explicit path is configured. 	r724682
----------------------------
OK, instead of an igly hack, just use the normal build system impl to force balancer's config to happen post proxy 	r724367
----------------------------
Use cmd->temp_pool for temp allocations during configuration. Suggested by: Takashi Sato <takashi lans-tv.com> 	r724092
----------------------------
Also init mutex_path in hm_create_config. Suggested by: Ruediger Pluem 	r723679
----------------------------
Put the arguments to Header, RequestHeader, in alphabetic order. 	r723560
----------------------------
unixd_config/ap_unixd_config rename for mod_privileges 	r723078
----------------------------
unixd_config->ap_unixd_config renames for mod_suexec Submitted By: Dan Poirier Reviewed By: covener 	r722958
----------------------------
Don't do anything by defautl if we haven't been configured. 	r722398
----------------------------
When not configured, don't do anything by default. 	r722397
----------------------------
* Enable the use of autoconf >= 2.62 without causing APR / APR-UTIL options passed to the configure script issue warnings about unknown options. 	r721796
----------------------------
correct syntax of DirectoryIndex feature, CHANGES only 	r721678
----------------------------
* buildconf, configure.in: Don't attempt to configure the no-longer-bundled pcre. 	r721533
----------------------------
So close ;-)  Nicely done Jim Add the sed sources to mod_sed, no different than the sed_obj list from config.m4 (.h files just for easy reference). Apache.dsw is simply sorted entries, and picking to drop a new module under BuildBin (common) or BuildAll (test and nonstandard extensions).  Give us mod_sed :) Makefile.win is simply the invocation of the .mak file that gets exported, and the copy of that module (pdb debugging) binary. Can't update BaseAddr.ref except from windows, however, we have to build once and determine how many 64k pages this object is going to eat.  Turns out, it's only one. 	r720062
----------------------------
"change short-lived behavior of ""DirectoryIndex None"" based on feedback from wrowe: Doesn't search for anything: DirectoryIndex disabled Does search for literal ""disabled"": DirectoryIndex disabled foo. DirectoryIndex foo disabled DirectoryIndex disabled disabled Does search: DirectoryIndex disabled.html "	r713462
----------------------------
Add Simple MPM to example mpm config. Submited by: Ryan Phillips <ryan trolocsis.com> 	r712611
----------------------------
* Correctly set SSL_LIBS during openssl detection if pkgconfig is not available. PR: 46018 	r711993
----------------------------
Further unixd hacks to remove duplication between old-unixd and mod_unixd, and get it working with old MPMS[1] + mod_unixd.  It's still an uneasy split, as some modules (mod_cgid, suexec)[2] also use unixd. More thinking+hacking due. [1] Should be prefork/worker/event, but only worker is tested. [2] cgid is OK, suexec is untested. 	r711146
----------------------------
Move security check to post_config, ćos pre-config hooks don´t 	run
----------------------------
Fix handling of authz configurations, make default authz logic replicate 2.2.x authz logic and support existing configurations (including .htaccess files), and replace <Satisfy*>, Reject, and AuthzMergeRules directives with Match, <Match*>, and AuthzMerge directives. 	r709838
----------------------------
Add AuthType of None to support disabling authentication. Prevent crash when provider alias created to provider which is not yet registered. Migrate remaining functionality of mod_authn_default to mod_authn_core. 	r709553
----------------------------
Allow <Limit> and <LimitExcept> directives to nest, and constrain their use to conform with that of other access control and authorization directives. 	r709551
----------------------------
Remove SimpleUser configuration command, this will all be handled inside mod_unixd. 	r709060
----------------------------
* include/http_core.h (core_dir_config): Fix warning: overflow in implicit constant conversion, 	r708828
----------------------------
* server/mpm/simple/simple_io.c: s/simple_io_timeut_cb/simple_io_timeout_cb/g Noticed by: Ruediger Pluem 	r708707
----------------------------
Adding .fr translations for suexec logs server-wide sections new_features_2_4 urlmapping dso upgrading glossary 	r708014
----------------------------
Fix the io buffersize code. Have the docs match the code and allow more flexibility in settings. Also, document the ProxyPass/worker options of io and rec buffersize. 	r707357
----------------------------
leave a hint about some non-intuitive startup behavior for RewriteMap programs 	r707041
----------------------------
* Move ap_timeout_parameter_parse from mod_proxy.c to server/util.c and thus make it part of the public API. 	r707022
----------------------------
"*) mod_dir: Support ""DirectoryIndex None"" "	r706001
----------------------------
"Prior to authn/z refactoring in r368027, if authorization Require directives had no matching AuthType and associated authentication directives, requests would generally fall through in the check_user_id hook to mod_authn_default.c's authentication_no_user() handler, which returned DECLINED if ap_auth_type() was not set. The ap_process_request_internal() function in request.c would handle this case by logging an ""AuthType not set!"" error and returning HTTP_INTERNAL_SERVER_ERROR. The refactoring removes this error handling in request.c, so individual modules will need to test for a lack of authentication, as necessary.  Since some modules such as mod_authz_host.c support Require directives that do not need any authentication, the mod_authn_default.c handler no longer returns DECLINED if ap_auth_type() is not set.  (Also, mod_authn_default can be compiled out with --disable-authn-default, so it can't be relied upon to exist.) Since r->user may now be NULL, individual handlers must test for that case when necessary.  Otherwise, most Require directives in the absence of AuthType directives cause handlers to crash while performing strcmp() and friends on a NULL r->user value. NOTE: I can't test mod_authnz_ldap.c myself, so I'm not sure if it needs similar fixes.  On the one hand, a NULL r->user in the authz handlers always generates a log message.  However, it appears that authn_ldap_build_filter() will sometimes then be called, perform no action, which may result in a possibly uninitialized filtbuf buffer being passed to util_ldap_cache_getuserdn().  I don't know if that could cause problems in the LDAP cache code.  If someone familiar with LDAP authz could take a look, that would be much appreciated. "	r705361
----------------------------
Add example and comments when using ScriptAlias with a file. 	r705117
----------------------------
* Add the possibility to set the worker parameters connectiontimeout and ping in milliseconds and the parameter acquire in seconds. Add the new currently static function ap_timeout_parameter_parse that should become a general utility function once its API is hammered out. 	r705005
----------------------------
* Revert r703998. The call to apr_socket_timeout_set before apr_socket_connect already sets the socket to non-blocking mode because the timeout of the socket is -1 after creation. A further call to apr_socket_timeout_set (after the connect call does not do this, because the old and the new timeout are >=0). The further code expects the socket to be in non-blocking mode, otherwise we have regressions with ssl. This can be notified by running t/ssl/proxy on 2.2.x which runs much much slower with the patch applied. This does not happen on trunk because the socket is set back to non blocking by the core output filter (async write completion). 	r704753
----------------------------
* Make the connection timeout to backends work by temporarily setting the socket to non blocking mode. Submitted by: Matt Stevenson <mavricknzwork yahoo.com> Reviewed by: rpluem 	r703998
----------------------------
Reimplement ThreadStackSize to behave as on unix for any Windows 2003/2008 (XP/Vista) servers.  Virtual allocations will only consume pages once referenced, while the page alignment will vary by ThreadStackSize setting so that the maximum number of threads and minimum stack VM profile will be wasted. 	r699481
----------------------------
For timeouts, behave as before and not drop. From Adam Woodworth <mirkperl gmail.com> 	r697362
----------------------------
"Introduce Suspendable Requests to the Event MPM. Using this basic framework, you can return SUSPENDED from an HTTP Handler, and then register a callback that is invoked by the MPM at a later time. This initial version only supports _timers_ as callbacks, but in the future I would like to add things like wait for socket activity, on a socket specified by the handler. Once in a callback, It is then the responsibility of the callback fucntion to finish the HTTP Request handling, but this alows you to do cool things like a fully async proxy, COMET support, or even rate limiting. To prove I'm not insane, I've inlcuded an example module, mod_dialup. You can configure it like this: <Location ""/docs""> ModemStandard ""V.32"" </Location> And for static files inside that path, you will be rate limited to V.32 speeds, aka 9.6 kilobits/second. Does anyone besides RÃ¼diger read commit emails :-) ? I know there are likely huge problems with this, but I would like to see how far we can push the Event MPM, figure out what to do better, if there is anything, and then really dive into the 3.0 development before ApacheCon. * server/mpm/experimental/event/fdqueue.h: * server/mpm/experimental/event/fdqueue.c * server/mpm/experimental/event/event.c * server/config.c * modules/http/http_core.c * modules/http/http_request.c * include/ap_mmn.h: Bump MMN. * include/ap_mpm.h * include/httpd.h: * include/http_request.h * modules/test/config.m4: Add mod_dialup to build. * modules/test/mod_dialup.c: New rate limiting module, requires the Event MPM "	r697357
----------------------------
* Allow empty substitute patterns (to remove data from the stream), but disallow empty search patterns. 	r693727
----------------------------
Add in useful feature. %k which logs the keepalives value. PR: 45762 	r693120
----------------------------
Permit --with-apr=/path/to/apr alone, where the default path will be handled by replacing all /apr path segments with /apr-util (or /aprutil) to handle nearly any developer's path scheme.  One where both /aprutil and /apr-util path segments exist. So for example --with-apr=../apr-1.3 would find either ../apr-util-1.3 or ../aprutil-1.3 before looking for srclib/apr-util or ../apr-util. These refer to source trees.  httpd ./configure deserves a similar feature to use --with-apr= for an installed apr-util lib tree. 	rare
----------------------------
Allow determination of whether to use ';' as a sticky session path delim/sep (ala mod_jk) to be runtime (and balancer-wise) configurable. 	r687754
----------------------------
* Allow directive elements in default elements as default values can be the settings of other directives (e.g ProxyTimeout and Timeout). 	r686853
----------------------------
* Fix error in default setting for ProxyTimeout 	r686547
----------------------------
The error logging core only logs at very high level if it has no server_rec from which to read the appropriate LogLevel.  Ensure that everything gets logged when -DDEBUG is passed to the compiler. This makes the server very verbose, on the command line before stderr is debugging, but not under normal circumstances. 	redirected
----------------------------
I've long hated this technique, in which the hostname is prepended to the REQUEST_URI, and then munged on a second pass through. It's confusing, hard to explain to beginners, and completely unnecessary. Use RewriteCond backreferences instead. 	r685415
----------------------------
"This adds a more generic ""add www. to all hostnames"" ruleset. It also makes the existing rulesets in this section work both in the main configuration file and in .htaccess files, by making the leading slash optional - ie ^/? "	r685411
----------------------------
"* Introduce environment variable proxy-initial-not-pooled to avoid reusing pooled connections if the client connection is an initial connection. This avoids the ""proxy: error reading status line from remote server"" error caused by the race condition that the backend server closed the connection after the connection check on our side and before our data reached the backend. Yes, this downgrades performance, especially with HTTP/1.0 clients. Hence it is configurable and off by default. PR: 37770 "	r684351
----------------------------
* Add the possibility to set a separate connection timeout for backend workers. PR: 45445 Submitted by: rahul <rahul sun.com> Reviewed by: rpluem 	r684341
----------------------------
* Improve timeout documentation even more 	r684338
----------------------------
* Fix bogus explanation of timeout parameter 	r684337
----------------------------
"Admonish people not to put ""AllowOverride All"" in <Directory /> and expect it to do anything useful. "	r684326
----------------------------
Adds LogFormat example to the split-logfiles documentation to clarify what is meant about using %v 	r684308
----------------------------
* Include http_config.h to ensure that cmd_parms is defined, otherwise e.g. the perl test framework breaks. 	r673999
----------------------------
mod_auth_digest: Detect during startup when AuthDigestProvider is configured to use an incompatible provider via AuthnProviderAlias. PR 45196 	r672639
----------------------------
This macro for SSL detection was altogether wrong.  Refactoring to restore the ability to build and link against a specified --with-ssl[c]=path, including use of pkg-config variables which were ignored during the autoconf test phase. 	r669924
----------------------------
* add <compatibility> to DefaultType * minor fixes 	r669847
----------------------------
Add a example of  SeeRequestTail 	r668628
----------------------------
* clean the compatibility note of SeeRequestTail * use <code> 	r668620
----------------------------
core: Fix address-in-use startup failure on some platforms caused by attempting to set up an IPv4 listener which overlaps with an existing IPv6 listener. The failure occurred on the second pass of the open-logs hook in a configuration such as the following: Listen 8080 Listen 0.0.0.0:8081 Listen [::]:8081 During the first pass, the two port 8081 listen recs were adjacent and existing logic prevented binding to 0.0.0.0:8081. On the second pass, they were not adjacent and we then tried to bind to 0.0.0.0:8081, leading to failure on some platforms (seen on SLES 9 and Ubuntu 7.10, not seen on many other Unix-ish platforms). Leave a note about other unhandled configurations. 	r664535
----------------------------
apachectl configtest or httpd -t doesn't show a list of config files 	r661942
----------------------------
Prevent CSRF attacks against the balancer-manager (CVE-2007-6420) * modules/proxy/mod_proxy_balancer.c (balancer_init): New function. (balancer_handler): Place a nonce in the form output, and check that the submitted form data includes that nonce. (ap_proxy_balancer_register_hook): Register the new post_config hook. 	r661666
----------------------------
Determine registered authn/z providers directly in ap_setup_auth_internal(), which allows optional functions that just wrapped ap_list_provider_names() to be removed from authn/z modules. This change requires modules/aaa/mod_auth.h to be included into server/request.c, which necessitates a minor change to configure.in for Unix platforms. I'm unable to tell whether a similar change is necessary for Windows and NetWare builds or not.  Could developers with access to those platforms please test and make any needed configuration or build alterations?  Thanks! 	r659160